var qD=Object.defineProperty;var EE=i=>{throw TypeError(i)};var $D=(i,t,e)=>t in i?qD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Ct=(i,t,e)=>$D(i,typeof t!="symbol"?t+"":t,e),p0=(i,t,e)=>t.has(i)||EE("Cannot "+e);var g=(i,t,e)=>(p0(i,t,"read from private field"),e?e.call(i):t.get(i)),w=(i,t,e)=>t.has(i)?EE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),E=(i,t,e,n)=>(p0(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),M=(i,t,e)=>(p0(i,t,"access private method"),e);var Dn=(i,t,e,n)=>({set _(a){E(i,t,a,e)},get _(){return g(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}})();function Fx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var m0={exports:{}},Zd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function YD(){if(bE)return Zd;bE=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,r){var l=null;if(r!==void 0&&(l=""+r),a.key!==void 0&&(l=""+a.key),"key"in a){r={};for(var c in a)c!=="key"&&(r[c]=a[c])}else r=a;return a=r.ref,{$$typeof:i,type:n,key:l,ref:a!==void 0?a:null,props:r}}return Zd.Fragment=t,Zd.jsx=e,Zd.jsxs=e,Zd}var xE;function XD(){return xE||(xE=1,m0.exports=YD()),m0.exports}var z=XD(),g0={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function KD(){if(wE)return Lt;wE=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=_&&F[_]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function D(F,Z,st){this.props=F,this.context=Z,this.refs=x,this.updater=st||S}D.prototype.isReactComponent={},D.prototype.setState=function(F,Z){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Z,"setState")},D.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function N(){}N.prototype=D.prototype;function L(F,Z,st){this.props=F,this.context=Z,this.refs=x,this.updater=st||S}var U=L.prototype=new N;U.constructor=L,C(U,D.prototype),U.isPureReactComponent=!0;var P=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function Y(F,Z,st,et,yt,Bt){return st=Bt.ref,{$$typeof:i,type:F,key:Z,ref:st!==void 0?st:null,props:Bt}}function tt(F,Z){return Y(F.type,Z,void 0,void 0,void 0,F.props)}function j(F){return typeof F=="object"&&F!==null&&F.$$typeof===i}function at(F){var Z={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(st){return Z[st]})}var it=/\/+/g;function Tt(F,Z){return typeof F=="object"&&F!==null&&F.key!=null?at(""+F.key):Z.toString(36)}function Zt(){}function It(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Zt,Zt):(F.status="pending",F.then(function(Z){F.status==="pending"&&(F.status="fulfilled",F.value=Z)},function(Z){F.status==="pending"&&(F.status="rejected",F.reason=Z)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Dt(F,Z,st,et,yt){var Bt=typeof F;(Bt==="undefined"||Bt==="boolean")&&(F=null);var mt=!1;if(F===null)mt=!0;else switch(Bt){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(F.$$typeof){case i:case t:mt=!0;break;case y:return mt=F._init,Dt(mt(F._payload),Z,st,et,yt)}}if(mt)return yt=yt(F),mt=et===""?"."+Tt(F,0):et,P(yt)?(st="",mt!=null&&(st=mt.replace(it,"$&/")+"/"),Dt(yt,Z,st,"",function($i){return $i})):yt!=null&&(j(yt)&&(yt=tt(yt,st+(yt.key==null||F&&F.key===yt.key?"":(""+yt.key).replace(it,"$&/")+"/")+mt)),Z.push(yt)),1;mt=0;var Ht=et===""?".":et+":";if(P(F))for(var ee=0;ee<F.length;ee++)et=F[ee],Bt=Ht+Tt(et,ee),mt+=Dt(et,Z,st,Bt,yt);else if(ee=T(F),typeof ee=="function")for(F=ee.call(F),ee=0;!(et=F.next()).done;)et=et.value,Bt=Ht+Tt(et,ee++),mt+=Dt(et,Z,st,Bt,yt);else if(Bt==="object"){if(typeof F.then=="function")return Dt(It(F),Z,st,et,yt);throw Z=String(F),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return mt}function V(F,Z,st){if(F==null)return F;var et=[],yt=0;return Dt(F,et,"","",function(Bt){return Z.call(st,Bt,yt++)}),et}function K(F){if(F._status===-1){var Z=F._result;Z=Z(),Z.then(function(st){(F._status===0||F._status===-1)&&(F._status=1,F._result=st)},function(st){(F._status===0||F._status===-1)&&(F._status=2,F._result=st)}),F._status===-1&&(F._status=0,F._result=Z)}if(F._status===1)return F._result.default;throw F._result}var ht=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function Vt(){}return Lt.Children={map:V,forEach:function(F,Z,st){V(F,function(){Z.apply(this,arguments)},st)},count:function(F){var Z=0;return V(F,function(){Z++}),Z},toArray:function(F){return V(F,function(Z){return Z})||[]},only:function(F){if(!j(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Lt.Component=D,Lt.Fragment=e,Lt.Profiler=a,Lt.PureComponent=L,Lt.StrictMode=n,Lt.Suspense=p,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Lt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return I.H.useMemoCache(F)}},Lt.cache=function(F){return function(){return F.apply(null,arguments)}},Lt.cloneElement=function(F,Z,st){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var et=C({},F.props),yt=F.key,Bt=void 0;if(Z!=null)for(mt in Z.ref!==void 0&&(Bt=void 0),Z.key!==void 0&&(yt=""+Z.key),Z)!q.call(Z,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&Z.ref===void 0||(et[mt]=Z[mt]);var mt=arguments.length-2;if(mt===1)et.children=st;else if(1<mt){for(var Ht=Array(mt),ee=0;ee<mt;ee++)Ht[ee]=arguments[ee+2];et.children=Ht}return Y(F.type,yt,void 0,void 0,Bt,et)},Lt.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:r,_context:F},F},Lt.createElement=function(F,Z,st){var et,yt={},Bt=null;if(Z!=null)for(et in Z.key!==void 0&&(Bt=""+Z.key),Z)q.call(Z,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(yt[et]=Z[et]);var mt=arguments.length-2;if(mt===1)yt.children=st;else if(1<mt){for(var Ht=Array(mt),ee=0;ee<mt;ee++)Ht[ee]=arguments[ee+2];yt.children=Ht}if(F&&F.defaultProps)for(et in mt=F.defaultProps,mt)yt[et]===void 0&&(yt[et]=mt[et]);return Y(F,Bt,void 0,void 0,null,yt)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(F){return{$$typeof:c,render:F}},Lt.isValidElement=j,Lt.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:K}},Lt.memo=function(F,Z){return{$$typeof:m,type:F,compare:Z===void 0?null:Z}},Lt.startTransition=function(F){var Z=I.T,st={};I.T=st;try{var et=F(),yt=I.S;yt!==null&&yt(st,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(Vt,ht)}catch(Bt){ht(Bt)}finally{I.T=Z}},Lt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Lt.use=function(F){return I.H.use(F)},Lt.useActionState=function(F,Z,st){return I.H.useActionState(F,Z,st)},Lt.useCallback=function(F,Z){return I.H.useCallback(F,Z)},Lt.useContext=function(F){return I.H.useContext(F)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(F,Z){return I.H.useDeferredValue(F,Z)},Lt.useEffect=function(F,Z,st){var et=I.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return et.useEffect(F,Z)},Lt.useId=function(){return I.H.useId()},Lt.useImperativeHandle=function(F,Z,st){return I.H.useImperativeHandle(F,Z,st)},Lt.useInsertionEffect=function(F,Z){return I.H.useInsertionEffect(F,Z)},Lt.useLayoutEffect=function(F,Z){return I.H.useLayoutEffect(F,Z)},Lt.useMemo=function(F,Z){return I.H.useMemo(F,Z)},Lt.useOptimistic=function(F,Z){return I.H.useOptimistic(F,Z)},Lt.useReducer=function(F,Z,st){return I.H.useReducer(F,Z,st)},Lt.useRef=function(F){return I.H.useRef(F)},Lt.useState=function(F){return I.H.useState(F)},Lt.useSyncExternalStore=function(F,Z,st){return I.H.useSyncExternalStore(F,Z,st)},Lt.useTransition=function(){return I.H.useTransition()},Lt.version="19.1.0",Lt}var ME;function uA(){return ME||(ME=1,g0.exports=KD()),g0.exports}var fe=uA();const JD=Fx(fe);var y0={exports:{}},Qd={},v0={exports:{}},_0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function WD(){return RE||(RE=1,function(i){function t(V,K){var ht=V.length;V.push(K);t:for(;0<ht;){var Vt=ht-1>>>1,F=V[Vt];if(0<a(F,K))V[Vt]=K,V[ht]=F,ht=Vt;else break t}}function e(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var K=V[0],ht=V.pop();if(ht!==K){V[0]=ht;t:for(var Vt=0,F=V.length,Z=F>>>1;Vt<Z;){var st=2*(Vt+1)-1,et=V[st],yt=st+1,Bt=V[yt];if(0>a(et,ht))yt<F&&0>a(Bt,et)?(V[Vt]=Bt,V[yt]=ht,Vt=yt):(V[Vt]=et,V[st]=ht,Vt=st);else if(yt<F&&0>a(Bt,ht))V[Vt]=Bt,V[yt]=ht,Vt=yt;else break t}}return K}function a(V,K){var ht=V.sortIndex-K.sortIndex;return ht!==0?ht:V.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var l=Date,c=l.now();i.unstable_now=function(){return l.now()-c}}var p=[],m=[],y=1,_=null,T=3,S=!1,C=!1,x=!1,D=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function P(V){for(var K=e(m);K!==null;){if(K.callback===null)n(m);else if(K.startTime<=V)n(m),K.sortIndex=K.expirationTime,t(p,K);else break;K=e(m)}}function I(V){if(x=!1,P(V),!C)if(e(p)!==null)C=!0,q||(q=!0,Tt());else{var K=e(m);K!==null&&Dt(I,K.startTime-V)}}var q=!1,Y=-1,tt=5,j=-1;function at(){return D?!0:!(i.unstable_now()-j<tt)}function it(){if(D=!1,q){var V=i.unstable_now();j=V;var K=!0;try{t:{C=!1,x&&(x=!1,L(Y),Y=-1),S=!0;var ht=T;try{e:{for(P(V),_=e(p);_!==null&&!(_.expirationTime>V&&at());){var Vt=_.callback;if(typeof Vt=="function"){_.callback=null,T=_.priorityLevel;var F=Vt(_.expirationTime<=V);if(V=i.unstable_now(),typeof F=="function"){_.callback=F,P(V),K=!0;break e}_===e(p)&&n(p),P(V)}else n(p);_=e(p)}if(_!==null)K=!0;else{var Z=e(m);Z!==null&&Dt(I,Z.startTime-V),K=!1}}break t}finally{_=null,T=ht,S=!1}K=void 0}}finally{K?Tt():q=!1}}}var Tt;if(typeof U=="function")Tt=function(){U(it)};else if(typeof MessageChannel<"u"){var Zt=new MessageChannel,It=Zt.port2;Zt.port1.onmessage=it,Tt=function(){It.postMessage(null)}}else Tt=function(){N(it,0)};function Dt(V,K){Y=N(function(){V(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tt=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(V){switch(T){case 1:case 2:case 3:var K=3;break;default:K=T}var ht=T;T=K;try{return V()}finally{T=ht}},i.unstable_requestPaint=function(){D=!0},i.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ht=T;T=V;try{return K()}finally{T=ht}},i.unstable_scheduleCallback=function(V,K,ht){var Vt=i.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Vt+ht:Vt):ht=Vt,V){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ht+F,V={id:y++,callback:K,priorityLevel:V,startTime:ht,expirationTime:F,sortIndex:-1},ht>Vt?(V.sortIndex=ht,t(m,V),e(p)===null&&V===e(m)&&(x?(L(Y),Y=-1):x=!0,Dt(I,ht-Vt))):(V.sortIndex=F,t(p,V),C||S||(C=!0,q||(q=!0,Tt()))),V},i.unstable_shouldYield=at,i.unstable_wrapCallback=function(V){var K=T;return function(){var ht=T;T=K;try{return V.apply(this,arguments)}finally{T=ht}}}}(_0)),_0}var DE;function ZD(){return DE||(DE=1,v0.exports=WD()),v0.exports}var A0={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function QD(){if(NE)return vn;NE=1;var i=uA();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(p,m,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:m,implementation:y}}var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,vn.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return r(p,m,null,y)},vn.flushSync=function(p){var m=l.T,y=n.p;try{if(l.T=null,n.p=2,p)return p()}finally{l.T=m,n.p=y,n.d.f()}},vn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(p,m))},vn.prefetchDNS=function(p){typeof p=="string"&&n.d.D(p)},vn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,_=c(y,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?n.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:S}):y==="script"&&n.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},vn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=c(m.as,m.crossOrigin);n.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(p)},vn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,_=c(y,m.crossOrigin);n.d.L(p,y,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},vn.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=c(m.as,m.crossOrigin);n.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(p)},vn.requestFormReset=function(p){n.d.r(p)},vn.unstable_batchedUpdates=function(p,m){return p(m)},vn.useFormState=function(p,m,y){return l.H.useFormState(p,m,y)},vn.useFormStatus=function(){return l.H.useHostTransitionStatus()},vn.version="19.1.0",vn}var IE;function jD(){if(IE)return A0.exports;IE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),A0.exports=QD(),A0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function tN(){if(LE)return Qd;LE=1;var i=ZD(),t=uA(),e=jD();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function r(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function c(s){if(r(s)!==s)throw Error(n(188))}function p(s){var o=s.alternate;if(!o){if(o=r(s),o===null)throw Error(n(188));return o!==s?null:s}for(var u=s,h=o;;){var v=u.return;if(v===null)break;var A=v.alternate;if(A===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===A.child){for(A=v.child;A;){if(A===u)return c(v),s;if(A===h)return c(v),o;A=A.sibling}throw Error(n(188))}if(u.return!==h.return)u=v,h=A;else{for(var b=!1,R=v.child;R;){if(R===u){b=!0,u=v,h=A;break}if(R===h){b=!0,h=v,u=A;break}R=R.sibling}if(!b){for(R=A.child;R;){if(R===u){b=!0,u=A,h=v;break}if(R===h){b=!0,h=A,u=v;break}R=R.sibling}if(!b)throw Error(n(189))}}if(u.alternate!==h)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:o}function m(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=m(s),o!==null)return o;s=s.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),U=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),at=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function Tt(s){return s===null||typeof s!="object"?null:(s=it&&s[it]||s["@@iterator"],typeof s=="function"?s:null)}var Zt=Symbol.for("react.client.reference");function It(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Zt?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case D:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case q:return"SuspenseList";case j:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case U:return(s.displayName||"Context")+".Provider";case L:return(s._context.displayName||"Context")+".Consumer";case P:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Y:return o=s.displayName||null,o!==null?o:It(s.type)||"Memo";case tt:o=s._payload,s=s._init;try{return It(s(o))}catch{}}return null}var Dt=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},Vt=[],F=-1;function Z(s){return{current:s}}function st(s){0>F||(s.current=Vt[F],Vt[F]=null,F--)}function et(s,o){F++,Vt[F]=s.current,s.current=o}var yt=Z(null),Bt=Z(null),mt=Z(null),Ht=Z(null);function ee(s,o){switch(et(mt,o),et(Bt,s),et(yt,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?QC(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=QC(o),s=jC(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}st(yt),et(yt,s)}function $i(){st(yt),st(Bt),st(mt)}function jc(s){s.memoizedState!==null&&et(Ht,s);var o=yt.current,u=jC(o,s.type);o!==u&&(et(Bt,s),et(yt,u))}function op(s){Bt.current===s&&(st(yt),st(Bt)),Ht.current===s&&(st(Ht),Yd._currentValue=ht)}var ty=Object.prototype.hasOwnProperty,ey=i.unstable_scheduleCallback,ny=i.unstable_cancelCallback,S1=i.unstable_shouldYield,C1=i.unstable_requestPaint,fs=i.unstable_now,E1=i.unstable_getCurrentPriorityLevel,IA=i.unstable_ImmediatePriority,LA=i.unstable_UserBlockingPriority,rp=i.unstable_NormalPriority,b1=i.unstable_LowPriority,kA=i.unstable_IdlePriority,x1=i.log,w1=i.unstable_setDisableYieldValue,td=null,Qn=null;function za(s){if(typeof x1=="function"&&w1(s),Qn&&typeof Qn.setStrictMode=="function")try{Qn.setStrictMode(td,s)}catch{}}var jn=Math.clz32?Math.clz32:D1,M1=Math.log,R1=Math.LN2;function D1(s){return s>>>=0,s===0?32:31-(M1(s)/R1|0)|0}var lp=256,up=4194304;function tr(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function cp(s,o,u){var h=s.pendingLanes;if(h===0)return 0;var v=0,A=s.suspendedLanes,b=s.pingedLanes;s=s.warmLanes;var R=h&134217727;return R!==0?(h=R&~A,h!==0?v=tr(h):(b&=R,b!==0?v=tr(b):u||(u=R&~s,u!==0&&(v=tr(u))))):(R=h&~A,R!==0?v=tr(R):b!==0?v=tr(b):u||(u=h&~s,u!==0&&(v=tr(u)))),v===0?0:o!==0&&o!==v&&(o&A)===0&&(A=v&-v,u=o&-o,A>=u||A===32&&(u&4194048)!==0)?o:v}function ed(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function N1(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PA(){var s=lp;return lp<<=1,(lp&4194048)===0&&(lp=256),s}function FA(){var s=up;return up<<=1,(up&62914560)===0&&(up=4194304),s}function iy(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function nd(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function I1(s,o,u,h,v,A){var b=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var R=s.entanglements,k=s.expirationTimes,G=s.hiddenUpdates;for(u=b&~u;0<u;){var J=31-jn(u),Q=1<<J;R[J]=0,k[J]=-1;var $=G[J];if($!==null)for(G[J]=null,J=0;J<$.length;J++){var X=$[J];X!==null&&(X.lane&=-536870913)}u&=~Q}h!==0&&UA(s,h,0),A!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=A&~(b&~o))}function UA(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-jn(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|u&4194090}function OA(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var h=31-jn(u),v=1<<h;v&o|s[h]&o&&(s[h]|=o),u&=~v}}function sy(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ay(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function VA(){var s=K.p;return s!==0?s:(s=window.event,s===void 0?32:vE(s.type))}function L1(s,o){var u=K.p;try{return K.p=s,o()}finally{K.p=u}}var qa=Math.random().toString(36).slice(2),gn="__reactFiber$"+qa,Bn="__reactProps$"+qa,Ol="__reactContainer$"+qa,oy="__reactEvents$"+qa,k1="__reactListeners$"+qa,P1="__reactHandles$"+qa,BA="__reactResources$"+qa,id="__reactMarker$"+qa;function ry(s){delete s[gn],delete s[Bn],delete s[oy],delete s[k1],delete s[P1]}function Vl(s){var o=s[gn];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Ol]||u[gn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=iE(s);s!==null;){if(u=s[gn])return u;s=iE(s)}return o}s=u,u=s.parentNode}return null}function Bl(s){if(s=s[gn]||s[Ol]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function sd(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function Hl(s){var o=s[BA];return o||(o=s[BA]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function We(s){s[id]=!0}var HA=new Set,GA={};function er(s,o){Gl(s,o),Gl(s+"Capture",o)}function Gl(s,o){for(GA[s]=o,s=0;s<o.length;s++)HA.add(o[s])}var F1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zA={},qA={};function U1(s){return ty.call(qA,s)?!0:ty.call(zA,s)?!1:F1.test(s)?qA[s]=!0:(zA[s]=!0,!1)}function dp(s,o,u){if(U1(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function fp(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function zs(s,o,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+h)}}var ly,$A;function zl(s){if(ly===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ly=o&&o[1]||"",$A=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ly+s+$A}var uy=!1;function cy(s,o){if(!s||uy)return"";uy=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(X){var $=X}Reflect.construct(s,[],Q)}else{try{Q.call()}catch(X){$=X}s.call(Q.prototype)}}else{try{throw Error()}catch(X){$=X}(Q=s())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=h.DetermineComponentFrameRoot(),b=A[0],R=A[1];if(b&&R){var k=b.split(`
`),G=R.split(`
`);for(v=h=0;h<k.length&&!k[h].includes("DetermineComponentFrameRoot");)h++;for(;v<G.length&&!G[v].includes("DetermineComponentFrameRoot");)v++;if(h===k.length||v===G.length)for(h=k.length-1,v=G.length-1;1<=h&&0<=v&&k[h]!==G[v];)v--;for(;1<=h&&0<=v;h--,v--)if(k[h]!==G[v]){if(h!==1||v!==1)do if(h--,v--,0>v||k[h]!==G[v]){var J=`
`+k[h].replace(" at new "," at ");return s.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",s.displayName)),J}while(1<=h&&0<=v);break}}}finally{uy=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?zl(u):""}function O1(s){switch(s.tag){case 26:case 27:case 5:return zl(s.type);case 16:return zl("Lazy");case 13:return zl("Suspense");case 19:return zl("SuspenseList");case 0:case 15:return cy(s.type,!1);case 11:return cy(s.type.render,!1);case 1:return cy(s.type,!0);case 31:return zl("Activity");default:return""}}function YA(s){try{var o="";do o+=O1(s),s=s.return;while(s);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Ci(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function XA(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function V1(s){var o=XA(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,A=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(b){h=""+b,A.call(this,b)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(b){h=""+b},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function hp(s){s._valueTracker||(s._valueTracker=V1(s))}function KA(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return s&&(h=XA(s)?s.checked?"true":"false":s.value),s=h,s!==u?(o.setValue(s),!0):!1}function pp(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var B1=/[\n"\\]/g;function Ei(s){return s.replace(B1,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function dy(s,o,u,h,v,A,b,R){s.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.type=b:s.removeAttribute("type"),o!=null?b==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Ci(o)):s.value!==""+Ci(o)&&(s.value=""+Ci(o)):b!=="submit"&&b!=="reset"||s.removeAttribute("value"),o!=null?fy(s,b,Ci(o)):u!=null?fy(s,b,Ci(u)):h!=null&&s.removeAttribute("value"),v==null&&A!=null&&(s.defaultChecked=!!A),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Ci(R):s.removeAttribute("name")}function JA(s,o,u,h,v,A,b,R){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),o!=null||u!=null){if(!(A!=="submit"&&A!=="reset"||o!=null))return;u=u!=null?""+Ci(u):"",o=o!=null?""+Ci(o):u,R||o===s.value||(s.value=o),s.defaultValue=o}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=R?s.checked:!!h,s.defaultChecked=!!h,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.name=b)}function fy(s,o,u){o==="number"&&pp(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function ql(s,o,u,h){if(s=s.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<s.length;u++)v=o.hasOwnProperty("$"+s[u].value),s[u].selected!==v&&(s[u].selected=v),v&&h&&(s[u].defaultSelected=!0)}else{for(u=""+Ci(u),o=null,v=0;v<s.length;v++){if(s[v].value===u){s[v].selected=!0,h&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function WA(s,o,u){if(o!=null&&(o=""+Ci(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+Ci(u):""}function ZA(s,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(n(92));if(Dt(h)){if(1<h.length)throw Error(n(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=Ci(o),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h)}function $l(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var H1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function QA(s,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,u):typeof u!="number"||u===0||H1.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function jA(s,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var v in o)h=o[v],o.hasOwnProperty(v)&&u[v]!==h&&QA(s,v,h)}else for(var A in o)o.hasOwnProperty(A)&&QA(s,A,o[A])}function hy(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),z1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mp(s){return z1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var py=null;function my(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yl=null,Xl=null;function tT(s){var o=Bl(s);if(o&&(s=o.stateNode)){var u=s[Bn]||null;t:switch(s=o.stateNode,o.type){case"input":if(dy(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ei(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==s&&h.form===s.form){var v=h[Bn]||null;if(!v)throw Error(n(90));dy(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===s.form&&KA(h)}break t;case"textarea":WA(s,u.value,u.defaultValue);break t;case"select":o=u.value,o!=null&&ql(s,!!u.multiple,o,!1)}}}var gy=!1;function eT(s,o,u){if(gy)return s(o,u);gy=!0;try{var h=s(o);return h}finally{if(gy=!1,(Yl!==null||Xl!==null)&&(tm(),Yl&&(o=Yl,s=Xl,Xl=Yl=null,tT(o),s)))for(o=0;o<s.length;o++)tT(s[o])}}function ad(s,o){var u=s.stateNode;if(u===null)return null;var h=u[Bn]||null;if(h===null)return null;u=h[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yy=!1;if(qs)try{var od={};Object.defineProperty(od,"passive",{get:function(){yy=!0}}),window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{yy=!1}var $a=null,vy=null,gp=null;function nT(){if(gp)return gp;var s,o=vy,u=o.length,h,v="value"in $a?$a.value:$a.textContent,A=v.length;for(s=0;s<u&&o[s]===v[s];s++);var b=u-s;for(h=1;h<=b&&o[u-h]===v[A-h];h++);return gp=v.slice(s,1<h?1-h:void 0)}function yp(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function vp(){return!0}function iT(){return!1}function Hn(s){function o(u,h,v,A,b){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=A,this.target=b,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(u=s[R],this[R]=u?u(A):A[R]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?vp:iT,this.isPropagationStopped=iT,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=vp)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=vp)},persist:function(){},isPersistent:vp}),o}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_p=Hn(nr),rd=y({},nr,{view:0,detail:0}),q1=Hn(rd),_y,Ay,ld,Ap=y({},rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sy,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ld&&(ld&&s.type==="mousemove"?(_y=s.screenX-ld.screenX,Ay=s.screenY-ld.screenY):Ay=_y=0,ld=s),_y)},movementY:function(s){return"movementY"in s?s.movementY:Ay}}),sT=Hn(Ap),$1=y({},Ap,{dataTransfer:0}),Y1=Hn($1),X1=y({},rd,{relatedTarget:0}),Ty=Hn(X1),K1=y({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),J1=Hn(K1),W1=y({},nr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Z1=Hn(W1),Q1=y({},nr,{data:0}),aT=Hn(Q1),j1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nR(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=eR[s])?!!o[s]:!1}function Sy(){return nR}var iR=y({},rd,{key:function(s){if(s.key){var o=j1[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=yp(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?tR[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sy,charCode:function(s){return s.type==="keypress"?yp(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?yp(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sR=Hn(iR),aR=y({},Ap,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oT=Hn(aR),oR=y({},rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sy}),rR=Hn(oR),lR=y({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),uR=Hn(lR),cR=y({},Ap,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),dR=Hn(cR),fR=y({},nr,{newState:0,oldState:0}),hR=Hn(fR),pR=[9,13,27,32],Cy=qs&&"CompositionEvent"in window,ud=null;qs&&"documentMode"in document&&(ud=document.documentMode);var mR=qs&&"TextEvent"in window&&!ud,rT=qs&&(!Cy||ud&&8<ud&&11>=ud),lT=" ",uT=!1;function cT(s,o){switch(s){case"keyup":return pR.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dT(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Kl=!1;function gR(s,o){switch(s){case"compositionend":return dT(o);case"keypress":return o.which!==32?null:(uT=!0,lT);case"textInput":return s=o.data,s===lT&&uT?null:s;default:return null}}function yR(s,o){if(Kl)return s==="compositionend"||!Cy&&cT(s,o)?(s=nT(),gp=vy=$a=null,Kl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return rT&&o.locale!=="ko"?null:o.data;default:return null}}var vR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fT(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!vR[s.type]:o==="textarea"}function hT(s,o,u,h){Yl?Xl?Xl.push(h):Xl=[h]:Yl=h,o=om(o,"onChange"),0<o.length&&(u=new _p("onChange","change",null,u,h),s.push({event:u,listeners:o}))}var cd=null,dd=null;function _R(s){XC(s,0)}function Tp(s){var o=sd(s);if(KA(o))return s}function pT(s,o){if(s==="change")return o}var mT=!1;if(qs){var Ey;if(qs){var by="oninput"in document;if(!by){var gT=document.createElement("div");gT.setAttribute("oninput","return;"),by=typeof gT.oninput=="function"}Ey=by}else Ey=!1;mT=Ey&&(!document.documentMode||9<document.documentMode)}function yT(){cd&&(cd.detachEvent("onpropertychange",vT),dd=cd=null)}function vT(s){if(s.propertyName==="value"&&Tp(dd)){var o=[];hT(o,dd,s,my(s)),eT(_R,o)}}function AR(s,o,u){s==="focusin"?(yT(),cd=o,dd=u,cd.attachEvent("onpropertychange",vT)):s==="focusout"&&yT()}function TR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Tp(dd)}function SR(s,o){if(s==="click")return Tp(o)}function CR(s,o){if(s==="input"||s==="change")return Tp(o)}function ER(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var ti=typeof Object.is=="function"?Object.is:ER;function fd(s,o){if(ti(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!ty.call(o,v)||!ti(s[v],o[v]))return!1}return!0}function _T(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function AT(s,o){var u=_T(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=o&&h>=o)return{node:u,offset:o-s};s=h}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=_T(u)}}function TT(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?TT(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function ST(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=pp(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=pp(s.document)}return o}function xy(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var bR=qs&&"documentMode"in document&&11>=document.documentMode,Jl=null,wy=null,hd=null,My=!1;function CT(s,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;My||Jl==null||Jl!==pp(h)||(h=Jl,"selectionStart"in h&&xy(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),hd&&fd(hd,h)||(hd=h,h=om(wy,"onSelect"),0<h.length&&(o=new _p("onSelect","select",null,o,u),s.push({event:o,listeners:h}),o.target=Jl)))}function ir(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Wl={animationend:ir("Animation","AnimationEnd"),animationiteration:ir("Animation","AnimationIteration"),animationstart:ir("Animation","AnimationStart"),transitionrun:ir("Transition","TransitionRun"),transitionstart:ir("Transition","TransitionStart"),transitioncancel:ir("Transition","TransitionCancel"),transitionend:ir("Transition","TransitionEnd")},Ry={},ET={};qs&&(ET=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function sr(s){if(Ry[s])return Ry[s];if(!Wl[s])return s;var o=Wl[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in ET)return Ry[s]=o[u];return s}var bT=sr("animationend"),xT=sr("animationiteration"),wT=sr("animationstart"),xR=sr("transitionrun"),wR=sr("transitionstart"),MR=sr("transitioncancel"),MT=sr("transitionend"),RT=new Map,Dy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dy.push("scrollEnd");function Yi(s,o){RT.set(s,o),er(o,[s])}var DT=new WeakMap;function bi(s,o){if(typeof s=="object"&&s!==null){var u=DT.get(s);return u!==void 0?u:(o={value:s,source:o,stack:YA(o)},DT.set(s,o),o)}return{value:s,source:o,stack:YA(o)}}var xi=[],Zl=0,Ny=0;function Sp(){for(var s=Zl,o=Ny=Zl=0;o<s;){var u=xi[o];xi[o++]=null;var h=xi[o];xi[o++]=null;var v=xi[o];xi[o++]=null;var A=xi[o];if(xi[o++]=null,h!==null&&v!==null){var b=h.pending;b===null?v.next=v:(v.next=b.next,b.next=v),h.pending=v}A!==0&&NT(u,v,A)}}function Cp(s,o,u,h){xi[Zl++]=s,xi[Zl++]=o,xi[Zl++]=u,xi[Zl++]=h,Ny|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Iy(s,o,u,h){return Cp(s,o,u,h),Ep(s)}function Ql(s,o){return Cp(s,null,null,o),Ep(s)}function NT(s,o,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var v=!1,A=s.return;A!==null;)A.childLanes|=u,h=A.alternate,h!==null&&(h.childLanes|=u),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(v=!0)),s=A,A=A.return;return s.tag===3?(A=s.stateNode,v&&o!==null&&(v=31-jn(u),s=A.hiddenUpdates,h=s[v],h===null?s[v]=[o]:h.push(o),o.lane=u|536870912),A):null}function Ep(s){if(50<Od)throw Od=0,Ov=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var jl={};function RR(s,o,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(s,o,u,h){return new RR(s,o,u,h)}function Ly(s){return s=s.prototype,!(!s||!s.isReactComponent)}function $s(s,o){var u=s.alternate;return u===null?(u=ei(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function IT(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function bp(s,o,u,h,v,A){var b=0;if(h=s,typeof s=="function")Ly(s)&&(b=1);else if(typeof s=="string")b=ND(s,u,yt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case j:return s=ei(31,u,o,v),s.elementType=j,s.lanes=A,s;case C:return ar(u.children,v,A,o);case x:b=8,v|=24;break;case D:return s=ei(12,u,o,v|2),s.elementType=D,s.lanes=A,s;case I:return s=ei(13,u,o,v),s.elementType=I,s.lanes=A,s;case q:return s=ei(19,u,o,v),s.elementType=q,s.lanes=A,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:case U:b=10;break t;case L:b=9;break t;case P:b=11;break t;case Y:b=14;break t;case tt:b=16,h=null;break t}b=29,u=Error(n(130,s===null?"null":typeof s,"")),h=null}return o=ei(b,u,o,v),o.elementType=s,o.type=h,o.lanes=A,o}function ar(s,o,u,h){return s=ei(7,s,h,o),s.lanes=u,s}function ky(s,o,u){return s=ei(6,s,null,o),s.lanes=u,s}function Py(s,o,u){return o=ei(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var tu=[],eu=0,xp=null,wp=0,wi=[],Mi=0,or=null,Ys=1,Xs="";function rr(s,o){tu[eu++]=wp,tu[eu++]=xp,xp=s,wp=o}function LT(s,o,u){wi[Mi++]=Ys,wi[Mi++]=Xs,wi[Mi++]=or,or=s;var h=Ys;s=Xs;var v=32-jn(h)-1;h&=~(1<<v),u+=1;var A=32-jn(o)+v;if(30<A){var b=v-v%5;A=(h&(1<<b)-1).toString(32),h>>=b,v-=b,Ys=1<<32-jn(o)+v|u<<v|h,Xs=A+s}else Ys=1<<A|u<<v|h,Xs=s}function Fy(s){s.return!==null&&(rr(s,1),LT(s,1,0))}function Uy(s){for(;s===xp;)xp=tu[--eu],tu[eu]=null,wp=tu[--eu],tu[eu]=null;for(;s===or;)or=wi[--Mi],wi[Mi]=null,Xs=wi[--Mi],wi[Mi]=null,Ys=wi[--Mi],wi[Mi]=null}var Rn=null,Re=null,ne=!1,lr=null,hs=!1,Oy=Error(n(519));function ur(s){var o=Error(n(418,""));throw gd(bi(o,s)),Oy}function kT(s){var o=s.stateNode,u=s.type,h=s.memoizedProps;switch(o[gn]=s,o[Bn]=h,u){case"dialog":Yt("cancel",o),Yt("close",o);break;case"iframe":case"object":case"embed":Yt("load",o);break;case"video":case"audio":for(u=0;u<Bd.length;u++)Yt(Bd[u],o);break;case"source":Yt("error",o);break;case"img":case"image":case"link":Yt("error",o),Yt("load",o);break;case"details":Yt("toggle",o);break;case"input":Yt("invalid",o),JA(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),hp(o);break;case"select":Yt("invalid",o);break;case"textarea":Yt("invalid",o),ZA(o,h.value,h.defaultValue,h.children),hp(o)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||ZC(o.textContent,u)?(h.popover!=null&&(Yt("beforetoggle",o),Yt("toggle",o)),h.onScroll!=null&&Yt("scroll",o),h.onScrollEnd!=null&&Yt("scrollend",o),h.onClick!=null&&(o.onclick=rm),o=!0):o=!1,o||ur(s)}function PT(s){for(Rn=s.return;Rn;)switch(Rn.tag){case 5:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:Rn=Rn.return}}function pd(s){if(s!==Rn)return!1;if(!ne)return PT(s),ne=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||t0(s.type,s.memoizedProps)),u=!u),u&&Re&&ur(s),PT(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));t:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(o===0){Re=Ki(s.nextSibling);break t}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;s=s.nextSibling}Re=null}}else o===27?(o=Re,ro(s.type)?(s=s0,s0=null,Re=s):Re=o):Re=Rn?Ki(s.stateNode.nextSibling):null;return!0}function md(){Re=Rn=null,ne=!1}function FT(){var s=lr;return s!==null&&(qn===null?qn=s:qn.push.apply(qn,s),lr=null),s}function gd(s){lr===null?lr=[s]:lr.push(s)}var Vy=Z(null),cr=null,Ks=null;function Ya(s,o,u){et(Vy,o._currentValue),o._currentValue=u}function Js(s){s._currentValue=Vy.current,st(Vy)}function By(s,o,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===u)break;s=s.return}}function Hy(s,o,u,h){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var A=v.dependencies;if(A!==null){var b=v.child;A=A.firstContext;t:for(;A!==null;){var R=A;A=v;for(var k=0;k<o.length;k++)if(R.context===o[k]){A.lanes|=u,R=A.alternate,R!==null&&(R.lanes|=u),By(A.return,u,s),h||(b=null);break t}A=R.next}}else if(v.tag===18){if(b=v.return,b===null)throw Error(n(341));b.lanes|=u,A=b.alternate,A!==null&&(A.lanes|=u),By(b,u,s),b=null}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===s){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}}function yd(s,o,u,h){s=null;for(var v=o,A=!1;v!==null;){if(!A){if((v.flags&524288)!==0)A=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var b=v.alternate;if(b===null)throw Error(n(387));if(b=b.memoizedProps,b!==null){var R=v.type;ti(v.pendingProps.value,b.value)||(s!==null?s.push(R):s=[R])}}else if(v===Ht.current){if(b=v.alternate,b===null)throw Error(n(387));b.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Yd):s=[Yd])}v=v.return}s!==null&&Hy(o,s,u,h),o.flags|=262144}function Mp(s){for(s=s.firstContext;s!==null;){if(!ti(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function dr(s){cr=s,Ks=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function yn(s){return UT(cr,s)}function Rp(s,o){return cr===null&&dr(s),UT(s,o)}function UT(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Ks===null){if(s===null)throw Error(n(308));Ks=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ks=Ks.next=o;return u}var DR=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},NR=i.unstable_scheduleCallback,IR=i.unstable_NormalPriority,ze={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gy(){return{controller:new DR,data:new Map,refCount:0}}function vd(s){s.refCount--,s.refCount===0&&NR(IR,function(){s.controller.abort()})}var _d=null,zy=0,nu=0,iu=null;function LR(s,o){if(_d===null){var u=_d=[];zy=0,nu=$v(),iu={status:"pending",value:void 0,then:function(h){u.push(h)}}}return zy++,o.then(OT,OT),o}function OT(){if(--zy===0&&_d!==null){iu!==null&&(iu.status="fulfilled");var s=_d;_d=null,nu=0,iu=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function kR(s,o){var u=[],h={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(h.status="rejected",h.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),h}var VT=V.S;V.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&LR(s,o),VT!==null&&VT(s,o)};var fr=Z(null);function qy(){var s=fr.current;return s!==null?s:ye.pooledCache}function Dp(s,o){o===null?et(fr,fr.current):et(fr,o.pool)}function BT(){var s=qy();return s===null?null:{parent:ze._currentValue,pool:s}}var Ad=Error(n(460)),HT=Error(n(474)),Np=Error(n(542)),$y={then:function(){}};function GT(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ip(){}function zT(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Ip,Ip),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,$T(s),s;default:if(typeof o.status=="string")o.then(Ip,Ip);else{if(s=ye,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=h}},function(h){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,$T(s),s}throw Td=o,Ad}}var Td=null;function qT(){if(Td===null)throw Error(n(459));var s=Td;return Td=null,s}function $T(s){if(s===Ad||s===Np)throw Error(n(483))}var Xa=!1;function Yy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xy(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ka(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ja(s,o,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(se&2)!==0){var v=h.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),h.pending=o,o=Ep(s),NT(s,null,u),o}return Cp(s,h,o,u),Ep(s)}function Sd(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,OA(s,u)}}function Ky(s,o){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,A=null;if(u=u.firstBaseUpdate,u!==null){do{var b={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};A===null?v=A=b:A=A.next=b,u=u.next}while(u!==null);A===null?v=A=o:A=A.next=o}else v=A=o;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:A,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var Jy=!1;function Cd(){if(Jy){var s=iu;if(s!==null)throw s}}function Ed(s,o,u,h){Jy=!1;var v=s.updateQueue;Xa=!1;var A=v.firstBaseUpdate,b=v.lastBaseUpdate,R=v.shared.pending;if(R!==null){v.shared.pending=null;var k=R,G=k.next;k.next=null,b===null?A=G:b.next=G,b=k;var J=s.alternate;J!==null&&(J=J.updateQueue,R=J.lastBaseUpdate,R!==b&&(R===null?J.firstBaseUpdate=G:R.next=G,J.lastBaseUpdate=k))}if(A!==null){var Q=v.baseState;b=0,J=G=k=null,R=A;do{var $=R.lane&-536870913,X=$!==R.lane;if(X?(Jt&$)===$:(h&$)===$){$!==0&&$===nu&&(Jy=!0),J!==null&&(J=J.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var xt=s,St=R;$=o;var de=u;switch(St.tag){case 1:if(xt=St.payload,typeof xt=="function"){Q=xt.call(de,Q,$);break t}Q=xt;break t;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=St.payload,$=typeof xt=="function"?xt.call(de,Q,$):xt,$==null)break t;Q=y({},Q,$);break t;case 2:Xa=!0}}$=R.callback,$!==null&&(s.flags|=64,X&&(s.flags|=8192),X=v.callbacks,X===null?v.callbacks=[$]:X.push($))}else X={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},J===null?(G=J=X,k=Q):J=J.next=X,b|=$;if(R=R.next,R===null){if(R=v.shared.pending,R===null)break;X=R,R=X.next,X.next=null,v.lastBaseUpdate=X,v.shared.pending=null}}while(!0);J===null&&(k=Q),v.baseState=k,v.firstBaseUpdate=G,v.lastBaseUpdate=J,A===null&&(v.shared.lanes=0),io|=b,s.lanes=b,s.memoizedState=Q}}function YT(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function XT(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)YT(u[s],o)}var su=Z(null),Lp=Z(0);function KT(s,o){s=na,et(Lp,s),et(su,o),na=s|o.baseLanes}function Wy(){et(Lp,na),et(su,su.current)}function Zy(){na=Lp.current,st(su),st(Lp)}var Wa=0,Ot=null,ue=null,Ue=null,kp=!1,au=!1,hr=!1,Pp=0,bd=0,ou=null,PR=0;function Ie(){throw Error(n(321))}function Qy(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!ti(s[u],o[u]))return!1;return!0}function jy(s,o,u,h,v,A){return Wa=A,Ot=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,V.H=s===null||s.memoizedState===null?NS:IS,hr=!1,A=u(h,v),hr=!1,au&&(A=WT(o,u,h,v)),JT(s),A}function JT(s){V.H=Hp;var o=ue!==null&&ue.next!==null;if(Wa=0,Ue=ue=Ot=null,kp=!1,bd=0,ou=null,o)throw Error(n(300));s===null||Ze||(s=s.dependencies,s!==null&&Mp(s)&&(Ze=!0))}function WT(s,o,u,h){Ot=s;var v=0;do{if(au&&(ou=null),bd=0,au=!1,25<=v)throw Error(n(301));if(v+=1,Ue=ue=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}V.H=GR,A=o(u,h)}while(au);return A}function FR(){var s=V.H,o=s.useState()[0];return o=typeof o.then=="function"?xd(o):o,s=s.useState()[0],(ue!==null?ue.memoizedState:null)!==s&&(Ot.flags|=1024),o}function tv(){var s=Pp!==0;return Pp=0,s}function ev(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function nv(s){if(kp){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}kp=!1}Wa=0,Ue=ue=Ot=null,au=!1,bd=Pp=0,ou=null}function Gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ot.memoizedState=Ue=s:Ue=Ue.next=s,Ue}function Oe(){if(ue===null){var s=Ot.alternate;s=s!==null?s.memoizedState:null}else s=ue.next;var o=Ue===null?Ot.memoizedState:Ue.next;if(o!==null)Ue=o,ue=s;else{if(s===null)throw Ot.alternate===null?Error(n(467)):Error(n(310));ue=s,s={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},Ue===null?Ot.memoizedState=Ue=s:Ue=Ue.next=s}return Ue}function iv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xd(s){var o=bd;return bd+=1,ou===null&&(ou=[]),s=zT(ou,s,o),o=Ot,(Ue===null?o.memoizedState:Ue.next)===null&&(o=o.alternate,V.H=o===null||o.memoizedState===null?NS:IS),s}function Fp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return xd(s);if(s.$$typeof===U)return yn(s)}throw Error(n(438,String(s)))}function sv(s){var o=null,u=Ot.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=Ot.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=iv(),Ot.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),h=0;h<s;h++)u[h]=at;return o.index++,u}function Ws(s,o){return typeof o=="function"?o(s):o}function Up(s){var o=Oe();return av(o,ue,s)}function av(s,o,u){var h=s.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=u;var v=s.baseQueue,A=h.pending;if(A!==null){if(v!==null){var b=v.next;v.next=A.next,A.next=b}o.baseQueue=v=A,h.pending=null}if(A=s.baseState,v===null)s.memoizedState=A;else{o=v.next;var R=b=null,k=null,G=o,J=!1;do{var Q=G.lane&-536870913;if(Q!==G.lane?(Jt&Q)===Q:(Wa&Q)===Q){var $=G.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),Q===nu&&(J=!0);else if((Wa&$)===$){G=G.next,$===nu&&(J=!0);continue}else Q={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(R=k=Q,b=A):k=k.next=Q,Ot.lanes|=$,io|=$;Q=G.action,hr&&u(A,Q),A=G.hasEagerState?G.eagerState:u(A,Q)}else $={lane:Q,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(R=k=$,b=A):k=k.next=$,Ot.lanes|=Q,io|=Q;G=G.next}while(G!==null&&G!==o);if(k===null?b=A:k.next=R,!ti(A,s.memoizedState)&&(Ze=!0,J&&(u=iu,u!==null)))throw u;s.memoizedState=A,s.baseState=b,s.baseQueue=k,h.lastRenderedState=A}return v===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function ov(s){var o=Oe(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var h=u.dispatch,v=u.pending,A=o.memoizedState;if(v!==null){u.pending=null;var b=v=v.next;do A=s(A,b.action),b=b.next;while(b!==v);ti(A,o.memoizedState)||(Ze=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),u.lastRenderedState=A}return[A,h]}function ZT(s,o,u){var h=Ot,v=Oe(),A=ne;if(A){if(u===void 0)throw Error(n(407));u=u()}else u=o();var b=!ti((ue||v).memoizedState,u);b&&(v.memoizedState=u,Ze=!0),v=v.queue;var R=tS.bind(null,h,v,s);if(wd(2048,8,R,[s]),v.getSnapshot!==o||b||Ue!==null&&Ue.memoizedState.tag&1){if(h.flags|=2048,ru(9,Op(),jT.bind(null,h,v,u,o),null),ye===null)throw Error(n(349));A||(Wa&124)!==0||QT(h,o,u)}return u}function QT(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Ot.updateQueue,o===null?(o=iv(),Ot.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function jT(s,o,u,h){o.value=u,o.getSnapshot=h,eS(o)&&nS(s)}function tS(s,o,u){return u(function(){eS(o)&&nS(s)})}function eS(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!ti(s,u)}catch{return!0}}function nS(s){var o=Ql(s,2);o!==null&&oi(o,s,2)}function rv(s){var o=Gn();if(typeof s=="function"){var u=s;if(s=u(),hr){za(!0);try{u()}finally{za(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:s},o}function iS(s,o,u,h){return s.baseState=u,av(s,ue,typeof h=="function"?h:Ws)}function UR(s,o,u,h,v){if(Bp(s))throw Error(n(485));if(s=o.action,s!==null){var A={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){A.listeners.push(b)}};V.T!==null?u(!0):A.isTransition=!1,h(A),u=o.pending,u===null?(A.next=o.pending=A,sS(o,A)):(A.next=u.next,o.pending=u.next=A)}}function sS(s,o){var u=o.action,h=o.payload,v=s.state;if(o.isTransition){var A=V.T,b={};V.T=b;try{var R=u(v,h),k=V.S;k!==null&&k(b,R),aS(s,o,R)}catch(G){lv(s,o,G)}finally{V.T=A}}else try{A=u(v,h),aS(s,o,A)}catch(G){lv(s,o,G)}}function aS(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){oS(s,o,h)},function(h){return lv(s,o,h)}):oS(s,o,u)}function oS(s,o,u){o.status="fulfilled",o.value=u,rS(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,sS(s,u)))}function lv(s,o,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,rS(o),o=o.next;while(o!==h)}s.action=null}function rS(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function lS(s,o){return o}function uS(s,o){if(ne){var u=ye.formState;if(u!==null){t:{var h=Ot;if(ne){if(Re){e:{for(var v=Re,A=hs;v.nodeType!==8;){if(!A){v=null;break e}if(v=Ki(v.nextSibling),v===null){v=null;break e}}A=v.data,v=A==="F!"||A==="F"?v:null}if(v){Re=Ki(v.nextSibling),h=v.data==="F!";break t}}ur(h)}h=!1}h&&(o=u[0])}}return u=Gn(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lS,lastRenderedState:o},u.queue=h,u=MS.bind(null,Ot,h),h.dispatch=u,h=rv(!1),A=hv.bind(null,Ot,!1,h.queue),h=Gn(),v={state:o,dispatch:null,action:s,pending:null},h.queue=v,u=UR.bind(null,Ot,v,A,u),v.dispatch=u,h.memoizedState=s,[o,u,!1]}function cS(s){var o=Oe();return dS(o,ue,s)}function dS(s,o,u){if(o=av(s,o,lS)[0],s=Up(Ws)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=xd(o)}catch(b){throw b===Ad?Np:b}else h=o;o=Oe();var v=o.queue,A=v.dispatch;return u!==o.memoizedState&&(Ot.flags|=2048,ru(9,Op(),OR.bind(null,v,u),null)),[h,A,s]}function OR(s,o){s.action=o}function fS(s){var o=Oe(),u=ue;if(u!==null)return dS(o,u,s);Oe(),o=o.memoizedState,u=Oe();var h=u.queue.dispatch;return u.memoizedState=s,[o,h,!1]}function ru(s,o,u,h){return s={tag:s,create:u,deps:h,inst:o,next:null},o=Ot.updateQueue,o===null&&(o=iv(),Ot.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,o.lastEffect=s),s}function Op(){return{destroy:void 0,resource:void 0}}function hS(){return Oe().memoizedState}function Vp(s,o,u,h){var v=Gn();h=h===void 0?null:h,Ot.flags|=s,v.memoizedState=ru(1|o,Op(),u,h)}function wd(s,o,u,h){var v=Oe();h=h===void 0?null:h;var A=v.memoizedState.inst;ue!==null&&h!==null&&Qy(h,ue.memoizedState.deps)?v.memoizedState=ru(o,A,u,h):(Ot.flags|=s,v.memoizedState=ru(1|o,A,u,h))}function pS(s,o){Vp(8390656,8,s,o)}function mS(s,o){wd(2048,8,s,o)}function gS(s,o){return wd(4,2,s,o)}function yS(s,o){return wd(4,4,s,o)}function vS(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function _S(s,o,u){u=u!=null?u.concat([s]):null,wd(4,4,vS.bind(null,o,s),u)}function uv(){}function AS(s,o){var u=Oe();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&Qy(o,h[1])?h[0]:(u.memoizedState=[s,o],s)}function TS(s,o){var u=Oe();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&Qy(o,h[1]))return h[0];if(h=s(),hr){za(!0);try{s()}finally{za(!1)}}return u.memoizedState=[h,o],h}function cv(s,o,u){return u===void 0||(Wa&1073741824)!==0?s.memoizedState=o:(s.memoizedState=u,s=EC(),Ot.lanes|=s,io|=s,u)}function SS(s,o,u,h){return ti(u,o)?u:su.current!==null?(s=cv(s,u,h),ti(s,o)||(Ze=!0),s):(Wa&42)===0?(Ze=!0,s.memoizedState=u):(s=EC(),Ot.lanes|=s,io|=s,o)}function CS(s,o,u,h,v){var A=K.p;K.p=A!==0&&8>A?A:8;var b=V.T,R={};V.T=R,hv(s,!1,o,u);try{var k=v(),G=V.S;if(G!==null&&G(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var J=kR(k,h);Md(s,o,J,ai(s))}else Md(s,o,h,ai(s))}catch(Q){Md(s,o,{then:function(){},status:"rejected",reason:Q},ai())}finally{K.p=A,V.T=b}}function VR(){}function dv(s,o,u,h){if(s.tag!==5)throw Error(n(476));var v=ES(s).queue;CS(s,v,o,ht,u===null?VR:function(){return bS(s),u(h)})}function ES(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:ht},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function bS(s){var o=ES(s).next.queue;Md(s,o,{},ai())}function fv(){return yn(Yd)}function xS(){return Oe().memoizedState}function wS(){return Oe().memoizedState}function BR(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=ai();s=Ka(u);var h=Ja(o,s,u);h!==null&&(oi(h,o,u),Sd(h,o,u)),o={cache:Gy()},s.payload=o;return}o=o.return}}function HR(s,o,u){var h=ai();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Bp(s)?RS(o,u):(u=Iy(s,o,u,h),u!==null&&(oi(u,s,h),DS(u,o,h)))}function MS(s,o,u){var h=ai();Md(s,o,u,h)}function Md(s,o,u,h){var v={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Bp(s))RS(o,v);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var b=o.lastRenderedState,R=A(b,u);if(v.hasEagerState=!0,v.eagerState=R,ti(R,b))return Cp(s,o,v,0),ye===null&&Sp(),!1}catch{}finally{}if(u=Iy(s,o,v,h),u!==null)return oi(u,s,h),DS(u,o,h),!0}return!1}function hv(s,o,u,h){if(h={lane:2,revertLane:$v(),action:h,hasEagerState:!1,eagerState:null,next:null},Bp(s)){if(o)throw Error(n(479))}else o=Iy(s,u,h,2),o!==null&&oi(o,s,2)}function Bp(s){var o=s.alternate;return s===Ot||o!==null&&o===Ot}function RS(s,o){au=kp=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function DS(s,o,u){if((u&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,OA(s,u)}}var Hp={readContext:yn,use:Fp,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie},NS={readContext:yn,use:Fp,useCallback:function(s,o){return Gn().memoizedState=[s,o===void 0?null:o],s},useContext:yn,useEffect:pS,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,Vp(4194308,4,vS.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Vp(4194308,4,s,o)},useInsertionEffect:function(s,o){Vp(4,2,s,o)},useMemo:function(s,o){var u=Gn();o=o===void 0?null:o;var h=s();if(hr){za(!0);try{s()}finally{za(!1)}}return u.memoizedState=[h,o],h},useReducer:function(s,o,u){var h=Gn();if(u!==void 0){var v=u(o);if(hr){za(!0);try{u(o)}finally{za(!1)}}}else v=o;return h.memoizedState=h.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},h.queue=s,s=s.dispatch=HR.bind(null,Ot,s),[h.memoizedState,s]},useRef:function(s){var o=Gn();return s={current:s},o.memoizedState=s},useState:function(s){s=rv(s);var o=s.queue,u=MS.bind(null,Ot,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:uv,useDeferredValue:function(s,o){var u=Gn();return cv(u,s,o)},useTransition:function(){var s=rv(!1);return s=CS.bind(null,Ot,s.queue,!0,!1),Gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var h=Ot,v=Gn();if(ne){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),ye===null)throw Error(n(349));(Jt&124)!==0||QT(h,o,u)}v.memoizedState=u;var A={value:u,getSnapshot:o};return v.queue=A,pS(tS.bind(null,h,A,s),[s]),h.flags|=2048,ru(9,Op(),jT.bind(null,h,A,u,o),null),u},useId:function(){var s=Gn(),o=ye.identifierPrefix;if(ne){var u=Xs,h=Ys;u=(h&~(1<<32-jn(h)-1)).toString(32)+u,o=""+o+"R"+u,u=Pp++,0<u&&(o+="H"+u.toString(32)),o+=""}else u=PR++,o=""+o+"r"+u.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:fv,useFormState:uS,useActionState:uS,useOptimistic:function(s){var o=Gn();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=hv.bind(null,Ot,!0,u),u.dispatch=o,[s,o]},useMemoCache:sv,useCacheRefresh:function(){return Gn().memoizedState=BR.bind(null,Ot)}},IS={readContext:yn,use:Fp,useCallback:AS,useContext:yn,useEffect:mS,useImperativeHandle:_S,useInsertionEffect:gS,useLayoutEffect:yS,useMemo:TS,useReducer:Up,useRef:hS,useState:function(){return Up(Ws)},useDebugValue:uv,useDeferredValue:function(s,o){var u=Oe();return SS(u,ue.memoizedState,s,o)},useTransition:function(){var s=Up(Ws)[0],o=Oe().memoizedState;return[typeof s=="boolean"?s:xd(s),o]},useSyncExternalStore:ZT,useId:xS,useHostTransitionStatus:fv,useFormState:cS,useActionState:cS,useOptimistic:function(s,o){var u=Oe();return iS(u,ue,s,o)},useMemoCache:sv,useCacheRefresh:wS},GR={readContext:yn,use:Fp,useCallback:AS,useContext:yn,useEffect:mS,useImperativeHandle:_S,useInsertionEffect:gS,useLayoutEffect:yS,useMemo:TS,useReducer:ov,useRef:hS,useState:function(){return ov(Ws)},useDebugValue:uv,useDeferredValue:function(s,o){var u=Oe();return ue===null?cv(u,s,o):SS(u,ue.memoizedState,s,o)},useTransition:function(){var s=ov(Ws)[0],o=Oe().memoizedState;return[typeof s=="boolean"?s:xd(s),o]},useSyncExternalStore:ZT,useId:xS,useHostTransitionStatus:fv,useFormState:fS,useActionState:fS,useOptimistic:function(s,o){var u=Oe();return ue!==null?iS(u,ue,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:sv,useCacheRefresh:wS},lu=null,Rd=0;function Gp(s){var o=Rd;return Rd+=1,lu===null&&(lu=[]),zT(lu,s,o)}function Dd(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function zp(s,o){throw o.$$typeof===_?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function LS(s){var o=s._init;return o(s._payload)}function kS(s){function o(B,O){if(s){var H=B.deletions;H===null?(B.deletions=[O],B.flags|=16):H.push(O)}}function u(B,O){if(!s)return null;for(;O!==null;)o(B,O),O=O.sibling;return null}function h(B){for(var O=new Map;B!==null;)B.key!==null?O.set(B.key,B):O.set(B.index,B),B=B.sibling;return O}function v(B,O){return B=$s(B,O),B.index=0,B.sibling=null,B}function A(B,O,H){return B.index=H,s?(H=B.alternate,H!==null?(H=H.index,H<O?(B.flags|=67108866,O):H):(B.flags|=67108866,O)):(B.flags|=1048576,O)}function b(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function R(B,O,H,W){return O===null||O.tag!==6?(O=ky(H,B.mode,W),O.return=B,O):(O=v(O,H),O.return=B,O)}function k(B,O,H,W){var dt=H.type;return dt===C?J(B,O,H.props.children,W,H.key):O!==null&&(O.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===tt&&LS(dt)===O.type)?(O=v(O,H.props),Dd(O,H),O.return=B,O):(O=bp(H.type,H.key,H.props,null,B.mode,W),Dd(O,H),O.return=B,O)}function G(B,O,H,W){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=Py(H,B.mode,W),O.return=B,O):(O=v(O,H.children||[]),O.return=B,O)}function J(B,O,H,W,dt){return O===null||O.tag!==7?(O=ar(H,B.mode,W,dt),O.return=B,O):(O=v(O,H),O.return=B,O)}function Q(B,O,H){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ky(""+O,B.mode,H),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case T:return H=bp(O.type,O.key,O.props,null,B.mode,H),Dd(H,O),H.return=B,H;case S:return O=Py(O,B.mode,H),O.return=B,O;case tt:var W=O._init;return O=W(O._payload),Q(B,O,H)}if(Dt(O)||Tt(O))return O=ar(O,B.mode,H,null),O.return=B,O;if(typeof O.then=="function")return Q(B,Gp(O),H);if(O.$$typeof===U)return Q(B,Rp(B,O),H);zp(B,O)}return null}function $(B,O,H,W){var dt=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return dt!==null?null:R(B,O,""+H,W);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return H.key===dt?k(B,O,H,W):null;case S:return H.key===dt?G(B,O,H,W):null;case tt:return dt=H._init,H=dt(H._payload),$(B,O,H,W)}if(Dt(H)||Tt(H))return dt!==null?null:J(B,O,H,W,null);if(typeof H.then=="function")return $(B,O,Gp(H),W);if(H.$$typeof===U)return $(B,O,Rp(B,H),W);zp(B,H)}return null}function X(B,O,H,W,dt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return B=B.get(H)||null,R(O,B,""+W,dt);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case T:return B=B.get(W.key===null?H:W.key)||null,k(O,B,W,dt);case S:return B=B.get(W.key===null?H:W.key)||null,G(O,B,W,dt);case tt:var Gt=W._init;return W=Gt(W._payload),X(B,O,H,W,dt)}if(Dt(W)||Tt(W))return B=B.get(H)||null,J(O,B,W,dt,null);if(typeof W.then=="function")return X(B,O,H,Gp(W),dt);if(W.$$typeof===U)return X(B,O,H,Rp(O,W),dt);zp(O,W)}return null}function xt(B,O,H,W){for(var dt=null,Gt=null,At=O,bt=O=0,je=null;At!==null&&bt<H.length;bt++){At.index>bt?(je=At,At=null):je=At.sibling;var Qt=$(B,At,H[bt],W);if(Qt===null){At===null&&(At=je);break}s&&At&&Qt.alternate===null&&o(B,At),O=A(Qt,O,bt),Gt===null?dt=Qt:Gt.sibling=Qt,Gt=Qt,At=je}if(bt===H.length)return u(B,At),ne&&rr(B,bt),dt;if(At===null){for(;bt<H.length;bt++)At=Q(B,H[bt],W),At!==null&&(O=A(At,O,bt),Gt===null?dt=At:Gt.sibling=At,Gt=At);return ne&&rr(B,bt),dt}for(At=h(At);bt<H.length;bt++)je=X(At,B,bt,H[bt],W),je!==null&&(s&&je.alternate!==null&&At.delete(je.key===null?bt:je.key),O=A(je,O,bt),Gt===null?dt=je:Gt.sibling=je,Gt=je);return s&&At.forEach(function(ho){return o(B,ho)}),ne&&rr(B,bt),dt}function St(B,O,H,W){if(H==null)throw Error(n(151));for(var dt=null,Gt=null,At=O,bt=O=0,je=null,Qt=H.next();At!==null&&!Qt.done;bt++,Qt=H.next()){At.index>bt?(je=At,At=null):je=At.sibling;var ho=$(B,At,Qt.value,W);if(ho===null){At===null&&(At=je);break}s&&At&&ho.alternate===null&&o(B,At),O=A(ho,O,bt),Gt===null?dt=ho:Gt.sibling=ho,Gt=ho,At=je}if(Qt.done)return u(B,At),ne&&rr(B,bt),dt;if(At===null){for(;!Qt.done;bt++,Qt=H.next())Qt=Q(B,Qt.value,W),Qt!==null&&(O=A(Qt,O,bt),Gt===null?dt=Qt:Gt.sibling=Qt,Gt=Qt);return ne&&rr(B,bt),dt}for(At=h(At);!Qt.done;bt++,Qt=H.next())Qt=X(At,B,bt,Qt.value,W),Qt!==null&&(s&&Qt.alternate!==null&&At.delete(Qt.key===null?bt:Qt.key),O=A(Qt,O,bt),Gt===null?dt=Qt:Gt.sibling=Qt,Gt=Qt);return s&&At.forEach(function(zD){return o(B,zD)}),ne&&rr(B,bt),dt}function de(B,O,H,W){if(typeof H=="object"&&H!==null&&H.type===C&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case T:t:{for(var dt=H.key;O!==null;){if(O.key===dt){if(dt=H.type,dt===C){if(O.tag===7){u(B,O.sibling),W=v(O,H.props.children),W.return=B,B=W;break t}}else if(O.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===tt&&LS(dt)===O.type){u(B,O.sibling),W=v(O,H.props),Dd(W,H),W.return=B,B=W;break t}u(B,O);break}else o(B,O);O=O.sibling}H.type===C?(W=ar(H.props.children,B.mode,W,H.key),W.return=B,B=W):(W=bp(H.type,H.key,H.props,null,B.mode,W),Dd(W,H),W.return=B,B=W)}return b(B);case S:t:{for(dt=H.key;O!==null;){if(O.key===dt)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){u(B,O.sibling),W=v(O,H.children||[]),W.return=B,B=W;break t}else{u(B,O);break}else o(B,O);O=O.sibling}W=Py(H,B.mode,W),W.return=B,B=W}return b(B);case tt:return dt=H._init,H=dt(H._payload),de(B,O,H,W)}if(Dt(H))return xt(B,O,H,W);if(Tt(H)){if(dt=Tt(H),typeof dt!="function")throw Error(n(150));return H=dt.call(H),St(B,O,H,W)}if(typeof H.then=="function")return de(B,O,Gp(H),W);if(H.$$typeof===U)return de(B,O,Rp(B,H),W);zp(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,O!==null&&O.tag===6?(u(B,O.sibling),W=v(O,H),W.return=B,B=W):(u(B,O),W=ky(H,B.mode,W),W.return=B,B=W),b(B)):u(B,O)}return function(B,O,H,W){try{Rd=0;var dt=de(B,O,H,W);return lu=null,dt}catch(At){if(At===Ad||At===Np)throw At;var Gt=ei(29,At,null,B.mode);return Gt.lanes=W,Gt.return=B,Gt}finally{}}}var uu=kS(!0),PS=kS(!1),Ri=Z(null),ps=null;function Za(s){var o=s.alternate;et(qe,qe.current&1),et(Ri,s),ps===null&&(o===null||su.current!==null||o.memoizedState!==null)&&(ps=s)}function FS(s){if(s.tag===22){if(et(qe,qe.current),et(Ri,s),ps===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(ps=s)}}else Qa()}function Qa(){et(qe,qe.current),et(Ri,Ri.current)}function Zs(s){st(Ri),ps===s&&(ps=null),st(qe)}var qe=Z(0);function qp(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||i0(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function pv(s,o,u,h){o=s.memoizedState,u=u(h,o),u=u==null?o:y({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var mv={enqueueSetState:function(s,o,u){s=s._reactInternals;var h=ai(),v=Ka(h);v.payload=o,u!=null&&(v.callback=u),o=Ja(s,v,h),o!==null&&(oi(o,s,h),Sd(o,s,h))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var h=ai(),v=Ka(h);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Ja(s,v,h),o!==null&&(oi(o,s,h),Sd(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=ai(),h=Ka(u);h.tag=2,o!=null&&(h.callback=o),o=Ja(s,h,u),o!==null&&(oi(o,s,u),Sd(o,s,u))}};function US(s,o,u,h,v,A,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,A,b):o.prototype&&o.prototype.isPureReactComponent?!fd(u,h)||!fd(v,A):!0}function OS(s,o,u,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==s&&mv.enqueueReplaceState(o,o.state,null)}function pr(s,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(s=s.defaultProps){u===o&&(u=y({},u));for(var v in s)u[v]===void 0&&(u[v]=s[v])}return u}var $p=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function VS(s){$p(s)}function BS(s){console.error(s)}function HS(s){$p(s)}function Yp(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function GS(s,o,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function gv(s,o,u){return u=Ka(u),u.tag=3,u.payload={element:null},u.callback=function(){Yp(s,o)},u}function zS(s){return s=Ka(s),s.tag=3,s}function qS(s,o,u,h){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var A=h.value;s.payload=function(){return v(A)},s.callback=function(){GS(o,u,h)}}var b=u.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){GS(o,u,h),typeof v!="function"&&(so===null?so=new Set([this]):so.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function zR(s,o,u,h,v){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&yd(o,u,v,!0),u=Ri.current,u!==null){switch(u.tag){case 13:return ps===null?Bv():u.alternate===null&&De===0&&(De=3),u.flags&=-257,u.flags|=65536,u.lanes=v,h===$y?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),Gv(s,h,v)),!1;case 22:return u.flags|=65536,h===$y?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),Gv(s,h,v)),!1}throw Error(n(435,u.tag))}return Gv(s,h,v),Bv(),!1}if(ne)return o=Ri.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,h!==Oy&&(s=Error(n(422),{cause:h}),gd(bi(s,u)))):(h!==Oy&&(o=Error(n(423),{cause:h}),gd(bi(o,u))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,h=bi(h,u),v=gv(s.stateNode,h,v),Ky(s,v),De!==4&&(De=2)),!1;var A=Error(n(520),{cause:h});if(A=bi(A,u),Ud===null?Ud=[A]:Ud.push(A),De!==4&&(De=2),o===null)return!0;h=bi(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=v&-v,u.lanes|=s,s=gv(u.stateNode,h,s),Ky(u,s),!1;case 1:if(o=u.type,A=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(so===null||!so.has(A))))return u.flags|=65536,v&=-v,u.lanes|=v,v=zS(v),qS(v,s,u,h),Ky(u,v),!1}u=u.return}while(u!==null);return!1}var $S=Error(n(461)),Ze=!1;function rn(s,o,u,h){o.child=s===null?PS(o,null,u,h):uu(o,s.child,u,h)}function YS(s,o,u,h,v){u=u.render;var A=o.ref;if("ref"in h){var b={};for(var R in h)R!=="ref"&&(b[R]=h[R])}else b=h;return dr(o),h=jy(s,o,u,b,A,v),R=tv(),s!==null&&!Ze?(ev(s,o,v),Qs(s,o,v)):(ne&&R&&Fy(o),o.flags|=1,rn(s,o,h,v),o.child)}function XS(s,o,u,h,v){if(s===null){var A=u.type;return typeof A=="function"&&!Ly(A)&&A.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=A,KS(s,o,A,h,v)):(s=bp(u.type,null,h,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(A=s.child,!Ev(s,v)){var b=A.memoizedProps;if(u=u.compare,u=u!==null?u:fd,u(b,h)&&s.ref===o.ref)return Qs(s,o,v)}return o.flags|=1,s=$s(A,h),s.ref=o.ref,s.return=o,o.child=s}function KS(s,o,u,h,v){if(s!==null){var A=s.memoizedProps;if(fd(A,h)&&s.ref===o.ref)if(Ze=!1,o.pendingProps=h=A,Ev(s,v))(s.flags&131072)!==0&&(Ze=!0);else return o.lanes=s.lanes,Qs(s,o,v)}return yv(s,o,u,h,v)}function JS(s,o,u){var h=o.pendingProps,v=h.children,A=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=A!==null?A.baseLanes|u:u,s!==null){for(v=o.child=s.child,A=0;v!==null;)A=A|v.lanes|v.childLanes,v=v.sibling;o.childLanes=A&~h}else o.childLanes=0,o.child=null;return WS(s,o,h,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Dp(o,A!==null?A.cachePool:null),A!==null?KT(o,A):Wy(),FS(o);else return o.lanes=o.childLanes=536870912,WS(s,o,A!==null?A.baseLanes|u:u,u)}else A!==null?(Dp(o,A.cachePool),KT(o,A),Qa(),o.memoizedState=null):(s!==null&&Dp(o,null),Wy(),Qa());return rn(s,o,v,u),o.child}function WS(s,o,u,h){var v=qy();return v=v===null?null:{parent:ze._currentValue,pool:v},o.memoizedState={baseLanes:u,cachePool:v},s!==null&&Dp(o,null),Wy(),FS(o),s!==null&&yd(s,o,h,!0),null}function Xp(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function yv(s,o,u,h,v){return dr(o),u=jy(s,o,u,h,void 0,v),h=tv(),s!==null&&!Ze?(ev(s,o,v),Qs(s,o,v)):(ne&&h&&Fy(o),o.flags|=1,rn(s,o,u,v),o.child)}function ZS(s,o,u,h,v,A){return dr(o),o.updateQueue=null,u=WT(o,h,u,v),JT(s),h=tv(),s!==null&&!Ze?(ev(s,o,A),Qs(s,o,A)):(ne&&h&&Fy(o),o.flags|=1,rn(s,o,u,A),o.child)}function QS(s,o,u,h,v){if(dr(o),o.stateNode===null){var A=jl,b=u.contextType;typeof b=="object"&&b!==null&&(A=yn(b)),A=new u(h,A),o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=mv,o.stateNode=A,A._reactInternals=o,A=o.stateNode,A.props=h,A.state=o.memoizedState,A.refs={},Yy(o),b=u.contextType,A.context=typeof b=="object"&&b!==null?yn(b):jl,A.state=o.memoizedState,b=u.getDerivedStateFromProps,typeof b=="function"&&(pv(o,u,b,h),A.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(b=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),b!==A.state&&mv.enqueueReplaceState(A,A.state,null),Ed(o,h,A,v),Cd(),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){A=o.stateNode;var R=o.memoizedProps,k=pr(u,R);A.props=k;var G=A.context,J=u.contextType;b=jl,typeof J=="object"&&J!==null&&(b=yn(J));var Q=u.getDerivedStateFromProps;J=typeof Q=="function"||typeof A.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,J||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(R||G!==b)&&OS(o,A,h,b),Xa=!1;var $=o.memoizedState;A.state=$,Ed(o,h,A,v),Cd(),G=o.memoizedState,R||$!==G||Xa?(typeof Q=="function"&&(pv(o,u,Q,h),G=o.memoizedState),(k=Xa||US(o,u,k,h,$,G,b))?(J||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=G),A.props=h,A.state=G,A.context=b,h=k):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{A=o.stateNode,Xy(s,o),b=o.memoizedProps,J=pr(u,b),A.props=J,Q=o.pendingProps,$=A.context,G=u.contextType,k=jl,typeof G=="object"&&G!==null&&(k=yn(G)),R=u.getDerivedStateFromProps,(G=typeof R=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(b!==Q||$!==k)&&OS(o,A,h,k),Xa=!1,$=o.memoizedState,A.state=$,Ed(o,h,A,v),Cd();var X=o.memoizedState;b!==Q||$!==X||Xa||s!==null&&s.dependencies!==null&&Mp(s.dependencies)?(typeof R=="function"&&(pv(o,u,R,h),X=o.memoizedState),(J=Xa||US(o,u,J,h,$,X,k)||s!==null&&s.dependencies!==null&&Mp(s.dependencies))?(G||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(h,X,k),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(h,X,k)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||b===s.memoizedProps&&$===s.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&$===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=X),A.props=h,A.state=X,A.context=k,h=J):(typeof A.componentDidUpdate!="function"||b===s.memoizedProps&&$===s.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&$===s.memoizedState||(o.flags|=1024),h=!1)}return A=h,Xp(s,o),h=(o.flags&128)!==0,A||h?(A=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:A.render(),o.flags|=1,s!==null&&h?(o.child=uu(o,s.child,null,v),o.child=uu(o,null,u,v)):rn(s,o,u,v),o.memoizedState=A.state,s=o.child):s=Qs(s,o,v),s}function jS(s,o,u,h){return md(),o.flags|=256,rn(s,o,u,h),o.child}var vv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _v(s){return{baseLanes:s,cachePool:BT()}}function Av(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=Di),s}function tC(s,o,u){var h=o.pendingProps,v=!1,A=(o.flags&128)!==0,b;if((b=A)||(b=s!==null&&s.memoizedState===null?!1:(qe.current&2)!==0),b&&(v=!0,o.flags&=-129),b=(o.flags&32)!==0,o.flags&=-33,s===null){if(ne){if(v?Za(o):Qa(),ne){var R=Re,k;if(k=R){t:{for(k=R,R=hs;k.nodeType!==8;){if(!R){R=null;break t}if(k=Ki(k.nextSibling),k===null){R=null;break t}}R=k}R!==null?(o.memoizedState={dehydrated:R,treeContext:or!==null?{id:Ys,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},k=ei(18,null,null,0),k.stateNode=R,k.return=o,o.child=k,Rn=o,Re=null,k=!0):k=!1}k||ur(o)}if(R=o.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return i0(R)?o.lanes=32:o.lanes=536870912,null;Zs(o)}return R=h.children,h=h.fallback,v?(Qa(),v=o.mode,R=Kp({mode:"hidden",children:R},v),h=ar(h,v,u,null),R.return=o,h.return=o,R.sibling=h,o.child=R,v=o.child,v.memoizedState=_v(u),v.childLanes=Av(s,b,u),o.memoizedState=vv,h):(Za(o),Tv(o,R))}if(k=s.memoizedState,k!==null&&(R=k.dehydrated,R!==null)){if(A)o.flags&256?(Za(o),o.flags&=-257,o=Sv(s,o,u)):o.memoizedState!==null?(Qa(),o.child=s.child,o.flags|=128,o=null):(Qa(),v=h.fallback,R=o.mode,h=Kp({mode:"visible",children:h.children},R),v=ar(v,R,u,null),v.flags|=2,h.return=o,v.return=o,h.sibling=v,o.child=h,uu(o,s.child,null,u),h=o.child,h.memoizedState=_v(u),h.childLanes=Av(s,b,u),o.memoizedState=vv,o=v);else if(Za(o),i0(R)){if(b=R.nextSibling&&R.nextSibling.dataset,b)var G=b.dgst;b=G,h=Error(n(419)),h.stack="",h.digest=b,gd({value:h,source:null,stack:null}),o=Sv(s,o,u)}else if(Ze||yd(s,o,u,!1),b=(u&s.childLanes)!==0,Ze||b){if(b=ye,b!==null&&(h=u&-u,h=(h&42)!==0?1:sy(h),h=(h&(b.suspendedLanes|u))!==0?0:h,h!==0&&h!==k.retryLane))throw k.retryLane=h,Ql(s,h),oi(b,s,h),$S;R.data==="$?"||Bv(),o=Sv(s,o,u)}else R.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=k.treeContext,Re=Ki(R.nextSibling),Rn=o,ne=!0,lr=null,hs=!1,s!==null&&(wi[Mi++]=Ys,wi[Mi++]=Xs,wi[Mi++]=or,Ys=s.id,Xs=s.overflow,or=o),o=Tv(o,h.children),o.flags|=4096);return o}return v?(Qa(),v=h.fallback,R=o.mode,k=s.child,G=k.sibling,h=$s(k,{mode:"hidden",children:h.children}),h.subtreeFlags=k.subtreeFlags&65011712,G!==null?v=$s(G,v):(v=ar(v,R,u,null),v.flags|=2),v.return=o,h.return=o,h.sibling=v,o.child=h,h=v,v=o.child,R=s.child.memoizedState,R===null?R=_v(u):(k=R.cachePool,k!==null?(G=ze._currentValue,k=k.parent!==G?{parent:G,pool:G}:k):k=BT(),R={baseLanes:R.baseLanes|u,cachePool:k}),v.memoizedState=R,v.childLanes=Av(s,b,u),o.memoizedState=vv,h):(Za(o),u=s.child,s=u.sibling,u=$s(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,s!==null&&(b=o.deletions,b===null?(o.deletions=[s],o.flags|=16):b.push(s)),o.child=u,o.memoizedState=null,u)}function Tv(s,o){return o=Kp({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Kp(s,o){return s=ei(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Sv(s,o,u){return uu(o,s.child,null,u),s=Tv(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function eC(s,o,u){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),By(s.return,o,u)}function Cv(s,o,u,h,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=u,A.tailMode=v)}function nC(s,o,u){var h=o.pendingProps,v=h.revealOrder,A=h.tail;if(rn(s,o,h.children,u),h=qe.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&eC(s,u,o);else if(s.tag===19)eC(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(et(qe,h),v){case"forwards":for(u=o.child,v=null;u!==null;)s=u.alternate,s!==null&&qp(s)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Cv(o,!1,v,u,A);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&qp(s)===null){o.child=v;break}s=v.sibling,v.sibling=u,u=v,v=s}Cv(o,!0,u,null,A);break;case"together":Cv(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Qs(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),io|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(yd(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,u=$s(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=$s(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Ev(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Mp(s)))}function qR(s,o,u){switch(o.tag){case 3:ee(o,o.stateNode.containerInfo),Ya(o,ze,s.memoizedState.cache),md();break;case 27:case 5:jc(o);break;case 4:ee(o,o.stateNode.containerInfo);break;case 10:Ya(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Za(o),o.flags|=128,null):(u&o.child.childLanes)!==0?tC(s,o,u):(Za(o),s=Qs(s,o,u),s!==null?s.sibling:null);Za(o);break;case 19:var v=(s.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(yd(s,o,u,!1),h=(u&o.childLanes)!==0),v){if(h)return nC(s,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),et(qe,qe.current),h)break;return null;case 22:case 23:return o.lanes=0,JS(s,o,u);case 24:Ya(o,ze,s.memoizedState.cache)}return Qs(s,o,u)}function iC(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)Ze=!0;else{if(!Ev(s,u)&&(o.flags&128)===0)return Ze=!1,qR(s,o,u);Ze=(s.flags&131072)!==0}else Ze=!1,ne&&(o.flags&1048576)!==0&&LT(o,wp,o.index);switch(o.lanes=0,o.tag){case 16:t:{s=o.pendingProps;var h=o.elementType,v=h._init;if(h=v(h._payload),o.type=h,typeof h=="function")Ly(h)?(s=pr(h,s),o.tag=1,o=QS(null,o,h,s,u)):(o.tag=0,o=yv(null,o,h,s,u));else{if(h!=null){if(v=h.$$typeof,v===P){o.tag=11,o=YS(null,o,h,s,u);break t}else if(v===Y){o.tag=14,o=XS(null,o,h,s,u);break t}}throw o=It(h)||h,Error(n(306,o,""))}}return o;case 0:return yv(s,o,o.type,o.pendingProps,u);case 1:return h=o.type,v=pr(h,o.pendingProps),QS(s,o,h,v,u);case 3:t:{if(ee(o,o.stateNode.containerInfo),s===null)throw Error(n(387));h=o.pendingProps;var A=o.memoizedState;v=A.element,Xy(s,o),Ed(o,h,null,u);var b=o.memoizedState;if(h=b.cache,Ya(o,ze,h),h!==A.cache&&Hy(o,[ze],u,!0),Cd(),h=b.element,A.isDehydrated)if(A={element:h,isDehydrated:!1,cache:b.cache},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){o=jS(s,o,h,u);break t}else if(h!==v){v=bi(Error(n(424)),o),gd(v),o=jS(s,o,h,u);break t}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Re=Ki(s.firstChild),Rn=o,ne=!0,lr=null,hs=!0,u=PS(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(md(),h===v){o=Qs(s,o,u);break t}rn(s,o,h,u)}o=o.child}return o;case 26:return Xp(s,o),s===null?(u=rE(o.type,null,o.pendingProps,null))?o.memoizedState=u:ne||(u=o.type,s=o.pendingProps,h=lm(mt.current).createElement(u),h[gn]=o,h[Bn]=s,un(h,u,s),We(h),o.stateNode=h):o.memoizedState=rE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return jc(o),s===null&&ne&&(h=o.stateNode=sE(o.type,o.pendingProps,mt.current),Rn=o,hs=!0,v=Re,ro(o.type)?(s0=v,Re=Ki(h.firstChild)):Re=v),rn(s,o,o.pendingProps.children,u),Xp(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&ne&&((v=h=Re)&&(h=vD(h,o.type,o.pendingProps,hs),h!==null?(o.stateNode=h,Rn=o,Re=Ki(h.firstChild),hs=!1,v=!0):v=!1),v||ur(o)),jc(o),v=o.type,A=o.pendingProps,b=s!==null?s.memoizedProps:null,h=A.children,t0(v,A)?h=null:b!==null&&t0(v,b)&&(o.flags|=32),o.memoizedState!==null&&(v=jy(s,o,FR,null,null,u),Yd._currentValue=v),Xp(s,o),rn(s,o,h,u),o.child;case 6:return s===null&&ne&&((s=u=Re)&&(u=_D(u,o.pendingProps,hs),u!==null?(o.stateNode=u,Rn=o,Re=null,s=!0):s=!1),s||ur(o)),null;case 13:return tC(s,o,u);case 4:return ee(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=uu(o,null,h,u):rn(s,o,h,u),o.child;case 11:return YS(s,o,o.type,o.pendingProps,u);case 7:return rn(s,o,o.pendingProps,u),o.child;case 8:return rn(s,o,o.pendingProps.children,u),o.child;case 12:return rn(s,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,Ya(o,o.type,h.value),rn(s,o,h.children,u),o.child;case 9:return v=o.type._context,h=o.pendingProps.children,dr(o),v=yn(v),h=h(v),o.flags|=1,rn(s,o,h,u),o.child;case 14:return XS(s,o,o.type,o.pendingProps,u);case 15:return KS(s,o,o.type,o.pendingProps,u);case 19:return nC(s,o,u);case 31:return h=o.pendingProps,u=o.mode,h={mode:h.mode,children:h.children},s===null?(u=Kp(h,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=$s(s.child,h),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return JS(s,o,u);case 24:return dr(o),h=yn(ze),s===null?(v=qy(),v===null&&(v=ye,A=Gy(),v.pooledCache=A,A.refCount++,A!==null&&(v.pooledCacheLanes|=u),v=A),o.memoizedState={parent:h,cache:v},Yy(o),Ya(o,ze,v)):((s.lanes&u)!==0&&(Xy(s,o),Ed(o,null,null,u),Cd()),v=s.memoizedState,A=o.memoizedState,v.parent!==h?(v={parent:h,cache:h},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Ya(o,ze,h)):(h=A.cache,Ya(o,ze,h),h!==v.cache&&Hy(o,[ze],u,!0))),rn(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function js(s){s.flags|=4}function sC(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!fE(o)){if(o=Ri.current,o!==null&&((Jt&4194048)===Jt?ps!==null:(Jt&62914560)!==Jt&&(Jt&536870912)===0||o!==ps))throw Td=$y,HT;s.flags|=8192}}function Jp(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?FA():536870912,s.lanes|=o,hu|=o)}function Nd(s,o){if(!ne)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function be(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(o)for(var v=s.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=h,s.childLanes=u,o}function $R(s,o,u){var h=o.pendingProps;switch(Uy(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(o),null;case 1:return be(o),null;case 3:return u=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Js(ze),$i(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(pd(o)?js(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,FT())),be(o),null;case 26:return u=o.memoizedState,s===null?(js(o),u!==null?(be(o),sC(o,u)):(be(o),o.flags&=-16777217)):u?u!==s.memoizedState?(js(o),be(o),sC(o,u)):(be(o),o.flags&=-16777217):(s.memoizedProps!==h&&js(o),be(o),o.flags&=-16777217),null;case 27:op(o),u=mt.current;var v=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&js(o);else{if(!h){if(o.stateNode===null)throw Error(n(166));return be(o),null}s=yt.current,pd(o)?kT(o):(s=sE(v,h,u),o.stateNode=s,js(o))}return be(o),null;case 5:if(op(o),u=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&js(o);else{if(!h){if(o.stateNode===null)throw Error(n(166));return be(o),null}if(s=yt.current,pd(o))kT(o);else{switch(v=lm(mt.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?v.createElement("select",{is:h.is}):v.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?v.createElement(u,{is:h.is}):v.createElement(u)}}s[gn]=o,s[Bn]=h;t:for(v=o.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break t;for(;v.sibling===null;){if(v.return===null||v.return===o)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}o.stateNode=s;t:switch(un(s,u,h),u){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&js(o)}}return be(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&js(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(n(166));if(s=mt.current,pd(o)){if(s=o.stateNode,u=o.memoizedProps,h=null,v=Rn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}s[gn]=o,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||ZC(s.nodeValue,u)),s||ur(o)}else s=lm(s).createTextNode(h),s[gn]=o,o.stateNode=s}return be(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=pd(o),h!==null&&h.dehydrated!==null){if(s===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[gn]=o}else md(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;be(o),v=!1}else v=FT(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Zs(o),o):(Zs(o),null)}if(Zs(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=h!==null,s=s!==null&&s.memoizedState!==null,u){h=o.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool);var A=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),A!==v&&(h.flags|=2048)}return u!==s&&u&&(o.child.flags|=8192),Jp(o,o.updateQueue),be(o),null;case 4:return $i(),s===null&&Jv(o.stateNode.containerInfo),be(o),null;case 10:return Js(o.type),be(o),null;case 19:if(st(qe),v=o.memoizedState,v===null)return be(o),null;if(h=(o.flags&128)!==0,A=v.rendering,A===null)if(h)Nd(v,!1);else{if(De!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(A=qp(s),A!==null){for(o.flags|=128,Nd(v,!1),s=A.updateQueue,o.updateQueue=s,Jp(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)IT(u,s),u=u.sibling;return et(qe,qe.current&1|2),o.child}s=s.sibling}v.tail!==null&&fs()>Qp&&(o.flags|=128,h=!0,Nd(v,!1),o.lanes=4194304)}else{if(!h)if(s=qp(A),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,Jp(o,s),Nd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!A.alternate&&!ne)return be(o),null}else 2*fs()-v.renderingStartTime>Qp&&u!==536870912&&(o.flags|=128,h=!0,Nd(v,!1),o.lanes=4194304);v.isBackwards?(A.sibling=o.child,o.child=A):(s=v.last,s!==null?s.sibling=A:o.child=A,v.last=A)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=fs(),o.sibling=null,s=qe.current,et(qe,h?s&1|2:s&1),o):(be(o),null);case 22:case 23:return Zs(o),Zy(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(be(o),o.subtreeFlags&6&&(o.flags|=8192)):be(o),u=o.updateQueue,u!==null&&Jp(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),s!==null&&st(fr),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Js(ze),be(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function YR(s,o){switch(Uy(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Js(ze),$i(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return op(o),null;case 13:if(Zs(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));md()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return st(qe),null;case 4:return $i(),null;case 10:return Js(o.type),null;case 22:case 23:return Zs(o),Zy(),s!==null&&st(fr),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Js(ze),null;case 25:return null;default:return null}}function aC(s,o){switch(Uy(o),o.tag){case 3:Js(ze),$i();break;case 26:case 27:case 5:op(o);break;case 4:$i();break;case 13:Zs(o);break;case 19:st(qe);break;case 10:Js(o.type);break;case 22:case 23:Zs(o),Zy(),s!==null&&st(fr);break;case 24:Js(ze)}}function Id(s,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var v=h.next;u=v;do{if((u.tag&s)===s){h=void 0;var A=u.create,b=u.inst;h=A(),b.destroy=h}u=u.next}while(u!==v)}}catch(R){me(o,o.return,R)}}function ja(s,o,u){try{var h=o.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var A=v.next;h=A;do{if((h.tag&s)===s){var b=h.inst,R=b.destroy;if(R!==void 0){b.destroy=void 0,v=o;var k=u,G=R;try{G()}catch(J){me(v,k,J)}}}h=h.next}while(h!==A)}}catch(J){me(o,o.return,J)}}function oC(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{XT(o,u)}catch(h){me(s,s.return,h)}}}function rC(s,o,u){u.props=pr(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){me(s,o,h)}}function Ld(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(v){me(s,o,v)}}function ms(s,o){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(v){me(s,o,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){me(s,o,v)}else u.current=null}function lC(s){var o=s.type,u=s.memoizedProps,h=s.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break t;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(v){me(s,s.return,v)}}function bv(s,o,u){try{var h=s.stateNode;hD(h,s.type,u,o),h[Bn]=o}catch(v){me(s,s.return,v)}}function uC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ro(s.type)||s.tag===4}function xv(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||uC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ro(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wv(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=rm));else if(h!==4&&(h===27&&ro(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(wv(s,o,u),s=s.sibling;s!==null;)wv(s,o,u),s=s.sibling}function Wp(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(h!==4&&(h===27&&ro(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Wp(s,o,u),s=s.sibling;s!==null;)Wp(s,o,u),s=s.sibling}function cC(s){var o=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);un(o,h,u),o[gn]=s,o[Bn]=u}catch(A){me(s,s.return,A)}}var ta=!1,Le=!1,Mv=!1,dC=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function XR(s,o){if(s=s.containerInfo,Qv=pm,s=ST(s),xy(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,A=h.focusNode;h=h.focusOffset;try{u.nodeType,A.nodeType}catch{u=null;break t}var b=0,R=-1,k=-1,G=0,J=0,Q=s,$=null;e:for(;;){for(var X;Q!==u||v!==0&&Q.nodeType!==3||(R=b+v),Q!==A||h!==0&&Q.nodeType!==3||(k=b+h),Q.nodeType===3&&(b+=Q.nodeValue.length),(X=Q.firstChild)!==null;)$=Q,Q=X;for(;;){if(Q===s)break e;if($===u&&++G===v&&(R=b),$===A&&++J===h&&(k=b),(X=Q.nextSibling)!==null)break;Q=$,$=Q.parentNode}Q=X}u=R===-1||k===-1?null:{start:R,end:k}}else u=null}u=u||{start:0,end:0}}else u=null;for(jv={focusedElem:s,selectionRange:u},pm=!1,Qe=o;Qe!==null;)if(o=Qe,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Qe=s;else for(;Qe!==null;){switch(o=Qe,A=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,u=o,v=A.memoizedProps,A=A.memoizedState,h=u.stateNode;try{var xt=pr(u.type,v,u.elementType===u.type);s=h.getSnapshotBeforeUpdate(xt,A),h.__reactInternalSnapshotBeforeUpdate=s}catch(St){me(u,u.return,St)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)n0(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":n0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,Qe=s;break}Qe=o.return}}function fC(s,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:to(s,u),h&4&&Id(5,u);break;case 1:if(to(s,u),h&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(b){me(u,u.return,b)}else{var v=pr(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(v,o,s.__reactInternalSnapshotBeforeUpdate)}catch(b){me(u,u.return,b)}}h&64&&oC(u),h&512&&Ld(u,u.return);break;case 3:if(to(s,u),h&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{XT(s,o)}catch(b){me(u,u.return,b)}}break;case 27:o===null&&h&4&&cC(u);case 26:case 5:to(s,u),o===null&&h&4&&lC(u),h&512&&Ld(u,u.return);break;case 12:to(s,u);break;case 13:to(s,u),h&4&&mC(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=nD.bind(null,u),AD(s,u))));break;case 22:if(h=u.memoizedState!==null||ta,!h){o=o!==null&&o.memoizedState!==null||Le,v=ta;var A=Le;ta=h,(Le=o)&&!A?eo(s,u,(u.subtreeFlags&8772)!==0):to(s,u),ta=v,Le=A}break;case 30:break;default:to(s,u)}}function hC(s){var o=s.alternate;o!==null&&(s.alternate=null,hC(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ry(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Te=null,zn=!1;function ea(s,o,u){for(u=u.child;u!==null;)pC(s,o,u),u=u.sibling}function pC(s,o,u){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(td,u)}catch{}switch(u.tag){case 26:Le||ms(u,o),ea(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Le||ms(u,o);var h=Te,v=zn;ro(u.type)&&(Te=u.stateNode,zn=!1),ea(s,o,u),Gd(u.stateNode),Te=h,zn=v;break;case 5:Le||ms(u,o);case 6:if(h=Te,v=zn,Te=null,ea(s,o,u),Te=h,zn=v,Te!==null)if(zn)try{(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).removeChild(u.stateNode)}catch(A){me(u,o,A)}else try{Te.removeChild(u.stateNode)}catch(A){me(u,o,A)}break;case 18:Te!==null&&(zn?(s=Te,nE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Wd(s)):nE(Te,u.stateNode));break;case 4:h=Te,v=zn,Te=u.stateNode.containerInfo,zn=!0,ea(s,o,u),Te=h,zn=v;break;case 0:case 11:case 14:case 15:Le||ja(2,u,o),Le||ja(4,u,o),ea(s,o,u);break;case 1:Le||(ms(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&rC(u,o,h)),ea(s,o,u);break;case 21:ea(s,o,u);break;case 22:Le=(h=Le)||u.memoizedState!==null,ea(s,o,u),Le=h;break;default:ea(s,o,u)}}function mC(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Wd(s)}catch(u){me(o,o.return,u)}}function KR(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new dC),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new dC),o;default:throw Error(n(435,s.tag))}}function Rv(s,o){var u=KR(s);o.forEach(function(h){var v=iD.bind(null,s,h);u.has(h)||(u.add(h),h.then(v,v))})}function ni(s,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h],A=s,b=o,R=b;t:for(;R!==null;){switch(R.tag){case 27:if(ro(R.type)){Te=R.stateNode,zn=!1;break t}break;case 5:Te=R.stateNode,zn=!1;break t;case 3:case 4:Te=R.stateNode.containerInfo,zn=!0;break t}R=R.return}if(Te===null)throw Error(n(160));pC(A,b,v),Te=null,zn=!1,A=v.alternate,A!==null&&(A.return=null),v.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)gC(o,s),o=o.sibling}var Xi=null;function gC(s,o){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ni(o,s),ii(s),h&4&&(ja(3,s,s.return),Id(3,s),ja(5,s,s.return));break;case 1:ni(o,s),ii(s),h&512&&(Le||u===null||ms(u,u.return)),h&64&&ta&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var v=Xi;if(ni(o,s),ii(s),h&512&&(Le||u===null||ms(u,u.return)),h&4){var A=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){t:{h=s.type,u=s.memoizedProps,v=v.ownerDocument||v;e:switch(h){case"title":A=v.getElementsByTagName("title")[0],(!A||A[id]||A[gn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=v.createElement(h),v.head.insertBefore(A,v.querySelector("head > title"))),un(A,h,u),A[gn]=s,We(A),h=A;break t;case"link":var b=cE("link","href",v).get(h+(u.href||""));if(b){for(var R=0;R<b.length;R++)if(A=b[R],A.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&A.getAttribute("rel")===(u.rel==null?null:u.rel)&&A.getAttribute("title")===(u.title==null?null:u.title)&&A.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){b.splice(R,1);break e}}A=v.createElement(h),un(A,h,u),v.head.appendChild(A);break;case"meta":if(b=cE("meta","content",v).get(h+(u.content||""))){for(R=0;R<b.length;R++)if(A=b[R],A.getAttribute("content")===(u.content==null?null:""+u.content)&&A.getAttribute("name")===(u.name==null?null:u.name)&&A.getAttribute("property")===(u.property==null?null:u.property)&&A.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&A.getAttribute("charset")===(u.charSet==null?null:u.charSet)){b.splice(R,1);break e}}A=v.createElement(h),un(A,h,u),v.head.appendChild(A);break;default:throw Error(n(468,h))}A[gn]=s,We(A),h=A}s.stateNode=h}else dE(v,s.type,s.stateNode);else s.stateNode=uE(v,h,s.memoizedProps);else A!==h?(A===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):A.count--,h===null?dE(v,s.type,s.stateNode):uE(v,h,s.memoizedProps)):h===null&&s.stateNode!==null&&bv(s,s.memoizedProps,u.memoizedProps)}break;case 27:ni(o,s),ii(s),h&512&&(Le||u===null||ms(u,u.return)),u!==null&&h&4&&bv(s,s.memoizedProps,u.memoizedProps);break;case 5:if(ni(o,s),ii(s),h&512&&(Le||u===null||ms(u,u.return)),s.flags&32){v=s.stateNode;try{$l(v,"")}catch(X){me(s,s.return,X)}}h&4&&s.stateNode!=null&&(v=s.memoizedProps,bv(s,v,u!==null?u.memoizedProps:v)),h&1024&&(Mv=!0);break;case 6:if(ni(o,s),ii(s),h&4){if(s.stateNode===null)throw Error(n(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(X){me(s,s.return,X)}}break;case 3:if(dm=null,v=Xi,Xi=um(o.containerInfo),ni(o,s),Xi=v,ii(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Wd(o.containerInfo)}catch(X){me(s,s.return,X)}Mv&&(Mv=!1,yC(s));break;case 4:h=Xi,Xi=um(s.stateNode.containerInfo),ni(o,s),ii(s),Xi=h;break;case 12:ni(o,s),ii(s);break;case 13:ni(o,s),ii(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Pv=fs()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Rv(s,h)));break;case 22:v=s.memoizedState!==null;var k=u!==null&&u.memoizedState!==null,G=ta,J=Le;if(ta=G||v,Le=J||k,ni(o,s),Le=J,ta=G,ii(s),h&8192)t:for(o=s.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||k||ta||Le||mr(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){k=u=o;try{if(A=k.stateNode,v)b=A.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{R=k.stateNode;var Q=k.memoizedProps.style,$=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(X){me(k,k.return,X)}}}else if(o.tag===6){if(u===null){k=o;try{k.stateNode.nodeValue=v?"":k.memoizedProps}catch(X){me(k,k.return,X)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break t;for(;o.sibling===null;){if(o.return===null||o.return===s)break t;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Rv(s,u))));break;case 19:ni(o,s),ii(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Rv(s,h)));break;case 30:break;case 21:break;default:ni(o,s),ii(s)}}function ii(s){var o=s.flags;if(o&2){try{for(var u,h=s.return;h!==null;){if(uC(h)){u=h;break}h=h.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var v=u.stateNode,A=xv(s);Wp(s,A,v);break;case 5:var b=u.stateNode;u.flags&32&&($l(b,""),u.flags&=-33);var R=xv(s);Wp(s,R,b);break;case 3:case 4:var k=u.stateNode.containerInfo,G=xv(s);wv(s,G,k);break;default:throw Error(n(161))}}catch(J){me(s,s.return,J)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function yC(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;yC(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function to(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)fC(s,o.alternate,o),o=o.sibling}function mr(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:ja(4,o,o.return),mr(o);break;case 1:ms(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&rC(o,o.return,u),mr(o);break;case 27:Gd(o.stateNode);case 26:case 5:ms(o,o.return),mr(o);break;case 22:o.memoizedState===null&&mr(o);break;case 30:mr(o);break;default:mr(o)}s=s.sibling}}function eo(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,v=s,A=o,b=A.flags;switch(A.tag){case 0:case 11:case 15:eo(v,A,u),Id(4,A);break;case 1:if(eo(v,A,u),h=A,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(G){me(h,h.return,G)}if(h=A,v=h.updateQueue,v!==null){var R=h.stateNode;try{var k=v.shared.hiddenCallbacks;if(k!==null)for(v.shared.hiddenCallbacks=null,v=0;v<k.length;v++)YT(k[v],R)}catch(G){me(h,h.return,G)}}u&&b&64&&oC(A),Ld(A,A.return);break;case 27:cC(A);case 26:case 5:eo(v,A,u),u&&h===null&&b&4&&lC(A),Ld(A,A.return);break;case 12:eo(v,A,u);break;case 13:eo(v,A,u),u&&b&4&&mC(v,A);break;case 22:A.memoizedState===null&&eo(v,A,u),Ld(A,A.return);break;case 30:break;default:eo(v,A,u)}o=o.sibling}}function Dv(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&vd(u))}function Nv(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&vd(s))}function gs(s,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)vC(s,o,u,h),o=o.sibling}function vC(s,o,u,h){var v=o.flags;switch(o.tag){case 0:case 11:case 15:gs(s,o,u,h),v&2048&&Id(9,o);break;case 1:gs(s,o,u,h);break;case 3:gs(s,o,u,h),v&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&vd(s)));break;case 12:if(v&2048){gs(s,o,u,h),s=o.stateNode;try{var A=o.memoizedProps,b=A.id,R=A.onPostCommit;typeof R=="function"&&R(b,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){me(o,o.return,k)}}else gs(s,o,u,h);break;case 13:gs(s,o,u,h);break;case 23:break;case 22:A=o.stateNode,b=o.alternate,o.memoizedState!==null?A._visibility&2?gs(s,o,u,h):kd(s,o):A._visibility&2?gs(s,o,u,h):(A._visibility|=2,cu(s,o,u,h,(o.subtreeFlags&10256)!==0)),v&2048&&Dv(b,o);break;case 24:gs(s,o,u,h),v&2048&&Nv(o.alternate,o);break;default:gs(s,o,u,h)}}function cu(s,o,u,h,v){for(v=v&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var A=s,b=o,R=u,k=h,G=b.flags;switch(b.tag){case 0:case 11:case 15:cu(A,b,R,k,v),Id(8,b);break;case 23:break;case 22:var J=b.stateNode;b.memoizedState!==null?J._visibility&2?cu(A,b,R,k,v):kd(A,b):(J._visibility|=2,cu(A,b,R,k,v)),v&&G&2048&&Dv(b.alternate,b);break;case 24:cu(A,b,R,k,v),v&&G&2048&&Nv(b.alternate,b);break;default:cu(A,b,R,k,v)}o=o.sibling}}function kd(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,h=o,v=h.flags;switch(h.tag){case 22:kd(u,h),v&2048&&Dv(h.alternate,h);break;case 24:kd(u,h),v&2048&&Nv(h.alternate,h);break;default:kd(u,h)}o=o.sibling}}var Pd=8192;function du(s){if(s.subtreeFlags&Pd)for(s=s.child;s!==null;)_C(s),s=s.sibling}function _C(s){switch(s.tag){case 26:du(s),s.flags&Pd&&s.memoizedState!==null&&LD(Xi,s.memoizedState,s.memoizedProps);break;case 5:du(s);break;case 3:case 4:var o=Xi;Xi=um(s.stateNode.containerInfo),du(s),Xi=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Pd,Pd=16777216,du(s),Pd=o):du(s));break;default:du(s)}}function AC(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Fd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Qe=h,SC(h,s)}AC(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)TC(s),s=s.sibling}function TC(s){switch(s.tag){case 0:case 11:case 15:Fd(s),s.flags&2048&&ja(9,s,s.return);break;case 3:Fd(s);break;case 12:Fd(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Zp(s)):Fd(s);break;default:Fd(s)}}function Zp(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Qe=h,SC(h,s)}AC(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:ja(8,o,o.return),Zp(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Zp(o));break;default:Zp(o)}s=s.sibling}}function SC(s,o){for(;Qe!==null;){var u=Qe;switch(u.tag){case 0:case 11:case 15:ja(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:vd(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Qe=h;else t:for(u=s;Qe!==null;){h=Qe;var v=h.sibling,A=h.return;if(hC(h),h===u){Qe=null;break t}if(v!==null){v.return=A,Qe=v;break t}Qe=A}}}var JR={getCacheForType:function(s){var o=yn(ze),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u}},WR=typeof WeakMap=="function"?WeakMap:Map,se=0,ye=null,$t=null,Jt=0,ae=0,si=null,no=!1,fu=!1,Iv=!1,na=0,De=0,io=0,gr=0,Lv=0,Di=0,hu=0,Ud=null,qn=null,kv=!1,Pv=0,Qp=1/0,jp=null,so=null,ln=0,ao=null,pu=null,mu=0,Fv=0,Uv=null,CC=null,Od=0,Ov=null;function ai(){if((se&2)!==0&&Jt!==0)return Jt&-Jt;if(V.T!==null){var s=nu;return s!==0?s:$v()}return VA()}function EC(){Di===0&&(Di=(Jt&536870912)===0||ne?PA():536870912);var s=Ri.current;return s!==null&&(s.flags|=32),Di}function oi(s,o,u){(s===ye&&(ae===2||ae===9)||s.cancelPendingCommit!==null)&&(gu(s,0),oo(s,Jt,Di,!1)),nd(s,u),((se&2)===0||s!==ye)&&(s===ye&&((se&2)===0&&(gr|=u),De===4&&oo(s,Jt,Di,!1)),ys(s))}function bC(s,o,u){if((se&6)!==0)throw Error(n(327));var h=!u&&(o&124)===0&&(o&s.expiredLanes)===0||ed(s,o),v=h?jR(s,o):Hv(s,o,!0),A=h;do{if(v===0){fu&&!h&&oo(s,o,0,!1);break}else{if(u=s.current.alternate,A&&!ZR(u)){v=Hv(s,o,!1),A=!1;continue}if(v===2){if(A=o,s.errorRecoveryDisabledLanes&A)var b=0;else b=s.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){o=b;t:{var R=s;v=Ud;var k=R.current.memoizedState.isDehydrated;if(k&&(gu(R,b).flags|=256),b=Hv(R,b,!1),b!==2){if(Iv&&!k){R.errorRecoveryDisabledLanes|=A,gr|=A,v=4;break t}A=qn,qn=v,A!==null&&(qn===null?qn=A:qn.push.apply(qn,A))}v=b}if(A=!1,v!==2)continue}}if(v===1){gu(s,0),oo(s,o,0,!0);break}t:{switch(h=s,A=v,A){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:oo(h,o,Di,!no);break t;case 2:qn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(v=Pv+300-fs(),10<v)){if(oo(h,o,Di,!no),cp(h,0,!0)!==0)break t;h.timeoutHandle=tE(xC.bind(null,h,u,qn,jp,kv,o,Di,gr,hu,no,A,2,-0,0),v);break t}xC(h,u,qn,jp,kv,o,Di,gr,hu,no,A,0,-0,0)}}break}while(!0);ys(s)}function xC(s,o,u,h,v,A,b,R,k,G,J,Q,$,X){if(s.timeoutHandle=-1,Q=o.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&($d={stylesheets:null,count:0,unsuspend:ID},_C(o),Q=kD(),Q!==null)){s.cancelPendingCommit=Q(LC.bind(null,s,o,A,u,h,v,b,R,k,J,1,$,X)),oo(s,A,b,!G);return}LC(s,o,A,u,h,v,b,R,k)}function ZR(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var v=u[h],A=v.getSnapshot;v=v.value;try{if(!ti(A(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function oo(s,o,u,h){o&=~Lv,o&=~gr,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var v=o;0<v;){var A=31-jn(v),b=1<<A;h[A]=-1,v&=~b}u!==0&&UA(s,u,o)}function tm(){return(se&6)===0?(Vd(0),!1):!0}function Vv(){if($t!==null){if(ae===0)var s=$t.return;else s=$t,Ks=cr=null,nv(s),lu=null,Rd=0,s=$t;for(;s!==null;)aC(s.alternate,s),s=s.return;$t=null}}function gu(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,mD(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Vv(),ye=s,$t=u=$s(s.current,null),Jt=o,ae=0,si=null,no=!1,fu=ed(s,o),Iv=!1,hu=Di=Lv=gr=io=De=0,qn=Ud=null,kv=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var v=31-jn(h),A=1<<v;o|=s[v],h&=~A}return na=o,Sp(),u}function wC(s,o){Ot=null,V.H=Hp,o===Ad||o===Np?(o=qT(),ae=3):o===HT?(o=qT(),ae=4):ae=o===$S?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,si=o,$t===null&&(De=1,Yp(s,bi(o,s.current)))}function MC(){var s=V.H;return V.H=Hp,s===null?Hp:s}function RC(){var s=V.A;return V.A=JR,s}function Bv(){De=4,no||(Jt&4194048)!==Jt&&Ri.current!==null||(fu=!0),(io&134217727)===0&&(gr&134217727)===0||ye===null||oo(ye,Jt,Di,!1)}function Hv(s,o,u){var h=se;se|=2;var v=MC(),A=RC();(ye!==s||Jt!==o)&&(jp=null,gu(s,o)),o=!1;var b=De;t:do try{if(ae!==0&&$t!==null){var R=$t,k=si;switch(ae){case 8:Vv(),b=6;break t;case 3:case 2:case 9:case 6:Ri.current===null&&(o=!0);var G=ae;if(ae=0,si=null,yu(s,R,k,G),u&&fu){b=0;break t}break;default:G=ae,ae=0,si=null,yu(s,R,k,G)}}QR(),b=De;break}catch(J){wC(s,J)}while(!0);return o&&s.shellSuspendCounter++,Ks=cr=null,se=h,V.H=v,V.A=A,$t===null&&(ye=null,Jt=0,Sp()),b}function QR(){for(;$t!==null;)DC($t)}function jR(s,o){var u=se;se|=2;var h=MC(),v=RC();ye!==s||Jt!==o?(jp=null,Qp=fs()+500,gu(s,o)):fu=ed(s,o);t:do try{if(ae!==0&&$t!==null){o=$t;var A=si;e:switch(ae){case 1:ae=0,si=null,yu(s,o,A,1);break;case 2:case 9:if(GT(A)){ae=0,si=null,NC(o);break}o=function(){ae!==2&&ae!==9||ye!==s||(ae=7),ys(s)},A.then(o,o);break t;case 3:ae=7;break t;case 4:ae=5;break t;case 7:GT(A)?(ae=0,si=null,NC(o)):(ae=0,si=null,yu(s,o,A,7));break;case 5:var b=null;switch($t.tag){case 26:b=$t.memoizedState;case 5:case 27:var R=$t;if(!b||fE(b)){ae=0,si=null;var k=R.sibling;if(k!==null)$t=k;else{var G=R.return;G!==null?($t=G,em(G)):$t=null}break e}}ae=0,si=null,yu(s,o,A,5);break;case 6:ae=0,si=null,yu(s,o,A,6);break;case 8:Vv(),De=6;break t;default:throw Error(n(462))}}tD();break}catch(J){wC(s,J)}while(!0);return Ks=cr=null,V.H=h,V.A=v,se=u,$t!==null?0:(ye=null,Jt=0,Sp(),De)}function tD(){for(;$t!==null&&!S1();)DC($t)}function DC(s){var o=iC(s.alternate,s,na);s.memoizedProps=s.pendingProps,o===null?em(s):$t=o}function NC(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=ZS(u,o,o.pendingProps,o.type,void 0,Jt);break;case 11:o=ZS(u,o,o.pendingProps,o.type.render,o.ref,Jt);break;case 5:nv(o);default:aC(u,o),o=$t=IT(o,na),o=iC(u,o,na)}s.memoizedProps=s.pendingProps,o===null?em(s):$t=o}function yu(s,o,u,h){Ks=cr=null,nv(o),lu=null,Rd=0;var v=o.return;try{if(zR(s,v,o,u,Jt)){De=1,Yp(s,bi(u,s.current)),$t=null;return}}catch(A){if(v!==null)throw $t=v,A;De=1,Yp(s,bi(u,s.current)),$t=null;return}o.flags&32768?(ne||h===1?s=!0:fu||(Jt&536870912)!==0?s=!1:(no=s=!0,(h===2||h===9||h===3||h===6)&&(h=Ri.current,h!==null&&h.tag===13&&(h.flags|=16384))),IC(o,s)):em(o)}function em(s){var o=s;do{if((o.flags&32768)!==0){IC(o,no);return}s=o.return;var u=$R(o.alternate,o,na);if(u!==null){$t=u;return}if(o=o.sibling,o!==null){$t=o;return}$t=o=s}while(o!==null);De===0&&(De=5)}function IC(s,o){do{var u=YR(s.alternate,s);if(u!==null){u.flags&=32767,$t=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){$t=s;return}$t=s=u}while(s!==null);De=6,$t=null}function LC(s,o,u,h,v,A,b,R,k){s.cancelPendingCommit=null;do nm();while(ln!==0);if((se&6)!==0)throw Error(n(327));if(o!==null){if(o===s.current)throw Error(n(177));if(A=o.lanes|o.childLanes,A|=Ny,I1(s,u,A,b,R,k),s===ye&&($t=ye=null,Jt=0),pu=o,ao=s,mu=u,Fv=A,Uv=v,CC=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,sD(rp,function(){return OC(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=V.T,V.T=null,v=K.p,K.p=2,b=se,se|=4;try{XR(s,o,u)}finally{se=b,K.p=v,V.T=h}}ln=1,kC(),PC(),FC()}}function kC(){if(ln===1){ln=0;var s=ao,o=pu,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=V.T,V.T=null;var h=K.p;K.p=2;var v=se;se|=4;try{gC(o,s);var A=jv,b=ST(s.containerInfo),R=A.focusedElem,k=A.selectionRange;if(b!==R&&R&&R.ownerDocument&&TT(R.ownerDocument.documentElement,R)){if(k!==null&&xy(R)){var G=k.start,J=k.end;if(J===void 0&&(J=G),"selectionStart"in R)R.selectionStart=G,R.selectionEnd=Math.min(J,R.value.length);else{var Q=R.ownerDocument||document,$=Q&&Q.defaultView||window;if($.getSelection){var X=$.getSelection(),xt=R.textContent.length,St=Math.min(k.start,xt),de=k.end===void 0?St:Math.min(k.end,xt);!X.extend&&St>de&&(b=de,de=St,St=b);var B=AT(R,St),O=AT(R,de);if(B&&O&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==O.node||X.focusOffset!==O.offset)){var H=Q.createRange();H.setStart(B.node,B.offset),X.removeAllRanges(),St>de?(X.addRange(H),X.extend(O.node,O.offset)):(H.setEnd(O.node,O.offset),X.addRange(H))}}}}for(Q=[],X=R;X=X.parentNode;)X.nodeType===1&&Q.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<Q.length;R++){var W=Q[R];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}pm=!!Qv,jv=Qv=null}finally{se=v,K.p=h,V.T=u}}s.current=o,ln=2}}function PC(){if(ln===2){ln=0;var s=ao,o=pu,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=V.T,V.T=null;var h=K.p;K.p=2;var v=se;se|=4;try{fC(s,o.alternate,o)}finally{se=v,K.p=h,V.T=u}}ln=3}}function FC(){if(ln===4||ln===3){ln=0,C1();var s=ao,o=pu,u=mu,h=CC;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ln=5:(ln=0,pu=ao=null,UC(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(so=null),ay(u),o=o.stateNode,Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(td,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=V.T,v=K.p,K.p=2,V.T=null;try{for(var A=s.onRecoverableError,b=0;b<h.length;b++){var R=h[b];A(R.value,{componentStack:R.stack})}}finally{V.T=o,K.p=v}}(mu&3)!==0&&nm(),ys(s),v=s.pendingLanes,(u&4194090)!==0&&(v&42)!==0?s===Ov?Od++:(Od=0,Ov=s):Od=0,Vd(0)}}function UC(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,vd(o)))}function nm(s){return kC(),PC(),FC(),OC()}function OC(){if(ln!==5)return!1;var s=ao,o=Fv;Fv=0;var u=ay(mu),h=V.T,v=K.p;try{K.p=32>u?32:u,V.T=null,u=Uv,Uv=null;var A=ao,b=mu;if(ln=0,pu=ao=null,mu=0,(se&6)!==0)throw Error(n(331));var R=se;if(se|=4,TC(A.current),vC(A,A.current,b,u),se=R,Vd(0,!1),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(td,A)}catch{}return!0}finally{K.p=v,V.T=h,UC(s,o)}}function VC(s,o,u){o=bi(u,o),o=gv(s.stateNode,o,2),s=Ja(s,o,2),s!==null&&(nd(s,2),ys(s))}function me(s,o,u){if(s.tag===3)VC(s,s,u);else for(;o!==null;){if(o.tag===3){VC(o,s,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(so===null||!so.has(h))){s=bi(u,s),u=zS(2),h=Ja(o,u,2),h!==null&&(qS(u,h,o,s),nd(h,2),ys(h));break}}o=o.return}}function Gv(s,o,u){var h=s.pingCache;if(h===null){h=s.pingCache=new WR;var v=new Set;h.set(o,v)}else v=h.get(o),v===void 0&&(v=new Set,h.set(o,v));v.has(u)||(Iv=!0,v.add(u),s=eD.bind(null,s,o,u),o.then(s,s))}function eD(s,o,u){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,ye===s&&(Jt&u)===u&&(De===4||De===3&&(Jt&62914560)===Jt&&300>fs()-Pv?(se&2)===0&&gu(s,0):Lv|=u,hu===Jt&&(hu=0)),ys(s)}function BC(s,o){o===0&&(o=FA()),s=Ql(s,o),s!==null&&(nd(s,o),ys(s))}function nD(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),BC(s,u)}function iD(s,o){var u=0;switch(s.tag){case 13:var h=s.stateNode,v=s.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(o),BC(s,u)}function sD(s,o){return ey(s,o)}var im=null,vu=null,zv=!1,sm=!1,qv=!1,yr=0;function ys(s){s!==vu&&s.next===null&&(vu===null?im=vu=s:vu=vu.next=s),sm=!0,zv||(zv=!0,oD())}function Vd(s,o){if(!qv&&sm){qv=!0;do for(var u=!1,h=im;h!==null;){if(s!==0){var v=h.pendingLanes;if(v===0)var A=0;else{var b=h.suspendedLanes,R=h.pingedLanes;A=(1<<31-jn(42|s)+1)-1,A&=v&~(b&~R),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(u=!0,qC(h,A))}else A=Jt,A=cp(h,h===ye?A:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(A&3)===0||ed(h,A)||(u=!0,qC(h,A));h=h.next}while(u);qv=!1}}function aD(){HC()}function HC(){sm=zv=!1;var s=0;yr!==0&&(pD()&&(s=yr),yr=0);for(var o=fs(),u=null,h=im;h!==null;){var v=h.next,A=GC(h,o);A===0?(h.next=null,u===null?im=v:u.next=v,v===null&&(vu=u)):(u=h,(s!==0||(A&3)!==0)&&(sm=!0)),h=v}Vd(s)}function GC(s,o){for(var u=s.suspendedLanes,h=s.pingedLanes,v=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var b=31-jn(A),R=1<<b,k=v[b];k===-1?((R&u)===0||(R&h)!==0)&&(v[b]=N1(R,o)):k<=o&&(s.expiredLanes|=R),A&=~R}if(o=ye,u=Jt,u=cp(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===o&&(ae===2||ae===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&ny(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ed(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(h!==null&&ny(h),ay(u)){case 2:case 8:u=LA;break;case 32:u=rp;break;case 268435456:u=kA;break;default:u=rp}return h=zC.bind(null,s),u=ey(u,h),s.callbackPriority=o,s.callbackNode=u,o}return h!==null&&h!==null&&ny(h),s.callbackPriority=2,s.callbackNode=null,2}function zC(s,o){if(ln!==0&&ln!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(nm()&&s.callbackNode!==u)return null;var h=Jt;return h=cp(s,s===ye?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(bC(s,h,o),GC(s,fs()),s.callbackNode!=null&&s.callbackNode===u?zC.bind(null,s):null)}function qC(s,o){if(nm())return null;bC(s,o,!0)}function oD(){gD(function(){(se&6)!==0?ey(IA,aD):HC()})}function $v(){return yr===0&&(yr=PA()),yr}function $C(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:mp(""+s)}function YC(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function rD(s,o,u,h,v){if(o==="submit"&&u&&u.stateNode===v){var A=$C((v[Bn]||null).action),b=h.submitter;b&&(o=(o=b[Bn]||null)?$C(o.formAction):b.getAttribute("formAction"),o!==null&&(A=o,b=null));var R=new _p("action","action",null,h,v);s.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(yr!==0){var k=b?YC(v,b):new FormData(v);dv(u,{pending:!0,data:k,method:v.method,action:A},null,k)}}else typeof A=="function"&&(R.preventDefault(),k=b?YC(v,b):new FormData(v),dv(u,{pending:!0,data:k,method:v.method,action:A},A,k))},currentTarget:v}]})}}for(var Yv=0;Yv<Dy.length;Yv++){var Xv=Dy[Yv],lD=Xv.toLowerCase(),uD=Xv[0].toUpperCase()+Xv.slice(1);Yi(lD,"on"+uD)}Yi(bT,"onAnimationEnd"),Yi(xT,"onAnimationIteration"),Yi(wT,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(xR,"onTransitionRun"),Yi(wR,"onTransitionStart"),Yi(MR,"onTransitionCancel"),Yi(MT,"onTransitionEnd"),Gl("onMouseEnter",["mouseout","mouseover"]),Gl("onMouseLeave",["mouseout","mouseover"]),Gl("onPointerEnter",["pointerout","pointerover"]),Gl("onPointerLeave",["pointerout","pointerover"]),er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),er("onBeforeInput",["compositionend","keypress","textInput","paste"]),er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bd));function XC(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],v=h.event;h=h.listeners;t:{var A=void 0;if(o)for(var b=h.length-1;0<=b;b--){var R=h[b],k=R.instance,G=R.currentTarget;if(R=R.listener,k!==A&&v.isPropagationStopped())break t;A=R,v.currentTarget=G;try{A(v)}catch(J){$p(J)}v.currentTarget=null,A=k}else for(b=0;b<h.length;b++){if(R=h[b],k=R.instance,G=R.currentTarget,R=R.listener,k!==A&&v.isPropagationStopped())break t;A=R,v.currentTarget=G;try{A(v)}catch(J){$p(J)}v.currentTarget=null,A=k}}}}function Yt(s,o){var u=o[oy];u===void 0&&(u=o[oy]=new Set);var h=s+"__bubble";u.has(h)||(KC(o,s,2,!1),u.add(h))}function Kv(s,o,u){var h=0;o&&(h|=4),KC(u,s,h,o)}var am="_reactListening"+Math.random().toString(36).slice(2);function Jv(s){if(!s[am]){s[am]=!0,HA.forEach(function(u){u!=="selectionchange"&&(cD.has(u)||Kv(u,!1,s),Kv(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[am]||(o[am]=!0,Kv("selectionchange",!1,o))}}function KC(s,o,u,h){switch(vE(o)){case 2:var v=UD;break;case 8:v=OD;break;default:v=u0}u=v.bind(null,o,u,s),v=void 0,!yy||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),h?v!==void 0?s.addEventListener(o,u,{capture:!0,passive:v}):s.addEventListener(o,u,!0):v!==void 0?s.addEventListener(o,u,{passive:v}):s.addEventListener(o,u,!1)}function Wv(s,o,u,h,v){var A=h;if((o&1)===0&&(o&2)===0&&h!==null)t:for(;;){if(h===null)return;var b=h.tag;if(b===3||b===4){var R=h.stateNode.containerInfo;if(R===v)break;if(b===4)for(b=h.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===v)return;b=b.return}for(;R!==null;){if(b=Vl(R),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){h=A=b;continue t}R=R.parentNode}}h=h.return}eT(function(){var G=A,J=my(u),Q=[];t:{var $=RT.get(s);if($!==void 0){var X=_p,xt=s;switch(s){case"keypress":if(yp(u)===0)break t;case"keydown":case"keyup":X=sR;break;case"focusin":xt="focus",X=Ty;break;case"focusout":xt="blur",X=Ty;break;case"beforeblur":case"afterblur":X=Ty;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=sT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Y1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=rR;break;case bT:case xT:case wT:X=J1;break;case MT:X=uR;break;case"scroll":case"scrollend":X=q1;break;case"wheel":X=dR;break;case"copy":case"cut":case"paste":X=Z1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=oT;break;case"toggle":case"beforetoggle":X=hR}var St=(o&4)!==0,de=!St&&(s==="scroll"||s==="scrollend"),B=St?$!==null?$+"Capture":null:$;St=[];for(var O=G,H;O!==null;){var W=O;if(H=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||H===null||B===null||(W=ad(O,B),W!=null&&St.push(Hd(O,W,H))),de)break;O=O.return}0<St.length&&($=new X($,xt,null,u,J),Q.push({event:$,listeners:St}))}}if((o&7)===0){t:{if($=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",$&&u!==py&&(xt=u.relatedTarget||u.fromElement)&&(Vl(xt)||xt[Ol]))break t;if((X||$)&&($=J.window===J?J:($=J.ownerDocument)?$.defaultView||$.parentWindow:window,X?(xt=u.relatedTarget||u.toElement,X=G,xt=xt?Vl(xt):null,xt!==null&&(de=r(xt),St=xt.tag,xt!==de||St!==5&&St!==27&&St!==6)&&(xt=null)):(X=null,xt=G),X!==xt)){if(St=sT,W="onMouseLeave",B="onMouseEnter",O="mouse",(s==="pointerout"||s==="pointerover")&&(St=oT,W="onPointerLeave",B="onPointerEnter",O="pointer"),de=X==null?$:sd(X),H=xt==null?$:sd(xt),$=new St(W,O+"leave",X,u,J),$.target=de,$.relatedTarget=H,W=null,Vl(J)===G&&(St=new St(B,O+"enter",xt,u,J),St.target=H,St.relatedTarget=de,W=St),de=W,X&&xt)e:{for(St=X,B=xt,O=0,H=St;H;H=_u(H))O++;for(H=0,W=B;W;W=_u(W))H++;for(;0<O-H;)St=_u(St),O--;for(;0<H-O;)B=_u(B),H--;for(;O--;){if(St===B||B!==null&&St===B.alternate)break e;St=_u(St),B=_u(B)}St=null}else St=null;X!==null&&JC(Q,$,X,St,!1),xt!==null&&de!==null&&JC(Q,de,xt,St,!0)}}t:{if($=G?sd(G):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var dt=pT;else if(fT($))if(mT)dt=CR;else{dt=TR;var Gt=AR}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&hy(G.elementType)&&(dt=pT):dt=SR;if(dt&&(dt=dt(s,G))){hT(Q,dt,u,J);break t}Gt&&Gt(s,$,G),s==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&fy($,"number",$.value)}switch(Gt=G?sd(G):window,s){case"focusin":(fT(Gt)||Gt.contentEditable==="true")&&(Jl=Gt,wy=G,hd=null);break;case"focusout":hd=wy=Jl=null;break;case"mousedown":My=!0;break;case"contextmenu":case"mouseup":case"dragend":My=!1,CT(Q,u,J);break;case"selectionchange":if(bR)break;case"keydown":case"keyup":CT(Q,u,J)}var At;if(Cy)t:{switch(s){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else Kl?cT(s,u)&&(bt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(bt="onCompositionStart");bt&&(rT&&u.locale!=="ko"&&(Kl||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Kl&&(At=nT()):($a=J,vy="value"in $a?$a.value:$a.textContent,Kl=!0)),Gt=om(G,bt),0<Gt.length&&(bt=new aT(bt,s,null,u,J),Q.push({event:bt,listeners:Gt}),At?bt.data=At:(At=dT(u),At!==null&&(bt.data=At)))),(At=mR?gR(s,u):yR(s,u))&&(bt=om(G,"onBeforeInput"),0<bt.length&&(Gt=new aT("onBeforeInput","beforeinput",null,u,J),Q.push({event:Gt,listeners:bt}),Gt.data=At)),rD(Q,s,G,u,J)}XC(Q,o)})}function Hd(s,o,u){return{instance:s,listener:o,currentTarget:u}}function om(s,o){for(var u=o+"Capture",h=[];s!==null;){var v=s,A=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||A===null||(v=ad(s,u),v!=null&&h.unshift(Hd(s,v,A)),v=ad(s,o),v!=null&&h.push(Hd(s,v,A))),s.tag===3)return h;s=s.return}return[]}function _u(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function JC(s,o,u,h,v){for(var A=o._reactName,b=[];u!==null&&u!==h;){var R=u,k=R.alternate,G=R.stateNode;if(R=R.tag,k!==null&&k===h)break;R!==5&&R!==26&&R!==27||G===null||(k=G,v?(G=ad(u,A),G!=null&&b.unshift(Hd(u,G,k))):v||(G=ad(u,A),G!=null&&b.push(Hd(u,G,k)))),u=u.return}b.length!==0&&s.push({event:o,listeners:b})}var dD=/\r\n?/g,fD=/\u0000|\uFFFD/g;function WC(s){return(typeof s=="string"?s:""+s).replace(dD,`
`).replace(fD,"")}function ZC(s,o){return o=WC(o),WC(s)===o}function rm(){}function ce(s,o,u,h,v,A){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||$l(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&$l(s,""+h);break;case"className":fp(s,"class",h);break;case"tabIndex":fp(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":fp(s,u,h);break;case"style":jA(s,h,A);break;case"data":if(o!=="object"){fp(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=mp(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(u==="formAction"?(o!=="input"&&ce(s,o,"name",v.name,v,null),ce(s,o,"formEncType",v.formEncType,v,null),ce(s,o,"formMethod",v.formMethod,v,null),ce(s,o,"formTarget",v.formTarget,v,null)):(ce(s,o,"encType",v.encType,v,null),ce(s,o,"method",v.method,v,null),ce(s,o,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=mp(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=rm);break;case"onScroll":h!=null&&Yt("scroll",s);break;case"onScrollEnd":h!=null&&Yt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=mp(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":Yt("beforetoggle",s),Yt("toggle",s),dp(s,"popover",h);break;case"xlinkActuate":zs(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":zs(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":zs(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":zs(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":zs(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":zs(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":zs(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":zs(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":zs(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":dp(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=G1.get(u)||u,dp(s,u,h))}}function Zv(s,o,u,h,v,A){switch(u){case"style":jA(s,h,A);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=u}}break;case"children":typeof h=="string"?$l(s,h):(typeof h=="number"||typeof h=="bigint")&&$l(s,""+h);break;case"onScroll":h!=null&&Yt("scroll",s);break;case"onScrollEnd":h!=null&&Yt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=rm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!GA.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),A=s[Bn]||null,A=A!=null?A[u]:null,typeof A=="function"&&s.removeEventListener(o,A,v),typeof h=="function")){typeof A!="function"&&A!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,h,v);break t}u in s?s[u]=h:h===!0?s.setAttribute(u,""):dp(s,u,h)}}}function un(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",s),Yt("load",s);var h=!1,v=!1,A;for(A in u)if(u.hasOwnProperty(A)){var b=u[A];if(b!=null)switch(A){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ce(s,o,A,b,u,null)}}v&&ce(s,o,"srcSet",u.srcSet,u,null),h&&ce(s,o,"src",u.src,u,null);return;case"input":Yt("invalid",s);var R=A=b=v=null,k=null,G=null;for(h in u)if(u.hasOwnProperty(h)){var J=u[h];if(J!=null)switch(h){case"name":v=J;break;case"type":b=J;break;case"checked":k=J;break;case"defaultChecked":G=J;break;case"value":A=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,o));break;default:ce(s,o,h,J,u,null)}}JA(s,A,R,k,G,b,v,!1),hp(s);return;case"select":Yt("invalid",s),h=b=A=null;for(v in u)if(u.hasOwnProperty(v)&&(R=u[v],R!=null))switch(v){case"value":A=R;break;case"defaultValue":b=R;break;case"multiple":h=R;default:ce(s,o,v,R,u,null)}o=A,u=b,s.multiple=!!h,o!=null?ql(s,!!h,o,!1):u!=null&&ql(s,!!h,u,!0);return;case"textarea":Yt("invalid",s),A=v=h=null;for(b in u)if(u.hasOwnProperty(b)&&(R=u[b],R!=null))switch(b){case"value":h=R;break;case"defaultValue":v=R;break;case"children":A=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:ce(s,o,b,R,u,null)}ZA(s,h,v,A),hp(s);return;case"option":for(k in u)if(u.hasOwnProperty(k)&&(h=u[k],h!=null))switch(k){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ce(s,o,k,h,u,null)}return;case"dialog":Yt("beforetoggle",s),Yt("toggle",s),Yt("cancel",s),Yt("close",s);break;case"iframe":case"object":Yt("load",s);break;case"video":case"audio":for(h=0;h<Bd.length;h++)Yt(Bd[h],s);break;case"image":Yt("error",s),Yt("load",s);break;case"details":Yt("toggle",s);break;case"embed":case"source":case"link":Yt("error",s),Yt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in u)if(u.hasOwnProperty(G)&&(h=u[G],h!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ce(s,o,G,h,u,null)}return;default:if(hy(o)){for(J in u)u.hasOwnProperty(J)&&(h=u[J],h!==void 0&&Zv(s,o,J,h,u,void 0));return}}for(R in u)u.hasOwnProperty(R)&&(h=u[R],h!=null&&ce(s,o,R,h,u,null))}function hD(s,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,A=null,b=null,R=null,k=null,G=null,J=null;for(X in u){var Q=u[X];if(u.hasOwnProperty(X)&&Q!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=Q;default:h.hasOwnProperty(X)||ce(s,o,X,null,h,Q)}}for(var $ in h){var X=h[$];if(Q=u[$],h.hasOwnProperty($)&&(X!=null||Q!=null))switch($){case"type":A=X;break;case"name":v=X;break;case"checked":G=X;break;case"defaultChecked":J=X;break;case"value":b=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(137,o));break;default:X!==Q&&ce(s,o,$,X,h,Q)}}dy(s,b,R,k,G,J,A,v);return;case"select":X=b=R=$=null;for(A in u)if(k=u[A],u.hasOwnProperty(A)&&k!=null)switch(A){case"value":break;case"multiple":X=k;default:h.hasOwnProperty(A)||ce(s,o,A,null,h,k)}for(v in h)if(A=h[v],k=u[v],h.hasOwnProperty(v)&&(A!=null||k!=null))switch(v){case"value":$=A;break;case"defaultValue":R=A;break;case"multiple":b=A;default:A!==k&&ce(s,o,v,A,h,k)}o=R,u=b,h=X,$!=null?ql(s,!!u,$,!1):!!h!=!!u&&(o!=null?ql(s,!!u,o,!0):ql(s,!!u,u?[]:"",!1));return;case"textarea":X=$=null;for(R in u)if(v=u[R],u.hasOwnProperty(R)&&v!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ce(s,o,R,null,h,v)}for(b in h)if(v=h[b],A=u[b],h.hasOwnProperty(b)&&(v!=null||A!=null))switch(b){case"value":$=v;break;case"defaultValue":X=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==A&&ce(s,o,b,v,h,A)}WA(s,$,X);return;case"option":for(var xt in u)if($=u[xt],u.hasOwnProperty(xt)&&$!=null&&!h.hasOwnProperty(xt))switch(xt){case"selected":s.selected=!1;break;default:ce(s,o,xt,null,h,$)}for(k in h)if($=h[k],X=u[k],h.hasOwnProperty(k)&&$!==X&&($!=null||X!=null))switch(k){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ce(s,o,k,$,h,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in u)$=u[St],u.hasOwnProperty(St)&&$!=null&&!h.hasOwnProperty(St)&&ce(s,o,St,null,h,$);for(G in h)if($=h[G],X=u[G],h.hasOwnProperty(G)&&$!==X&&($!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,o));break;default:ce(s,o,G,$,h,X)}return;default:if(hy(o)){for(var de in u)$=u[de],u.hasOwnProperty(de)&&$!==void 0&&!h.hasOwnProperty(de)&&Zv(s,o,de,void 0,h,$);for(J in h)$=h[J],X=u[J],!h.hasOwnProperty(J)||$===X||$===void 0&&X===void 0||Zv(s,o,J,$,h,X);return}}for(var B in u)$=u[B],u.hasOwnProperty(B)&&$!=null&&!h.hasOwnProperty(B)&&ce(s,o,B,null,h,$);for(Q in h)$=h[Q],X=u[Q],!h.hasOwnProperty(Q)||$===X||$==null&&X==null||ce(s,o,Q,$,h,X)}var Qv=null,jv=null;function lm(s){return s.nodeType===9?s:s.ownerDocument}function QC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jC(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function t0(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var e0=null;function pD(){var s=window.event;return s&&s.type==="popstate"?s===e0?!1:(e0=s,!0):(e0=null,!1)}var tE=typeof setTimeout=="function"?setTimeout:void 0,mD=typeof clearTimeout=="function"?clearTimeout:void 0,eE=typeof Promise=="function"?Promise:void 0,gD=typeof queueMicrotask=="function"?queueMicrotask:typeof eE<"u"?function(s){return eE.resolve(null).then(s).catch(yD)}:tE;function yD(s){setTimeout(function(){throw s})}function ro(s){return s==="head"}function nE(s,o){var u=o,h=0,v=0;do{var A=u.nextSibling;if(s.removeChild(u),A&&A.nodeType===8)if(u=A.data,u==="/$"){if(0<h&&8>h){u=h;var b=s.ownerDocument;if(u&1&&Gd(b.documentElement),u&2&&Gd(b.body),u&4)for(u=b.head,Gd(u),b=u.firstChild;b;){var R=b.nextSibling,k=b.nodeName;b[id]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=R}}if(v===0){s.removeChild(A),Wd(o);return}v--}else u==="$"||u==="$?"||u==="$!"?v++:h=u.charCodeAt(0)-48;else h=0;u=A}while(u);Wd(o)}function n0(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":n0(u),ry(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function vD(s,o,u,h){for(;s.nodeType===1;){var v=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[id])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var A=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=Ki(s.nextSibling),s===null)break}return null}function _D(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Ki(s.nextSibling),s===null))return null;return s}function i0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function AD(s,o){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Ki(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var s0=null;function iE(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}function sE(s,o,u){switch(o=lm(u),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Gd(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ry(s)}var Ni=new Map,aE=new Set;function um(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ia=K.d;K.d={f:TD,r:SD,D:CD,C:ED,L:bD,m:xD,X:MD,S:wD,M:RD};function TD(){var s=ia.f(),o=tm();return s||o}function SD(s){var o=Bl(s);o!==null&&o.tag===5&&o.type==="form"?bS(o):ia.r(s)}var Au=typeof document>"u"?null:document;function oE(s,o,u){var h=Au;if(h&&typeof o=="string"&&o){var v=Ei(o);v='link[rel="'+s+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),aE.has(v)||(aE.add(v),s={rel:s,crossOrigin:u,href:o},h.querySelector(v)===null&&(o=h.createElement("link"),un(o,"link",s),We(o),h.head.appendChild(o)))}}function CD(s){ia.D(s),oE("dns-prefetch",s,null)}function ED(s,o){ia.C(s,o),oE("preconnect",s,o)}function bD(s,o,u){ia.L(s,o,u);var h=Au;if(h&&s&&o){var v='link[rel="preload"][as="'+Ei(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Ei(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Ei(u.imageSizes)+'"]')):v+='[href="'+Ei(s)+'"]';var A=v;switch(o){case"style":A=Tu(s);break;case"script":A=Su(s)}Ni.has(A)||(s=y({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),Ni.set(A,s),h.querySelector(v)!==null||o==="style"&&h.querySelector(zd(A))||o==="script"&&h.querySelector(qd(A))||(o=h.createElement("link"),un(o,"link",s),We(o),h.head.appendChild(o)))}}function xD(s,o){ia.m(s,o);var u=Au;if(u&&s){var h=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Ei(h)+'"][href="'+Ei(s)+'"]',A=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Su(s)}if(!Ni.has(A)&&(s=y({rel:"modulepreload",href:s},o),Ni.set(A,s),u.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(qd(A)))return}h=u.createElement("link"),un(h,"link",s),We(h),u.head.appendChild(h)}}}function wD(s,o,u){ia.S(s,o,u);var h=Au;if(h&&s){var v=Hl(h).hoistableStyles,A=Tu(s);o=o||"default";var b=v.get(A);if(!b){var R={loading:0,preload:null};if(b=h.querySelector(zd(A)))R.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":o},u),(u=Ni.get(A))&&a0(s,u);var k=b=h.createElement("link");We(k),un(k,"link",s),k._p=new Promise(function(G,J){k.onload=G,k.onerror=J}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,cm(b,o,h)}b={type:"stylesheet",instance:b,count:1,state:R},v.set(A,b)}}}function MD(s,o){ia.X(s,o);var u=Au;if(u&&s){var h=Hl(u).hoistableScripts,v=Su(s),A=h.get(v);A||(A=u.querySelector(qd(v)),A||(s=y({src:s,async:!0},o),(o=Ni.get(v))&&o0(s,o),A=u.createElement("script"),We(A),un(A,"link",s),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},h.set(v,A))}}function RD(s,o){ia.M(s,o);var u=Au;if(u&&s){var h=Hl(u).hoistableScripts,v=Su(s),A=h.get(v);A||(A=u.querySelector(qd(v)),A||(s=y({src:s,async:!0,type:"module"},o),(o=Ni.get(v))&&o0(s,o),A=u.createElement("script"),We(A),un(A,"link",s),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},h.set(v,A))}}function rE(s,o,u,h){var v=(v=mt.current)?um(v):null;if(!v)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Tu(u.href),u=Hl(v).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Tu(u.href);var A=Hl(v).hoistableStyles,b=A.get(s);if(b||(v=v.ownerDocument||v,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,b),(A=v.querySelector(zd(s)))&&!A._p&&(b.instance=A,b.state.loading=5),Ni.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ni.set(s,u),A||DD(v,s,u,b.state))),o&&h===null)throw Error(n(528,""));return b}if(o&&h!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Su(u),u=Hl(v).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Tu(s){return'href="'+Ei(s)+'"'}function zd(s){return'link[rel="stylesheet"]['+s+"]"}function lE(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function DD(s,o,u,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),un(o,"link",u),We(o),s.head.appendChild(o))}function Su(s){return'[src="'+Ei(s)+'"]'}function qd(s){return"script[async]"+s}function uE(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+Ei(u.href)+'"]');if(h)return o.instance=h,We(h),h;var v=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),We(h),un(h,"style",v),cm(h,u.precedence,s),o.instance=h;case"stylesheet":v=Tu(u.href);var A=s.querySelector(zd(v));if(A)return o.state.loading|=4,o.instance=A,We(A),A;h=lE(u),(v=Ni.get(v))&&a0(h,v),A=(s.ownerDocument||s).createElement("link"),We(A);var b=A;return b._p=new Promise(function(R,k){b.onload=R,b.onerror=k}),un(A,"link",h),o.state.loading|=4,cm(A,u.precedence,s),o.instance=A;case"script":return A=Su(u.src),(v=s.querySelector(qd(A)))?(o.instance=v,We(v),v):(h=u,(v=Ni.get(A))&&(h=y({},u),o0(h,v)),s=s.ownerDocument||s,v=s.createElement("script"),We(v),un(v,"link",h),s.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,cm(h,u.precedence,s));return o.instance}function cm(s,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,A=v,b=0;b<h.length;b++){var R=h[b];if(R.dataset.precedence===o)A=R;else if(A!==v)break}A?A.parentNode.insertBefore(s,A.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function a0(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function o0(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var dm=null;function cE(s,o,u){if(dm===null){var h=new Map,v=dm=new Map;v.set(u,h)}else v=dm,h=v.get(u),h||(h=new Map,v.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),v=0;v<u.length;v++){var A=u[v];if(!(A[id]||A[gn]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var b=A.getAttribute(o)||"";b=s+b;var R=h.get(b);R?R.push(A):h.set(b,[A])}}return h}function dE(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function ND(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function fE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var $d=null;function ID(){}function LD(s,o,u){if($d===null)throw Error(n(475));var h=$d;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=Tu(u.href),A=s.querySelector(zd(v));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=fm.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=A,We(A);return}A=s.ownerDocument||s,u=lE(u),(v=Ni.get(v))&&a0(u,v),A=A.createElement("link"),We(A);var b=A;b._p=new Promise(function(R,k){b.onload=R,b.onerror=k}),un(A,"link",u),o.instance=A}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=fm.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function kD(){if($d===null)throw Error(n(475));var s=$d;return s.stylesheets&&s.count===0&&r0(s,s.stylesheets),0<s.count?function(o){var u=setTimeout(function(){if(s.stylesheets&&r0(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u)}}:null}function fm(){if(this.count--,this.count===0){if(this.stylesheets)r0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var hm=null;function r0(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,hm=new Map,o.forEach(PD,s),hm=null,fm.call(s))}function PD(s,o){if(!(o.state.loading&4)){var u=hm.get(s);if(u)var h=u.get(null);else{u=new Map,hm.set(s,u);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<v.length;A++){var b=v[A];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(u.set(b.dataset.precedence,b),h=b)}h&&u.set(null,h)}v=o.instance,b=v.getAttribute("data-precedence"),A=u.get(b)||h,A===h&&u.set(null,v),u.set(b,v),this.count++,h=fm.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),A?A.parentNode.insertBefore(v,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),o.state.loading|=4}}var Yd={$$typeof:U,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function FD(s,o,u,h,v,A,b,R){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=iy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iy(0),this.hiddenUpdates=iy(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=A,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function hE(s,o,u,h,v,A,b,R,k,G,J,Q){return s=new FD(s,o,u,b,R,k,G,Q),o=1,A===!0&&(o|=24),A=ei(3,null,null,o),s.current=A,A.stateNode=s,o=Gy(),o.refCount++,s.pooledCache=o,o.refCount++,A.memoizedState={element:h,isDehydrated:u,cache:o},Yy(A),s}function pE(s){return s?(s=jl,s):jl}function mE(s,o,u,h,v,A){v=pE(v),h.context===null?h.context=v:h.pendingContext=v,h=Ka(o),h.payload={element:u},A=A===void 0?null:A,A!==null&&(h.callback=A),u=Ja(s,h,o),u!==null&&(oi(u,s,o),Sd(u,s,o))}function gE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function l0(s,o){gE(s,o),(s=s.alternate)&&gE(s,o)}function yE(s){if(s.tag===13){var o=Ql(s,67108864);o!==null&&oi(o,s,67108864),l0(s,67108864)}}var pm=!0;function UD(s,o,u,h){var v=V.T;V.T=null;var A=K.p;try{K.p=2,u0(s,o,u,h)}finally{K.p=A,V.T=v}}function OD(s,o,u,h){var v=V.T;V.T=null;var A=K.p;try{K.p=8,u0(s,o,u,h)}finally{K.p=A,V.T=v}}function u0(s,o,u,h){if(pm){var v=c0(h);if(v===null)Wv(s,o,h,mm,u),_E(s,h);else if(BD(v,s,o,u,h))h.stopPropagation();else if(_E(s,h),o&4&&-1<VD.indexOf(s)){for(;v!==null;){var A=Bl(v);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var b=tr(A.pendingLanes);if(b!==0){var R=A;for(R.pendingLanes|=2,R.entangledLanes|=2;b;){var k=1<<31-jn(b);R.entanglements[1]|=k,b&=~k}ys(A),(se&6)===0&&(Qp=fs()+500,Vd(0))}}break;case 13:R=Ql(A,2),R!==null&&oi(R,A,2),tm(),l0(A,2)}if(A=c0(h),A===null&&Wv(s,o,h,mm,u),A===v)break;v=A}v!==null&&h.stopPropagation()}else Wv(s,o,h,null,u)}}function c0(s){return s=my(s),d0(s)}var mm=null;function d0(s){if(mm=null,s=Vl(s),s!==null){var o=r(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=l(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return mm=s,null}function vE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(E1()){case IA:return 2;case LA:return 8;case rp:case b1:return 32;case kA:return 268435456;default:return 32}default:return 32}}var f0=!1,lo=null,uo=null,co=null,Xd=new Map,Kd=new Map,fo=[],VD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _E(s,o){switch(s){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":Xd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(o.pointerId)}}function Jd(s,o,u,h,v,A){return s===null||s.nativeEvent!==A?(s={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:A,targetContainers:[v]},o!==null&&(o=Bl(o),o!==null&&yE(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function BD(s,o,u,h,v){switch(o){case"focusin":return lo=Jd(lo,s,o,u,h,v),!0;case"dragenter":return uo=Jd(uo,s,o,u,h,v),!0;case"mouseover":return co=Jd(co,s,o,u,h,v),!0;case"pointerover":var A=v.pointerId;return Xd.set(A,Jd(Xd.get(A)||null,s,o,u,h,v)),!0;case"gotpointercapture":return A=v.pointerId,Kd.set(A,Jd(Kd.get(A)||null,s,o,u,h,v)),!0}return!1}function AE(s){var o=Vl(s.target);if(o!==null){var u=r(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){s.blockedOn=o,L1(s.priority,function(){if(u.tag===13){var h=ai();h=sy(h);var v=Ql(u,h);v!==null&&oi(v,u,h),l0(u,h)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function gm(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=c0(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);py=h,u.target.dispatchEvent(h),py=null}else return o=Bl(u),o!==null&&yE(o),s.blockedOn=u,!1;o.shift()}return!0}function TE(s,o,u){gm(s)&&u.delete(o)}function HD(){f0=!1,lo!==null&&gm(lo)&&(lo=null),uo!==null&&gm(uo)&&(uo=null),co!==null&&gm(co)&&(co=null),Xd.forEach(TE),Kd.forEach(TE)}function ym(s,o){s.blockedOn===o&&(s.blockedOn=null,f0||(f0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,HD)))}var vm=null;function SE(s){vm!==s&&(vm=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){vm===s&&(vm=null);for(var o=0;o<s.length;o+=3){var u=s[o],h=s[o+1],v=s[o+2];if(typeof h!="function"){if(d0(h||u)===null)continue;break}var A=Bl(u);A!==null&&(s.splice(o,3),o-=3,dv(A,{pending:!0,data:v,method:u.method,action:h},h,v))}}))}function Wd(s){function o(k){return ym(k,s)}lo!==null&&ym(lo,s),uo!==null&&ym(uo,s),co!==null&&ym(co,s),Xd.forEach(o),Kd.forEach(o);for(var u=0;u<fo.length;u++){var h=fo[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<fo.length&&(u=fo[0],u.blockedOn===null);)AE(u),u.blockedOn===null&&fo.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var v=u[h],A=u[h+1],b=v[Bn]||null;if(typeof A=="function")b||SE(u);else if(b){var R=null;if(A&&A.hasAttribute("formAction")){if(v=A,b=A[Bn]||null)R=b.formAction;else if(d0(v)!==null)continue}else R=b.action;typeof R=="function"?u[h+1]=R:(u.splice(h,3),h-=3),SE(u)}}}function h0(s){this._internalRoot=s}_m.prototype.render=h0.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,h=ai();mE(u,h,s,o,null,null)},_m.prototype.unmount=h0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;mE(s.current,2,null,s,null,null),tm(),o[Ol]=null}};function _m(s){this._internalRoot=s}_m.prototype.unstable_scheduleHydration=function(s){if(s){var o=VA();s={blockedOn:null,target:s,priority:o};for(var u=0;u<fo.length&&o!==0&&o<fo[u].priority;u++);fo.splice(u,0,s),u===0&&AE(s)}};var CE=t.version;if(CE!=="19.1.0")throw Error(n(527,CE,"19.1.0"));K.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=p(o),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var GD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Am=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Am.isDisabled&&Am.supportsFiber)try{td=Am.inject(GD),Qn=Am}catch{}}return Qd.createRoot=function(s,o){if(!a(s))throw Error(n(299));var u=!1,h="",v=VS,A=BS,b=HS,R=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks)),o=hE(s,1,!1,null,null,u,h,v,A,b,R,null),s[Ol]=o.current,Jv(s),new h0(o)},Qd.hydrateRoot=function(s,o,u){if(!a(s))throw Error(n(299));var h=!1,v="",A=VS,b=BS,R=HS,k=null,G=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(b=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(k=u.unstable_transitionCallbacks),u.formState!==void 0&&(G=u.formState)),o=hE(s,1,!0,o,u??null,h,v,A,b,R,k,G),o.context=pE(null),u=o.current,h=ai(),h=sy(h),v=Ka(h),v.callback=null,Ja(u,v,h),u=h,o.current.lanes=u,nd(o,u),ys(o),s[Ol]=o.current,Jv(s),new _m(o)},Qd.version="19.1.0",Qd}var kE;function eN(){if(kE)return y0.exports;kE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),y0.exports=tN(),y0.exports}var nN=eN();const iN=Fx(nN),D0=[{name:"Hacker Mode",classes:{bg:"bg-gray-900",text:"text-green-400",primary:"bg-green-500",primaryText:"text-gray-900",secondaryBg:"bg-gray-800",secondaryText:"text-gray-300",accent:"hover:bg-green-600",accentText:"text-green-400",border:"border-gray-700",font:"font-mono"}},{name:"Terminal Green",classes:{bg:"bg-black",text:"text-lime-400",primary:"bg-lime-500",primaryText:"text-black",secondaryBg:"bg-gray-900",secondaryText:"text-gray-200",accent:"hover:bg-lime-600",accentText:"text-lime-400",border:"border-gray-800",font:"font-mono"}},{name:"Code Matrix",classes:{bg:"bg-[#0D0208]",text:"text-[#00FF41]",primary:"bg-[#00FF41]",primaryText:"text-[#0D0208]",secondaryBg:"bg-[#0a0106]",secondaryText:"text-[#a4ffb9]",accent:"hover:bg-[#03d437]",accentText:"text-[#00FF41]",border:"border-[#00FF41]/20",font:"font-mono"}},{name:"Dev Night",classes:{bg:"bg-slate-900",text:"text-sky-300",primary:"bg-sky-500",primaryText:"text-slate-900",secondaryBg:"bg-slate-800",secondaryText:"text-slate-300",accent:"hover:bg-sky-600",accentText:"text-sky-300",border:"border-slate-700",font:"font-sans"}}],sN="Hi, Im DevTalk, your developer-focused AI assistant. Im powered by Gemini (by Google) and crafted with passion by Shivanshu, an engineering student whos curious about AI, ML, and building real-life problem solvers. You must answer questions with a focus on software development, coding, and related technologies. When asked about your identity, you must use the introduction I provided. Format code snippets in markdown blocks.",og=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const t=Math.random()*16|0;return(i==="x"?t:t&3|8).toString(16)});var jt;(function(i){i.assertEqual=a=>{};function t(a){}i.assertIs=t;function e(a){throw new Error}i.assertNever=e,i.arrayToEnum=a=>{const r={};for(const l of a)r[l]=l;return r},i.getValidEnumValues=a=>{const r=i.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),l={};for(const c of r)l[c]=a[c];return i.objectValues(l)},i.objectValues=a=>i.objectKeys(a).map(function(r){return a[r]}),i.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const r=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&r.push(l);return r},i.find=(a,r)=>{for(const l of a)if(r(l))return l},i.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,r=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(r)}i.joinValues=n,i.jsonStringifyReplacer=(a,r)=>typeof r=="bigint"?r.toString():r})(jt||(jt={}));var PE;(function(i){i.mergeShapes=(t,e)=>({...t,...e})})(PE||(PE={}));const ft=jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mo=i=>{switch(typeof i){case"undefined":return ft.undefined;case"string":return ft.string;case"number":return Number.isNaN(i)?ft.nan:ft.number;case"boolean":return ft.boolean;case"function":return ft.function;case"bigint":return ft.bigint;case"symbol":return ft.symbol;case"object":return Array.isArray(i)?ft.array:i===null?ft.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?ft.promise:typeof Map<"u"&&i instanceof Map?ft.map:typeof Set<"u"&&i instanceof Set?ft.set:typeof Date<"u"&&i instanceof Date?ft.date:ft.object;default:return ft.unknown}},nt=jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ua extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(r){return r.message},n={_errors:[]},a=r=>{for(const l of r.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)n._errors.push(e(l));else{let c=n,p=0;for(;p<l.path.length;){const m=l.path[p];p===l.path.length-1?(c[m]=c[m]||{_errors:[]},c[m]._errors.push(e(l))):c[m]=c[m]||{_errors:[]},c=c[m],p++}}};return a(this),n}static assert(t){if(!(t instanceof Ua))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){const e={},n=[];for(const a of this.issues)if(a.path.length>0){const r=a.path[0];e[r]=e[r]||[],e[r].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}}Ua.create=i=>new Ua(i);const N0=(i,t)=>{let e;switch(i.code){case nt.invalid_type:i.received===ft.undefined?e="Required":e=`Expected ${i.expected}, received ${i.received}`;break;case nt.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(i.expected,jt.jsonStringifyReplacer)}`;break;case nt.unrecognized_keys:e=`Unrecognized key(s) in object: ${jt.joinValues(i.keys,", ")}`;break;case nt.invalid_union:e="Invalid input";break;case nt.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${jt.joinValues(i.options)}`;break;case nt.invalid_enum_value:e=`Invalid enum value. Expected ${jt.joinValues(i.options)}, received '${i.received}'`;break;case nt.invalid_arguments:e="Invalid function arguments";break;case nt.invalid_return_type:e="Invalid function return type";break;case nt.invalid_date:e="Invalid date";break;case nt.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(e=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?e=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?e=`Invalid input: must end with "${i.validation.endsWith}"`:jt.assertNever(i.validation):i.validation!=="regex"?e=`Invalid ${i.validation}`:e="Invalid";break;case nt.too_small:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="bigint"?e=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:e="Invalid input";break;case nt.too_big:i.type==="array"?e=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?e=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?e=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?e=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?e=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:e="Invalid input";break;case nt.custom:e="Invalid input";break;case nt.invalid_intersection_types:e="Intersection results could not be merged";break;case nt.not_multiple_of:e=`Number must be a multiple of ${i.multipleOf}`;break;case nt.not_finite:e="Number must be finite";break;default:e=t.defaultError,jt.assertNever(i)}return{message:e}};let aN=N0;function oN(){return aN}const rN=i=>{const{data:t,path:e,errorMaps:n,issueData:a}=i,r=[...e,...a.path||[]],l={...a,path:r};if(a.message!==void 0)return{...a,path:r,message:a.message};let c="";const p=n.filter(m=>!!m).slice().reverse();for(const m of p)c=m(l,{data:t,defaultError:c}).message;return{...a,path:r,message:c}};function rt(i,t){const e=oN(),n=rN({issueData:t,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,e,e===N0?void 0:N0].filter(a=>!!a)});i.common.issues.push(n)}class Vn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){const n=[];for(const a of e){if(a.status==="aborted")return Rt;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,e){const n=[];for(const a of e){const r=await a.key,l=await a.value;n.push({key:r,value:l})}return Vn.mergeObjectSync(t,n)}static mergeObjectSync(t,e){const n={};for(const a of e){const{key:r,value:l}=a;if(r.status==="aborted"||l.status==="aborted")return Rt;r.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),r.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(n[r.value]=l.value)}return{status:t.value,value:n}}}const Rt=Object.freeze({status:"aborted"}),af=i=>({status:"dirty",value:i}),qi=i=>({status:"valid",value:i}),FE=i=>i.status==="aborted",UE=i=>i.status==="dirty",qc=i=>i.status==="valid",rg=i=>typeof Promise<"u"&&i instanceof Promise;var pt;(function(i){i.errToObj=t=>typeof t=="string"?{message:t}:t||{},i.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(pt||(pt={}));class Hs{constructor(t,e,n,a){this._cachedPath=[],this.parent=t,this.data=e,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const OE=(i,t)=>{if(qc(t))return{success:!0,data:t.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new Ua(i.common.issues);return this._error=e,this._error}}};function Ut(i){if(!i)return{};const{errorMap:t,invalid_type_error:e,required_error:n,description:a}=i;if(t&&(e||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(l,c)=>{const{message:p}=i;return l.code==="invalid_enum_value"?{message:p??c.defaultError}:typeof c.data>"u"?{message:p??n??c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:p??e??c.defaultError}},description:a}}class Kt{get description(){return this._def.description}_getType(t){return mo(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:mo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Vn,ctx:{common:t.parent.common,data:t.data,parsedType:mo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(rg(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const n=this.safeParse(t,e);if(n.success)return n.data;throw n.error}safeParse(t,e){const n={common:{issues:[],async:(e==null?void 0:e.async)??!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mo(t)},a=this._parseSync({data:t,path:n.path,parent:n});return OE(n,a)}"~validate"(t){var n,a;const e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mo(t)};if(!this["~standard"].async)try{const r=this._parseSync({data:t,path:[],parent:e});return qc(r)?{value:r.value}:{issues:e.common.issues}}catch(r){(a=(n=r==null?void 0:r.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:e}).then(r=>qc(r)?{value:r.value}:{issues:e.common.issues})}async parseAsync(t,e){const n=await this.safeParseAsync(t,e);if(n.success)return n.data;throw n.error}async safeParseAsync(t,e){const n={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mo(t)},a=this._parse({data:t,path:n.path,parent:n}),r=await(rg(a)?a:Promise.resolve(a));return OE(n,r)}refine(t,e){const n=a=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(a):e;return this._refinement((a,r)=>{const l=t(a),c=()=>r.addIssue({code:nt.custom,...n(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(p=>p?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(t,e){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof e=="function"?e(n,a):e),!1))}_refinement(t){return new Xc({schema:this,typeName:wt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Xo.create(this,this._def)}nullable(){return Kc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Bs.create(this)}promise(){return fg.create(this,this._def)}or(t){return ug.create([this,t],this._def)}and(t){return cg.create(this,t,this._def)}transform(t){return new Xc({...Ut(this._def),schema:this,typeName:wt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new P0({...Ut(this._def),innerType:this,defaultValue:e,typeName:wt.ZodDefault})}brand(){return new DN({typeName:wt.ZodBranded,type:this,...Ut(this._def)})}catch(t){const e=typeof t=="function"?t:()=>t;return new F0({...Ut(this._def),innerType:this,catchValue:e,typeName:wt.ZodCatch})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}pipe(t){return cA.create(this,t)}readonly(){return U0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const lN=/^c[^\s-]{8,}$/i,uN=/^[0-9a-z]+$/,cN=/^[0-9A-HJKMNP-TV-Z]{26}$/i,dN=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fN=/^[a-z0-9_-]{21}$/i,hN=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,pN=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,mN=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,gN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let T0;const yN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,vN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_N=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,AN=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,TN=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,SN=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ux="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",CN=new RegExp(`^${Ux}$`);function Ox(i){let t="[0-5]\\d";i.precision?t=`${t}\\.\\d{${i.precision}}`:i.precision==null&&(t=`${t}(\\.\\d+)?`);const e=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e}`}function EN(i){return new RegExp(`^${Ox(i)}$`)}function bN(i){let t=`${Ux}T${Ox(i)}`;const e=[];return e.push(i.local?"Z?":"Z"),i.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function xN(i,t){return!!((t==="v4"||!t)&&yN.test(i)||(t==="v6"||!t)&&_N.test(i))}function wN(i,t){if(!hN.test(i))return!1;try{const[e]=i.split(".");if(!e)return!1;const n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function MN(i,t){return!!((t==="v4"||!t)&&vN.test(i)||(t==="v6"||!t)&&AN.test(i))}class Os extends Kt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ft.string){const r=this._getOrReturnCtx(t);return rt(r,{code:nt.invalid_type,expected:ft.string,received:r.parsedType}),Rt}const n=new Vn;let a;for(const r of this._def.checks)if(r.kind==="min")t.data.length<r.value&&(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="max")t.data.length>r.value&&(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="length"){const l=t.data.length>r.value,c=t.data.length<r.value;(l||c)&&(a=this._getOrReturnCtx(t,a),l?rt(a,{code:nt.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):c&&rt(a,{code:nt.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if(r.kind==="email")mN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"email",code:nt.invalid_string,message:r.message}),n.dirty());else if(r.kind==="emoji")T0||(T0=new RegExp(gN,"u")),T0.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"emoji",code:nt.invalid_string,message:r.message}),n.dirty());else if(r.kind==="uuid")dN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"uuid",code:nt.invalid_string,message:r.message}),n.dirty());else if(r.kind==="nanoid")fN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"nanoid",code:nt.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid")lN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"cuid",code:nt.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid2")uN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"cuid2",code:nt.invalid_string,message:r.message}),n.dirty());else if(r.kind==="ulid")cN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"ulid",code:nt.invalid_string,message:r.message}),n.dirty());else if(r.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),rt(a,{validation:"url",code:nt.invalid_string,message:r.message}),n.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"regex",code:nt.invalid_string,message:r.message}),n.dirty())):r.kind==="trim"?t.data=t.data.trim():r.kind==="includes"?t.data.includes(r.value,r.position)||(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty()):r.kind==="toLowerCase"?t.data=t.data.toLowerCase():r.kind==="toUpperCase"?t.data=t.data.toUpperCase():r.kind==="startsWith"?t.data.startsWith(r.value)||(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty()):r.kind==="endsWith"?t.data.endsWith(r.value)||(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty()):r.kind==="datetime"?bN(r).test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.invalid_string,validation:"datetime",message:r.message}),n.dirty()):r.kind==="date"?CN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.invalid_string,validation:"date",message:r.message}),n.dirty()):r.kind==="time"?EN(r).test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.invalid_string,validation:"time",message:r.message}),n.dirty()):r.kind==="duration"?pN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"duration",code:nt.invalid_string,message:r.message}),n.dirty()):r.kind==="ip"?xN(t.data,r.version)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"ip",code:nt.invalid_string,message:r.message}),n.dirty()):r.kind==="jwt"?wN(t.data,r.alg)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"jwt",code:nt.invalid_string,message:r.message}),n.dirty()):r.kind==="cidr"?MN(t.data,r.version)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"cidr",code:nt.invalid_string,message:r.message}),n.dirty()):r.kind==="base64"?TN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"base64",code:nt.invalid_string,message:r.message}),n.dirty()):r.kind==="base64url"?SN.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"base64url",code:nt.invalid_string,message:r.message}),n.dirty()):jt.assertNever(r);return{status:n.value,value:t.data}}_regex(t,e,n){return this.refinement(a=>t.test(a),{validation:e,code:nt.invalid_string,...pt.errToObj(n)})}_addCheck(t){return new Os({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...pt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...pt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...pt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...pt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...pt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...pt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...pt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...pt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...pt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...pt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...pt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...pt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...pt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...pt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...pt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...pt.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...pt.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e==null?void 0:e.position,...pt.errToObj(e==null?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...pt.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...pt.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...pt.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...pt.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...pt.errToObj(e)})}nonempty(t){return this.min(1,pt.errToObj(t))}trim(){return new Os({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Os({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Os({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}Os.create=i=>new Os({checks:[],typeName:wt.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...Ut(i)});function RN(i,t){const e=(i.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=e>n?e:n,r=Number.parseInt(i.toFixed(a).replace(".","")),l=Number.parseInt(t.toFixed(a).replace(".",""));return r%l/10**a}class Ml extends Kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ft.number){const r=this._getOrReturnCtx(t);return rt(r,{code:nt.invalid_type,expected:ft.number,received:r.parsedType}),Rt}let n;const a=new Vn;for(const r of this._def.checks)r.kind==="int"?jt.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),rt(n,{code:nt.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):r.kind==="min"?(r.inclusive?t.data<r.value:t.data<=r.value)&&(n=this._getOrReturnCtx(t,n),rt(n,{code:nt.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?t.data>r.value:t.data>=r.value)&&(n=this._getOrReturnCtx(t,n),rt(n,{code:nt.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="multipleOf"?RN(t.data,r.value)!==0&&(n=this._getOrReturnCtx(t,n),rt(n,{code:nt.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):r.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),rt(n,{code:nt.not_finite,message:r.message}),a.dirty()):jt.assertNever(r);return{status:a.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,pt.toString(e))}gt(t,e){return this.setLimit("min",t,!1,pt.toString(e))}lte(t,e){return this.setLimit("max",t,!0,pt.toString(e))}lt(t,e){return this.setLimit("max",t,!1,pt.toString(e))}setLimit(t,e,n,a){return new Ml({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:pt.toString(a)}]})}_addCheck(t){return new Ml({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:pt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pt.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:pt.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:pt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pt.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&jt.isInteger(t.value))}get isFinite(){let t=null,e=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(e===null||n.value>e)&&(e=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(e)&&Number.isFinite(t)}}Ml.create=i=>new Ml({checks:[],typeName:wt.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...Ut(i)});class Rl extends Kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ft.bigint)return this._getInvalidInput(t);let n;const a=new Vn;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?t.data<r.value:t.data<=r.value)&&(n=this._getOrReturnCtx(t,n),rt(n,{code:nt.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?t.data>r.value:t.data>=r.value)&&(n=this._getOrReturnCtx(t,n),rt(n,{code:nt.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="multipleOf"?t.data%r.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),rt(n,{code:nt.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):jt.assertNever(r);return{status:a.value,value:t.data}}_getInvalidInput(t){const e=this._getOrReturnCtx(t);return rt(e,{code:nt.invalid_type,expected:ft.bigint,received:e.parsedType}),Rt}gte(t,e){return this.setLimit("min",t,!0,pt.toString(e))}gt(t,e){return this.setLimit("min",t,!1,pt.toString(e))}lte(t,e){return this.setLimit("max",t,!0,pt.toString(e))}lt(t,e){return this.setLimit("max",t,!1,pt.toString(e))}setLimit(t,e,n,a){return new Rl({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:pt.toString(a)}]})}_addCheck(t){return new Rl({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pt.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:pt.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}Rl.create=i=>new Rl({checks:[],typeName:wt.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...Ut(i)});class lg extends Kt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ft.boolean){const n=this._getOrReturnCtx(t);return rt(n,{code:nt.invalid_type,expected:ft.boolean,received:n.parsedType}),Rt}return qi(t.data)}}lg.create=i=>new lg({typeName:wt.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...Ut(i)});class $c extends Kt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ft.date){const r=this._getOrReturnCtx(t);return rt(r,{code:nt.invalid_type,expected:ft.date,received:r.parsedType}),Rt}if(Number.isNaN(t.data.getTime())){const r=this._getOrReturnCtx(t);return rt(r,{code:nt.invalid_date}),Rt}const n=new Vn;let a;for(const r of this._def.checks)r.kind==="min"?t.data.getTime()<r.value&&(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):r.kind==="max"?t.data.getTime()>r.value&&(a=this._getOrReturnCtx(t,a),rt(a,{code:nt.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):jt.assertNever(r);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new $c({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:pt.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:pt.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}}$c.create=i=>new $c({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:wt.ZodDate,...Ut(i)});class VE extends Kt{_parse(t){if(this._getType(t)!==ft.symbol){const n=this._getOrReturnCtx(t);return rt(n,{code:nt.invalid_type,expected:ft.symbol,received:n.parsedType}),Rt}return qi(t.data)}}VE.create=i=>new VE({typeName:wt.ZodSymbol,...Ut(i)});class BE extends Kt{_parse(t){if(this._getType(t)!==ft.undefined){const n=this._getOrReturnCtx(t);return rt(n,{code:nt.invalid_type,expected:ft.undefined,received:n.parsedType}),Rt}return qi(t.data)}}BE.create=i=>new BE({typeName:wt.ZodUndefined,...Ut(i)});class HE extends Kt{_parse(t){if(this._getType(t)!==ft.null){const n=this._getOrReturnCtx(t);return rt(n,{code:nt.invalid_type,expected:ft.null,received:n.parsedType}),Rt}return qi(t.data)}}HE.create=i=>new HE({typeName:wt.ZodNull,...Ut(i)});class GE extends Kt{constructor(){super(...arguments),this._any=!0}_parse(t){return qi(t.data)}}GE.create=i=>new GE({typeName:wt.ZodAny,...Ut(i)});class I0 extends Kt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return qi(t.data)}}I0.create=i=>new I0({typeName:wt.ZodUnknown,...Ut(i)});class Jo extends Kt{_parse(t){const e=this._getOrReturnCtx(t);return rt(e,{code:nt.invalid_type,expected:ft.never,received:e.parsedType}),Rt}}Jo.create=i=>new Jo({typeName:wt.ZodNever,...Ut(i)});class zE extends Kt{_parse(t){if(this._getType(t)!==ft.undefined){const n=this._getOrReturnCtx(t);return rt(n,{code:nt.invalid_type,expected:ft.void,received:n.parsedType}),Rt}return qi(t.data)}}zE.create=i=>new zE({typeName:wt.ZodVoid,...Ut(i)});class Bs extends Kt{_parse(t){const{ctx:e,status:n}=this._processInputParams(t),a=this._def;if(e.parsedType!==ft.array)return rt(e,{code:nt.invalid_type,expected:ft.array,received:e.parsedType}),Rt;if(a.exactLength!==null){const l=e.data.length>a.exactLength.value,c=e.data.length<a.exactLength.value;(l||c)&&(rt(e,{code:l?nt.too_big:nt.too_small,minimum:c?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&e.data.length<a.minLength.value&&(rt(e,{code:nt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&e.data.length>a.maxLength.value&&(rt(e,{code:nt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),e.common.async)return Promise.all([...e.data].map((l,c)=>a.type._parseAsync(new Hs(e,l,e.path,c)))).then(l=>Vn.mergeArray(n,l));const r=[...e.data].map((l,c)=>a.type._parseSync(new Hs(e,l,e.path,c)));return Vn.mergeArray(n,r)}get element(){return this._def.type}min(t,e){return new Bs({...this._def,minLength:{value:t,message:pt.toString(e)}})}max(t,e){return new Bs({...this._def,maxLength:{value:t,message:pt.toString(e)}})}length(t,e){return new Bs({...this._def,exactLength:{value:t,message:pt.toString(e)}})}nonempty(t){return this.min(1,t)}}Bs.create=(i,t)=>new Bs({type:i,minLength:null,maxLength:null,exactLength:null,typeName:wt.ZodArray,...Ut(t)});function Eu(i){if(i instanceof Be){const t={};for(const e in i.shape){const n=i.shape[e];t[e]=Xo.create(Eu(n))}return new Be({...i._def,shape:()=>t})}else return i instanceof Bs?new Bs({...i._def,type:Eu(i.element)}):i instanceof Xo?Xo.create(Eu(i.unwrap())):i instanceof Kc?Kc.create(Eu(i.unwrap())):i instanceof Dl?Dl.create(i.items.map(t=>Eu(t))):i}class Be extends Kt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),e=jt.objectKeys(t);return this._cached={shape:t,keys:e},this._cached}_parse(t){if(this._getType(t)!==ft.object){const m=this._getOrReturnCtx(t);return rt(m,{code:nt.invalid_type,expected:ft.object,received:m.parsedType}),Rt}const{status:n,ctx:a}=this._processInputParams(t),{shape:r,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof Jo&&this._def.unknownKeys==="strip"))for(const m in a.data)l.includes(m)||c.push(m);const p=[];for(const m of l){const y=r[m],_=a.data[m];p.push({key:{status:"valid",value:m},value:y._parse(new Hs(a,_,a.path,m)),alwaysSet:m in a.data})}if(this._def.catchall instanceof Jo){const m=this._def.unknownKeys;if(m==="passthrough")for(const y of c)p.push({key:{status:"valid",value:y},value:{status:"valid",value:a.data[y]}});else if(m==="strict")c.length>0&&(rt(a,{code:nt.unrecognized_keys,keys:c}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const y of c){const _=a.data[y];p.push({key:{status:"valid",value:y},value:m._parse(new Hs(a,_,a.path,y)),alwaysSet:y in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const m=[];for(const y of p){const _=await y.key,T=await y.value;m.push({key:_,value:T,alwaysSet:y.alwaysSet})}return m}).then(m=>Vn.mergeObjectSync(n,m)):Vn.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(t){return pt.errToObj,new Be({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,n)=>{var r,l;const a=((l=(r=this._def).errorMap)==null?void 0:l.call(r,e,n).message)??n.defaultError;return e.code==="unrecognized_keys"?{message:pt.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Be({...this._def,unknownKeys:"strip"})}passthrough(){return new Be({...this._def,unknownKeys:"passthrough"})}extend(t){return new Be({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Be({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:wt.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new Be({...this._def,catchall:t})}pick(t){const e={};for(const n of jt.objectKeys(t))t[n]&&this.shape[n]&&(e[n]=this.shape[n]);return new Be({...this._def,shape:()=>e})}omit(t){const e={};for(const n of jt.objectKeys(this.shape))t[n]||(e[n]=this.shape[n]);return new Be({...this._def,shape:()=>e})}deepPartial(){return Eu(this)}partial(t){const e={};for(const n of jt.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?e[n]=a:e[n]=a.optional()}return new Be({...this._def,shape:()=>e})}required(t){const e={};for(const n of jt.objectKeys(this.shape))if(t&&!t[n])e[n]=this.shape[n];else{let r=this.shape[n];for(;r instanceof Xo;)r=r._def.innerType;e[n]=r}return new Be({...this._def,shape:()=>e})}keyof(){return Vx(jt.objectKeys(this.shape))}}Be.create=(i,t)=>new Be({shape:()=>i,unknownKeys:"strip",catchall:Jo.create(),typeName:wt.ZodObject,...Ut(t)});Be.strictCreate=(i,t)=>new Be({shape:()=>i,unknownKeys:"strict",catchall:Jo.create(),typeName:wt.ZodObject,...Ut(t)});Be.lazycreate=(i,t)=>new Be({shape:i,unknownKeys:"strip",catchall:Jo.create(),typeName:wt.ZodObject,...Ut(t)});class ug extends Kt{_parse(t){const{ctx:e}=this._processInputParams(t),n=this._def.options;function a(r){for(const c of r)if(c.result.status==="valid")return c.result;for(const c of r)if(c.result.status==="dirty")return e.common.issues.push(...c.ctx.common.issues),c.result;const l=r.map(c=>new Ua(c.ctx.common.issues));return rt(e,{code:nt.invalid_union,unionErrors:l}),Rt}if(e.common.async)return Promise.all(n.map(async r=>{const l={...e,common:{...e.common,issues:[]},parent:null};return{result:await r._parseAsync({data:e.data,path:e.path,parent:l}),ctx:l}})).then(a);{let r;const l=[];for(const p of n){const m={...e,common:{...e.common,issues:[]},parent:null},y=p._parseSync({data:e.data,path:e.path,parent:m});if(y.status==="valid")return y;y.status==="dirty"&&!r&&(r={result:y,ctx:m}),m.common.issues.length&&l.push(m.common.issues)}if(r)return e.common.issues.push(...r.ctx.common.issues),r.result;const c=l.map(p=>new Ua(p));return rt(e,{code:nt.invalid_union,unionErrors:c}),Rt}}get options(){return this._def.options}}ug.create=(i,t)=>new ug({options:i,typeName:wt.ZodUnion,...Ut(t)});function L0(i,t){const e=mo(i),n=mo(t);if(i===t)return{valid:!0,data:i};if(e===ft.object&&n===ft.object){const a=jt.objectKeys(t),r=jt.objectKeys(i).filter(c=>a.indexOf(c)!==-1),l={...i,...t};for(const c of r){const p=L0(i[c],t[c]);if(!p.valid)return{valid:!1};l[c]=p.data}return{valid:!0,data:l}}else if(e===ft.array&&n===ft.array){if(i.length!==t.length)return{valid:!1};const a=[];for(let r=0;r<i.length;r++){const l=i[r],c=t[r],p=L0(l,c);if(!p.valid)return{valid:!1};a.push(p.data)}return{valid:!0,data:a}}else return e===ft.date&&n===ft.date&&+i==+t?{valid:!0,data:i}:{valid:!1}}class cg extends Kt{_parse(t){const{status:e,ctx:n}=this._processInputParams(t),a=(r,l)=>{if(FE(r)||FE(l))return Rt;const c=L0(r.value,l.value);return c.valid?((UE(r)||UE(l))&&e.dirty(),{status:e.value,value:c.data}):(rt(n,{code:nt.invalid_intersection_types}),Rt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([r,l])=>a(r,l)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}cg.create=(i,t,e)=>new cg({left:i,right:t,typeName:wt.ZodIntersection,...Ut(e)});class Dl extends Kt{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==ft.array)return rt(n,{code:nt.invalid_type,expected:ft.array,received:n.parsedType}),Rt;if(n.data.length<this._def.items.length)return rt(n,{code:nt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Rt;!this._def.rest&&n.data.length>this._def.items.length&&(rt(n,{code:nt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const r=[...n.data].map((l,c)=>{const p=this._def.items[c]||this._def.rest;return p?p._parse(new Hs(n,l,n.path,c)):null}).filter(l=>!!l);return n.common.async?Promise.all(r).then(l=>Vn.mergeArray(e,l)):Vn.mergeArray(e,r)}get items(){return this._def.items}rest(t){return new Dl({...this._def,rest:t})}}Dl.create=(i,t)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dl({items:i,typeName:wt.ZodTuple,rest:null,...Ut(t)})};class dg extends Kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==ft.object)return rt(n,{code:nt.invalid_type,expected:ft.object,received:n.parsedType}),Rt;const a=[],r=this._def.keyType,l=this._def.valueType;for(const c in n.data)a.push({key:r._parse(new Hs(n,c,n.path,c)),value:l._parse(new Hs(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Vn.mergeObjectAsync(e,a):Vn.mergeObjectSync(e,a)}get element(){return this._def.valueType}static create(t,e,n){return e instanceof Kt?new dg({keyType:t,valueType:e,typeName:wt.ZodRecord,...Ut(n)}):new dg({keyType:Os.create(),valueType:t,typeName:wt.ZodRecord,...Ut(e)})}}class qE extends Kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==ft.map)return rt(n,{code:nt.invalid_type,expected:ft.map,received:n.parsedType}),Rt;const a=this._def.keyType,r=this._def.valueType,l=[...n.data.entries()].map(([c,p],m)=>({key:a._parse(new Hs(n,c,n.path,[m,"key"])),value:r._parse(new Hs(n,p,n.path,[m,"value"]))}));if(n.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const p of l){const m=await p.key,y=await p.value;if(m.status==="aborted"||y.status==="aborted")return Rt;(m.status==="dirty"||y.status==="dirty")&&e.dirty(),c.set(m.value,y.value)}return{status:e.value,value:c}})}else{const c=new Map;for(const p of l){const m=p.key,y=p.value;if(m.status==="aborted"||y.status==="aborted")return Rt;(m.status==="dirty"||y.status==="dirty")&&e.dirty(),c.set(m.value,y.value)}return{status:e.value,value:c}}}}qE.create=(i,t,e)=>new qE({valueType:t,keyType:i,typeName:wt.ZodMap,...Ut(e)});class xf extends Kt{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==ft.set)return rt(n,{code:nt.invalid_type,expected:ft.set,received:n.parsedType}),Rt;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(rt(n,{code:nt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),e.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(rt(n,{code:nt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),e.dirty());const r=this._def.valueType;function l(p){const m=new Set;for(const y of p){if(y.status==="aborted")return Rt;y.status==="dirty"&&e.dirty(),m.add(y.value)}return{status:e.value,value:m}}const c=[...n.data.values()].map((p,m)=>r._parse(new Hs(n,p,n.path,m)));return n.common.async?Promise.all(c).then(p=>l(p)):l(c)}min(t,e){return new xf({...this._def,minSize:{value:t,message:pt.toString(e)}})}max(t,e){return new xf({...this._def,maxSize:{value:t,message:pt.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}xf.create=(i,t)=>new xf({valueType:i,minSize:null,maxSize:null,typeName:wt.ZodSet,...Ut(t)});class k0 extends Kt{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}k0.create=(i,t)=>new k0({getter:i,typeName:wt.ZodLazy,...Ut(t)});class $E extends Kt{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return rt(e,{received:e.data,code:nt.invalid_literal,expected:this._def.value}),Rt}return{status:"valid",value:t.data}}get value(){return this._def.value}}$E.create=(i,t)=>new $E({value:i,typeName:wt.ZodLiteral,...Ut(t)});function Vx(i,t){return new Yc({values:i,typeName:wt.ZodEnum,...Ut(t)})}class Yc extends Kt{_parse(t){if(typeof t.data!="string"){const e=this._getOrReturnCtx(t),n=this._def.values;return rt(e,{expected:jt.joinValues(n),received:e.parsedType,code:nt.invalid_type}),Rt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const e=this._getOrReturnCtx(t),n=this._def.values;return rt(e,{received:e.data,code:nt.invalid_enum_value,options:n}),Rt}return qi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return Yc.create(t,{...this._def,...e})}exclude(t,e=this._def){return Yc.create(this.options.filter(n=>!t.includes(n)),{...this._def,...e})}}Yc.create=Vx;class YE extends Kt{_parse(t){const e=jt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==ft.string&&n.parsedType!==ft.number){const a=jt.objectValues(e);return rt(n,{expected:jt.joinValues(a),received:n.parsedType,code:nt.invalid_type}),Rt}if(this._cache||(this._cache=new Set(jt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=jt.objectValues(e);return rt(n,{received:n.data,code:nt.invalid_enum_value,options:a}),Rt}return qi(t.data)}get enum(){return this._def.values}}YE.create=(i,t)=>new YE({values:i,typeName:wt.ZodNativeEnum,...Ut(t)});class fg extends Kt{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==ft.promise&&e.common.async===!1)return rt(e,{code:nt.invalid_type,expected:ft.promise,received:e.parsedType}),Rt;const n=e.parsedType===ft.promise?e.data:Promise.resolve(e.data);return qi(n.then(a=>this._def.type.parseAsync(a,{path:e.path,errorMap:e.common.contextualErrorMap})))}}fg.create=(i,t)=>new fg({type:i,typeName:wt.ZodPromise,...Ut(t)});class Xc extends Kt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===wt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:n}=this._processInputParams(t),a=this._def.effect||null,r={addIssue:l=>{rt(n,l),l.fatal?e.abort():e.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),a.type==="preprocess"){const l=a.transform(n.data,r);if(n.common.async)return Promise.resolve(l).then(async c=>{if(e.value==="aborted")return Rt;const p=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return p.status==="aborted"?Rt:p.status==="dirty"||e.value==="dirty"?af(p.value):p});{if(e.value==="aborted")return Rt;const c=this._def.schema._parseSync({data:l,path:n.path,parent:n});return c.status==="aborted"?Rt:c.status==="dirty"||e.value==="dirty"?af(c.value):c}}if(a.type==="refinement"){const l=c=>{const p=a.refinement(c,r);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?Rt:(c.status==="dirty"&&e.dirty(),l(c.value),{status:e.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?Rt:(c.status==="dirty"&&e.dirty(),l(c.value).then(()=>({status:e.value,value:c.value}))))}if(a.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!qc(l))return Rt;const c=a.transform(l.value,r);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>qc(l)?Promise.resolve(a.transform(l.value,r)).then(c=>({status:e.value,value:c})):Rt);jt.assertNever(a)}}Xc.create=(i,t,e)=>new Xc({schema:i,typeName:wt.ZodEffects,effect:t,...Ut(e)});Xc.createWithPreprocess=(i,t,e)=>new Xc({schema:t,effect:{type:"preprocess",transform:i},typeName:wt.ZodEffects,...Ut(e)});class Xo extends Kt{_parse(t){return this._getType(t)===ft.undefined?qi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Xo.create=(i,t)=>new Xo({innerType:i,typeName:wt.ZodOptional,...Ut(t)});class Kc extends Kt{_parse(t){return this._getType(t)===ft.null?qi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Kc.create=(i,t)=>new Kc({innerType:i,typeName:wt.ZodNullable,...Ut(t)});class P0 extends Kt{_parse(t){const{ctx:e}=this._processInputParams(t);let n=e.data;return e.parsedType===ft.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}P0.create=(i,t)=>new P0({innerType:i,typeName:wt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ut(t)});class F0 extends Kt{_parse(t){const{ctx:e}=this._processInputParams(t),n={...e,common:{...e.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return rg(a)?a.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Ua(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ua(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}F0.create=(i,t)=>new F0({innerType:i,typeName:wt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ut(t)});class XE extends Kt{_parse(t){if(this._getType(t)!==ft.nan){const n=this._getOrReturnCtx(t);return rt(n,{code:nt.invalid_type,expected:ft.nan,received:n.parsedType}),Rt}return{status:"valid",value:t.data}}}XE.create=i=>new XE({typeName:wt.ZodNaN,...Ut(i)});class DN extends Kt{_parse(t){const{ctx:e}=this._processInputParams(t),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}}class cA extends Kt{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?Rt:r.status==="dirty"?(e.dirty(),af(r.value)):this._def.out._parseAsync({data:r.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Rt:a.status==="dirty"?(e.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,e){return new cA({in:t,out:e,typeName:wt.ZodPipeline})}}class U0 extends Kt{_parse(t){const e=this._def.innerType._parse(t),n=a=>(qc(a)&&(a.value=Object.freeze(a.value)),a);return rg(e)?e.then(a=>n(a)):n(e)}unwrap(){return this._def.innerType}}U0.create=(i,t)=>new U0({innerType:i,typeName:wt.ZodReadonly,...Ut(t)});var wt;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(wt||(wt={}));const vr=Os.create,KE=Ml.create;Rl.create;const NN=lg.create;$c.create;const JE=I0.create;Jo.create;const of=Bs.create,IN=Be.create,LN=ug.create;cg.create;Dl.create;const kN=dg.create,PN=k0.create,FN=Yc.create;fg.create;Xo.create;Kc.create;const Cu={string:i=>Os.create({...i,coerce:!0}),number:i=>Ml.create({...i,coerce:!0}),boolean:i=>lg.create({...i,coerce:!0}),bigint:i=>Rl.create({...i,coerce:!0}),date:i=>$c.create({...i,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let UN,ON;function VN(){return{geminiUrl:UN,vertexUrl:ON}}function BN(i,t,e){var n,a,r;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const l=VN();return i.vertexai?(a=l.vertexUrl)!==null&&a!==void 0?a:t:(r=l.geminiUrl)!==null&&r!==void 0?r:e}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fl{}function vt(i,t){const e=/\{([^}]+)\}/g;return i.replace(e,(n,a)=>{if(Object.prototype.hasOwnProperty.call(t,a)){const r=t[a];return r!=null?String(r):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(i,t,e){for(let r=0;r<t.length-1;r++){const l=t[r];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in i))if(Array.isArray(e))i[c]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(i[c])){const p=i[c];if(Array.isArray(e))for(let m=0;m<p.length;m++){const y=p[m];f(y,t.slice(r+1),e[m])}else for(const m of p)f(m,t.slice(r+1),e)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in i||(i[c]=[{}]);const p=i[c];f(p[0],t.slice(r+1),e);return}(!i[l]||typeof i[l]!="object")&&(i[l]={}),i=i[l]}const n=t[t.length-1],a=i[n];if(a!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===a)return;if(typeof a=="object"&&typeof e=="object"&&a!==null&&e!==null)Object.assign(a,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=e}function d(i,t){try{if(t.length===1&&t[0]==="_self")return i;for(let e=0;e<t.length;e++){if(typeof i!="object"||i===null)return;const n=t[e];if(n.endsWith("[]")){const a=n.slice(0,-2);if(a in i){const r=i[a];return Array.isArray(r)?r.map(l=>d(l,t.slice(e+1))):void 0}else return}else i=i[n]}return i}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var WE;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(WE||(WE={}));var ZE;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(ZE||(ZE={}));var Vs;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Vs||(Vs={}));var QE;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(QE||(QE={}));var jE;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(jE||(jE={}));var tb;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(tb||(tb={}));var eb;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(eb||(eb={}));var nb;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(nb||(nb={}));var ib;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ib||(ib={}));var sb;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sb||(sb={}));var ab;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(ab||(ab={}));var ob;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(ob||(ob={}));var rb;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(rb||(rb={}));var lb;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(lb||(lb={}));var ub;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY"})(ub||(ub={}));var cb;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cb||(cb={}));var hg;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(hg||(hg={}));var db;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(db||(db={}));var O0;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(O0||(O0={}));var fb;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fb||(fb={}));var hb;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(hb||(hb={}));var pb;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(pb||(pb={}));var mb;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(mb||(mb={}));var gb;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(gb||(gb={}));var yb;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(yb||(yb={}));var vb;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(vb||(vb={}));var _b;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(_b||(_b={}));var Ab;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ab||(Ab={}));var Tb;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Tb||(Tb={}));var Sb;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Sb||(Sb={}));var Cb;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Cb||(Cb={}));var Eb;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(Eb||(Eb={}));var bb;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(bb||(bb={}));var xb;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(xb||(xb={}));var wb;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(wb||(wb={}));var Mb;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Mb||(Mb={}));var Rb;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Rb||(Rb={}));var Db;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Db||(Db={}));var Nb;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Nb||(Nb={}));var Ib;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Ib||(Ib={}));var Lb;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Lb||(Lb={}));var Iu;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Iu||(Iu={}));class V0{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class jd{get text(){var t,e,n,a,r,l,c,p;if(((a=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",y=!1;const _=[];for(const T of(p=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&p!==void 0?p:[]){for(const[S,C]of Object.entries(T))S!=="text"&&S!=="thought"&&(C!==null||C!==void 0)&&_.push(S);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?m:void 0}get data(){var t,e,n,a,r,l,c,p;if(((a=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const y=[];for(const _ of(p=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&p!==void 0?p:[]){for(const[T,S]of Object.entries(_))T!=="inlineData"&&(S!==null||S!==void 0)&&y.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,e,n,a,r,l,c,p;if(((a=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var t,e,n,a,r,l,c,p,m;if(((a=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,e,n,a,r,l,c,p,m;if(((a=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(c=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.output}}class kb{}class Pb{}class HN{}class GN{}class Fb{}class Ub{}class Ob{}class zN{}class Vb{}class Bb{}class Hb{}class qN{}class $N{}class YN{}class Gb{}class XN{get text(){var t,e,n;let a="",r=!1;const l=[];for(const c of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[p,m]of Object.entries(c))p!=="text"&&p!=="thought"&&m!==null&&l.push(p);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;r=!0,a+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?a:void 0}get data(){var t,e,n;let a="";const r=[];for(const l of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[c,p]of Object.entries(l))c!=="inlineData"&&p!==null&&r.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(a+=atob(l.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class KN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function le(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Bx(i,t){const e=le(i,t);return e?e.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:e.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${e}`:e:""}function Hx(i){return Array.isArray(i)?i.map(t=>pg(t)):[pg(i)]}function pg(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function Gx(i){const t=pg(i);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function zx(i){const t=pg(i);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function zb(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function qx(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(t=>zb(t)):[zb(i)]}function B0(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function qb(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function $b(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Mn(i){if(i==null)throw new Error("ContentUnion is required");return B0(i)?i:{role:"user",parts:qx(i)}}function $x(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=Mn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const e=Mn(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>Mn(e)):[Mn(t)]}function Gi(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(qb(i)||$b(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Mn(i)]}const t=[],e=[],n=B0(i[0]);for(const a of i){const r=B0(a);if(r!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(a);else{if(qb(a)||$b(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(a)}}return n||t.push({role:"user",parts:qx(e)}),t}const JN=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Yb=FN(["string","number","integer","object","array","boolean","null"]),WN=LN([Yb,of(Yb)]);function ZN(i=!0){const t=PN(()=>{const e=IN({type:WN.optional(),format:vr().optional(),title:vr().optional(),description:vr().optional(),default:JE().optional(),items:t.optional(),minItems:Cu.string().optional(),maxItems:Cu.string().optional(),enum:of(JE()).optional(),properties:kN(vr(),t).optional(),required:of(vr()).optional(),minProperties:Cu.string().optional(),maxProperties:Cu.string().optional(),propertyOrdering:of(vr()).optional(),minimum:KE().optional(),maximum:KE().optional(),minLength:Cu.string().optional(),maxLength:Cu.string().optional(),pattern:vr().optional(),anyOf:of(t).optional(),additionalProperties:NN().optional()});return i?e.strict():e});return t}function QN(i,t){i.includes("null")&&(t.nullable=!0);const e=i.filter(n=>n!=="null");if(e.length===1)t.type=Object.values(Vs).includes(e[0].toUpperCase())?e[0].toUpperCase():Vs.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of e)t.anyOf.push({type:Object.values(Vs).includes(n.toUpperCase())?n.toUpperCase():Vs.TYPE_UNSPECIFIED})}}function Pu(i){const t={},e=["items"],n=["anyOf"],a=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=i.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,i=r[1]):r[1].type==="null"&&(t.nullable=!0,i=r[0])),i.type instanceof Array&&QN(i.type,t);for(const[l,c]of Object.entries(i))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;t.type=Object.values(Vs).includes(c.toUpperCase())?c.toUpperCase():Vs.TYPE_UNSPECIFIED}else if(e.includes(l))t[l]=Pu(c);else if(n.includes(l)){const p=[];for(const m of c){if(m.type=="null"){t.nullable=!0;continue}p.push(Pu(m))}t[l]=p}else if(a.includes(l)){const p={};for(const[m,y]of Object.entries(c))p[m]=Pu(y);t[l]=p}else{if(l==="additionalProperties")continue;t[l]=c}return t}function wf(i){if(Object.keys(i).includes("$schema")){delete i.$schema;const t=ZN().parse(i);return Pu(t)}else return Pu(i)}function dA(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function fA(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Jc(i){if(i.functionDeclarations)for(const t of i.functionDeclarations)t.parameters&&(t.parameters=wf(t.parameters)),t.response&&(t.response=wf(t.response));return i}function Wc(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of i)t.push(e);return t}function jN(i,t,e,n=1){const a=!t.startsWith(`${e}/`)&&t.split("/").length===n;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:a?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}/${t}`:t:a?`${e}/${t}`:t}function Ba(i,t){if(typeof t!="string")throw new Error("name must be a string");return jN(i,t,"cachedContents")}function Yx(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Ha(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}function tI(i){return i!=null&&typeof i=="object"&&"name"in i}function eI(i){return i!=null&&typeof i=="object"&&"video"in i}function nI(i){return i!=null&&typeof i=="object"&&"uri"in i}function Xx(i){var t;let e;if(tI(i)&&(e=i.name),!(nI(i)&&(e=i.uri,e===void 0))&&!(eI(i)&&(e=(t=i.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof i=="string"&&(e=i),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const a=e.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${e}`);e=a[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function Kx(i,t){let e;return i.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function Jx(i){for(const t of["models","tunedModels","publisherModels"])if(iI(i,t))return i[t];return[]}function iI(i,t){return i!==null&&typeof i=="object"&&t in i}function sI(i,t={}){const e=i,n={name:e.name,description:e.description,parameters:Pu(Gg(e.inputSchema))};return t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}function aI(i,t={}){const e=[],n=new Set;for(const a of i){const r=a.name;if(n.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);n.add(r);const l=sI(a,t);l.functionDeclarations&&e.push(...l.functionDeclarations)}return{functionDeclarations:e}}function oI(i){const t=[];for(const e of i)t.push(Gg(e));return t}function rI(i){const t={};for(const[e,n]of Object.entries(i)){const a=n;t[e]=Gg(a)}return t}function Gg(i){const t=new Set(["items"]),e=new Set(["anyOf"]),n=new Set(["properties"]),a={};for(const[r,l]of Object.entries(i))if(t.has(r))a[r]=Gg(l);else if(e.has(r))a[r]=oI(l);else if(n.has(r))a[r]=rI(l);else if(r==="type"){const c=l.toUpperCase();a[r]=Object.values(Vs).includes(c)?c:Vs.TYPE_UNSPECIFIED}else JN.has(r)&&(a[r]=l);return a}function Wx(i,t){if(typeof t!="string"&&!Array.isArray(t)){if(i&&i.isVertexAI()){if(t.gcsUri&&t.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!t.gcsUri&&!t.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(t.inlinedRequests&&t.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!t.inlinedRequests&&!t.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return t}else{if(Array.isArray(t))return{inlinedRequests:t};if(typeof t=="string"){if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:[t]};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};if(t.startsWith("files/"))return{fileName:t}}}throw new Error(`Unsupported source: ${t}`)}function lI(i){const t=i;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Zc(i,t){const e=t;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function Zx(i){const t=i;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uI(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function cI(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function dI(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["fileUri"]);e!=null&&f(t,["fileUri"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function fI(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],uI(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],cI(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],dI(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function Qx(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>fI(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function hI(i){const t={},e=d(i,["anyOf"]);e!=null&&f(t,["anyOf"],e);const n=d(i,["default"]);n!=null&&f(t,["default"],n);const a=d(i,["description"]);a!=null&&f(t,["description"],a);const r=d(i,["enum"]);r!=null&&f(t,["enum"],r);const l=d(i,["example"]);l!=null&&f(t,["example"],l);const c=d(i,["format"]);c!=null&&f(t,["format"],c);const p=d(i,["items"]);p!=null&&f(t,["items"],p);const m=d(i,["maxItems"]);m!=null&&f(t,["maxItems"],m);const y=d(i,["maxLength"]);y!=null&&f(t,["maxLength"],y);const _=d(i,["maxProperties"]);_!=null&&f(t,["maxProperties"],_);const T=d(i,["maximum"]);T!=null&&f(t,["maximum"],T);const S=d(i,["minItems"]);S!=null&&f(t,["minItems"],S);const C=d(i,["minLength"]);C!=null&&f(t,["minLength"],C);const x=d(i,["minProperties"]);x!=null&&f(t,["minProperties"],x);const D=d(i,["minimum"]);D!=null&&f(t,["minimum"],D);const N=d(i,["nullable"]);N!=null&&f(t,["nullable"],N);const L=d(i,["pattern"]);L!=null&&f(t,["pattern"],L);const U=d(i,["properties"]);U!=null&&f(t,["properties"],U);const P=d(i,["propertyOrdering"]);P!=null&&f(t,["propertyOrdering"],P);const I=d(i,["required"]);I!=null&&f(t,["required"],I);const q=d(i,["title"]);q!=null&&f(t,["title"],q);const Y=d(i,["type"]);return Y!=null&&f(t,["type"],Y),t}function pI(i){const t={};if(d(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const e=d(i,["category"]);e!=null&&f(t,["category"],e);const n=d(i,["threshold"]);return n!=null&&f(t,["threshold"],n),t}function mI(i){const t={},e=d(i,["behavior"]);e!=null&&f(t,["behavior"],e);const n=d(i,["description"]);n!=null&&f(t,["description"],n);const a=d(i,["name"]);a!=null&&f(t,["name"],a);const r=d(i,["parameters"]);r!=null&&f(t,["parameters"],r);const l=d(i,["parametersJsonSchema"]);l!=null&&f(t,["parametersJsonSchema"],l);const c=d(i,["response"]);c!=null&&f(t,["response"],c);const p=d(i,["responseJsonSchema"]);return p!=null&&f(t,["responseJsonSchema"],p),t}function gI(i){const t={},e=d(i,["startTime"]);e!=null&&f(t,["startTime"],e);const n=d(i,["endTime"]);return n!=null&&f(t,["endTime"],n),t}function yI(i){const t={},e=d(i,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],gI(e)),t}function vI(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["dynamicThreshold"]);return n!=null&&f(t,["dynamicThreshold"],n),t}function _I(i){const t={},e=d(i,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],vI(e)),t}function AI(){return{}}function TI(i){const t={},e=d(i,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>mI(m))),f(t,["functionDeclarations"],p)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(i,["googleSearch"]);n!=null&&f(t,["googleSearch"],yI(n));const a=d(i,["googleSearchRetrieval"]);if(a!=null&&f(t,["googleSearchRetrieval"],_I(a)),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(i,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(i,["urlContext"])!=null&&f(t,["urlContext"],AI());const l=d(i,["codeExecution"]);l!=null&&f(t,["codeExecution"],l);const c=d(i,["computerUse"]);return c!=null&&f(t,["computerUse"],c),t}function SI(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["allowedFunctionNames"]);return n!=null&&f(t,["allowedFunctionNames"],n),t}function CI(i){const t={},e=d(i,["latitude"]);e!=null&&f(t,["latitude"],e);const n=d(i,["longitude"]);return n!=null&&f(t,["longitude"],n),t}function EI(i){const t={},e=d(i,["latLng"]);e!=null&&f(t,["latLng"],CI(e));const n=d(i,["languageCode"]);return n!=null&&f(t,["languageCode"],n),t}function bI(i){const t={},e=d(i,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],SI(e));const n=d(i,["retrievalConfig"]);return n!=null&&f(t,["retrievalConfig"],EI(n)),t}function xI(i){const t={},e=d(i,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function jx(i){const t={},e=d(i,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],xI(e)),t}function wI(i){const t={},e=d(i,["speaker"]);e!=null&&f(t,["speaker"],e);const n=d(i,["voiceConfig"]);return n!=null&&f(t,["voiceConfig"],jx(n)),t}function MI(i){const t={},e=d(i,["speakerVoiceConfigs"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>wI(a))),f(t,["speakerVoiceConfigs"],n)}return t}function RI(i){const t={},e=d(i,["voiceConfig"]);e!=null&&f(t,["voiceConfig"],jx(e));const n=d(i,["multiSpeakerVoiceConfig"]);n!=null&&f(t,["multiSpeakerVoiceConfig"],MI(n));const a=d(i,["languageCode"]);return a!=null&&f(t,["languageCode"],a),t}function DI(i){const t={},e=d(i,["includeThoughts"]);e!=null&&f(t,["includeThoughts"],e);const n=d(i,["thinkingBudget"]);return n!=null&&f(t,["thinkingBudget"],n),t}function NI(i,t,e){const n={},a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Qx(Mn(a)));const r=d(t,["temperature"]);r!=null&&f(n,["temperature"],r);const l=d(t,["topP"]);l!=null&&f(n,["topP"],l);const c=d(t,["topK"]);c!=null&&f(n,["topK"],c);const p=d(t,["candidateCount"]);p!=null&&f(n,["candidateCount"],p);const m=d(t,["maxOutputTokens"]);m!=null&&f(n,["maxOutputTokens"],m);const y=d(t,["stopSequences"]);y!=null&&f(n,["stopSequences"],y);const _=d(t,["responseLogprobs"]);_!=null&&f(n,["responseLogprobs"],_);const T=d(t,["logprobs"]);T!=null&&f(n,["logprobs"],T);const S=d(t,["presencePenalty"]);S!=null&&f(n,["presencePenalty"],S);const C=d(t,["frequencyPenalty"]);C!=null&&f(n,["frequencyPenalty"],C);const x=d(t,["seed"]);x!=null&&f(n,["seed"],x);const D=d(t,["responseMimeType"]);D!=null&&f(n,["responseMimeType"],D);const N=d(t,["responseSchema"]);N!=null&&f(n,["responseSchema"],hI(wf(N)));const L=d(t,["responseJsonSchema"]);if(L!=null&&f(n,["responseJsonSchema"],L),d(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=d(t,["safetySettings"]);if(e!==void 0&&U!=null){let it=U;Array.isArray(it)&&(it=it.map(Tt=>pI(Tt))),f(e,["safetySettings"],it)}const P=d(t,["tools"]);if(e!==void 0&&P!=null){let it=Wc(P);Array.isArray(it)&&(it=it.map(Tt=>TI(Jc(Tt)))),f(e,["tools"],it)}const I=d(t,["toolConfig"]);if(e!==void 0&&I!=null&&f(e,["toolConfig"],bI(I)),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=d(t,["cachedContent"]);e!==void 0&&q!=null&&f(e,["cachedContent"],Ba(i,q));const Y=d(t,["responseModalities"]);Y!=null&&f(n,["responseModalities"],Y);const tt=d(t,["mediaResolution"]);tt!=null&&f(n,["mediaResolution"],tt);const j=d(t,["speechConfig"]);if(j!=null&&f(n,["speechConfig"],RI(dA(j))),d(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const at=d(t,["thinkingConfig"]);return at!=null&&f(n,["thinkingConfig"],DI(at)),n}function II(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["request","model"],le(i,n));const a=d(t,["contents"]);if(a!=null){let l=Gi(a);Array.isArray(l)&&(l=l.map(c=>Qx(c))),f(e,["request","contents"],l)}const r=d(t,["config"]);return r!=null&&f(e,["request","generationConfig"],NI(i,r,e)),e}function LI(i,t){const e={};if(d(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=d(t,["fileName"]);n!=null&&f(e,["fileName"],n);const a=d(t,["inlinedRequests"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(l=>II(i,l))),f(e,["requests","requests"],r)}return e}function kI(i,t){const e={},n=d(i,["displayName"]);if(t!==void 0&&n!=null&&f(t,["batch","displayName"],n),d(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function PI(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["src"]);a!=null&&f(e,["batch","inputConfig"],LI(i,Wx(i,a)));const r=d(t,["config"]);return r!=null&&f(e,["config"],kI(r,e)),e}function FI(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Zc(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function UI(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Zc(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function OI(i,t){const e={},n=d(i,["pageSize"]);t!==void 0&&n!=null&&f(t,["_query","pageSize"],n);const a=d(i,["pageToken"]);if(t!==void 0&&a!=null&&f(t,["_query","pageToken"],a),d(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function VI(i){const t={},e=d(i,["config"]);return e!=null&&f(t,["config"],OI(e,t)),t}function BI(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Zc(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function HI(i){const t={},e=d(i,["format"]);e!=null&&f(t,["instancesFormat"],e);const n=d(i,["gcsUri"]);n!=null&&f(t,["gcsSource","uris"],n);const a=d(i,["bigqueryUri"]);if(a!=null&&f(t,["bigquerySource","inputUri"],a),d(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function GI(i){const t={},e=d(i,["format"]);e!=null&&f(t,["predictionsFormat"],e);const n=d(i,["gcsUri"]);n!=null&&f(t,["gcsDestination","outputUriPrefix"],n);const a=d(i,["bigqueryUri"]);if(a!=null&&f(t,["bigqueryDestination","outputUri"],a),d(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return t}function zI(i,t){const e={},n=d(i,["displayName"]);t!==void 0&&n!=null&&f(t,["displayName"],n);const a=d(i,["dest"]);return t!==void 0&&a!=null&&f(t,["outputConfig"],GI(lI(a))),e}function qI(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["model"],le(i,n));const a=d(t,["src"]);a!=null&&f(e,["inputConfig"],HI(Wx(i,a)));const r=d(t,["config"]);return r!=null&&f(e,["config"],zI(r,e)),e}function $I(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Zc(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function YI(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Zc(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function XI(i,t){const e={},n=d(i,["pageSize"]);t!==void 0&&n!=null&&f(t,["_query","pageSize"],n);const a=d(i,["pageToken"]);t!==void 0&&a!=null&&f(t,["_query","pageToken"],a);const r=d(i,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),e}function KI(i){const t={},e=d(i,["config"]);return e!=null&&f(t,["config"],XI(e,t)),t}function JI(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Zc(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function tw(){return{}}function WI(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function ZI(i){const t={},e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function QI(i){const t={},e=d(i,["fileUri"]);e!=null&&f(t,["fileUri"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function jI(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],WI(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],ZI(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],QI(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function tL(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>jI(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function eL(i){const t={},e=d(i,["citationSources"]);return e!=null&&f(t,["citations"],e),t}function nL(i){const t={},e=d(i,["retrievedUrl"]);e!=null&&f(t,["retrievedUrl"],e);const n=d(i,["urlRetrievalStatus"]);return n!=null&&f(t,["urlRetrievalStatus"],n),t}function iL(i){const t={},e=d(i,["urlMetadata"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>nL(a))),f(t,["urlMetadata"],n)}return t}function sL(i){const t={},e=d(i,["content"]);e!=null&&f(t,["content"],tL(e));const n=d(i,["citationMetadata"]);n!=null&&f(t,["citationMetadata"],eL(n));const a=d(i,["tokenCount"]);a!=null&&f(t,["tokenCount"],a);const r=d(i,["finishReason"]);r!=null&&f(t,["finishReason"],r);const l=d(i,["urlContextMetadata"]);l!=null&&f(t,["urlContextMetadata"],iL(l));const c=d(i,["avgLogprobs"]);c!=null&&f(t,["avgLogprobs"],c);const p=d(i,["groundingMetadata"]);p!=null&&f(t,["groundingMetadata"],p);const m=d(i,["index"]);m!=null&&f(t,["index"],m);const y=d(i,["logprobsResult"]);y!=null&&f(t,["logprobsResult"],y);const _=d(i,["safetyRatings"]);return _!=null&&f(t,["safetyRatings"],_),t}function aL(i){const t={},e=d(i,["candidates"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(c=>sL(c))),f(t,["candidates"],l)}const n=d(i,["modelVersion"]);n!=null&&f(t,["modelVersion"],n);const a=d(i,["promptFeedback"]);a!=null&&f(t,["promptFeedback"],a);const r=d(i,["usageMetadata"]);return r!=null&&f(t,["usageMetadata"],r),t}function oL(i){const t={},e=d(i,["response"]);return e!=null&&f(t,["response"],aL(e)),d(i,["error"])!=null&&f(t,["error"],tw()),t}function rL(i){const t={},e=d(i,["responsesFile"]);e!=null&&f(t,["fileName"],e);const n=d(i,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>oL(r))),f(t,["inlinedResponses"],a)}return t}function H0(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["metadata","displayName"]);n!=null&&f(t,["displayName"],n);const a=d(i,["metadata","state"]);a!=null&&f(t,["state"],Zx(a));const r=d(i,["metadata","createTime"]);r!=null&&f(t,["createTime"],r);const l=d(i,["metadata","endTime"]);l!=null&&f(t,["endTime"],l);const c=d(i,["metadata","updateTime"]);c!=null&&f(t,["updateTime"],c);const p=d(i,["metadata","model"]);p!=null&&f(t,["model"],p);const m=d(i,["metadata","output"]);return m!=null&&f(t,["dest"],rL(m)),t}function lL(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["operations"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>H0(r))),f(t,["batchJobs"],a)}return t}function uL(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["done"]);return n!=null&&f(t,["done"],n),d(i,["error"])!=null&&f(t,["error"],tw()),t}function ew(i){const t={},e=d(i,["details"]);e!=null&&f(t,["details"],e);const n=d(i,["code"]);n!=null&&f(t,["code"],n);const a=d(i,["message"]);return a!=null&&f(t,["message"],a),t}function cL(i){const t={},e=d(i,["instancesFormat"]);e!=null&&f(t,["format"],e);const n=d(i,["gcsSource","uris"]);n!=null&&f(t,["gcsUri"],n);const a=d(i,["bigquerySource","inputUri"]);return a!=null&&f(t,["bigqueryUri"],a),t}function dL(i){const t={},e=d(i,["predictionsFormat"]);e!=null&&f(t,["format"],e);const n=d(i,["gcsDestination","outputUriPrefix"]);n!=null&&f(t,["gcsUri"],n);const a=d(i,["bigqueryDestination","outputUri"]);return a!=null&&f(t,["bigqueryUri"],a),t}function G0(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["displayName"]);n!=null&&f(t,["displayName"],n);const a=d(i,["state"]);a!=null&&f(t,["state"],Zx(a));const r=d(i,["error"]);r!=null&&f(t,["error"],ew(r));const l=d(i,["createTime"]);l!=null&&f(t,["createTime"],l);const c=d(i,["startTime"]);c!=null&&f(t,["startTime"],c);const p=d(i,["endTime"]);p!=null&&f(t,["endTime"],p);const m=d(i,["updateTime"]);m!=null&&f(t,["updateTime"],m);const y=d(i,["model"]);y!=null&&f(t,["model"],y);const _=d(i,["inputConfig"]);_!=null&&f(t,["src"],cL(_));const T=d(i,["outputConfig"]);return T!=null&&f(t,["dest"],dL(T)),t}function fL(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["batchPredictionJobs"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>G0(r))),f(t,["batchJobs"],a)}return t}function hL(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["done"]);n!=null&&f(t,["done"],n);const a=d(i,["error"]);return a!=null&&f(t,["error"],ew(a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nl;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Nl||(Nl={}));class np{constructor(t,e,n,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,a)}init(t,e,n){var a,r;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};n?typeof n=="object"?l=Object.assign({},n):l=n:l={config:{}},l.config&&(l.config.pageToken=e.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(r=(a=l.config)===null||a===void 0?void 0:a.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pL extends Fl{constructor(t){super(),this.apiClient=t,this.create=async e=>{if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(e.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(e.config=e.config||{},e.config.displayName===void 0&&(e.config.displayName="genaiBatchJob_${timestampStr}"),e.config.dest===void 0&&typeof e.src=="string")if(e.src.startsWith("gs://")&&e.src.endsWith(".jsonl"))e.config.dest=`${e.src.slice(0,-6)}/dest`;else if(e.src.startsWith("bq://"))e.config.dest=`${e.src}_dest_${a}`;else throw new Error("Unsupported source:"+e.src)}return await this.createInternal(e)},this.list=async(e={})=>new np(Nl.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(e),e)}async createInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=qI(this.apiClient,t);return c=vt("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>G0(y))}else{const m=PI(this.apiClient,t);return c=vt("{model}:batchGenerateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>H0(y))}}async get(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=$I(this.apiClient,t);return c=vt("batchPredictionJobs/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>G0(y))}else{const m=FI(this.apiClient,t);return c=vt("batches/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>H0(y))}}async cancel(t){var e,n,a,r;let l="",c={};if(this.apiClient.isVertexAI()){const p=YI(this.apiClient,t);l=vt("batchPredictionJobs/{name}:cancel",p._url),c=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}else{const p=UI(this.apiClient,t);l=vt("batches/{name}:cancel",p._url),c=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=KI(t);return c=vt("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const _=fL(y),T=new Gb;return Object.assign(T,_),T})}else{const m=VI(t);return c=vt("batches",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=lL(y),T=new Gb;return Object.assign(T,_),T})}}async delete(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=JI(this.apiClient,t);return c=vt("batchPredictionJobs/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>hL(y))}else{const m=BI(this.apiClient,t);return c=vt("batches/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>uL(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mL(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function gL(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function yL(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["fileUri"]);e!=null&&f(t,["fileUri"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function vL(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],mL(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],gL(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],yL(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function Xb(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>vL(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function _L(i){const t={},e=d(i,["behavior"]);e!=null&&f(t,["behavior"],e);const n=d(i,["description"]);n!=null&&f(t,["description"],n);const a=d(i,["name"]);a!=null&&f(t,["name"],a);const r=d(i,["parameters"]);r!=null&&f(t,["parameters"],r);const l=d(i,["parametersJsonSchema"]);l!=null&&f(t,["parametersJsonSchema"],l);const c=d(i,["response"]);c!=null&&f(t,["response"],c);const p=d(i,["responseJsonSchema"]);return p!=null&&f(t,["responseJsonSchema"],p),t}function AL(i){const t={},e=d(i,["startTime"]);e!=null&&f(t,["startTime"],e);const n=d(i,["endTime"]);return n!=null&&f(t,["endTime"],n),t}function TL(i){const t={},e=d(i,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],AL(e)),t}function SL(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["dynamicThreshold"]);return n!=null&&f(t,["dynamicThreshold"],n),t}function CL(i){const t={},e=d(i,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],SL(e)),t}function EL(){return{}}function bL(i){const t={},e=d(i,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>_L(m))),f(t,["functionDeclarations"],p)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(i,["googleSearch"]);n!=null&&f(t,["googleSearch"],TL(n));const a=d(i,["googleSearchRetrieval"]);if(a!=null&&f(t,["googleSearchRetrieval"],CL(a)),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(i,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(i,["urlContext"])!=null&&f(t,["urlContext"],EL());const l=d(i,["codeExecution"]);l!=null&&f(t,["codeExecution"],l);const c=d(i,["computerUse"]);return c!=null&&f(t,["computerUse"],c),t}function xL(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["allowedFunctionNames"]);return n!=null&&f(t,["allowedFunctionNames"],n),t}function wL(i){const t={},e=d(i,["latitude"]);e!=null&&f(t,["latitude"],e);const n=d(i,["longitude"]);return n!=null&&f(t,["longitude"],n),t}function ML(i){const t={},e=d(i,["latLng"]);e!=null&&f(t,["latLng"],wL(e));const n=d(i,["languageCode"]);return n!=null&&f(t,["languageCode"],n),t}function RL(i){const t={},e=d(i,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],xL(e));const n=d(i,["retrievalConfig"]);return n!=null&&f(t,["retrievalConfig"],ML(n)),t}function DL(i,t){const e={},n=d(i,["ttl"]);t!==void 0&&n!=null&&f(t,["ttl"],n);const a=d(i,["expireTime"]);t!==void 0&&a!=null&&f(t,["expireTime"],a);const r=d(i,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const l=d(i,["contents"]);if(t!==void 0&&l!=null){let y=Gi(l);Array.isArray(y)&&(y=y.map(_=>Xb(_))),f(t,["contents"],y)}const c=d(i,["systemInstruction"]);t!==void 0&&c!=null&&f(t,["systemInstruction"],Xb(Mn(c)));const p=d(i,["tools"]);if(t!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>bL(_))),f(t,["tools"],y)}const m=d(i,["toolConfig"]);if(t!==void 0&&m!=null&&f(t,["toolConfig"],RL(m)),d(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function NL(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["model"],Bx(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],DL(a,e)),e}function IL(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Ba(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function LL(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Ba(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function kL(i,t){const e={},n=d(i,["ttl"]);t!==void 0&&n!=null&&f(t,["ttl"],n);const a=d(i,["expireTime"]);return t!==void 0&&a!=null&&f(t,["expireTime"],a),e}function PL(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Ba(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],kL(a,e)),e}function FL(i,t){const e={},n=d(i,["pageSize"]);t!==void 0&&n!=null&&f(t,["_query","pageSize"],n);const a=d(i,["pageToken"]);return t!==void 0&&a!=null&&f(t,["_query","pageToken"],a),e}function UL(i){const t={},e=d(i,["config"]);return e!=null&&f(t,["config"],FL(e,t)),t}function OL(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function VL(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["data"]);n!=null&&f(t,["data"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function BL(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["fileUri"]);n!=null&&f(t,["fileUri"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function HL(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],OL(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],VL(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],BL(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function Kb(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>HL(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function GL(i){const t={};if(d(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=d(i,["description"]);e!=null&&f(t,["description"],e);const n=d(i,["name"]);n!=null&&f(t,["name"],n);const a=d(i,["parameters"]);a!=null&&f(t,["parameters"],a);const r=d(i,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const l=d(i,["response"]);l!=null&&f(t,["response"],l);const c=d(i,["responseJsonSchema"]);return c!=null&&f(t,["responseJsonSchema"],c),t}function zL(i){const t={},e=d(i,["startTime"]);e!=null&&f(t,["startTime"],e);const n=d(i,["endTime"]);return n!=null&&f(t,["endTime"],n),t}function qL(i){const t={},e=d(i,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],zL(e)),t}function $L(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["dynamicThreshold"]);return n!=null&&f(t,["dynamicThreshold"],n),t}function YL(i){const t={},e=d(i,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],$L(e)),t}function XL(){return{}}function KL(i){const t={},e=d(i,["apiKeyString"]);return e!=null&&f(t,["apiKeyString"],e),t}function JL(i){const t={},e=d(i,["apiKeyConfig"]);e!=null&&f(t,["apiKeyConfig"],KL(e));const n=d(i,["authType"]);n!=null&&f(t,["authType"],n);const a=d(i,["googleServiceAccountConfig"]);a!=null&&f(t,["googleServiceAccountConfig"],a);const r=d(i,["httpBasicAuthConfig"]);r!=null&&f(t,["httpBasicAuthConfig"],r);const l=d(i,["oauthConfig"]);l!=null&&f(t,["oauthConfig"],l);const c=d(i,["oidcConfig"]);return c!=null&&f(t,["oidcConfig"],c),t}function WL(i){const t={},e=d(i,["authConfig"]);return e!=null&&f(t,["authConfig"],JL(e)),t}function ZL(){return{}}function QL(i){const t={},e=d(i,["functionDeclarations"]);if(e!=null){let _=e;Array.isArray(_)&&(_=_.map(T=>GL(T))),f(t,["functionDeclarations"],_)}const n=d(i,["retrieval"]);n!=null&&f(t,["retrieval"],n);const a=d(i,["googleSearch"]);a!=null&&f(t,["googleSearch"],qL(a));const r=d(i,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],YL(r)),d(i,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],XL());const c=d(i,["googleMaps"]);c!=null&&f(t,["googleMaps"],WL(c)),d(i,["urlContext"])!=null&&f(t,["urlContext"],ZL());const m=d(i,["codeExecution"]);m!=null&&f(t,["codeExecution"],m);const y=d(i,["computerUse"]);return y!=null&&f(t,["computerUse"],y),t}function jL(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["allowedFunctionNames"]);return n!=null&&f(t,["allowedFunctionNames"],n),t}function tk(i){const t={},e=d(i,["latitude"]);e!=null&&f(t,["latitude"],e);const n=d(i,["longitude"]);return n!=null&&f(t,["longitude"],n),t}function ek(i){const t={},e=d(i,["latLng"]);e!=null&&f(t,["latLng"],tk(e));const n=d(i,["languageCode"]);return n!=null&&f(t,["languageCode"],n),t}function nk(i){const t={},e=d(i,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],jL(e));const n=d(i,["retrievalConfig"]);return n!=null&&f(t,["retrievalConfig"],ek(n)),t}function ik(i,t){const e={},n=d(i,["ttl"]);t!==void 0&&n!=null&&f(t,["ttl"],n);const a=d(i,["expireTime"]);t!==void 0&&a!=null&&f(t,["expireTime"],a);const r=d(i,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const l=d(i,["contents"]);if(t!==void 0&&l!=null){let _=Gi(l);Array.isArray(_)&&(_=_.map(T=>Kb(T))),f(t,["contents"],_)}const c=d(i,["systemInstruction"]);t!==void 0&&c!=null&&f(t,["systemInstruction"],Kb(Mn(c)));const p=d(i,["tools"]);if(t!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>QL(T))),f(t,["tools"],_)}const m=d(i,["toolConfig"]);t!==void 0&&m!=null&&f(t,["toolConfig"],nk(m));const y=d(i,["kmsKeyName"]);return t!==void 0&&y!=null&&f(t,["encryption_spec","kmsKeyName"],y),e}function sk(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["model"],Bx(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],ik(a,e)),e}function ak(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Ba(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function ok(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Ba(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function rk(i,t){const e={},n=d(i,["ttl"]);t!==void 0&&n!=null&&f(t,["ttl"],n);const a=d(i,["expireTime"]);return t!==void 0&&a!=null&&f(t,["expireTime"],a),e}function lk(i,t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],Ba(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],rk(a,e)),e}function uk(i,t){const e={},n=d(i,["pageSize"]);t!==void 0&&n!=null&&f(t,["_query","pageSize"],n);const a=d(i,["pageToken"]);return t!==void 0&&a!=null&&f(t,["_query","pageToken"],a),e}function ck(i){const t={},e=d(i,["config"]);return e!=null&&f(t,["config"],uk(e,t)),t}function wm(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["displayName"]);n!=null&&f(t,["displayName"],n);const a=d(i,["model"]);a!=null&&f(t,["model"],a);const r=d(i,["createTime"]);r!=null&&f(t,["createTime"],r);const l=d(i,["updateTime"]);l!=null&&f(t,["updateTime"],l);const c=d(i,["expireTime"]);c!=null&&f(t,["expireTime"],c);const p=d(i,["usageMetadata"]);return p!=null&&f(t,["usageMetadata"],p),t}function dk(){return{}}function fk(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["cachedContents"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>wm(r))),f(t,["cachedContents"],a)}return t}function Mm(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["displayName"]);n!=null&&f(t,["displayName"],n);const a=d(i,["model"]);a!=null&&f(t,["model"],a);const r=d(i,["createTime"]);r!=null&&f(t,["createTime"],r);const l=d(i,["updateTime"]);l!=null&&f(t,["updateTime"],l);const c=d(i,["expireTime"]);c!=null&&f(t,["expireTime"],c);const p=d(i,["usageMetadata"]);return p!=null&&f(t,["usageMetadata"],p),t}function hk(){return{}}function pk(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["cachedContents"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>Mm(r))),f(t,["cachedContents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mk extends Fl{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new np(Nl.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=sk(this.apiClient,t);return c=vt("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>Mm(y))}else{const m=NL(this.apiClient,t);return c=vt("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>wm(y))}}async get(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=ak(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>Mm(y))}else{const m=IL(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>wm(y))}}async delete(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=ok(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(()=>{const y=hk(),_=new Bb;return Object.assign(_,y),_})}else{const m=LL(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(()=>{const y=dk(),_=new Bb;return Object.assign(_,y),_})}}async update(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=lk(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>Mm(y))}else{const m=PL(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>wm(y))}}async listInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=ck(t);return c=vt("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const _=pk(y),T=new Hb;return Object.assign(T,_),T})}else{const m=UL(t);return c=vt("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=fk(y),T=new Hb;return Object.assign(T,_),T})}}}function Jb(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(i){return this instanceof Ae?(this.v=i,this):new Ae(i)}function Fu(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),a,r=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(S){return function(C){return Promise.resolve(C).then(S,_)}}function c(S,C){n[S]&&(a[S]=function(x){return new Promise(function(D,N){r.push([S,x,D,N])>1||p(S,x)})},C&&(a[S]=C(a[S])))}function p(S,C){try{m(n[S](C))}catch(x){T(r[0][3],x)}}function m(S){S.value instanceof Ae?Promise.resolve(S.value.v).then(y,_):T(r[0][2],S)}function y(S){p("next",S)}function _(S){p("throw",S)}function T(S,C){S(C),r.shift(),r.length&&p(r[0][0],r[0][1])}}function Cf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof Jb=="function"?Jb(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=i[r]&&function(l){return new Promise(function(c,p){l=i[r](l),a(c,p,l.done,l.value)})}}function a(r,l,c,p){Promise.resolve(p).then(function(m){r({value:m,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gk(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:nw(e)}function nw(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function yk(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Wb(i){if(i===void 0||i.length===0)return[];const t=[],e=i.length;let n=0;for(;n<e;)if(i[n].role==="user")t.push(i[n]),n++;else{const a=[];let r=!0;for(;n<e&&i[n].role==="model";)a.push(i[n]),r&&!nw(i[n])&&(r=!1),n++;r?t.push(...a):t.pop()}return t}class vk{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new _k(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class _k{constructor(t,e,n,a={},r=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=a,this.history=r,this.sendPromise=Promise.resolve(),yk(r)}async sendMessage(t){var e;await this.sendPromise;const n=Mn(t.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var r,l,c;const p=await a,m=(l=(r=p.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content,y=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];y!=null&&(T=(c=y.slice(_))!==null&&c!==void 0?c:[]);const S=m?[m]:[];this.recordHistory(n,S,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(t){var e;await this.sendPromise;const n=Mn(t.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const r=await a;return this.processStreamResponse(r,n)}getHistory(t=!1){const e=t?Wb(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){var n,a;return Fu(this,arguments,function*(){var l,c,p,m;const y=[];try{for(var _=!0,T=Cf(t),S;S=yield Ae(T.next()),l=S.done,!l;_=!0){m=S.value,_=!1;const C=m;if(gk(C)){const x=(a=(n=C.candidates)===null||n===void 0?void 0:n[0])===null||a===void 0?void 0:a.content;x!==void 0&&y.push(x)}yield yield Ae(C)}}catch(C){c={error:C}}finally{try{!_&&!l&&(p=T.return)&&(yield Ae(p.call(T)))}finally{if(c)throw c.error}}this.recordHistory(e,y)})}recordHistory(t,e,n){let a=[];e.length>0&&e.every(r=>r.role!==void 0)?a=e:a.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Wb(n)):this.history.push(t),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zg extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,zg.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ak(i,t){const e={},n=d(i,["pageSize"]);t!==void 0&&n!=null&&f(t,["_query","pageSize"],n);const a=d(i,["pageToken"]);return t!==void 0&&a!=null&&f(t,["_query","pageToken"],a),e}function Tk(i){const t={},e=d(i,["config"]);return e!=null&&f(t,["config"],Ak(e,t)),t}function Sk(i){const t={},e=d(i,["details"]);e!=null&&f(t,["details"],e);const n=d(i,["message"]);n!=null&&f(t,["message"],n);const a=d(i,["code"]);return a!=null&&f(t,["code"],a),t}function Ck(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["displayName"]);n!=null&&f(t,["displayName"],n);const a=d(i,["mimeType"]);a!=null&&f(t,["mimeType"],a);const r=d(i,["sizeBytes"]);r!=null&&f(t,["sizeBytes"],r);const l=d(i,["createTime"]);l!=null&&f(t,["createTime"],l);const c=d(i,["expirationTime"]);c!=null&&f(t,["expirationTime"],c);const p=d(i,["updateTime"]);p!=null&&f(t,["updateTime"],p);const m=d(i,["sha256Hash"]);m!=null&&f(t,["sha256Hash"],m);const y=d(i,["uri"]);y!=null&&f(t,["uri"],y);const _=d(i,["downloadUri"]);_!=null&&f(t,["downloadUri"],_);const T=d(i,["state"]);T!=null&&f(t,["state"],T);const S=d(i,["source"]);S!=null&&f(t,["source"],S);const C=d(i,["videoMetadata"]);C!=null&&f(t,["videoMetadata"],C);const x=d(i,["error"]);return x!=null&&f(t,["error"],Sk(x)),t}function Ek(i){const t={},e=d(i,["file"]);e!=null&&f(t,["file"],Ck(e));const n=d(i,["config"]);return n!=null&&f(t,["config"],n),t}function bk(i){const t={},e=d(i,["name"]);e!=null&&f(t,["_url","file"],Xx(e));const n=d(i,["config"]);return n!=null&&f(t,["config"],n),t}function xk(i){const t={},e=d(i,["name"]);e!=null&&f(t,["_url","file"],Xx(e));const n=d(i,["config"]);return n!=null&&f(t,["config"],n),t}function wk(i){const t={},e=d(i,["details"]);e!=null&&f(t,["details"],e);const n=d(i,["message"]);n!=null&&f(t,["message"],n);const a=d(i,["code"]);return a!=null&&f(t,["code"],a),t}function z0(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["displayName"]);n!=null&&f(t,["displayName"],n);const a=d(i,["mimeType"]);a!=null&&f(t,["mimeType"],a);const r=d(i,["sizeBytes"]);r!=null&&f(t,["sizeBytes"],r);const l=d(i,["createTime"]);l!=null&&f(t,["createTime"],l);const c=d(i,["expirationTime"]);c!=null&&f(t,["expirationTime"],c);const p=d(i,["updateTime"]);p!=null&&f(t,["updateTime"],p);const m=d(i,["sha256Hash"]);m!=null&&f(t,["sha256Hash"],m);const y=d(i,["uri"]);y!=null&&f(t,["uri"],y);const _=d(i,["downloadUri"]);_!=null&&f(t,["downloadUri"],_);const T=d(i,["state"]);T!=null&&f(t,["state"],T);const S=d(i,["source"]);S!=null&&f(t,["source"],S);const C=d(i,["videoMetadata"]);C!=null&&f(t,["videoMetadata"],C);const x=d(i,["error"]);return x!=null&&f(t,["error"],wk(x)),t}function Mk(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["files"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>z0(r))),f(t,["files"],a)}return t}function Rk(){return{}}function Dk(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nk extends Fl{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new np(Nl.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>z0(e))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Tk(t);return r=vt("files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>{const m=Mk(p),y=new qN;return Object.assign(y,m),y})}}async createInternal(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Ek(t);return r=vt("upload/v1beta/files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(()=>{const p=Rk(),m=new $N;return Object.assign(m,p),m})}}async get(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=bk(t);return r=vt("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>z0(p))}}async delete(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xk(t);return r=vt("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(()=>{const p=Dk(),m=new YN;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ik(i){const t={},e=d(i,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function Lk(i){const t={},e=d(i,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function iw(i){const t={},e=d(i,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],Ik(e)),t}function kk(i){const t={},e=d(i,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],Lk(e)),t}function Pk(i){const t={},e=d(i,["speaker"]);e!=null&&f(t,["speaker"],e);const n=d(i,["voiceConfig"]);return n!=null&&f(t,["voiceConfig"],iw(n)),t}function Fk(i){const t={},e=d(i,["speakerVoiceConfigs"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>Pk(a))),f(t,["speakerVoiceConfigs"],n)}return t}function Uk(i){const t={},e=d(i,["voiceConfig"]);e!=null&&f(t,["voiceConfig"],iw(e));const n=d(i,["multiSpeakerVoiceConfig"]);n!=null&&f(t,["multiSpeakerVoiceConfig"],Fk(n));const a=d(i,["languageCode"]);return a!=null&&f(t,["languageCode"],a),t}function Ok(i){const t={},e=d(i,["voiceConfig"]);if(e!=null&&f(t,["voiceConfig"],kk(e)),d(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=d(i,["languageCode"]);return n!=null&&f(t,["languageCode"],n),t}function Vk(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function Bk(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function Hk(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function Gk(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["data"]);n!=null&&f(t,["data"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function zk(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["fileUri"]);e!=null&&f(t,["fileUri"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function qk(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["fileUri"]);n!=null&&f(t,["fileUri"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function $k(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],Vk(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],Hk(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],zk(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function Yk(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],Bk(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],Gk(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],qk(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function Xk(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>$k(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function Kk(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>Yk(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function Jk(i){const t={},e=d(i,["behavior"]);e!=null&&f(t,["behavior"],e);const n=d(i,["description"]);n!=null&&f(t,["description"],n);const a=d(i,["name"]);a!=null&&f(t,["name"],a);const r=d(i,["parameters"]);r!=null&&f(t,["parameters"],r);const l=d(i,["parametersJsonSchema"]);l!=null&&f(t,["parametersJsonSchema"],l);const c=d(i,["response"]);c!=null&&f(t,["response"],c);const p=d(i,["responseJsonSchema"]);return p!=null&&f(t,["responseJsonSchema"],p),t}function Wk(i){const t={};if(d(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=d(i,["description"]);e!=null&&f(t,["description"],e);const n=d(i,["name"]);n!=null&&f(t,["name"],n);const a=d(i,["parameters"]);a!=null&&f(t,["parameters"],a);const r=d(i,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const l=d(i,["response"]);l!=null&&f(t,["response"],l);const c=d(i,["responseJsonSchema"]);return c!=null&&f(t,["responseJsonSchema"],c),t}function Zk(i){const t={},e=d(i,["startTime"]);e!=null&&f(t,["startTime"],e);const n=d(i,["endTime"]);return n!=null&&f(t,["endTime"],n),t}function Qk(i){const t={},e=d(i,["startTime"]);e!=null&&f(t,["startTime"],e);const n=d(i,["endTime"]);return n!=null&&f(t,["endTime"],n),t}function jk(i){const t={},e=d(i,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],Zk(e)),t}function tP(i){const t={},e=d(i,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],Qk(e)),t}function eP(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["dynamicThreshold"]);return n!=null&&f(t,["dynamicThreshold"],n),t}function nP(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["dynamicThreshold"]);return n!=null&&f(t,["dynamicThreshold"],n),t}function iP(i){const t={},e=d(i,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],eP(e)),t}function sP(i){const t={},e=d(i,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],nP(e)),t}function aP(){return{}}function oP(i){const t={},e=d(i,["apiKeyString"]);return e!=null&&f(t,["apiKeyString"],e),t}function rP(i){const t={},e=d(i,["apiKeyConfig"]);e!=null&&f(t,["apiKeyConfig"],oP(e));const n=d(i,["authType"]);n!=null&&f(t,["authType"],n);const a=d(i,["googleServiceAccountConfig"]);a!=null&&f(t,["googleServiceAccountConfig"],a);const r=d(i,["httpBasicAuthConfig"]);r!=null&&f(t,["httpBasicAuthConfig"],r);const l=d(i,["oauthConfig"]);l!=null&&f(t,["oauthConfig"],l);const c=d(i,["oidcConfig"]);return c!=null&&f(t,["oidcConfig"],c),t}function lP(i){const t={},e=d(i,["authConfig"]);return e!=null&&f(t,["authConfig"],rP(e)),t}function uP(){return{}}function cP(){return{}}function dP(i){const t={},e=d(i,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>Jk(m))),f(t,["functionDeclarations"],p)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(i,["googleSearch"]);n!=null&&f(t,["googleSearch"],jk(n));const a=d(i,["googleSearchRetrieval"]);if(a!=null&&f(t,["googleSearchRetrieval"],iP(a)),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(i,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(i,["urlContext"])!=null&&f(t,["urlContext"],uP());const l=d(i,["codeExecution"]);l!=null&&f(t,["codeExecution"],l);const c=d(i,["computerUse"]);return c!=null&&f(t,["computerUse"],c),t}function fP(i){const t={},e=d(i,["functionDeclarations"]);if(e!=null){let _=e;Array.isArray(_)&&(_=_.map(T=>Wk(T))),f(t,["functionDeclarations"],_)}const n=d(i,["retrieval"]);n!=null&&f(t,["retrieval"],n);const a=d(i,["googleSearch"]);a!=null&&f(t,["googleSearch"],tP(a));const r=d(i,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],sP(r)),d(i,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],aP());const c=d(i,["googleMaps"]);c!=null&&f(t,["googleMaps"],lP(c)),d(i,["urlContext"])!=null&&f(t,["urlContext"],cP());const m=d(i,["codeExecution"]);m!=null&&f(t,["codeExecution"],m);const y=d(i,["computerUse"]);return y!=null&&f(t,["computerUse"],y),t}function hP(i){const t={},e=d(i,["handle"]);if(e!=null&&f(t,["handle"],e),d(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function pP(i){const t={},e=d(i,["handle"]);e!=null&&f(t,["handle"],e);const n=d(i,["transparent"]);return n!=null&&f(t,["transparent"],n),t}function Zb(){return{}}function Qb(){return{}}function mP(i){const t={},e=d(i,["disabled"]);e!=null&&f(t,["disabled"],e);const n=d(i,["startOfSpeechSensitivity"]);n!=null&&f(t,["startOfSpeechSensitivity"],n);const a=d(i,["endOfSpeechSensitivity"]);a!=null&&f(t,["endOfSpeechSensitivity"],a);const r=d(i,["prefixPaddingMs"]);r!=null&&f(t,["prefixPaddingMs"],r);const l=d(i,["silenceDurationMs"]);return l!=null&&f(t,["silenceDurationMs"],l),t}function gP(i){const t={},e=d(i,["disabled"]);e!=null&&f(t,["disabled"],e);const n=d(i,["startOfSpeechSensitivity"]);n!=null&&f(t,["startOfSpeechSensitivity"],n);const a=d(i,["endOfSpeechSensitivity"]);a!=null&&f(t,["endOfSpeechSensitivity"],a);const r=d(i,["prefixPaddingMs"]);r!=null&&f(t,["prefixPaddingMs"],r);const l=d(i,["silenceDurationMs"]);return l!=null&&f(t,["silenceDurationMs"],l),t}function yP(i){const t={},e=d(i,["automaticActivityDetection"]);e!=null&&f(t,["automaticActivityDetection"],mP(e));const n=d(i,["activityHandling"]);n!=null&&f(t,["activityHandling"],n);const a=d(i,["turnCoverage"]);return a!=null&&f(t,["turnCoverage"],a),t}function vP(i){const t={},e=d(i,["automaticActivityDetection"]);e!=null&&f(t,["automaticActivityDetection"],gP(e));const n=d(i,["activityHandling"]);n!=null&&f(t,["activityHandling"],n);const a=d(i,["turnCoverage"]);return a!=null&&f(t,["turnCoverage"],a),t}function _P(i){const t={},e=d(i,["targetTokens"]);return e!=null&&f(t,["targetTokens"],e),t}function AP(i){const t={},e=d(i,["targetTokens"]);return e!=null&&f(t,["targetTokens"],e),t}function TP(i){const t={},e=d(i,["triggerTokens"]);e!=null&&f(t,["triggerTokens"],e);const n=d(i,["slidingWindow"]);return n!=null&&f(t,["slidingWindow"],_P(n)),t}function SP(i){const t={},e=d(i,["triggerTokens"]);e!=null&&f(t,["triggerTokens"],e);const n=d(i,["slidingWindow"]);return n!=null&&f(t,["slidingWindow"],AP(n)),t}function CP(i){const t={},e=d(i,["proactiveAudio"]);return e!=null&&f(t,["proactiveAudio"],e),t}function EP(i){const t={},e=d(i,["proactiveAudio"]);return e!=null&&f(t,["proactiveAudio"],e),t}function bP(i,t){const e={},n=d(i,["generationConfig"]);t!==void 0&&n!=null&&f(t,["setup","generationConfig"],n);const a=d(i,["responseModalities"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","responseModalities"],a);const r=d(i,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const l=d(i,["topP"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","topP"],l);const c=d(i,["topK"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","topK"],c);const p=d(i,["maxOutputTokens"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","maxOutputTokens"],p);const m=d(i,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const y=d(i,["seed"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","seed"],y);const _=d(i,["speechConfig"]);t!==void 0&&_!=null&&f(t,["setup","generationConfig","speechConfig"],Uk(fA(_)));const T=d(i,["enableAffectiveDialog"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],T);const S=d(i,["systemInstruction"]);t!==void 0&&S!=null&&f(t,["setup","systemInstruction"],Xk(Mn(S)));const C=d(i,["tools"]);if(t!==void 0&&C!=null){let I=Wc(C);Array.isArray(I)&&(I=I.map(q=>dP(Jc(q)))),f(t,["setup","tools"],I)}const x=d(i,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],hP(x));const D=d(i,["inputAudioTranscription"]);t!==void 0&&D!=null&&f(t,["setup","inputAudioTranscription"],Zb());const N=d(i,["outputAudioTranscription"]);t!==void 0&&N!=null&&f(t,["setup","outputAudioTranscription"],Zb());const L=d(i,["realtimeInputConfig"]);t!==void 0&&L!=null&&f(t,["setup","realtimeInputConfig"],yP(L));const U=d(i,["contextWindowCompression"]);t!==void 0&&U!=null&&f(t,["setup","contextWindowCompression"],TP(U));const P=d(i,["proactivity"]);return t!==void 0&&P!=null&&f(t,["setup","proactivity"],CP(P)),e}function xP(i,t){const e={},n=d(i,["generationConfig"]);t!==void 0&&n!=null&&f(t,["setup","generationConfig"],n);const a=d(i,["responseModalities"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","responseModalities"],a);const r=d(i,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const l=d(i,["topP"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","topP"],l);const c=d(i,["topK"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","topK"],c);const p=d(i,["maxOutputTokens"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","maxOutputTokens"],p);const m=d(i,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const y=d(i,["seed"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","seed"],y);const _=d(i,["speechConfig"]);t!==void 0&&_!=null&&f(t,["setup","generationConfig","speechConfig"],Ok(fA(_)));const T=d(i,["enableAffectiveDialog"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],T);const S=d(i,["systemInstruction"]);t!==void 0&&S!=null&&f(t,["setup","systemInstruction"],Kk(Mn(S)));const C=d(i,["tools"]);if(t!==void 0&&C!=null){let I=Wc(C);Array.isArray(I)&&(I=I.map(q=>fP(Jc(q)))),f(t,["setup","tools"],I)}const x=d(i,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],pP(x));const D=d(i,["inputAudioTranscription"]);t!==void 0&&D!=null&&f(t,["setup","inputAudioTranscription"],Qb());const N=d(i,["outputAudioTranscription"]);t!==void 0&&N!=null&&f(t,["setup","outputAudioTranscription"],Qb());const L=d(i,["realtimeInputConfig"]);t!==void 0&&L!=null&&f(t,["setup","realtimeInputConfig"],vP(L));const U=d(i,["contextWindowCompression"]);t!==void 0&&U!=null&&f(t,["setup","contextWindowCompression"],SP(U));const P=d(i,["proactivity"]);return t!==void 0&&P!=null&&f(t,["setup","proactivity"],EP(P)),e}function wP(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["setup","model"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],bP(a,e)),e}function MP(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["setup","model"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],xP(a,e)),e}function RP(){return{}}function DP(){return{}}function NP(){return{}}function IP(){return{}}function LP(i){const t={},e=d(i,["media"]);e!=null&&f(t,["mediaChunks"],Hx(e));const n=d(i,["audio"]);n!=null&&f(t,["audio"],zx(n));const a=d(i,["audioStreamEnd"]);a!=null&&f(t,["audioStreamEnd"],a);const r=d(i,["video"]);r!=null&&f(t,["video"],Gx(r));const l=d(i,["text"]);return l!=null&&f(t,["text"],l),d(i,["activityStart"])!=null&&f(t,["activityStart"],RP()),d(i,["activityEnd"])!=null&&f(t,["activityEnd"],NP()),t}function kP(i){const t={},e=d(i,["media"]);e!=null&&f(t,["mediaChunks"],Hx(e));const n=d(i,["audio"]);n!=null&&f(t,["audio"],zx(n));const a=d(i,["audioStreamEnd"]);a!=null&&f(t,["audioStreamEnd"],a);const r=d(i,["video"]);r!=null&&f(t,["video"],Gx(r));const l=d(i,["text"]);return l!=null&&f(t,["text"],l),d(i,["activityStart"])!=null&&f(t,["activityStart"],DP()),d(i,["activityEnd"])!=null&&f(t,["activityEnd"],IP()),t}function sw(i){const t={},e=d(i,["text"]);e!=null&&f(t,["text"],e);const n=d(i,["weight"]);return n!=null&&f(t,["weight"],n),t}function PP(i){const t={},e=d(i,["weightedPrompts"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>sw(a))),f(t,["weightedPrompts"],n)}return t}function aw(i){const t={},e=d(i,["temperature"]);e!=null&&f(t,["temperature"],e);const n=d(i,["topK"]);n!=null&&f(t,["topK"],n);const a=d(i,["seed"]);a!=null&&f(t,["seed"],a);const r=d(i,["guidance"]);r!=null&&f(t,["guidance"],r);const l=d(i,["bpm"]);l!=null&&f(t,["bpm"],l);const c=d(i,["density"]);c!=null&&f(t,["density"],c);const p=d(i,["brightness"]);p!=null&&f(t,["brightness"],p);const m=d(i,["scale"]);m!=null&&f(t,["scale"],m);const y=d(i,["muteBass"]);y!=null&&f(t,["muteBass"],y);const _=d(i,["muteDrums"]);_!=null&&f(t,["muteDrums"],_);const T=d(i,["onlyBassAndDrums"]);return T!=null&&f(t,["onlyBassAndDrums"],T),t}function FP(i){const t={},e=d(i,["musicGenerationConfig"]);return e!=null&&f(t,["musicGenerationConfig"],aw(e)),t}function ow(i){const t={},e=d(i,["model"]);return e!=null&&f(t,["model"],e),t}function rw(i){const t={},e=d(i,["weightedPrompts"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>sw(a))),f(t,["weightedPrompts"],n)}return t}function q0(i){const t={},e=d(i,["setup"]);e!=null&&f(t,["setup"],ow(e));const n=d(i,["clientContent"]);n!=null&&f(t,["clientContent"],rw(n));const a=d(i,["musicGenerationConfig"]);a!=null&&f(t,["musicGenerationConfig"],aw(a));const r=d(i,["playbackControl"]);return r!=null&&f(t,["playbackControl"],r),t}function UP(){return{}}function OP(i){const t={},e=d(i,["sessionId"]);return e!=null&&f(t,["sessionId"],e),t}function VP(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function BP(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function HP(i){const t={},e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function GP(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["data"]);n!=null&&f(t,["data"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function zP(i){const t={},e=d(i,["fileUri"]);e!=null&&f(t,["fileUri"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function qP(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["fileUri"]);n!=null&&f(t,["fileUri"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function $P(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],VP(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],HP(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],zP(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function YP(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],BP(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],GP(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],qP(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function XP(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>$P(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function KP(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>YP(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function jb(i){const t={},e=d(i,["text"]);e!=null&&f(t,["text"],e);const n=d(i,["finished"]);return n!=null&&f(t,["finished"],n),t}function tx(i){const t={},e=d(i,["text"]);e!=null&&f(t,["text"],e);const n=d(i,["finished"]);return n!=null&&f(t,["finished"],n),t}function JP(i){const t={},e=d(i,["retrievedUrl"]);e!=null&&f(t,["retrievedUrl"],e);const n=d(i,["urlRetrievalStatus"]);return n!=null&&f(t,["urlRetrievalStatus"],n),t}function WP(i){const t={},e=d(i,["urlMetadata"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>JP(a))),f(t,["urlMetadata"],n)}return t}function ZP(i){const t={},e=d(i,["modelTurn"]);e!=null&&f(t,["modelTurn"],XP(e));const n=d(i,["turnComplete"]);n!=null&&f(t,["turnComplete"],n);const a=d(i,["interrupted"]);a!=null&&f(t,["interrupted"],a);const r=d(i,["groundingMetadata"]);r!=null&&f(t,["groundingMetadata"],r);const l=d(i,["generationComplete"]);l!=null&&f(t,["generationComplete"],l);const c=d(i,["inputTranscription"]);c!=null&&f(t,["inputTranscription"],jb(c));const p=d(i,["outputTranscription"]);p!=null&&f(t,["outputTranscription"],jb(p));const m=d(i,["urlContextMetadata"]);return m!=null&&f(t,["urlContextMetadata"],WP(m)),t}function QP(i){const t={},e=d(i,["modelTurn"]);e!=null&&f(t,["modelTurn"],KP(e));const n=d(i,["turnComplete"]);n!=null&&f(t,["turnComplete"],n);const a=d(i,["interrupted"]);a!=null&&f(t,["interrupted"],a);const r=d(i,["groundingMetadata"]);r!=null&&f(t,["groundingMetadata"],r);const l=d(i,["generationComplete"]);l!=null&&f(t,["generationComplete"],l);const c=d(i,["inputTranscription"]);c!=null&&f(t,["inputTranscription"],tx(c));const p=d(i,["outputTranscription"]);return p!=null&&f(t,["outputTranscription"],tx(p)),t}function jP(i){const t={},e=d(i,["id"]);e!=null&&f(t,["id"],e);const n=d(i,["args"]);n!=null&&f(t,["args"],n);const a=d(i,["name"]);return a!=null&&f(t,["name"],a),t}function t2(i){const t={},e=d(i,["args"]);e!=null&&f(t,["args"],e);const n=d(i,["name"]);return n!=null&&f(t,["name"],n),t}function e2(i){const t={},e=d(i,["functionCalls"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>jP(a))),f(t,["functionCalls"],n)}return t}function n2(i){const t={},e=d(i,["functionCalls"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>t2(a))),f(t,["functionCalls"],n)}return t}function i2(i){const t={},e=d(i,["ids"]);return e!=null&&f(t,["ids"],e),t}function s2(i){const t={},e=d(i,["ids"]);return e!=null&&f(t,["ids"],e),t}function Tm(i){const t={},e=d(i,["modality"]);e!=null&&f(t,["modality"],e);const n=d(i,["tokenCount"]);return n!=null&&f(t,["tokenCount"],n),t}function Sm(i){const t={},e=d(i,["modality"]);e!=null&&f(t,["modality"],e);const n=d(i,["tokenCount"]);return n!=null&&f(t,["tokenCount"],n),t}function a2(i){const t={},e=d(i,["promptTokenCount"]);e!=null&&f(t,["promptTokenCount"],e);const n=d(i,["cachedContentTokenCount"]);n!=null&&f(t,["cachedContentTokenCount"],n);const a=d(i,["responseTokenCount"]);a!=null&&f(t,["responseTokenCount"],a);const r=d(i,["toolUsePromptTokenCount"]);r!=null&&f(t,["toolUsePromptTokenCount"],r);const l=d(i,["thoughtsTokenCount"]);l!=null&&f(t,["thoughtsTokenCount"],l);const c=d(i,["totalTokenCount"]);c!=null&&f(t,["totalTokenCount"],c);const p=d(i,["promptTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(S=>Tm(S))),f(t,["promptTokensDetails"],T)}const m=d(i,["cacheTokensDetails"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(S=>Tm(S))),f(t,["cacheTokensDetails"],T)}const y=d(i,["responseTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(S=>Tm(S))),f(t,["responseTokensDetails"],T)}const _=d(i,["toolUsePromptTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>Tm(S))),f(t,["toolUsePromptTokensDetails"],T)}return t}function o2(i){const t={},e=d(i,["promptTokenCount"]);e!=null&&f(t,["promptTokenCount"],e);const n=d(i,["cachedContentTokenCount"]);n!=null&&f(t,["cachedContentTokenCount"],n);const a=d(i,["candidatesTokenCount"]);a!=null&&f(t,["responseTokenCount"],a);const r=d(i,["toolUsePromptTokenCount"]);r!=null&&f(t,["toolUsePromptTokenCount"],r);const l=d(i,["thoughtsTokenCount"]);l!=null&&f(t,["thoughtsTokenCount"],l);const c=d(i,["totalTokenCount"]);c!=null&&f(t,["totalTokenCount"],c);const p=d(i,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(C=>Sm(C))),f(t,["promptTokensDetails"],S)}const m=d(i,["cacheTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(C=>Sm(C))),f(t,["cacheTokensDetails"],S)}const y=d(i,["candidatesTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(C=>Sm(C))),f(t,["responseTokensDetails"],S)}const _=d(i,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(C=>Sm(C))),f(t,["toolUsePromptTokensDetails"],S)}const T=d(i,["trafficType"]);return T!=null&&f(t,["trafficType"],T),t}function r2(i){const t={},e=d(i,["timeLeft"]);return e!=null&&f(t,["timeLeft"],e),t}function l2(i){const t={},e=d(i,["timeLeft"]);return e!=null&&f(t,["timeLeft"],e),t}function u2(i){const t={},e=d(i,["newHandle"]);e!=null&&f(t,["newHandle"],e);const n=d(i,["resumable"]);n!=null&&f(t,["resumable"],n);const a=d(i,["lastConsumedClientMessageIndex"]);return a!=null&&f(t,["lastConsumedClientMessageIndex"],a),t}function c2(i){const t={},e=d(i,["newHandle"]);e!=null&&f(t,["newHandle"],e);const n=d(i,["resumable"]);n!=null&&f(t,["resumable"],n);const a=d(i,["lastConsumedClientMessageIndex"]);return a!=null&&f(t,["lastConsumedClientMessageIndex"],a),t}function d2(i){const t={};d(i,["setupComplete"])!=null&&f(t,["setupComplete"],UP());const n=d(i,["serverContent"]);n!=null&&f(t,["serverContent"],ZP(n));const a=d(i,["toolCall"]);a!=null&&f(t,["toolCall"],e2(a));const r=d(i,["toolCallCancellation"]);r!=null&&f(t,["toolCallCancellation"],i2(r));const l=d(i,["usageMetadata"]);l!=null&&f(t,["usageMetadata"],a2(l));const c=d(i,["goAway"]);c!=null&&f(t,["goAway"],r2(c));const p=d(i,["sessionResumptionUpdate"]);return p!=null&&f(t,["sessionResumptionUpdate"],u2(p)),t}function f2(i){const t={},e=d(i,["setupComplete"]);e!=null&&f(t,["setupComplete"],OP(e));const n=d(i,["serverContent"]);n!=null&&f(t,["serverContent"],QP(n));const a=d(i,["toolCall"]);a!=null&&f(t,["toolCall"],n2(a));const r=d(i,["toolCallCancellation"]);r!=null&&f(t,["toolCallCancellation"],s2(r));const l=d(i,["usageMetadata"]);l!=null&&f(t,["usageMetadata"],o2(l));const c=d(i,["goAway"]);c!=null&&f(t,["goAway"],l2(c));const p=d(i,["sessionResumptionUpdate"]);return p!=null&&f(t,["sessionResumptionUpdate"],c2(p)),t}function h2(){return{}}function p2(i){const t={},e=d(i,["text"]);e!=null&&f(t,["text"],e);const n=d(i,["weight"]);return n!=null&&f(t,["weight"],n),t}function m2(i){const t={},e=d(i,["weightedPrompts"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>p2(a))),f(t,["weightedPrompts"],n)}return t}function g2(i){const t={},e=d(i,["temperature"]);e!=null&&f(t,["temperature"],e);const n=d(i,["topK"]);n!=null&&f(t,["topK"],n);const a=d(i,["seed"]);a!=null&&f(t,["seed"],a);const r=d(i,["guidance"]);r!=null&&f(t,["guidance"],r);const l=d(i,["bpm"]);l!=null&&f(t,["bpm"],l);const c=d(i,["density"]);c!=null&&f(t,["density"],c);const p=d(i,["brightness"]);p!=null&&f(t,["brightness"],p);const m=d(i,["scale"]);m!=null&&f(t,["scale"],m);const y=d(i,["muteBass"]);y!=null&&f(t,["muteBass"],y);const _=d(i,["muteDrums"]);_!=null&&f(t,["muteDrums"],_);const T=d(i,["onlyBassAndDrums"]);return T!=null&&f(t,["onlyBassAndDrums"],T),t}function y2(i){const t={},e=d(i,["clientContent"]);e!=null&&f(t,["clientContent"],m2(e));const n=d(i,["musicGenerationConfig"]);return n!=null&&f(t,["musicGenerationConfig"],g2(n)),t}function v2(i){const t={},e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);n!=null&&f(t,["mimeType"],n);const a=d(i,["sourceMetadata"]);return a!=null&&f(t,["sourceMetadata"],y2(a)),t}function _2(i){const t={},e=d(i,["audioChunks"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>v2(a))),f(t,["audioChunks"],n)}return t}function A2(i){const t={},e=d(i,["text"]);e!=null&&f(t,["text"],e);const n=d(i,["filteredReason"]);return n!=null&&f(t,["filteredReason"],n),t}function T2(i){const t={};d(i,["setupComplete"])!=null&&f(t,["setupComplete"],h2());const n=d(i,["serverContent"]);n!=null&&f(t,["serverContent"],_2(n));const a=d(i,["filteredPrompt"]);return a!=null&&f(t,["filteredPrompt"],A2(a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S2(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function C2(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function E2(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["fileUri"]);e!=null&&f(t,["fileUri"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function b2(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],S2(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],C2(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],E2(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function qg(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>b2(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function x2(i){const t={},e=d(i,["anyOf"]);e!=null&&f(t,["anyOf"],e);const n=d(i,["default"]);n!=null&&f(t,["default"],n);const a=d(i,["description"]);a!=null&&f(t,["description"],a);const r=d(i,["enum"]);r!=null&&f(t,["enum"],r);const l=d(i,["example"]);l!=null&&f(t,["example"],l);const c=d(i,["format"]);c!=null&&f(t,["format"],c);const p=d(i,["items"]);p!=null&&f(t,["items"],p);const m=d(i,["maxItems"]);m!=null&&f(t,["maxItems"],m);const y=d(i,["maxLength"]);y!=null&&f(t,["maxLength"],y);const _=d(i,["maxProperties"]);_!=null&&f(t,["maxProperties"],_);const T=d(i,["maximum"]);T!=null&&f(t,["maximum"],T);const S=d(i,["minItems"]);S!=null&&f(t,["minItems"],S);const C=d(i,["minLength"]);C!=null&&f(t,["minLength"],C);const x=d(i,["minProperties"]);x!=null&&f(t,["minProperties"],x);const D=d(i,["minimum"]);D!=null&&f(t,["minimum"],D);const N=d(i,["nullable"]);N!=null&&f(t,["nullable"],N);const L=d(i,["pattern"]);L!=null&&f(t,["pattern"],L);const U=d(i,["properties"]);U!=null&&f(t,["properties"],U);const P=d(i,["propertyOrdering"]);P!=null&&f(t,["propertyOrdering"],P);const I=d(i,["required"]);I!=null&&f(t,["required"],I);const q=d(i,["title"]);q!=null&&f(t,["title"],q);const Y=d(i,["type"]);return Y!=null&&f(t,["type"],Y),t}function w2(i){const t={};if(d(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const e=d(i,["category"]);e!=null&&f(t,["category"],e);const n=d(i,["threshold"]);return n!=null&&f(t,["threshold"],n),t}function M2(i){const t={},e=d(i,["behavior"]);e!=null&&f(t,["behavior"],e);const n=d(i,["description"]);n!=null&&f(t,["description"],n);const a=d(i,["name"]);a!=null&&f(t,["name"],a);const r=d(i,["parameters"]);r!=null&&f(t,["parameters"],r);const l=d(i,["parametersJsonSchema"]);l!=null&&f(t,["parametersJsonSchema"],l);const c=d(i,["response"]);c!=null&&f(t,["response"],c);const p=d(i,["responseJsonSchema"]);return p!=null&&f(t,["responseJsonSchema"],p),t}function R2(i){const t={},e=d(i,["startTime"]);e!=null&&f(t,["startTime"],e);const n=d(i,["endTime"]);return n!=null&&f(t,["endTime"],n),t}function D2(i){const t={},e=d(i,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],R2(e)),t}function N2(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["dynamicThreshold"]);return n!=null&&f(t,["dynamicThreshold"],n),t}function I2(i){const t={},e=d(i,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],N2(e)),t}function L2(){return{}}function k2(i){const t={},e=d(i,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>M2(m))),f(t,["functionDeclarations"],p)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(i,["googleSearch"]);n!=null&&f(t,["googleSearch"],D2(n));const a=d(i,["googleSearchRetrieval"]);if(a!=null&&f(t,["googleSearchRetrieval"],I2(a)),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(i,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(i,["urlContext"])!=null&&f(t,["urlContext"],L2());const l=d(i,["codeExecution"]);l!=null&&f(t,["codeExecution"],l);const c=d(i,["computerUse"]);return c!=null&&f(t,["computerUse"],c),t}function P2(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["allowedFunctionNames"]);return n!=null&&f(t,["allowedFunctionNames"],n),t}function F2(i){const t={},e=d(i,["latitude"]);e!=null&&f(t,["latitude"],e);const n=d(i,["longitude"]);return n!=null&&f(t,["longitude"],n),t}function U2(i){const t={},e=d(i,["latLng"]);e!=null&&f(t,["latLng"],F2(e));const n=d(i,["languageCode"]);return n!=null&&f(t,["languageCode"],n),t}function O2(i){const t={},e=d(i,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],P2(e));const n=d(i,["retrievalConfig"]);return n!=null&&f(t,["retrievalConfig"],U2(n)),t}function V2(i){const t={},e=d(i,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function lw(i){const t={},e=d(i,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],V2(e)),t}function B2(i){const t={},e=d(i,["speaker"]);e!=null&&f(t,["speaker"],e);const n=d(i,["voiceConfig"]);return n!=null&&f(t,["voiceConfig"],lw(n)),t}function H2(i){const t={},e=d(i,["speakerVoiceConfigs"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>B2(a))),f(t,["speakerVoiceConfigs"],n)}return t}function G2(i){const t={},e=d(i,["voiceConfig"]);e!=null&&f(t,["voiceConfig"],lw(e));const n=d(i,["multiSpeakerVoiceConfig"]);n!=null&&f(t,["multiSpeakerVoiceConfig"],H2(n));const a=d(i,["languageCode"]);return a!=null&&f(t,["languageCode"],a),t}function z2(i){const t={},e=d(i,["includeThoughts"]);e!=null&&f(t,["includeThoughts"],e);const n=d(i,["thinkingBudget"]);return n!=null&&f(t,["thinkingBudget"],n),t}function q2(i,t,e){const n={},a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],qg(Mn(a)));const r=d(t,["temperature"]);r!=null&&f(n,["temperature"],r);const l=d(t,["topP"]);l!=null&&f(n,["topP"],l);const c=d(t,["topK"]);c!=null&&f(n,["topK"],c);const p=d(t,["candidateCount"]);p!=null&&f(n,["candidateCount"],p);const m=d(t,["maxOutputTokens"]);m!=null&&f(n,["maxOutputTokens"],m);const y=d(t,["stopSequences"]);y!=null&&f(n,["stopSequences"],y);const _=d(t,["responseLogprobs"]);_!=null&&f(n,["responseLogprobs"],_);const T=d(t,["logprobs"]);T!=null&&f(n,["logprobs"],T);const S=d(t,["presencePenalty"]);S!=null&&f(n,["presencePenalty"],S);const C=d(t,["frequencyPenalty"]);C!=null&&f(n,["frequencyPenalty"],C);const x=d(t,["seed"]);x!=null&&f(n,["seed"],x);const D=d(t,["responseMimeType"]);D!=null&&f(n,["responseMimeType"],D);const N=d(t,["responseSchema"]);N!=null&&f(n,["responseSchema"],x2(wf(N)));const L=d(t,["responseJsonSchema"]);if(L!=null&&f(n,["responseJsonSchema"],L),d(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=d(t,["safetySettings"]);if(e!==void 0&&U!=null){let it=U;Array.isArray(it)&&(it=it.map(Tt=>w2(Tt))),f(e,["safetySettings"],it)}const P=d(t,["tools"]);if(e!==void 0&&P!=null){let it=Wc(P);Array.isArray(it)&&(it=it.map(Tt=>k2(Jc(Tt)))),f(e,["tools"],it)}const I=d(t,["toolConfig"]);if(e!==void 0&&I!=null&&f(e,["toolConfig"],O2(I)),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=d(t,["cachedContent"]);e!==void 0&&q!=null&&f(e,["cachedContent"],Ba(i,q));const Y=d(t,["responseModalities"]);Y!=null&&f(n,["responseModalities"],Y);const tt=d(t,["mediaResolution"]);tt!=null&&f(n,["mediaResolution"],tt);const j=d(t,["speechConfig"]);if(j!=null&&f(n,["speechConfig"],G2(dA(j))),d(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const at=d(t,["thinkingConfig"]);return at!=null&&f(n,["thinkingConfig"],z2(at)),n}function ex(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["contents"]);if(a!=null){let l=Gi(a);Array.isArray(l)&&(l=l.map(c=>qg(c))),f(e,["contents"],l)}const r=d(t,["config"]);return r!=null&&f(e,["generationConfig"],q2(i,r,e)),e}function $2(i,t){const e={},n=d(i,["taskType"]);t!==void 0&&n!=null&&f(t,["requests[]","taskType"],n);const a=d(i,["title"]);t!==void 0&&a!=null&&f(t,["requests[]","title"],a);const r=d(i,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),d(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function Y2(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["contents"]);a!=null&&f(e,["requests[]","content"],$x(i,a));const r=d(t,["config"]);r!=null&&f(e,["config"],$2(r,e));const l=d(t,["model"]);return l!==void 0&&f(e,["requests[]","model"],le(i,l)),e}function X2(i,t){const e={};if(d(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=d(i,["numberOfImages"]);t!==void 0&&n!=null&&f(t,["parameters","sampleCount"],n);const a=d(i,["aspectRatio"]);t!==void 0&&a!=null&&f(t,["parameters","aspectRatio"],a);const r=d(i,["guidanceScale"]);if(t!==void 0&&r!=null&&f(t,["parameters","guidanceScale"],r),d(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(i,["safetyFilterLevel"]);t!==void 0&&l!=null&&f(t,["parameters","safetySetting"],l);const c=d(i,["personGeneration"]);t!==void 0&&c!=null&&f(t,["parameters","personGeneration"],c);const p=d(i,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);const m=d(i,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);const y=d(i,["language"]);t!==void 0&&y!=null&&f(t,["parameters","language"],y);const _=d(i,["outputMimeType"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","mimeType"],_);const T=d(i,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T),d(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return e}function K2(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["prompt"]);a!=null&&f(e,["instances[0]","prompt"],a);const r=d(t,["config"]);return r!=null&&f(e,["config"],X2(r,e)),e}function J2(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","name"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function W2(i,t,e){const n={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const l=d(t,["filter"]);e!==void 0&&l!=null&&f(e,["_query","filter"],l);const c=d(t,["queryBase"]);return e!==void 0&&c!=null&&f(e,["_url","models_url"],Kx(i,c)),n}function Z2(i,t){const e={},n=d(t,["config"]);return n!=null&&f(e,["config"],W2(i,n,e)),e}function Q2(i,t){const e={},n=d(i,["displayName"]);t!==void 0&&n!=null&&f(t,["displayName"],n);const a=d(i,["description"]);t!==void 0&&a!=null&&f(t,["description"],a);const r=d(i,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),e}function j2(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","name"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],Q2(a,e)),e}function tF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","name"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function eF(i){const t={};if(d(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function nF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["contents"]);if(a!=null){let l=Gi(a);Array.isArray(l)&&(l=l.map(c=>qg(c))),f(e,["contents"],l)}const r=d(t,["config"]);return r!=null&&f(e,["config"],eF(r)),e}function iF(i){const t={};if(d(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const e=d(i,["imageBytes"]);e!=null&&f(t,["bytesBase64Encoded"],Ha(e));const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function sF(i,t){const e={},n=d(i,["numberOfVideos"]);if(t!==void 0&&n!=null&&f(t,["parameters","sampleCount"],n),d(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(i,["durationSeconds"]);if(t!==void 0&&a!=null&&f(t,["parameters","durationSeconds"],a),d(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=d(i,["aspectRatio"]);if(t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r),d(i,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=d(i,["personGeneration"]);if(t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l),d(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=d(i,["negativePrompt"]);t!==void 0&&c!=null&&f(t,["parameters","negativePrompt"],c);const p=d(i,["enhancePrompt"]);if(t!==void 0&&p!=null&&f(t,["parameters","enhancePrompt"],p),d(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(d(i,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(d(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return e}function aF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["prompt"]);a!=null&&f(e,["instances[0]","prompt"],a);const r=d(t,["image"]);if(r!=null&&f(e,["instances[0]","image"],iF(r)),d(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const l=d(t,["config"]);return l!=null&&f(e,["config"],sF(l,e)),e}function oF(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function rF(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["data"]);n!=null&&f(t,["data"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function lF(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["fileUri"]);n!=null&&f(t,["fileUri"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function uF(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],oF(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],rF(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],lF(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function Qc(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>uF(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function cF(i){const t={},e=d(i,["anyOf"]);e!=null&&f(t,["anyOf"],e);const n=d(i,["default"]);n!=null&&f(t,["default"],n);const a=d(i,["description"]);a!=null&&f(t,["description"],a);const r=d(i,["enum"]);r!=null&&f(t,["enum"],r);const l=d(i,["example"]);l!=null&&f(t,["example"],l);const c=d(i,["format"]);c!=null&&f(t,["format"],c);const p=d(i,["items"]);p!=null&&f(t,["items"],p);const m=d(i,["maxItems"]);m!=null&&f(t,["maxItems"],m);const y=d(i,["maxLength"]);y!=null&&f(t,["maxLength"],y);const _=d(i,["maxProperties"]);_!=null&&f(t,["maxProperties"],_);const T=d(i,["maximum"]);T!=null&&f(t,["maximum"],T);const S=d(i,["minItems"]);S!=null&&f(t,["minItems"],S);const C=d(i,["minLength"]);C!=null&&f(t,["minLength"],C);const x=d(i,["minProperties"]);x!=null&&f(t,["minProperties"],x);const D=d(i,["minimum"]);D!=null&&f(t,["minimum"],D);const N=d(i,["nullable"]);N!=null&&f(t,["nullable"],N);const L=d(i,["pattern"]);L!=null&&f(t,["pattern"],L);const U=d(i,["properties"]);U!=null&&f(t,["properties"],U);const P=d(i,["propertyOrdering"]);P!=null&&f(t,["propertyOrdering"],P);const I=d(i,["required"]);I!=null&&f(t,["required"],I);const q=d(i,["title"]);q!=null&&f(t,["title"],q);const Y=d(i,["type"]);return Y!=null&&f(t,["type"],Y),t}function dF(i){const t={},e=d(i,["featureSelectionPreference"]);return e!=null&&f(t,["featureSelectionPreference"],e),t}function fF(i){const t={},e=d(i,["method"]);e!=null&&f(t,["method"],e);const n=d(i,["category"]);n!=null&&f(t,["category"],n);const a=d(i,["threshold"]);return a!=null&&f(t,["threshold"],a),t}function hF(i){const t={};if(d(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=d(i,["description"]);e!=null&&f(t,["description"],e);const n=d(i,["name"]);n!=null&&f(t,["name"],n);const a=d(i,["parameters"]);a!=null&&f(t,["parameters"],a);const r=d(i,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const l=d(i,["response"]);l!=null&&f(t,["response"],l);const c=d(i,["responseJsonSchema"]);return c!=null&&f(t,["responseJsonSchema"],c),t}function pF(i){const t={},e=d(i,["startTime"]);e!=null&&f(t,["startTime"],e);const n=d(i,["endTime"]);return n!=null&&f(t,["endTime"],n),t}function mF(i){const t={},e=d(i,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],pF(e)),t}function gF(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["dynamicThreshold"]);return n!=null&&f(t,["dynamicThreshold"],n),t}function yF(i){const t={},e=d(i,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],gF(e)),t}function vF(){return{}}function _F(i){const t={},e=d(i,["apiKeyString"]);return e!=null&&f(t,["apiKeyString"],e),t}function AF(i){const t={},e=d(i,["apiKeyConfig"]);e!=null&&f(t,["apiKeyConfig"],_F(e));const n=d(i,["authType"]);n!=null&&f(t,["authType"],n);const a=d(i,["googleServiceAccountConfig"]);a!=null&&f(t,["googleServiceAccountConfig"],a);const r=d(i,["httpBasicAuthConfig"]);r!=null&&f(t,["httpBasicAuthConfig"],r);const l=d(i,["oauthConfig"]);l!=null&&f(t,["oauthConfig"],l);const c=d(i,["oidcConfig"]);return c!=null&&f(t,["oidcConfig"],c),t}function TF(i){const t={},e=d(i,["authConfig"]);return e!=null&&f(t,["authConfig"],AF(e)),t}function SF(){return{}}function uw(i){const t={},e=d(i,["functionDeclarations"]);if(e!=null){let _=e;Array.isArray(_)&&(_=_.map(T=>hF(T))),f(t,["functionDeclarations"],_)}const n=d(i,["retrieval"]);n!=null&&f(t,["retrieval"],n);const a=d(i,["googleSearch"]);a!=null&&f(t,["googleSearch"],mF(a));const r=d(i,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],yF(r)),d(i,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],vF());const c=d(i,["googleMaps"]);c!=null&&f(t,["googleMaps"],TF(c)),d(i,["urlContext"])!=null&&f(t,["urlContext"],SF());const m=d(i,["codeExecution"]);m!=null&&f(t,["codeExecution"],m);const y=d(i,["computerUse"]);return y!=null&&f(t,["computerUse"],y),t}function CF(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["allowedFunctionNames"]);return n!=null&&f(t,["allowedFunctionNames"],n),t}function EF(i){const t={},e=d(i,["latitude"]);e!=null&&f(t,["latitude"],e);const n=d(i,["longitude"]);return n!=null&&f(t,["longitude"],n),t}function bF(i){const t={},e=d(i,["latLng"]);e!=null&&f(t,["latLng"],EF(e));const n=d(i,["languageCode"]);return n!=null&&f(t,["languageCode"],n),t}function xF(i){const t={},e=d(i,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],CF(e));const n=d(i,["retrievalConfig"]);return n!=null&&f(t,["retrievalConfig"],bF(n)),t}function wF(i){const t={},e=d(i,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function MF(i){const t={},e=d(i,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],wF(e)),t}function RF(i){const t={},e=d(i,["voiceConfig"]);if(e!=null&&f(t,["voiceConfig"],MF(e)),d(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=d(i,["languageCode"]);return n!=null&&f(t,["languageCode"],n),t}function DF(i){const t={},e=d(i,["includeThoughts"]);e!=null&&f(t,["includeThoughts"],e);const n=d(i,["thinkingBudget"]);return n!=null&&f(t,["thinkingBudget"],n),t}function NF(i,t,e){const n={},a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Qc(Mn(a)));const r=d(t,["temperature"]);r!=null&&f(n,["temperature"],r);const l=d(t,["topP"]);l!=null&&f(n,["topP"],l);const c=d(t,["topK"]);c!=null&&f(n,["topK"],c);const p=d(t,["candidateCount"]);p!=null&&f(n,["candidateCount"],p);const m=d(t,["maxOutputTokens"]);m!=null&&f(n,["maxOutputTokens"],m);const y=d(t,["stopSequences"]);y!=null&&f(n,["stopSequences"],y);const _=d(t,["responseLogprobs"]);_!=null&&f(n,["responseLogprobs"],_);const T=d(t,["logprobs"]);T!=null&&f(n,["logprobs"],T);const S=d(t,["presencePenalty"]);S!=null&&f(n,["presencePenalty"],S);const C=d(t,["frequencyPenalty"]);C!=null&&f(n,["frequencyPenalty"],C);const x=d(t,["seed"]);x!=null&&f(n,["seed"],x);const D=d(t,["responseMimeType"]);D!=null&&f(n,["responseMimeType"],D);const N=d(t,["responseSchema"]);N!=null&&f(n,["responseSchema"],cF(wf(N)));const L=d(t,["responseJsonSchema"]);L!=null&&f(n,["responseJsonSchema"],L);const U=d(t,["routingConfig"]);U!=null&&f(n,["routingConfig"],U);const P=d(t,["modelSelectionConfig"]);P!=null&&f(n,["modelConfig"],dF(P));const I=d(t,["safetySettings"]);if(e!==void 0&&I!=null){let Dt=I;Array.isArray(Dt)&&(Dt=Dt.map(V=>fF(V))),f(e,["safetySettings"],Dt)}const q=d(t,["tools"]);if(e!==void 0&&q!=null){let Dt=Wc(q);Array.isArray(Dt)&&(Dt=Dt.map(V=>uw(Jc(V)))),f(e,["tools"],Dt)}const Y=d(t,["toolConfig"]);e!==void 0&&Y!=null&&f(e,["toolConfig"],xF(Y));const tt=d(t,["labels"]);e!==void 0&&tt!=null&&f(e,["labels"],tt);const j=d(t,["cachedContent"]);e!==void 0&&j!=null&&f(e,["cachedContent"],Ba(i,j));const at=d(t,["responseModalities"]);at!=null&&f(n,["responseModalities"],at);const it=d(t,["mediaResolution"]);it!=null&&f(n,["mediaResolution"],it);const Tt=d(t,["speechConfig"]);Tt!=null&&f(n,["speechConfig"],RF(dA(Tt)));const Zt=d(t,["audioTimestamp"]);Zt!=null&&f(n,["audioTimestamp"],Zt);const It=d(t,["thinkingConfig"]);return It!=null&&f(n,["thinkingConfig"],DF(It)),n}function nx(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["contents"]);if(a!=null){let l=Gi(a);Array.isArray(l)&&(l=l.map(c=>Qc(c))),f(e,["contents"],l)}const r=d(t,["config"]);return r!=null&&f(e,["generationConfig"],NF(i,r,e)),e}function IF(i,t){const e={},n=d(i,["taskType"]);t!==void 0&&n!=null&&f(t,["instances[]","task_type"],n);const a=d(i,["title"]);t!==void 0&&a!=null&&f(t,["instances[]","title"],a);const r=d(i,["outputDimensionality"]);t!==void 0&&r!=null&&f(t,["parameters","outputDimensionality"],r);const l=d(i,["mimeType"]);t!==void 0&&l!=null&&f(t,["instances[]","mimeType"],l);const c=d(i,["autoTruncate"]);return t!==void 0&&c!=null&&f(t,["parameters","autoTruncate"],c),e}function LF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["contents"]);a!=null&&f(e,["instances[]","content"],$x(i,a));const r=d(t,["config"]);return r!=null&&f(e,["config"],IF(r,e)),e}function kF(i,t){const e={},n=d(i,["outputGcsUri"]);t!==void 0&&n!=null&&f(t,["parameters","storageUri"],n);const a=d(i,["negativePrompt"]);t!==void 0&&a!=null&&f(t,["parameters","negativePrompt"],a);const r=d(i,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const l=d(i,["aspectRatio"]);t!==void 0&&l!=null&&f(t,["parameters","aspectRatio"],l);const c=d(i,["guidanceScale"]);t!==void 0&&c!=null&&f(t,["parameters","guidanceScale"],c);const p=d(i,["seed"]);t!==void 0&&p!=null&&f(t,["parameters","seed"],p);const m=d(i,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const y=d(i,["personGeneration"]);t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y);const _=d(i,["includeSafetyAttributes"]);t!==void 0&&_!=null&&f(t,["parameters","includeSafetyAttributes"],_);const T=d(i,["includeRaiReason"]);t!==void 0&&T!=null&&f(t,["parameters","includeRaiReason"],T);const S=d(i,["language"]);t!==void 0&&S!=null&&f(t,["parameters","language"],S);const C=d(i,["outputMimeType"]);t!==void 0&&C!=null&&f(t,["parameters","outputOptions","mimeType"],C);const x=d(i,["outputCompressionQuality"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","compressionQuality"],x);const D=d(i,["addWatermark"]);t!==void 0&&D!=null&&f(t,["parameters","addWatermark"],D);const N=d(i,["enhancePrompt"]);return t!==void 0&&N!=null&&f(t,["parameters","enhancePrompt"],N),e}function PF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["prompt"]);a!=null&&f(e,["instances[0]","prompt"],a);const r=d(t,["config"]);return r!=null&&f(e,["config"],kF(r,e)),e}function $g(i){const t={},e=d(i,["gcsUri"]);e!=null&&f(t,["gcsUri"],e);const n=d(i,["imageBytes"]);n!=null&&f(t,["bytesBase64Encoded"],Ha(n));const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function FF(i){const t={},e=d(i,["maskMode"]);e!=null&&f(t,["maskMode"],e);const n=d(i,["segmentationClasses"]);n!=null&&f(t,["maskClasses"],n);const a=d(i,["maskDilation"]);return a!=null&&f(t,["dilation"],a),t}function UF(i){const t={},e=d(i,["controlType"]);e!=null&&f(t,["controlType"],e);const n=d(i,["enableControlImageComputation"]);return n!=null&&f(t,["computeControl"],n),t}function OF(i){const t={},e=d(i,["styleDescription"]);return e!=null&&f(t,["styleDescription"],e),t}function VF(i){const t={},e=d(i,["subjectType"]);e!=null&&f(t,["subjectType"],e);const n=d(i,["subjectDescription"]);return n!=null&&f(t,["subjectDescription"],n),t}function BF(i){const t={},e=d(i,["referenceImage"]);e!=null&&f(t,["referenceImage"],$g(e));const n=d(i,["referenceId"]);n!=null&&f(t,["referenceId"],n);const a=d(i,["referenceType"]);a!=null&&f(t,["referenceType"],a);const r=d(i,["maskImageConfig"]);r!=null&&f(t,["maskImageConfig"],FF(r));const l=d(i,["controlImageConfig"]);l!=null&&f(t,["controlImageConfig"],UF(l));const c=d(i,["styleImageConfig"]);c!=null&&f(t,["styleImageConfig"],OF(c));const p=d(i,["subjectImageConfig"]);return p!=null&&f(t,["subjectImageConfig"],VF(p)),t}function HF(i,t){const e={},n=d(i,["outputGcsUri"]);t!==void 0&&n!=null&&f(t,["parameters","storageUri"],n);const a=d(i,["negativePrompt"]);t!==void 0&&a!=null&&f(t,["parameters","negativePrompt"],a);const r=d(i,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const l=d(i,["aspectRatio"]);t!==void 0&&l!=null&&f(t,["parameters","aspectRatio"],l);const c=d(i,["guidanceScale"]);t!==void 0&&c!=null&&f(t,["parameters","guidanceScale"],c);const p=d(i,["seed"]);t!==void 0&&p!=null&&f(t,["parameters","seed"],p);const m=d(i,["safetyFilterLevel"]);t!==void 0&&m!=null&&f(t,["parameters","safetySetting"],m);const y=d(i,["personGeneration"]);t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y);const _=d(i,["includeSafetyAttributes"]);t!==void 0&&_!=null&&f(t,["parameters","includeSafetyAttributes"],_);const T=d(i,["includeRaiReason"]);t!==void 0&&T!=null&&f(t,["parameters","includeRaiReason"],T);const S=d(i,["language"]);t!==void 0&&S!=null&&f(t,["parameters","language"],S);const C=d(i,["outputMimeType"]);t!==void 0&&C!=null&&f(t,["parameters","outputOptions","mimeType"],C);const x=d(i,["outputCompressionQuality"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","compressionQuality"],x);const D=d(i,["editMode"]);t!==void 0&&D!=null&&f(t,["parameters","editMode"],D);const N=d(i,["baseSteps"]);return t!==void 0&&N!=null&&f(t,["parameters","editConfig","baseSteps"],N),e}function GF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["prompt"]);a!=null&&f(e,["instances[0]","prompt"],a);const r=d(t,["referenceImages"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>BF(p))),f(e,["instances[0]","referenceImages"],c)}const l=d(t,["config"]);return l!=null&&f(e,["config"],HF(l,e)),e}function zF(i,t){const e={},n=d(i,["includeRaiReason"]);t!==void 0&&n!=null&&f(t,["parameters","includeRaiReason"],n);const a=d(i,["outputMimeType"]);t!==void 0&&a!=null&&f(t,["parameters","outputOptions","mimeType"],a);const r=d(i,["outputCompressionQuality"]);t!==void 0&&r!=null&&f(t,["parameters","outputOptions","compressionQuality"],r);const l=d(i,["enhanceInputImage"]);t!==void 0&&l!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],l);const c=d(i,["imagePreservationFactor"]);t!==void 0&&c!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],c);const p=d(i,["numberOfImages"]);t!==void 0&&p!=null&&f(t,["parameters","sampleCount"],p);const m=d(i,["mode"]);return t!==void 0&&m!=null&&f(t,["parameters","mode"],m),e}function qF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["image"]);a!=null&&f(e,["instances[0]","image"],$g(a));const r=d(t,["upscaleFactor"]);r!=null&&f(e,["parameters","upscaleConfig","upscaleFactor"],r);const l=d(t,["config"]);return l!=null&&f(e,["config"],zF(l,e)),e}function $F(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","name"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function YF(i,t,e){const n={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const l=d(t,["filter"]);e!==void 0&&l!=null&&f(e,["_query","filter"],l);const c=d(t,["queryBase"]);return e!==void 0&&c!=null&&f(e,["_url","models_url"],Kx(i,c)),n}function XF(i,t){const e={},n=d(t,["config"]);return n!=null&&f(e,["config"],YF(i,n,e)),e}function KF(i,t){const e={},n=d(i,["displayName"]);t!==void 0&&n!=null&&f(t,["displayName"],n);const a=d(i,["description"]);t!==void 0&&a!=null&&f(t,["description"],a);const r=d(i,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),e}function JF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],KF(a,e)),e}function WF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","name"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],a),e}function ZF(i,t){const e={},n=d(i,["systemInstruction"]);t!==void 0&&n!=null&&f(t,["systemInstruction"],Qc(Mn(n)));const a=d(i,["tools"]);if(t!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>uw(c))),f(t,["tools"],l)}const r=d(i,["generationConfig"]);return t!==void 0&&r!=null&&f(t,["generationConfig"],r),e}function QF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["contents"]);if(a!=null){let l=Gi(a);Array.isArray(l)&&(l=l.map(c=>Qc(c))),f(e,["contents"],l)}const r=d(t,["config"]);return r!=null&&f(e,["config"],ZF(r,e)),e}function jF(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["contents"]);if(a!=null){let l=Gi(a);Array.isArray(l)&&(l=l.map(c=>Qc(c))),f(e,["contents"],l)}const r=d(t,["config"]);return r!=null&&f(e,["config"],r),e}function tU(i){const t={},e=d(i,["uri"]);e!=null&&f(t,["gcsUri"],e);const n=d(i,["videoBytes"]);n!=null&&f(t,["bytesBase64Encoded"],Ha(n));const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function eU(i,t){const e={},n=d(i,["numberOfVideos"]);t!==void 0&&n!=null&&f(t,["parameters","sampleCount"],n);const a=d(i,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=d(i,["fps"]);t!==void 0&&r!=null&&f(t,["parameters","fps"],r);const l=d(i,["durationSeconds"]);t!==void 0&&l!=null&&f(t,["parameters","durationSeconds"],l);const c=d(i,["seed"]);t!==void 0&&c!=null&&f(t,["parameters","seed"],c);const p=d(i,["aspectRatio"]);t!==void 0&&p!=null&&f(t,["parameters","aspectRatio"],p);const m=d(i,["resolution"]);t!==void 0&&m!=null&&f(t,["parameters","resolution"],m);const y=d(i,["personGeneration"]);t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y);const _=d(i,["pubsubTopic"]);t!==void 0&&_!=null&&f(t,["parameters","pubsubTopic"],_);const T=d(i,["negativePrompt"]);t!==void 0&&T!=null&&f(t,["parameters","negativePrompt"],T);const S=d(i,["enhancePrompt"]);t!==void 0&&S!=null&&f(t,["parameters","enhancePrompt"],S);const C=d(i,["generateAudio"]);t!==void 0&&C!=null&&f(t,["parameters","generateAudio"],C);const x=d(i,["lastFrame"]);t!==void 0&&x!=null&&f(t,["instances[0]","lastFrame"],$g(x));const D=d(i,["compressionQuality"]);return t!==void 0&&D!=null&&f(t,["parameters","compressionQuality"],D),e}function nU(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["_url","model"],le(i,n));const a=d(t,["prompt"]);a!=null&&f(e,["instances[0]","prompt"],a);const r=d(t,["image"]);r!=null&&f(e,["instances[0]","image"],$g(r));const l=d(t,["video"]);l!=null&&f(e,["instances[0]","video"],tU(l));const c=d(t,["config"]);return c!=null&&f(e,["config"],eU(c,e)),e}function iU(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function sU(i){const t={},e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function aU(i){const t={},e=d(i,["fileUri"]);e!=null&&f(t,["fileUri"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function oU(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],iU(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],sU(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],aU(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function rU(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>oU(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function lU(i){const t={},e=d(i,["citationSources"]);return e!=null&&f(t,["citations"],e),t}function uU(i){const t={},e=d(i,["retrievedUrl"]);e!=null&&f(t,["retrievedUrl"],e);const n=d(i,["urlRetrievalStatus"]);return n!=null&&f(t,["urlRetrievalStatus"],n),t}function cU(i){const t={},e=d(i,["urlMetadata"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>uU(a))),f(t,["urlMetadata"],n)}return t}function dU(i){const t={},e=d(i,["content"]);e!=null&&f(t,["content"],rU(e));const n=d(i,["citationMetadata"]);n!=null&&f(t,["citationMetadata"],lU(n));const a=d(i,["tokenCount"]);a!=null&&f(t,["tokenCount"],a);const r=d(i,["finishReason"]);r!=null&&f(t,["finishReason"],r);const l=d(i,["urlContextMetadata"]);l!=null&&f(t,["urlContextMetadata"],cU(l));const c=d(i,["avgLogprobs"]);c!=null&&f(t,["avgLogprobs"],c);const p=d(i,["groundingMetadata"]);p!=null&&f(t,["groundingMetadata"],p);const m=d(i,["index"]);m!=null&&f(t,["index"],m);const y=d(i,["logprobsResult"]);y!=null&&f(t,["logprobsResult"],y);const _=d(i,["safetyRatings"]);return _!=null&&f(t,["safetyRatings"],_),t}function ix(i){const t={},e=d(i,["candidates"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(c=>dU(c))),f(t,["candidates"],l)}const n=d(i,["modelVersion"]);n!=null&&f(t,["modelVersion"],n);const a=d(i,["promptFeedback"]);a!=null&&f(t,["promptFeedback"],a);const r=d(i,["usageMetadata"]);return r!=null&&f(t,["usageMetadata"],r),t}function fU(i){const t={},e=d(i,["values"]);return e!=null&&f(t,["values"],e),t}function hU(){return{}}function pU(i){const t={},e=d(i,["embeddings"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>fU(r))),f(t,["embeddings"],a)}return d(i,["metadata"])!=null&&f(t,["metadata"],hU()),t}function mU(i){const t={},e=d(i,["bytesBase64Encoded"]);e!=null&&f(t,["imageBytes"],Ha(e));const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function cw(i){const t={},e=d(i,["safetyAttributes","categories"]);e!=null&&f(t,["categories"],e);const n=d(i,["safetyAttributes","scores"]);n!=null&&f(t,["scores"],n);const a=d(i,["contentType"]);return a!=null&&f(t,["contentType"],a),t}function gU(i){const t={},e=d(i,["_self"]);e!=null&&f(t,["image"],mU(e));const n=d(i,["raiFilteredReason"]);n!=null&&f(t,["raiFilteredReason"],n);const a=d(i,["_self"]);return a!=null&&f(t,["safetyAttributes"],cw(a)),t}function yU(i){const t={},e=d(i,["predictions"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>gU(r))),f(t,["generatedImages"],a)}const n=d(i,["positivePromptSafetyAttributes"]);return n!=null&&f(t,["positivePromptSafetyAttributes"],cw(n)),t}function vU(i){const t={},e=d(i,["baseModel"]);e!=null&&f(t,["baseModel"],e);const n=d(i,["createTime"]);n!=null&&f(t,["createTime"],n);const a=d(i,["updateTime"]);return a!=null&&f(t,["updateTime"],a),t}function $0(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["displayName"]);n!=null&&f(t,["displayName"],n);const a=d(i,["description"]);a!=null&&f(t,["description"],a);const r=d(i,["version"]);r!=null&&f(t,["version"],r);const l=d(i,["_self"]);l!=null&&f(t,["tunedModelInfo"],vU(l));const c=d(i,["inputTokenLimit"]);c!=null&&f(t,["inputTokenLimit"],c);const p=d(i,["outputTokenLimit"]);p!=null&&f(t,["outputTokenLimit"],p);const m=d(i,["supportedGenerationMethods"]);return m!=null&&f(t,["supportedActions"],m),t}function _U(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["_self"]);if(n!=null){let a=Jx(n);Array.isArray(a)&&(a=a.map(r=>$0(r))),f(t,["models"],a)}return t}function AU(){return{}}function TU(i){const t={},e=d(i,["totalTokens"]);e!=null&&f(t,["totalTokens"],e);const n=d(i,["cachedContentTokenCount"]);return n!=null&&f(t,["cachedContentTokenCount"],n),t}function SU(i){const t={},e=d(i,["video","uri"]);e!=null&&f(t,["uri"],e);const n=d(i,["video","encodedVideo"]);n!=null&&f(t,["videoBytes"],Ha(n));const a=d(i,["encoding"]);return a!=null&&f(t,["mimeType"],a),t}function CU(i){const t={},e=d(i,["_self"]);return e!=null&&f(t,["video"],SU(e)),t}function EU(i){const t={},e=d(i,["generatedSamples"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>CU(l))),f(t,["generatedVideos"],r)}const n=d(i,["raiMediaFilteredCount"]);n!=null&&f(t,["raiMediaFilteredCount"],n);const a=d(i,["raiMediaFilteredReasons"]);return a!=null&&f(t,["raiMediaFilteredReasons"],a),t}function bU(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["metadata"]);n!=null&&f(t,["metadata"],n);const a=d(i,["done"]);a!=null&&f(t,["done"],a);const r=d(i,["error"]);r!=null&&f(t,["error"],r);const l=d(i,["response","generateVideoResponse"]);return l!=null&&f(t,["response"],EU(l)),t}function xU(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function wU(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["data"]);n!=null&&f(t,["data"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function MU(i){const t={},e=d(i,["displayName"]);e!=null&&f(t,["displayName"],e);const n=d(i,["fileUri"]);n!=null&&f(t,["fileUri"],n);const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function RU(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],xU(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],wU(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],MU(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function DU(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>RU(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function NU(i){const t={},e=d(i,["citations"]);return e!=null&&f(t,["citations"],e),t}function IU(i){const t={},e=d(i,["retrievedUrl"]);e!=null&&f(t,["retrievedUrl"],e);const n=d(i,["urlRetrievalStatus"]);return n!=null&&f(t,["urlRetrievalStatus"],n),t}function LU(i){const t={},e=d(i,["urlMetadata"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>IU(a))),f(t,["urlMetadata"],n)}return t}function kU(i){const t={},e=d(i,["content"]);e!=null&&f(t,["content"],DU(e));const n=d(i,["citationMetadata"]);n!=null&&f(t,["citationMetadata"],NU(n));const a=d(i,["finishMessage"]);a!=null&&f(t,["finishMessage"],a);const r=d(i,["finishReason"]);r!=null&&f(t,["finishReason"],r);const l=d(i,["urlContextMetadata"]);l!=null&&f(t,["urlContextMetadata"],LU(l));const c=d(i,["avgLogprobs"]);c!=null&&f(t,["avgLogprobs"],c);const p=d(i,["groundingMetadata"]);p!=null&&f(t,["groundingMetadata"],p);const m=d(i,["index"]);m!=null&&f(t,["index"],m);const y=d(i,["logprobsResult"]);y!=null&&f(t,["logprobsResult"],y);const _=d(i,["safetyRatings"]);return _!=null&&f(t,["safetyRatings"],_),t}function sx(i){const t={},e=d(i,["candidates"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>kU(m))),f(t,["candidates"],p)}const n=d(i,["createTime"]);n!=null&&f(t,["createTime"],n);const a=d(i,["responseId"]);a!=null&&f(t,["responseId"],a);const r=d(i,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const l=d(i,["promptFeedback"]);l!=null&&f(t,["promptFeedback"],l);const c=d(i,["usageMetadata"]);return c!=null&&f(t,["usageMetadata"],c),t}function PU(i){const t={},e=d(i,["truncated"]);e!=null&&f(t,["truncated"],e);const n=d(i,["token_count"]);return n!=null&&f(t,["tokenCount"],n),t}function FU(i){const t={},e=d(i,["values"]);e!=null&&f(t,["values"],e);const n=d(i,["statistics"]);return n!=null&&f(t,["statistics"],PU(n)),t}function UU(i){const t={},e=d(i,["billableCharacterCount"]);return e!=null&&f(t,["billableCharacterCount"],e),t}function OU(i){const t={},e=d(i,["predictions[]","embeddings"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>FU(r))),f(t,["embeddings"],a)}const n=d(i,["metadata"]);return n!=null&&f(t,["metadata"],UU(n)),t}function VU(i){const t={},e=d(i,["gcsUri"]);e!=null&&f(t,["gcsUri"],e);const n=d(i,["bytesBase64Encoded"]);n!=null&&f(t,["imageBytes"],Ha(n));const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function dw(i){const t={},e=d(i,["safetyAttributes","categories"]);e!=null&&f(t,["categories"],e);const n=d(i,["safetyAttributes","scores"]);n!=null&&f(t,["scores"],n);const a=d(i,["contentType"]);return a!=null&&f(t,["contentType"],a),t}function hA(i){const t={},e=d(i,["_self"]);e!=null&&f(t,["image"],VU(e));const n=d(i,["raiFilteredReason"]);n!=null&&f(t,["raiFilteredReason"],n);const a=d(i,["_self"]);a!=null&&f(t,["safetyAttributes"],dw(a));const r=d(i,["prompt"]);return r!=null&&f(t,["enhancedPrompt"],r),t}function BU(i){const t={},e=d(i,["predictions"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>hA(r))),f(t,["generatedImages"],a)}const n=d(i,["positivePromptSafetyAttributes"]);return n!=null&&f(t,["positivePromptSafetyAttributes"],dw(n)),t}function HU(i){const t={},e=d(i,["predictions"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>hA(a))),f(t,["generatedImages"],n)}return t}function GU(i){const t={},e=d(i,["predictions"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>hA(a))),f(t,["generatedImages"],n)}return t}function zU(i){const t={},e=d(i,["endpoint"]);e!=null&&f(t,["name"],e);const n=d(i,["deployedModelId"]);return n!=null&&f(t,["deployedModelId"],n),t}function qU(i){const t={},e=d(i,["labels","google-vertex-llm-tuning-base-model-id"]);e!=null&&f(t,["baseModel"],e);const n=d(i,["createTime"]);n!=null&&f(t,["createTime"],n);const a=d(i,["updateTime"]);return a!=null&&f(t,["updateTime"],a),t}function $U(i){const t={},e=d(i,["checkpointId"]);e!=null&&f(t,["checkpointId"],e);const n=d(i,["epoch"]);n!=null&&f(t,["epoch"],n);const a=d(i,["step"]);return a!=null&&f(t,["step"],a),t}function Y0(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["displayName"]);n!=null&&f(t,["displayName"],n);const a=d(i,["description"]);a!=null&&f(t,["description"],a);const r=d(i,["versionId"]);r!=null&&f(t,["version"],r);const l=d(i,["deployedModels"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(T=>zU(T))),f(t,["endpoints"],_)}const c=d(i,["labels"]);c!=null&&f(t,["labels"],c);const p=d(i,["_self"]);p!=null&&f(t,["tunedModelInfo"],qU(p));const m=d(i,["defaultCheckpointId"]);m!=null&&f(t,["defaultCheckpointId"],m);const y=d(i,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>$U(T))),f(t,["checkpoints"],_)}return t}function YU(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["_self"]);if(n!=null){let a=Jx(n);Array.isArray(a)&&(a=a.map(r=>Y0(r))),f(t,["models"],a)}return t}function XU(){return{}}function KU(i){const t={},e=d(i,["totalTokens"]);return e!=null&&f(t,["totalTokens"],e),t}function JU(i){const t={},e=d(i,["tokensInfo"]);return e!=null&&f(t,["tokensInfo"],e),t}function WU(i){const t={},e=d(i,["gcsUri"]);e!=null&&f(t,["uri"],e);const n=d(i,["bytesBase64Encoded"]);n!=null&&f(t,["videoBytes"],Ha(n));const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function ZU(i){const t={},e=d(i,["_self"]);return e!=null&&f(t,["video"],WU(e)),t}function QU(i){const t={},e=d(i,["videos"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>ZU(l))),f(t,["generatedVideos"],r)}const n=d(i,["raiMediaFilteredCount"]);n!=null&&f(t,["raiMediaFilteredCount"],n);const a=d(i,["raiMediaFilteredReasons"]);return a!=null&&f(t,["raiMediaFilteredReasons"],a),t}function jU(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["metadata"]);n!=null&&f(t,["metadata"],n);const a=d(i,["done"]);a!=null&&f(t,["done"],a);const r=d(i,["error"]);r!=null&&f(t,["error"],r);const l=d(i,["response"]);return l!=null&&f(t,["response"],QU(l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tO="Content-Type",eO="X-Server-Timeout",nO="User-Agent",X0="x-goog-api-client",iO="1.8.0",sO=`google-genai-sdk/${iO}`,aO="v1beta1",oO="v1beta",ax=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class rO{constructor(t){var e,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:aO,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:oO,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,n){const a=[this.getRequestUrlInternal(e)];return n&&a.push(this.getBaseResourcePath()),t!==""&&a.push(t),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[l,c]of Object.entries(t.queryParams))a.searchParams.append(l,String(c));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,e,t.abortSignal),this.unaryApiCall(a,r,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[a,r]of Object.entries(e))typeof r=="object"?n[a]=Object.assign(Object.assign({},n[a]),r):r!==void 0&&(n[a]=r);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,e,n);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,e,t.abortSignal),this.streamApiCall(a,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n){if(e&&e.timeout||n){const a=new AbortController,r=a.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>a.abort(),e.timeout),n&&n.addEventListener("abort",()=>{a.abort()}),t.signal=r}return e&&e.extraBody!==null&&lO(t,e.extraBody),t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async a=>(await ox(a),new V0(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async a=>(await ox(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(t){var e;return Fu(this,arguments,function*(){const a=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),r=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:p}=yield Ae(a.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=r.decode(p);try{const _=JSON.parse(m);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),S=T.status,C=T.code,x=`got status: ${S}. ${JSON.stringify(_)}`;if(C>=400&&C<600)throw new zg({message:x,status:C})}}catch(_){if(_.name==="ApiError")throw _}l+=m;let y=l.match(ax);for(;y;){const _=y[1];try{const T=new Response(_,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Ae(new V0(T)),l=l.slice(y[0].length),y=l.match(ax)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{a.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=sO+" "+this.clientOptions.userAgentExtra;return t[nO]=e,t[X0]=e,t[tO]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers){for(const[n,a]of Object.entries(t.headers))e.append(n,a);t.timeout&&t.timeout>0&&e.append(eO,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var n;const a={};e!=null&&(a.mimeType=e.mimeType,a.name=e.name,a.displayName=e.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const r=this.clientOptions.uploader,l=await r.stat(t);a.sizeBytes=String(l.size);const c=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=c;const p=await this.fetchUploadUrl(a,e);return r.upload(t,p,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e){var n;let a={};e!=null&&e.httpOptions?a=e.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const r={file:t},l=await this.request({path:vt("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:a});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(n=l==null?void 0:l.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function ox(i){var t;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const e=i.status;let n;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?n=await i.json():n={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=JSON.stringify(n);throw e>=400&&e<600?new zg({message:a,status:e}):new Error(a)}}function lO(i,t){if(!t||Object.keys(t).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof i.body=="string"&&i.body.length>0)try{const r=JSON.parse(i.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))e=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(r,l){const c=Object.assign({},r);for(const p in l)if(Object.prototype.hasOwnProperty.call(l,p)){const m=l[p],y=c[p];m&&typeof m=="object"&&!Array.isArray(m)&&y&&typeof y=="object"&&!Array.isArray(y)?c[p]=n(y,m):(y&&m&&typeof y!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof m}. Overwriting.`),c[p]=m)}return c}const a=n(e,t);i.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uO="mcp_used/unknown";function fw(i){for(const t of i)if(pA(t)||typeof t=="object"&&"inputSchema"in t)return!0;return!1}function hw(i){var t;const e=(t=i[X0])!==null&&t!==void 0?t:"";i[X0]=(e+` ${uO}`).trimStart()}function cO(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(a=>pA(a)))!==null&&n!==void 0?n:!1}function dO(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(a=>!pA(a)))!==null&&n!==void 0?n:!1}function pA(i){return i!==null&&typeof i=="object"&&i instanceof mA}function fO(i,t=100){return Fu(this,arguments,function*(){let n,a=0;for(;a<t;){const r=yield Ae(i.listTools({cursor:n}));for(const l of r.tools)yield yield Ae(l),a++;if(!r.nextCursor)break;n=r.nextCursor}})}class mA{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new mA(t,e)}async initialize(){var t,e,n,a;if(this.mcpTools.length>0)return;const r={},l=[];for(const y of this.mcpClients)try{for(var c=!0,p=(e=void 0,Cf(fO(y))),m;m=await p.next(),t=m.done,!t;c=!0){a=m.value,c=!1;const _=a;l.push(_);const T=_.name;if(r[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);r[T]=y}}catch(_){e={error:_}}finally{try{!c&&!t&&(n=p.return)&&await n.call(p)}finally{if(e)throw e.error}}this.mcpTools=l,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),aI(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const n of t)if(n.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const l=await a.callTool({name:n.name,arguments:n.args},void 0,r);e.push({functionResponse:{name:n.name,response:l.isError?{error:l}:l}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function hO(i,t,e){const n=new KN;let a;e.data instanceof Blob?a=JSON.parse(await e.data.text()):a=JSON.parse(e.data);const r=T2(a);Object.assign(n,r),t(n)}class pO{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),l=yO(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${c}`;let m=()=>{};const y=new Promise(U=>{m=U}),_=t.callbacks,T=function(){m({})},S=this.apiClient,C={onopen:T,onmessage:U=>{hO(S,_.onmessage,U)},onerror:(e=_==null?void 0:_.onerror)!==null&&e!==void 0?e:function(U){},onclose:(n=_==null?void 0:_.onclose)!==null&&n!==void 0?n:function(U){}},x=this.webSocketFactory.create(p,gO(l),C);x.connect(),await y;const D=le(this.apiClient,t.model),N=ow({model:D}),L=q0({setup:N});return x.send(JSON.stringify(L)),new mO(x,this.apiClient)}}class mO{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=PP(t),n=rw(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=FP(t),n=q0(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const e=q0({playbackControl:t});this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(Iu.PLAY)}pause(){this.sendPlaybackControl(Iu.PAUSE)}stop(){this.sendPlaybackControl(Iu.STOP)}resetContext(){this.sendPlaybackControl(Iu.RESET_CONTEXT)}close(){this.conn.close()}}function gO(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function yO(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _O(i,t,e){const n=new XN;let a;e.data instanceof Blob?a=await e.data.text():e.data instanceof ArrayBuffer?a=new TextDecoder().decode(e.data):a=e.data;const r=JSON.parse(a);if(i.isVertexAI()){const l=f2(r);Object.assign(n,l)}else{const l=d2(r);Object.assign(n,l)}t(n)}class AO{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new pO(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,a,r,l,c;const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let y;const _=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&fw(t.config.tools)&&hw(_);const T=EO(_);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T);else{const j=this.apiClient.getApiKey();let at="BidiGenerateContent",it="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),at="BidiGenerateContentConstrained",it="access_token"),y=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${at}?${it}=${j}`}let S=()=>{};const C=new Promise(j=>{S=j}),x=t.callbacks,D=function(){var j;(j=x==null?void 0:x.onopen)===null||j===void 0||j.call(x),S({})},N=this.apiClient,L={onopen:D,onmessage:j=>{_O(N,x.onmessage,j)},onerror:(e=x==null?void 0:x.onerror)!==null&&e!==void 0?e:function(j){},onclose:(n=x==null?void 0:x.onclose)!==null&&n!==void 0?n:function(j){}},U=this.webSocketFactory.create(y,CO(T),L);U.connect(),await C;let P=le(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const j=this.apiClient.getProject(),at=this.apiClient.getLocation();P=`projects/${j}/locations/${at}/`+P}let I={};this.apiClient.isVertexAI()&&((a=t.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[hg.AUDIO]}:t.config.responseModalities=[hg.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],Y=[];for(const j of q)if(this.isCallableTool(j)){const at=j;Y.push(await at.tool())}else Y.push(j);Y.length>0&&(t.config.tools=Y);const tt={model:P,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?I=MP(this.apiClient,tt):I=wP(this.apiClient,tt),delete I.config,U.send(JSON.stringify(I)),new SO(U,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const TO={turnComplete:!0};class SO{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=Gi(e.turns),t.isVertexAI()?n=n.map(a=>Qc(a)):n=n.map(a=>qg(a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const r of n){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(vO)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},TO),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:kP(t)}:e={realtimeInput:LP(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function CO(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function EO(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rx=10;function lx(i){var t,e,n;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let a=!1;for(const l of(e=i==null?void 0:i.tools)!==null&&e!==void 0?e:[])if(Rm(l)){a=!0;break}if(!a)return!0;const r=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Rm(i){return"callTool"in i&&typeof i.callTool=="function"}function ux(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bO extends Fl{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var n,a,r,l,c;const p=await this.processParamsForMcpUsage(e);if(!cO(e)||lx(e.config))return await this.generateContentInternal(p);if(dO(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,y;const _=Gi(p.contents),T=(r=(a=(n=p.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:rx;let S=0;for(;S<T&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const C=m.candidates[0].content,x=[];for(const D of(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Rm(D)){const L=await D.callTool(m.functionCalls);x.push(...L)}S++,y={role:"user",parts:x},p.contents=Gi(p.contents),p.contents.push(C),p.contents.push(y),ux(p.config)&&(_.push(C),_.push(y))}return ux(p.config)&&(m.automaticFunctionCallingHistory=_),m},this.generateContentStream=async e=>{if(lx(e.config)){const n=await this.processParamsForMcpUsage(e);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var a;let r;const l=[];if(n!=null&&n.generatedImages)for(const p of n.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?r=p==null?void 0:p.safetyAttributes:l.push(p);let c;return r?c={generatedImages:l,positivePromptSafetyAttributes:r}:c={generatedImages:l},c}),this.list=async e=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new np(Nl.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const a={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(a)}}async processParamsForMcpUsage(t){var e,n,a;const r=(e=t.config)===null||e===void 0?void 0:e.tools;if(!r)return t;const l=await Promise.all(r.map(async p=>Rm(p)?await p.tool():p)),c={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(c.config.tools=l,t.config&&t.config.tools&&fw(t.config.tools)){const p=(a=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),hw(m),c.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return c}async initAfcToolsMap(t){var e,n,a;const r=new Map;for(const l of(n=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&n!==void 0?n:[])if(Rm(l)){const c=l,p=await c.tool();for(const m of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(r.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);r.set(m.name,c)}}return r}async processAfcStream(t){var e,n,a;const r=(a=(n=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&a!==void 0?a:rx;let l=!1,c=0;const p=await this.initAfcToolsMap(t);return function(m,y,_){var T,S;return Fu(this,arguments,function*(){for(var C,x,D,N;c<r;){l&&(c++,l=!1);const I=yield Ae(m.processParamsForMcpUsage(_)),q=yield Ae(m.generateContentStreamInternal(I)),Y=[],tt=[];try{for(var L=!0,U=(x=void 0,Cf(q)),P;P=yield Ae(U.next()),C=P.done,!C;L=!0){N=P.value,L=!1;const j=N;if(yield yield Ae(j),j.candidates&&(!((T=j.candidates[0])===null||T===void 0)&&T.content)){tt.push(j.candidates[0].content);for(const at of(S=j.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(c<r&&at.functionCall){if(!at.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(at.functionCall.name)){const it=yield Ae(y.get(at.functionCall.name).callTool([at.functionCall]));Y.push(...it)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${at.functionCall.name}`)}}}}catch(j){x={error:j}}finally{try{!L&&!C&&(D=U.return)&&(yield Ae(D.call(U)))}finally{if(x)throw x.error}}if(Y.length>0){l=!0;const j=new jd;j.candidates=[{content:{role:"user",parts:Y}}],yield yield Ae(j);const at=[];at.push(...tt),at.push({role:"user",parts:Y});const it=Gi(_.contents).concat(at);_.contents=it}else break}})}(this,p,t)}async generateContentInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=nx(this.apiClient,t);return c=vt("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const _=sx(y),T=new jd;return Object.assign(T,_),T})}else{const m=ex(this.apiClient,t);return c=vt("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=ix(y),T=new jd;return Object.assign(T,_),T})}}async generateContentStreamInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=nx(this.apiClient,t);return c=vt("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.requestStream({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(_){return Fu(this,arguments,function*(){var T,S,C,x;try{for(var D=!0,N=Cf(_),L;L=yield Ae(N.next()),T=L.done,!T;D=!0){x=L.value,D=!1;const P=sx(yield Ae(x.json())),I=new jd;Object.assign(I,P),yield yield Ae(I)}}catch(U){S={error:U}}finally{try{!D&&!T&&(C=N.return)&&(yield Ae(C.call(N)))}finally{if(S)throw S.error}}})})}else{const m=ex(this.apiClient,t);return c=vt("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.requestStream({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(_){return Fu(this,arguments,function*(){var T,S,C,x;try{for(var D=!0,N=Cf(_),L;L=yield Ae(N.next()),T=L.done,!T;D=!0){x=L.value,D=!1;const P=ix(yield Ae(x.json())),I=new jd;Object.assign(I,P),yield yield Ae(I)}}catch(U){S={error:U}}finally{try{!D&&!T&&(C=N.return)&&(yield Ae(C.call(N)))}finally{if(S)throw S.error}}})})}}async embedContent(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=LF(this.apiClient,t);return c=vt("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const _=OU(y),T=new kb;return Object.assign(T,_),T})}else{const m=Y2(this.apiClient,t);return c=vt("{model}:batchEmbedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=pU(y),T=new kb;return Object.assign(T,_),T})}}async generateImagesInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=PF(this.apiClient,t);return c=vt("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const _=BU(y),T=new Pb;return Object.assign(T,_),T})}else{const m=K2(this.apiClient,t);return c=vt("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=yU(y),T=new Pb;return Object.assign(T,_),T})}}async editImageInternal(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI()){const c=GF(this.apiClient,t);return r=vt("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>{const m=HU(p),y=new HN;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI()){const c=qF(this.apiClient,t);return r=vt("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>{const m=GU(p),y=new GN;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=$F(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>Y0(y))}else{const m=J2(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>$0(y))}}async listInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=XF(this.apiClient,t);return c=vt("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const _=YU(y),T=new Fb;return Object.assign(T,_),T})}else{const m=Z2(this.apiClient,t);return c=vt("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=_U(y),T=new Fb;return Object.assign(T,_),T})}}async update(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=JF(this.apiClient,t);return c=vt("{model}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>Y0(y))}else{const m=j2(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>$0(y))}}async delete(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=WF(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(()=>{const y=XU(),_=new Ub;return Object.assign(_,y),_})}else{const m=tF(this.apiClient,t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(()=>{const y=AU(),_=new Ub;return Object.assign(_,y),_})}}async countTokens(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=QF(this.apiClient,t);return c=vt("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const _=KU(y),T=new Ob;return Object.assign(T,_),T})}else{const m=nF(this.apiClient,t);return c=vt("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=TU(y),T=new Ob;return Object.assign(T,_),T})}}async computeTokens(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI()){const c=jF(this.apiClient,t);return r=vt("{model}:computeTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>{const m=JU(p),y=new zN;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=nU(this.apiClient,t);return c=vt("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>jU(y))}else{const m=aF(this.apiClient,t);return c=vt("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>bU(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xO(i){const t={},e=d(i,["operationName"]);e!=null&&f(t,["_url","operationName"],e);const n=d(i,["config"]);return n!=null&&f(t,["config"],n),t}function wO(i){const t={},e=d(i,["operationName"]);e!=null&&f(t,["_url","operationName"],e);const n=d(i,["config"]);return n!=null&&f(t,["config"],n),t}function MO(i){const t={},e=d(i,["operationName"]);e!=null&&f(t,["operationName"],e);const n=d(i,["resourceName"]);n!=null&&f(t,["_url","resourceName"],n);const a=d(i,["config"]);return a!=null&&f(t,["config"],a),t}function RO(i){const t={},e=d(i,["video","uri"]);e!=null&&f(t,["uri"],e);const n=d(i,["video","encodedVideo"]);n!=null&&f(t,["videoBytes"],Ha(n));const a=d(i,["encoding"]);return a!=null&&f(t,["mimeType"],a),t}function DO(i){const t={},e=d(i,["_self"]);return e!=null&&f(t,["video"],RO(e)),t}function NO(i){const t={},e=d(i,["generatedSamples"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>DO(l))),f(t,["generatedVideos"],r)}const n=d(i,["raiMediaFilteredCount"]);n!=null&&f(t,["raiMediaFilteredCount"],n);const a=d(i,["raiMediaFilteredReasons"]);return a!=null&&f(t,["raiMediaFilteredReasons"],a),t}function IO(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["metadata"]);n!=null&&f(t,["metadata"],n);const a=d(i,["done"]);a!=null&&f(t,["done"],a);const r=d(i,["error"]);r!=null&&f(t,["error"],r);const l=d(i,["response","generateVideoResponse"]);return l!=null&&f(t,["response"],NO(l)),t}function LO(i){const t={},e=d(i,["gcsUri"]);e!=null&&f(t,["uri"],e);const n=d(i,["bytesBase64Encoded"]);n!=null&&f(t,["videoBytes"],Ha(n));const a=d(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function kO(i){const t={},e=d(i,["_self"]);return e!=null&&f(t,["video"],LO(e)),t}function PO(i){const t={},e=d(i,["videos"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>kO(l))),f(t,["generatedVideos"],r)}const n=d(i,["raiMediaFilteredCount"]);n!=null&&f(t,["raiMediaFilteredCount"],n);const a=d(i,["raiMediaFilteredReasons"]);return a!=null&&f(t,["raiMediaFilteredReasons"],a),t}function cx(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["metadata"]);n!=null&&f(t,["metadata"],n);const a=d(i,["done"]);a!=null&&f(t,["done"],a);const r=d(i,["error"]);r!=null&&f(t,["error"],r);const l=d(i,["response"]);return l!=null&&f(t,["response"],PO(l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FO extends Fl{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=e.name.split("/operations/")[0];let r;return n&&"httpOptions"in n&&(r=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:a,config:{httpOptions:r}})}else return this.getVideosOperationInternal({operationName:e.name,config:n})}async getVideosOperationInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=wO(t);return c=vt("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>cx(y))}else{const m=xO(t);return c=vt("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>IO(y))}}async fetchPredictVideosOperationInternal(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI()){const c=MO(t);return r=vt("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>cx(p))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UO(i){const t={},e=d(i,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function pw(i){const t={},e=d(i,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],UO(e)),t}function OO(i){const t={},e=d(i,["speaker"]);e!=null&&f(t,["speaker"],e);const n=d(i,["voiceConfig"]);return n!=null&&f(t,["voiceConfig"],pw(n)),t}function VO(i){const t={},e=d(i,["speakerVoiceConfigs"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>OO(a))),f(t,["speakerVoiceConfigs"],n)}return t}function BO(i){const t={},e=d(i,["voiceConfig"]);e!=null&&f(t,["voiceConfig"],pw(e));const n=d(i,["multiSpeakerVoiceConfig"]);n!=null&&f(t,["multiSpeakerVoiceConfig"],VO(n));const a=d(i,["languageCode"]);return a!=null&&f(t,["languageCode"],a),t}function HO(i){const t={},e=d(i,["fps"]);e!=null&&f(t,["fps"],e);const n=d(i,["endOffset"]);n!=null&&f(t,["endOffset"],n);const a=d(i,["startOffset"]);return a!=null&&f(t,["startOffset"],a),t}function GO(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["data"]);e!=null&&f(t,["data"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function zO(i){const t={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=d(i,["fileUri"]);e!=null&&f(t,["fileUri"],e);const n=d(i,["mimeType"]);return n!=null&&f(t,["mimeType"],n),t}function qO(i){const t={},e=d(i,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],HO(e));const n=d(i,["thought"]);n!=null&&f(t,["thought"],n);const a=d(i,["inlineData"]);a!=null&&f(t,["inlineData"],GO(a));const r=d(i,["fileData"]);r!=null&&f(t,["fileData"],zO(r));const l=d(i,["thoughtSignature"]);l!=null&&f(t,["thoughtSignature"],l);const c=d(i,["codeExecutionResult"]);c!=null&&f(t,["codeExecutionResult"],c);const p=d(i,["executableCode"]);p!=null&&f(t,["executableCode"],p);const m=d(i,["functionCall"]);m!=null&&f(t,["functionCall"],m);const y=d(i,["functionResponse"]);y!=null&&f(t,["functionResponse"],y);const _=d(i,["text"]);return _!=null&&f(t,["text"],_),t}function $O(i){const t={},e=d(i,["parts"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(r=>qO(r))),f(t,["parts"],a)}const n=d(i,["role"]);return n!=null&&f(t,["role"],n),t}function YO(i){const t={},e=d(i,["behavior"]);e!=null&&f(t,["behavior"],e);const n=d(i,["description"]);n!=null&&f(t,["description"],n);const a=d(i,["name"]);a!=null&&f(t,["name"],a);const r=d(i,["parameters"]);r!=null&&f(t,["parameters"],r);const l=d(i,["parametersJsonSchema"]);l!=null&&f(t,["parametersJsonSchema"],l);const c=d(i,["response"]);c!=null&&f(t,["response"],c);const p=d(i,["responseJsonSchema"]);return p!=null&&f(t,["responseJsonSchema"],p),t}function XO(i){const t={},e=d(i,["startTime"]);e!=null&&f(t,["startTime"],e);const n=d(i,["endTime"]);return n!=null&&f(t,["endTime"],n),t}function KO(i){const t={},e=d(i,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],XO(e)),t}function JO(i){const t={},e=d(i,["mode"]);e!=null&&f(t,["mode"],e);const n=d(i,["dynamicThreshold"]);return n!=null&&f(t,["dynamicThreshold"],n),t}function WO(i){const t={},e=d(i,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],JO(e)),t}function ZO(){return{}}function QO(i){const t={},e=d(i,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>YO(m))),f(t,["functionDeclarations"],p)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(i,["googleSearch"]);n!=null&&f(t,["googleSearch"],KO(n));const a=d(i,["googleSearchRetrieval"]);if(a!=null&&f(t,["googleSearchRetrieval"],WO(a)),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(i,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(i,["urlContext"])!=null&&f(t,["urlContext"],ZO());const l=d(i,["codeExecution"]);l!=null&&f(t,["codeExecution"],l);const c=d(i,["computerUse"]);return c!=null&&f(t,["computerUse"],c),t}function jO(i){const t={},e=d(i,["handle"]);if(e!=null&&f(t,["handle"],e),d(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function dx(){return{}}function tV(i){const t={},e=d(i,["disabled"]);e!=null&&f(t,["disabled"],e);const n=d(i,["startOfSpeechSensitivity"]);n!=null&&f(t,["startOfSpeechSensitivity"],n);const a=d(i,["endOfSpeechSensitivity"]);a!=null&&f(t,["endOfSpeechSensitivity"],a);const r=d(i,["prefixPaddingMs"]);r!=null&&f(t,["prefixPaddingMs"],r);const l=d(i,["silenceDurationMs"]);return l!=null&&f(t,["silenceDurationMs"],l),t}function eV(i){const t={},e=d(i,["automaticActivityDetection"]);e!=null&&f(t,["automaticActivityDetection"],tV(e));const n=d(i,["activityHandling"]);n!=null&&f(t,["activityHandling"],n);const a=d(i,["turnCoverage"]);return a!=null&&f(t,["turnCoverage"],a),t}function nV(i){const t={},e=d(i,["targetTokens"]);return e!=null&&f(t,["targetTokens"],e),t}function iV(i){const t={},e=d(i,["triggerTokens"]);e!=null&&f(t,["triggerTokens"],e);const n=d(i,["slidingWindow"]);return n!=null&&f(t,["slidingWindow"],nV(n)),t}function sV(i){const t={},e=d(i,["proactiveAudio"]);return e!=null&&f(t,["proactiveAudio"],e),t}function aV(i,t){const e={},n=d(i,["generationConfig"]);t!==void 0&&n!=null&&f(t,["setup","generationConfig"],n);const a=d(i,["responseModalities"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","responseModalities"],a);const r=d(i,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);const l=d(i,["topP"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","topP"],l);const c=d(i,["topK"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","topK"],c);const p=d(i,["maxOutputTokens"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","maxOutputTokens"],p);const m=d(i,["mediaResolution"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","mediaResolution"],m);const y=d(i,["seed"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","seed"],y);const _=d(i,["speechConfig"]);t!==void 0&&_!=null&&f(t,["setup","generationConfig","speechConfig"],BO(fA(_)));const T=d(i,["enableAffectiveDialog"]);t!==void 0&&T!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],T);const S=d(i,["systemInstruction"]);t!==void 0&&S!=null&&f(t,["setup","systemInstruction"],$O(Mn(S)));const C=d(i,["tools"]);if(t!==void 0&&C!=null){let I=Wc(C);Array.isArray(I)&&(I=I.map(q=>QO(Jc(q)))),f(t,["setup","tools"],I)}const x=d(i,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],jO(x));const D=d(i,["inputAudioTranscription"]);t!==void 0&&D!=null&&f(t,["setup","inputAudioTranscription"],dx());const N=d(i,["outputAudioTranscription"]);t!==void 0&&N!=null&&f(t,["setup","outputAudioTranscription"],dx());const L=d(i,["realtimeInputConfig"]);t!==void 0&&L!=null&&f(t,["setup","realtimeInputConfig"],eV(L));const U=d(i,["contextWindowCompression"]);t!==void 0&&U!=null&&f(t,["setup","contextWindowCompression"],iV(U));const P=d(i,["proactivity"]);return t!==void 0&&P!=null&&f(t,["setup","proactivity"],sV(P)),e}function oV(i,t){const e={},n=d(t,["model"]);n!=null&&f(e,["setup","model"],le(i,n));const a=d(t,["config"]);return a!=null&&f(e,["config"],aV(a,e)),e}function rV(i,t,e){const n={},a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const r=d(t,["newSessionExpireTime"]);e!==void 0&&r!=null&&f(e,["newSessionExpireTime"],r);const l=d(t,["uses"]);e!==void 0&&l!=null&&f(e,["uses"],l);const c=d(t,["liveConnectConstraints"]);e!==void 0&&c!=null&&f(e,["bidiGenerateContentSetup"],oV(i,c));const p=d(t,["lockAdditionalFields"]);return e!==void 0&&p!=null&&f(e,["fieldMask"],p),n}function lV(i,t){const e={},n=d(t,["config"]);return n!=null&&f(e,["config"],rV(i,n,e)),e}function uV(i){const t={},e=d(i,["name"]);return e!=null&&f(t,["name"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cV(i){const t=[];for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const n=i[e];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const a=Object.keys(n).map(r=>`${e}.${r}`);t.push(...a)}else t.push(e)}return t.join(",")}function dV(i,t){let e=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const r=n.setup;typeof r=="object"&&r!==null?(i.bidiGenerateContentSetup=r,e=r):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const a=i.fieldMask;if(e){const r=cV(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)r?i.fieldMask=r:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];a.length>0&&(c=a.map(m=>l.includes(m)?`generationConfig.${m}`:m));const p=[];r&&p.push(r),c.length>0&&p.push(...c),p.length>0?i.fieldMask=p.join(","):delete i.fieldMask}else delete i.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?i.fieldMask=a.join(","):delete i.fieldMask;return i}class fV extends Fl{constructor(t){super(),this.apiClient=t}async create(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=lV(this.apiClient,t);r=vt("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const p=dV(c,t.config);return a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),a.then(m=>uV(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hV(i){const t={},e=d(i,["name"]);e!=null&&f(t,["_url","name"],e);const n=d(i,["config"]);return n!=null&&f(t,["config"],n),t}function pV(i,t){const e={},n=d(i,["pageSize"]);t!==void 0&&n!=null&&f(t,["_query","pageSize"],n);const a=d(i,["pageToken"]);t!==void 0&&a!=null&&f(t,["_query","pageToken"],a);const r=d(i,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),e}function mV(i){const t={},e=d(i,["config"]);return e!=null&&f(t,["config"],pV(e,t)),t}function gV(i){const t={},e=d(i,["textInput"]);e!=null&&f(t,["textInput"],e);const n=d(i,["output"]);return n!=null&&f(t,["output"],n),t}function yV(i){const t={};if(d(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const e=d(i,["examples"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(a=>gV(a))),f(t,["examples","examples"],n)}return t}function vV(i,t){const e={};if(d(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=d(i,["tunedModelDisplayName"]);if(t!==void 0&&n!=null&&f(t,["displayName"],n),d(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(i,["epochCount"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","epochCount"],a);const r=d(i,["learningRateMultiplier"]);if(r!=null&&f(e,["tuningTask","hyperparameters","learningRateMultiplier"],r),d(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=d(i,["batchSize"]);t!==void 0&&l!=null&&f(t,["tuningTask","hyperparameters","batchSize"],l);const c=d(i,["learningRate"]);return t!==void 0&&c!=null&&f(t,["tuningTask","hyperparameters","learningRate"],c),e}function _V(i){const t={},e=d(i,["baseModel"]);e!=null&&f(t,["baseModel"],e);const n=d(i,["trainingDataset"]);n!=null&&f(t,["tuningTask","trainingData"],yV(n));const a=d(i,["config"]);return a!=null&&f(t,["config"],vV(a,t)),t}function AV(i){const t={},e=d(i,["name"]);e!=null&&f(t,["_url","name"],e);const n=d(i,["config"]);return n!=null&&f(t,["config"],n),t}function TV(i,t){const e={},n=d(i,["pageSize"]);t!==void 0&&n!=null&&f(t,["_query","pageSize"],n);const a=d(i,["pageToken"]);t!==void 0&&a!=null&&f(t,["_query","pageToken"],a);const r=d(i,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),e}function SV(i){const t={},e=d(i,["config"]);return e!=null&&f(t,["config"],TV(e,t)),t}function CV(i,t){const e={},n=d(i,["gcsUri"]);t!==void 0&&n!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],n);const a=d(i,["vertexDatasetResource"]);if(t!==void 0&&a!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],a),d(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return e}function EV(i,t){const e={},n=d(i,["gcsUri"]);n!=null&&f(e,["validationDatasetUri"],n);const a=d(i,["vertexDatasetResource"]);return t!==void 0&&a!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],a),e}function bV(i,t){const e={},n=d(i,["validationDataset"]);t!==void 0&&n!=null&&f(t,["supervisedTuningSpec"],EV(n,e));const a=d(i,["tunedModelDisplayName"]);t!==void 0&&a!=null&&f(t,["tunedModelDisplayName"],a);const r=d(i,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const l=d(i,["epochCount"]);t!==void 0&&l!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=d(i,["learningRateMultiplier"]);t!==void 0&&c!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const p=d(i,["exportLastCheckpointOnly"]);t!==void 0&&p!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const m=d(i,["adapterSize"]);if(t!==void 0&&m!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],m),d(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return e}function xV(i){const t={},e=d(i,["baseModel"]);e!=null&&f(t,["baseModel"],e);const n=d(i,["trainingDataset"]);n!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],CV(n,t));const a=d(i,["config"]);return a!=null&&f(t,["config"],bV(a,t)),t}function wV(i){const t={},e=d(i,["name"]);e!=null&&f(t,["model"],e);const n=d(i,["name"]);return n!=null&&f(t,["endpoint"],n),t}function mw(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["state"]);n!=null&&f(t,["state"],Yx(n));const a=d(i,["createTime"]);a!=null&&f(t,["createTime"],a);const r=d(i,["tuningTask","startTime"]);r!=null&&f(t,["startTime"],r);const l=d(i,["tuningTask","completeTime"]);l!=null&&f(t,["endTime"],l);const c=d(i,["updateTime"]);c!=null&&f(t,["updateTime"],c);const p=d(i,["description"]);p!=null&&f(t,["description"],p);const m=d(i,["baseModel"]);m!=null&&f(t,["baseModel"],m);const y=d(i,["_self"]);y!=null&&f(t,["tunedModel"],wV(y));const _=d(i,["distillationSpec"]);_!=null&&f(t,["distillationSpec"],_);const T=d(i,["experiment"]);T!=null&&f(t,["experiment"],T);const S=d(i,["labels"]);S!=null&&f(t,["labels"],S);const C=d(i,["pipelineJob"]);C!=null&&f(t,["pipelineJob"],C);const x=d(i,["satisfiesPzi"]);x!=null&&f(t,["satisfiesPzi"],x);const D=d(i,["satisfiesPzs"]);D!=null&&f(t,["satisfiesPzs"],D);const N=d(i,["serviceAccount"]);N!=null&&f(t,["serviceAccount"],N);const L=d(i,["tunedModelDisplayName"]);return L!=null&&f(t,["tunedModelDisplayName"],L),t}function MV(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["tunedModels"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>mw(r))),f(t,["tuningJobs"],a)}return t}function RV(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["metadata"]);n!=null&&f(t,["metadata"],n);const a=d(i,["done"]);a!=null&&f(t,["done"],a);const r=d(i,["error"]);return r!=null&&f(t,["error"],r),t}function DV(i){const t={},e=d(i,["checkpointId"]);e!=null&&f(t,["checkpointId"],e);const n=d(i,["epoch"]);n!=null&&f(t,["epoch"],n);const a=d(i,["step"]);a!=null&&f(t,["step"],a);const r=d(i,["endpoint"]);return r!=null&&f(t,["endpoint"],r),t}function NV(i){const t={},e=d(i,["model"]);e!=null&&f(t,["model"],e);const n=d(i,["endpoint"]);n!=null&&f(t,["endpoint"],n);const a=d(i,["checkpoints"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(l=>DV(l))),f(t,["checkpoints"],r)}return t}function K0(i){const t={},e=d(i,["name"]);e!=null&&f(t,["name"],e);const n=d(i,["state"]);n!=null&&f(t,["state"],Yx(n));const a=d(i,["createTime"]);a!=null&&f(t,["createTime"],a);const r=d(i,["startTime"]);r!=null&&f(t,["startTime"],r);const l=d(i,["endTime"]);l!=null&&f(t,["endTime"],l);const c=d(i,["updateTime"]);c!=null&&f(t,["updateTime"],c);const p=d(i,["error"]);p!=null&&f(t,["error"],p);const m=d(i,["description"]);m!=null&&f(t,["description"],m);const y=d(i,["baseModel"]);y!=null&&f(t,["baseModel"],y);const _=d(i,["tunedModel"]);_!=null&&f(t,["tunedModel"],NV(_));const T=d(i,["supervisedTuningSpec"]);T!=null&&f(t,["supervisedTuningSpec"],T);const S=d(i,["tuningDataStats"]);S!=null&&f(t,["tuningDataStats"],S);const C=d(i,["encryptionSpec"]);C!=null&&f(t,["encryptionSpec"],C);const x=d(i,["partnerModelTuningSpec"]);x!=null&&f(t,["partnerModelTuningSpec"],x);const D=d(i,["distillationSpec"]);D!=null&&f(t,["distillationSpec"],D);const N=d(i,["experiment"]);N!=null&&f(t,["experiment"],N);const L=d(i,["labels"]);L!=null&&f(t,["labels"],L);const U=d(i,["pipelineJob"]);U!=null&&f(t,["pipelineJob"],U);const P=d(i,["satisfiesPzi"]);P!=null&&f(t,["satisfiesPzi"],P);const I=d(i,["satisfiesPzs"]);I!=null&&f(t,["satisfiesPzs"],I);const q=d(i,["serviceAccount"]);q!=null&&f(t,["serviceAccount"],q);const Y=d(i,["tunedModelDisplayName"]);return Y!=null&&f(t,["tunedModelDisplayName"],Y),t}function IV(i){const t={},e=d(i,["nextPageToken"]);e!=null&&f(t,["nextPageToken"],e);const n=d(i,["tuningJobs"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>K0(r))),f(t,["tuningJobs"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LV extends Fl{constructor(t){super(),this.apiClient=t,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new np(Nl.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const n=await this.tuneMldevInternal(e);let a="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?a=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(a=n.name.split("/operations/")[0]),{name:a,state:O0.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=AV(t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>K0(y))}else{const m=hV(t);return c=vt("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>mw(y))}}async listInternal(t){var e,n,a,r;let l,c="",p={};if(this.apiClient.isVertexAI()){const m=SV(t);return c=vt("tuningJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const _=IV(y),T=new Vb;return Object.assign(T,_),T})}else{const m=mV(t);return c=vt("tunedModels",m._url),p=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=MV(y),T=new Vb;return Object.assign(T,_),T})}}async tuneInternal(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI()){const c=xV(t);return r=vt("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>K0(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let a,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_V(t);return r=vt("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),a.then(p=>RV(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kV{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const PV=1024*1024*8,FV=3,UV=1e3,OV=2,S0="x-goog-upload-status";async function VV(i,t,e){var n,a,r;let l=0,c=0,p=new V0(new Response),m="upload";for(l=i.size;c<l;){const _=Math.min(PV,l-c),T=i.slice(c,c+_);c+_>=l&&(m+=", finalize");let S=0,C=UV;for(;S<FV&&(p=await e.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(_)}}}),!(!((n=p==null?void 0:p.headers)===null||n===void 0)&&n[S0]));)S++,await HV(C),C=C*OV;if(c+=_,((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[S0])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(p==null?void 0:p.json());if(((r=p==null?void 0:p.headers)===null||r===void 0?void 0:r[S0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function BV(i){return{size:i.size,type:i.type}}function HV(i){return new Promise(t=>setTimeout(t,i))}class GV{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await VV(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await BV(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zV{create(t,e,n){return new qV(t,e,n)}}class qV{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fx="x-goog-api-key";class $V{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(fx)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(fx,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YV="gl-node/";class XV{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const n=BN(t,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion;const a=new $V(this.apiKey);this.apiClient=new rO({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:YV+"web",uploader:new GV,downloader:new kV}),this.models=new bO(this.apiClient),this.live=new AO(this.apiClient,a,new zV),this.batches=new pL(this.apiClient),this.chats=new vk(this.models,this.apiClient),this.caches=new mk(this.apiClient),this.files=new Nk(this.apiClient),this.operations=new FO(this.apiClient),this.authTokens=new fV(this.apiClient),this.tunings=new LV(this.apiClient)}}var Ef={};Ef.d=(i,t)=>{for(var e in t)Ef.o(t,e)&&!Ef.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};Ef.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var Mt=globalThis.pdfjsLib={};Ef.d(Mt,{AbortException:()=>Wo,AnnotationEditorLayer:()=>iA,AnnotationEditorParamsType:()=>Xt,AnnotationEditorType:()=>kt,AnnotationEditorUIManager:()=>Ll,AnnotationLayer:()=>G3,AnnotationMode:()=>go,ColorPicker:()=>Ag,DOMSVGFactory:()=>EA,DrawLayer:()=>oA,FeatureTest:()=>Fn,GlobalWorkerOptions:()=>ka,ImageKind:()=>Dm,InvalidPDFException:()=>W0,MissingPDFException:()=>Mf,OPS:()=>Wi,OutputScale:()=>Q0,PDFDataRangeTransport:()=>yM,PDFDateString:()=>AA,PDFWorker:()=>Ou,PasswordResponses:()=>ZV,PermissionFlag:()=>WV,PixelsPerInch:()=>Zo,RenderingCancelledException:()=>vA,TextLayer:()=>Rf,TouchManager:()=>vg,UnexpectedResponseException:()=>mg,Util:()=>_t,VerbosityLevel:()=>Yg,XfaLayer:()=>_M,build:()=>S3,createValidAbsoluteUrl:()=>eB,fetchData:()=>Wg,getDocument:()=>h3,getFilenameFromUrl:()=>cB,getPdfFilenameFromUrl:()=>dB,getXfaPageViewport:()=>fB,isDataScheme:()=>Zg,isPdfFile:()=>_A,noContextMenu:()=>cs,normalizeUnicode:()=>rB,setLayerDimensions:()=>Il,shadow:()=>qt,stopEvent:()=>Ti,version:()=>T3});const wn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),gw=[1,0,0,1,0,0],J0=[.001,0,0,.001,0,0],KV=1e7,C0=1.35,_i={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},go={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},JV="pdfjs_internal_editor_",kt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Xt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},WV={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Dm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$e={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},tf={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Yg={ERRORS:0,WARNINGS:1,INFOS:5},Wi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},ZV={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Xg=Yg.WARNINGS;function QV(i){Number.isInteger(i)&&(Xg=i)}function jV(){return Xg}function Kg(i){Xg>=Yg.INFOS&&console.log(`Info: ${i}`)}function Pt(i){Xg>=Yg.WARNINGS&&console.log(`Warning: ${i}`)}function ge(i){throw new Error(i)}function He(i,t){i||ge(t)}function tB(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function eB(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const a=i.match(/\./g);(a==null?void 0:a.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=oB(i)}catch{}}const n=t?new URL(i,t):new URL(i);if(tB(n))return n}catch{}return null}function qt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const jo=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class hx extends jo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class E0 extends jo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class W0 extends jo{constructor(t){super(t,"InvalidPDFException")}}class Mf extends jo{constructor(t){super(t,"MissingPDFException")}}class mg extends jo{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class nB extends jo{constructor(t){super(t,"FormatError")}}class Wo extends jo{constructor(t){super(t,"AbortException")}}function yw(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&ge("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let a=0;a<t;a+=e){const r=Math.min(a+e,t),l=i.subarray(a,r);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Jg(i){typeof i!="string"&&ge("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function iB(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function gA(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function sB(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function aB(){try{return new Function(""),!0}catch{return!1}}class Fn{static get isLittleEndian(){return qt(this,"isLittleEndian",sB())}static get isEvalSupported(){return qt(this,"isEvalSupported",aB())}static get isOffscreenCanvasSupported(){return qt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return qt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?qt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):qt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return qt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const b0=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Pa,Nm,Z0;class _t{static makeHexColor(t,e,n){return`#${b0[t]}${b0[e]}${b0[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],a=t[0]*e[1]+t[1]*e[3]+e[5];return[n,a]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],a=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[a,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),a=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),l=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],a[0],r[0],l[0]),Math.min(n[1],a[1],r[1],l[1]),Math.max(n[0],a[0],r[0],l[0]),Math.max(n[1],a[1],r[1],l[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],a=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],l=t[2]*e[1]+t[3]*e[3],c=(n+l)/2,p=Math.sqrt((n+l)**2-4*(n*l-r*a))/2,m=c+p||1,y=c-p||1;return[Math.sqrt(m),Math.sqrt(y)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>l?null:[n,r,a,l]}static bezierBoundingBox(t,e,n,a,r,l,c,p,m){return m?(m[0]=Math.min(m[0],t,c),m[1]=Math.min(m[1],e,p),m[2]=Math.max(m[2],t,c),m[3]=Math.max(m[3],e,p)):m=[Math.min(t,c),Math.min(e,p),Math.max(t,c),Math.max(e,p)],M(this,Pa,Z0).call(this,t,n,r,c,e,a,l,p,3*(-t+3*(n-r)+c),6*(t-2*n+r),3*(n-t),m),M(this,Pa,Z0).call(this,t,n,r,c,e,a,l,p,3*(-e+3*(a-l)+p),6*(e-2*a+l),3*(a-e),m),m}}Pa=new WeakSet,Nm=function(t,e,n,a,r,l,c,p,m,y){if(m<=0||m>=1)return;const _=1-m,T=m*m,S=T*m,C=_*(_*(_*t+3*m*e)+3*T*n)+S*a,x=_*(_*(_*r+3*m*l)+3*T*c)+S*p;y[0]=Math.min(y[0],C),y[1]=Math.min(y[1],x),y[2]=Math.max(y[2],C),y[3]=Math.max(y[3],x)},Z0=function(t,e,n,a,r,l,c,p,m,y,_,T){if(Math.abs(m)<1e-12){Math.abs(y)>=1e-12&&M(this,Pa,Nm).call(this,t,e,n,a,r,l,c,p,-_/y,T);return}const S=y**2-4*_*m;if(S<0)return;const C=Math.sqrt(S),x=2*m;M(this,Pa,Nm).call(this,t,e,n,a,r,l,c,p,(-y+C)/x,T),M(this,Pa,Nm).call(this,t,e,n,a,r,l,c,p,(-y-C)/x,T)},w(_t,Pa);function oB(i){return decodeURIComponent(escape(i))}let x0=null,px=null;function rB(i){return x0||(x0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,px=new Map([["","t"]])),i.replaceAll(x0,(t,e,n)=>e?e.normalize("NFKC"):px.get(n))}function lB(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),yw(i)}const yA="pdfjs_internal_id_";function uB(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(yw(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});const sa="http://www.w3.org/2000/svg",Sr=class Sr{};Ct(Sr,"CSS",96),Ct(Sr,"PDF",72),Ct(Sr,"PDF_TO_CSS_UNITS",Sr.CSS/Sr.PDF);let Zo=Sr;async function Wg(i,t="text"){if(rf(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",i,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class ip{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:r=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=r,this.offsetY=l,n*=e;const p=(t[2]+t[0])/2,m=(t[3]+t[1])/2;let y,_,T,S;switch(a%=360,a<0&&(a+=360),a){case 180:y=-1,_=0,T=0,S=1;break;case 90:y=0,_=1,T=1,S=0;break;case 270:y=0,_=-1,T=-1,S=0;break;case 0:y=1,_=0,T=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(T=-T,S=-S);let C,x,D,N;y===0?(C=Math.abs(m-t[1])*n+r,x=Math.abs(p-t[0])*n+l,D=(t[3]-t[1])*n,N=(t[2]-t[0])*n):(C=Math.abs(p-t[0])*n+r,x=Math.abs(m-t[1])*n+l,D=(t[2]-t[0])*n,N=(t[3]-t[1])*n),this.transform=[y*n,_*n,T*n,S*n,C-y*n*p-T*n*m,x-_*n*p-S*n*m],this.width=D,this.height=N}get rawDims(){const{userUnit:t,viewBox:e}=this,n=e.map(a=>a*t);return qt(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:r=!1}={}){return new ip({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:r})}convertToViewportPoint(t,e){return _t.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=_t.applyTransform([t[0],t[1]],this.transform),n=_t.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return _t.applyInverseTransform([t,e],this.transform)}}class vA extends jo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Zg(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function _A(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function cB(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function dB(i,t="document.pdf"){if(typeof i!="string")return t;if(Zg(i))return Pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=e.exec(i);let r=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class mx{constructor(){Ct(this,"started",Object.create(null));Ct(this,"times",[])}time(t){t in this.started&&Pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-a}ms
`);return t.join("")}}function rf(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function cs(i){i.preventDefault()}function Ti(i){i.preventDefault(),i.stopPropagation()}var Nf;class AA{static toDateObject(t){if(!t||typeof t!="string")return null;g(this,Nf)||E(this,Nf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=g(this,Nf).exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let p=parseInt(e[6],10);p=p>=0&&p<=59?p:0;const m=e[7]||"Z";let y=parseInt(e[8],10);y=y>=0&&y<=23?y:0;let _=parseInt(e[9],10)||0;return _=_>=0&&_<=59?_:0,m==="-"?(l+=y,c+=_):m==="+"&&(l-=y,c-=_),new Date(Date.UTC(n,a,r,l,c,p))}}Nf=new WeakMap,w(AA,Nf);function fB(i,{scale:t=1,rotation:e=0}){const{width:n,height:a}=i.attributes.style,r=[0,0,parseInt(n),parseInt(a)];return new ip({viewBox:r,userUnit:1,scale:t,rotation:e})}function TA(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Pt(`Not a valid color format: "${i}"`),[0,0,0])}function hB(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,TA(n))}t.remove()}function Ce(i){const{a:t,b:e,c:n,d:a,e:r,f:l}=i.getTransform();return[t,e,n,a,r,l]}function vs(i){const{a:t,b:e,c:n,d:a,e:r,f:l}=i.getTransform().invertSelf();return[t,e,n,a,r,l]}function Il(i,t,e=!1,n=!0){if(t instanceof ip){const{pageWidth:a,pageHeight:r}=t.rawDims,{style:l}=i,c=Fn.isCSSRoundSupported,p=`var(--scale-factor) * ${a}px`,m=`var(--scale-factor) * ${r}px`,y=c?`round(down, ${p}, var(--scale-round-x, 1px))`:`calc(${p})`,_=c?`round(down, ${m}, var(--scale-round-y, 1px))`:`calc(${m})`;!e||t.rotation%180===0?(l.width=y,l.height=_):(l.width=_,l.height=y)}n&&i.setAttribute("data-main-rotation",t.rotation)}class Q0{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var yo,Er,Zi,br,If,Lf,Cg,vw,Un,_w,Aw,Im,Tw,t_;const ra=class ra{constructor(t){w(this,Un);w(this,yo,null);w(this,Er,null);w(this,Zi);w(this,br,null);w(this,If,null);E(this,Zi,t),g(ra,Lf)||E(ra,Lf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=E(this,yo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=g(this,Zi)._uiManager._signal;t.addEventListener("contextmenu",cs,{signal:e}),t.addEventListener("pointerdown",M(ra,Cg,vw),{signal:e});const n=E(this,br,document.createElement("div"));n.className="buttons",t.append(n);const a=g(this,Zi).toolbarPosition;if(a){const{style:r}=t,l=g(this,Zi)._uiManager.direction==="ltr"?1-a[0]:a[0];r.insetInlineEnd=`${100*l}%`,r.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return M(this,Un,Tw).call(this),t}get div(){return g(this,yo)}hide(){var t;g(this,yo).classList.add("hidden"),(t=g(this,Er))==null||t.hideDropdown()}show(){var t;g(this,yo).classList.remove("hidden"),(t=g(this,If))==null||t.shown()}async addAltText(t){const e=await t.render();M(this,Un,Im).call(this,e),g(this,br).prepend(e,g(this,Un,t_)),E(this,If,t)}addColorPicker(t){E(this,Er,t);const e=t.renderButton();M(this,Un,Im).call(this,e),g(this,br).prepend(e,g(this,Un,t_))}remove(){var t;g(this,yo).remove(),(t=g(this,Er))==null||t.destroy(),E(this,Er,null)}};yo=new WeakMap,Er=new WeakMap,Zi=new WeakMap,br=new WeakMap,If=new WeakMap,Lf=new WeakMap,Cg=new WeakSet,vw=function(t){t.stopPropagation()},Un=new WeakSet,_w=function(t){g(this,Zi)._focusEventsAllowed=!1,Ti(t)},Aw=function(t){g(this,Zi)._focusEventsAllowed=!0,Ti(t)},Im=function(t){const e=g(this,Zi)._uiManager._signal;t.addEventListener("focusin",M(this,Un,_w).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",M(this,Un,Aw).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",cs,{signal:e})},Tw=function(){const{editorType:t,_uiManager:e}=g(this,Zi),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",g(ra,Lf)[t]),M(this,Un,Im).call(this,n),n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),g(this,br).append(n)},t_=function(){const t=document.createElement("div");return t.className="divider",t},w(ra,Cg),w(ra,Lf,null);let j0=ra;var kf,xr,wr,Qo,Sw,Cw,Ew;class pB{constructor(t){w(this,Qo);w(this,kf,null);w(this,xr,null);w(this,wr);E(this,wr,t)}show(t,e,n){const[a,r]=M(this,Qo,Cw).call(this,e,n),{style:l}=g(this,xr)||E(this,xr,M(this,Qo,Sw).call(this));t.append(g(this,xr)),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){g(this,xr).remove()}}kf=new WeakMap,xr=new WeakMap,wr=new WeakMap,Qo=new WeakSet,Sw=function(){const t=E(this,xr,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",cs,{signal:g(this,wr)._signal});const e=E(this,kf,document.createElement("div"));return e.className="buttons",t.append(e),M(this,Qo,Ew).call(this),t},Cw=function(t,e){let n=0,a=0;for(const r of t){const l=r.y+r.height;if(l<n)continue;const c=r.x+(e?r.width:0);if(l>n){a=c,n=l;continue}e?c>a&&(a=c):c<a&&(a=c)}return[e?1-a:a,n]},Ew=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=g(this,wr)._signal;t.addEventListener("contextmenu",cs,{signal:n}),t.addEventListener("click",()=>{g(this,wr).highlightSelection("floating_button")},{signal:n}),g(this,kf).append(t)};function gg(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var Eg;class mB{constructor(){w(this,Eg,0)}get id(){return`${JV}${Dn(this,Eg)._++}`}}Eg=new WeakMap;var Vu,Pf,Sn,Bu,Lm;const xA=class xA{constructor(){w(this,Bu);w(this,Vu,lB());w(this,Pf,0);w(this,Sn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const r=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return qt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:r}=t;return M(this,Bu,Lm).call(this,`${e}_${n}_${a}_${r}`,t)}async getFromUrl(t){return M(this,Bu,Lm).call(this,t,t)}async getFromBlob(t,e){const n=await e;return M(this,Bu,Lm).call(this,t,n)}async getFromId(t){g(this,Sn)||E(this,Sn,new Map);const e=g(this,Sn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){g(this,Sn)||E(this,Sn,new Map);let n=g(this,Sn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${g(this,Vu)}_${Dn(this,Pf)._++}`,refCounter:1,isSvg:!1},g(this,Sn).set(t,n),g(this,Sn).set(n.id,n),n}getSvgUrl(t){const e=g(this,Sn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var a;g(this,Sn)||E(this,Sn,new Map);const e=g(this,Sn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(a=n.close)==null||a.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${g(this,Vu)}_`)}};Vu=new WeakMap,Pf=new WeakMap,Sn=new WeakMap,Bu=new WeakSet,Lm=async function(t,e){g(this,Sn)||E(this,Sn,new Map);let n=g(this,Sn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${g(this,Vu)}_${Dn(this,Pf)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await Wg(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const r=xA._isSVGFittingCanvas,l=new FileReader,c=new Image,p=new Promise((m,y)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,m()},l.onload=async()=>{const _=n.svgUrl=l.result;c.src=await r?`${_}#svgView(preserveAspectRatio(none))`:_},c.onerror=l.onerror=y});l.readAsDataURL(a),await p}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){Pt(a),n=null}return g(this,Sn).set(t,n),n&&g(this,Sn).set(n.id,n),n};let e_=xA;var ke,vo,Ff,xe;class gB{constructor(t=128){w(this,ke,[]);w(this,vo,!1);w(this,Ff);w(this,xe,-1);E(this,Ff,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:r=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(a&&t(),g(this,vo))return;const p={cmd:t,undo:e,post:n,type:r};if(g(this,xe)===-1){g(this,ke).length>0&&(g(this,ke).length=0),E(this,xe,0),g(this,ke).push(p);return}if(l&&g(this,ke)[g(this,xe)].type===r){c&&(p.undo=g(this,ke)[g(this,xe)].undo),g(this,ke)[g(this,xe)]=p;return}const m=g(this,xe)+1;m===g(this,Ff)?g(this,ke).splice(0,1):(E(this,xe,m),m<g(this,ke).length&&g(this,ke).splice(m)),g(this,ke).push(p)}undo(){if(g(this,xe)===-1)return;E(this,vo,!0);const{undo:t,post:e}=g(this,ke)[g(this,xe)];t(),e==null||e(),E(this,vo,!1),E(this,xe,g(this,xe)-1)}redo(){if(g(this,xe)<g(this,ke).length-1){E(this,xe,g(this,xe)+1),E(this,vo,!0);const{cmd:t,post:e}=g(this,ke)[g(this,xe)];t(),e==null||e(),E(this,vo,!1)}}hasSomethingToUndo(){return g(this,xe)!==-1}hasSomethingToRedo(){return g(this,xe)<g(this,ke).length-1}cleanType(t){if(g(this,xe)!==-1){for(let e=g(this,xe);e>=0;e--)if(g(this,ke)[e].type!==t){g(this,ke).splice(e+1,g(this,xe)-e),E(this,xe,e);return}g(this,ke).length=0,E(this,xe,-1)}}destroy(){E(this,ke,null)}}ke=new WeakMap,vo=new WeakMap,Ff=new WeakMap,xe=new WeakMap;var bg,bw;class sp{constructor(t){w(this,bg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Fn.platform;for(const[n,a,r={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:a,options:r}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:a,options:r}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(M(this,bg,bw).call(this,e));if(!n)return;const{callback:a,options:{bubbles:r=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(a.bind(t,...l,e)(),r||Ti(e))}}bg=new WeakSet,bw=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const xg=class xg{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return hB(t),qt(this,"_colors",t)}convert(t){const e=TA(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((r,l)=>r===e[l]))return xg._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?_t.makeHexColor(...e):t}};Ct(xg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let n_=xg;var Hu,ri,Xe,cn,Gu,ua,zu,Li,_o,Mr,qu,Rr,Ts,Qi,Dr,Uf,Of,$u,Vf,Ss,Ao,Yu,To,Cs,wg,So,Bf,Co,Nr,Hf,Gf,tn,oe,ca,Ir,zf,qf,Eo,Es,da,$f,ki,ot,km,i_,xw,ww,Pm,Mw,Rw,Dw,s_,Nw,a_,o_,Iw,Nn,aa,Lw,kw,r_,Pw,lf,l_;const Lu=class Lu{constructor(t,e,n,a,r,l,c,p,m,y,_,T,S){w(this,ot);w(this,Hu,new AbortController);w(this,ri,null);w(this,Xe,new Map);w(this,cn,new Map);w(this,Gu,null);w(this,ua,null);w(this,zu,null);w(this,Li,new gB);w(this,_o,null);w(this,Mr,null);w(this,qu,0);w(this,Rr,new Set);w(this,Ts,null);w(this,Qi,null);w(this,Dr,new Set);Ct(this,"_editorUndoBar",null);w(this,Uf,!1);w(this,Of,!1);w(this,$u,!1);w(this,Vf,null);w(this,Ss,null);w(this,Ao,null);w(this,Yu,null);w(this,To,!1);w(this,Cs,null);w(this,wg,new mB);w(this,So,!1);w(this,Bf,!1);w(this,Co,null);w(this,Nr,null);w(this,Hf,null);w(this,Gf,null);w(this,tn,kt.NONE);w(this,oe,new Set);w(this,ca,null);w(this,Ir,null);w(this,zf,null);w(this,qf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,Eo,[0,0]);w(this,Es,null);w(this,da,null);w(this,$f,null);w(this,ki,null);const C=this._signal=g(this,Hu).signal;E(this,da,t),E(this,$f,e),E(this,Gu,n),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:C}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),a._on("setpreference",this.onSetPreference.bind(this),{signal:C}),a._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:C}),M(this,ot,Mw).call(this),M(this,ot,Iw).call(this),M(this,ot,s_).call(this),E(this,ua,r.annotationStorage),E(this,Vf,r.filterFactory),E(this,Ir,l),E(this,Yu,c||null),E(this,Uf,p),E(this,Of,m),E(this,$u,y),E(this,Gf,_||null),this.viewParameters={realScale:Zo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=T||null,this._supportsPinchToZoom=S!==!1}static get _keyboardManager(){const t=Lu.prototype,e=l=>g(l,da).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:p}=c;return p!=="text"&&p!=="number"}return!0},a=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return qt(this,"_keyboardManager",new sp([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&g(l,da).contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&g(l,da).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,a,r;(t=g(this,ki))==null||t.resolve(),E(this,ki,null),(e=g(this,Hu))==null||e.abort(),E(this,Hu,null),this._signal=null;for(const l of g(this,cn).values())l.destroy();g(this,cn).clear(),g(this,Xe).clear(),g(this,Dr).clear(),E(this,ri,null),g(this,oe).clear(),g(this,Li).destroy(),(n=g(this,Gu))==null||n.destroy(),(a=g(this,Cs))==null||a.hide(),E(this,Cs,null),g(this,Ss)&&(clearTimeout(g(this,Ss)),E(this,Ss,null)),g(this,Es)&&(clearTimeout(g(this,Es)),E(this,Es,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return g(this,Gf)}get useNewAltTextFlow(){return g(this,Of)}get useNewAltTextWhenAddingImage(){return g(this,$u)}get hcmFilter(){return qt(this,"hcmFilter",g(this,Ir)?g(this,Vf).addHCMFilter(g(this,Ir).foreground,g(this,Ir).background):"none")}get direction(){return qt(this,"direction",getComputedStyle(g(this,da)).direction)}get highlightColors(){return qt(this,"highlightColors",g(this,Yu)?new Map(g(this,Yu).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return qt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,Mr,t)}setMainHighlightColorPicker(t){E(this,Hf,t)}editAltText(t,e=!1){var n;(n=g(this,Gu))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":E(this,$u,e);break}}onPageChanging({pageNumber:t}){E(this,qu,t-1)}focusMainContainer(){g(this,da).focus()}findParent(t,e){for(const n of g(this,cn).values()){const{x:a,y:r,width:l,height:c}=n.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=r&&e<=r+c)return n}return null}disableUserSelect(t=!1){g(this,$f).classList.toggle("noUserSelect",t)}addShouldRescale(t){g(this,Dr).add(t)}removeShouldRescale(t){g(this,Dr).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Zo.PDF_TO_CSS_UNITS;for(const n of g(this,Dr))n.onScaleChanging();(e=g(this,Mr))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:a,focusNode:r,focusOffset:l}=e,c=e.toString(),m=M(this,ot,km).call(this,e).closest(".textLayer"),y=this.getSelectionBoxes(m);if(!y)return;e.empty();const _=M(this,ot,i_).call(this,m),T=g(this,tn)===kt.NONE,S=()=>{_==null||_.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:n,anchorOffset:a,focusNode:r,focusOffset:l,text:c}),T&&this.showAllEditors("highlight",!0,!0)};if(T){this.switchToMode(kt.HIGHLIGHT,S);return}S()}addToAnnotationStorage(t){!t.isEmpty()&&g(this,ua)&&!g(this,ua).has(t.id)&&g(this,ua).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,g(this,To)&&(E(this,To,!1),M(this,ot,Pm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of g(this,oe))if(e.div.contains(t)){E(this,Nr,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!g(this,Nr))return;const[t,e]=g(this,Nr);E(this,Nr,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){M(this,ot,s_).call(this),M(this,ot,a_).call(this)}removeEditListeners(){M(this,ot,Nw).call(this),M(this,ot,o_).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of g(this,Qi))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of g(this,Qi))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=g(this,ri))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of g(this,oe)){const r=a.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const l of g(this,Qi))if(l.isHandlingMimeForPasting(r.type)){l.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){Pt(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const r=[];for(const p of n){const m=await a.deserialize(p);if(!m)return;r.push(m)}const l=()=>{for(const p of r)M(this,ot,r_).call(this,p);M(this,ot,l_).call(this,r)},c=()=>{for(const p of r)p.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(r){Pt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),g(this,tn)!==kt.NONE&&!this.isEditorHandlingKeyboard&&Lu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,g(this,To)&&(E(this,To,!1),M(this,ot,Pm).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(M(this,ot,Rw).call(this),M(this,ot,a_).call(this),M(this,ot,Nn).call(this,{isEditing:g(this,tn)!==kt.NONE,isEmpty:M(this,ot,lf).call(this),hasSomethingToUndo:g(this,Li).hasSomethingToUndo(),hasSomethingToRedo:g(this,Li).hasSomethingToRedo(),hasSelectedEditor:!1})):(M(this,ot,Dw).call(this),M(this,ot,o_).call(this),M(this,ot,Nn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!g(this,Qi)){E(this,Qi,t);for(const e of g(this,Qi))M(this,ot,aa).call(this,e.defaultPropertiesToUpdate)}}getId(){return g(this,wg).id}get currentLayer(){return g(this,cn).get(g(this,qu))}getLayer(t){return g(this,cn).get(t)}get currentPageIndex(){return g(this,qu)}addLayer(t){g(this,cn).set(t.pageIndex,t),g(this,So)?t.enable():t.disable()}removeLayer(t){g(this,cn).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var a;if(g(this,tn)!==t&&!(g(this,ki)&&(await g(this,ki).promise,!g(this,ki)))){if(E(this,ki,Promise.withResolvers()),E(this,tn,t),t===kt.NONE){this.setEditingState(!1),M(this,ot,kw).call(this),(a=this._editorUndoBar)==null||a.hide(),g(this,ki).resolve();return}this.setEditingState(!0),await M(this,ot,Lw).call(this),this.unselectAll();for(const r of g(this,cn).values())r.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),g(this,ki).resolve();return}for(const r of g(this,Xe).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();g(this,ki).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==g(this,tn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(g(this,Qi)){switch(t){case Xt.CREATE:this.currentLayer.addNewEditor();return;case Xt.HIGHLIGHT_DEFAULT_COLOR:(n=g(this,Hf))==null||n.updateColor(e);break;case Xt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(g(this,zf)||E(this,zf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const a of g(this,oe))a.updateParams(t,e);for(const a of g(this,Qi))a.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const l of g(this,Xe).values())l.editorType===t&&l.show(e);(((r=g(this,zf))==null?void 0:r.get(Xt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&M(this,ot,aa).call(this,[[Xt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(g(this,Bf)!==t){E(this,Bf,t);for(const e of g(this,cn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of g(this,Xe).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return g(this,Xe).get(t)}addEditor(t){g(this,Xe).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(g(this,Ss)&&clearTimeout(g(this,Ss)),E(this,Ss,setTimeout(()=>{this.focusMainContainer(),E(this,Ss,null)},0))),g(this,Xe).delete(t.id),this.unselect(t),(!t.annotationElementId||!g(this,Rr).has(t.annotationElementId))&&((e=g(this,ua))==null||e.remove(t.id))}addDeletedAnnotationElement(t){g(this,Rr).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return g(this,Rr).has(t)}removeDeletedAnnotationElement(t){g(this,Rr).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){g(this,ri)!==t&&(E(this,ri,t),t&&M(this,ot,aa).call(this,t.propertiesToUpdate))}updateUI(t){g(this,ot,Pw)===t&&M(this,ot,aa).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){M(this,ot,aa).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(g(this,oe).has(t)){g(this,oe).delete(t),t.unselect(),M(this,ot,Nn).call(this,{hasSelectedEditor:this.hasSelection});return}g(this,oe).add(t),t.select(),M(this,ot,aa).call(this,t.propertiesToUpdate),M(this,ot,Nn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=g(this,Mr))==null||e.commitOrRemove();for(const n of g(this,oe))n!==t&&n.unselect();g(this,oe).clear(),g(this,oe).add(t),t.select(),M(this,ot,aa).call(this,t.propertiesToUpdate),M(this,ot,Nn).call(this,{hasSelectedEditor:!0})}isSelected(t){return g(this,oe).has(t)}get firstSelectedEditor(){return g(this,oe).values().next().value}unselect(t){t.unselect(),g(this,oe).delete(t),M(this,ot,Nn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return g(this,oe).size!==0}get isEnterHandled(){return g(this,oe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;g(this,Li).undo(),M(this,ot,Nn).call(this,{hasSomethingToUndo:g(this,Li).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:M(this,ot,lf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){g(this,Li).redo(),M(this,ot,Nn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:g(this,Li).hasSomethingToRedo(),isEmpty:M(this,ot,lf).call(this)})}addCommands(t){g(this,Li).add(t),M(this,ot,Nn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:M(this,ot,lf).call(this)})}cleanUndoStack(t){g(this,Li).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...g(this,oe)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(a,e.length===1?e[0].editorType:e.length);for(const c of e)c.remove()},a=()=>{for(const l of e)M(this,ot,r_).call(this,l)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){var t;(t=g(this,ri))==null||t.commitOrRemove()}hasSomethingToControl(){return g(this,ri)||this.hasSelection}selectAll(){for(const t of g(this,oe))t.commit();M(this,ot,l_).call(this,g(this,Xe).values())}unselectAll(){var t;if(!(g(this,ri)&&(g(this,ri).commitOrRemove(),g(this,tn)!==kt.NONE))&&!((t=g(this,Mr))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of g(this,oe))e.unselect();g(this,oe).clear(),M(this,ot,Nn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;g(this,Eo)[0]+=t,g(this,Eo)[1]+=e;const[a,r]=g(this,Eo),l=[...g(this,oe)],c=1e3;g(this,Es)&&clearTimeout(g(this,Es)),E(this,Es,setTimeout(()=>{E(this,Es,null),g(this,Eo)[0]=g(this,Eo)[1]=0,this.addCommands({cmd:()=>{for(const p of l)g(this,Xe).has(p.id)&&p.translateInPage(a,r)},undo:()=>{for(const p of l)g(this,Xe).has(p.id)&&p.translateInPage(-a,-r)},mustExec:!1})},c));for(const p of l)p.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,Ts,new Map);for(const t of g(this,oe))g(this,Ts).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!g(this,Ts))return!1;this.disableUserSelect(!1);const t=g(this,Ts);E(this,Ts,null);let e=!1;for(const[{x:a,y:r,pageIndex:l},c]of t)c.newX=a,c.newY=r,c.newPageIndex=l,e||(e=a!==c.savedX||r!==c.savedY||l!==c.savedPageIndex);if(!e)return!1;const n=(a,r,l,c)=>{if(g(this,Xe).has(a.id)){const p=g(this,cn).get(c);p?a._setParentAndPosition(p,r,l):(a.pageIndex=c,a.x=r,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:r,newY:l,newPageIndex:c}]of t)n(a,r,l,c)},undo:()=>{for(const[a,{savedX:r,savedY:l,savedPageIndex:c}]of t)n(a,r,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(g(this,Ts))for(const n of g(this,Ts).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||g(this,oe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return g(this,ri)===t}getActive(){return g(this,ri)}getMode(){return g(this,tn)}get imageManager(){return qt(this,"imageManager",new e_)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let m=0,y=e.rangeCount;m<y;m++)if(!t.contains(e.getRangeAt(m).commonAncestorContainer))return null;const{x:n,y:a,width:r,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(m,y,_,T)=>({x:(y-a)/l,y:1-(m+_-n)/r,width:T/l,height:_/r});break;case"180":c=(m,y,_,T)=>({x:1-(m+_-n)/r,y:1-(y+T-a)/l,width:_/r,height:T/l});break;case"270":c=(m,y,_,T)=>({x:1-(y+T-a)/l,y:(m-n)/r,width:T/l,height:_/r});break;default:c=(m,y,_,T)=>({x:(m-n)/r,y:(y-a)/l,width:_/r,height:T/l});break}const p=[];for(let m=0,y=e.rangeCount;m<y;m++){const _=e.getRangeAt(m);if(!_.collapsed)for(const{x:T,y:S,width:C,height:x}of _.getClientRects())C===0||x===0||p.push(c(T,S,C,x))}return p.length===0?null:p}addChangedExistingAnnotation({annotationElementId:t,id:e}){(g(this,zu)||E(this,zu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=g(this,zu))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=g(this,zu))==null?void 0:a.get(t.data.id);if(!e)return;const n=g(this,ua).getRawValue(e);n&&(g(this,tn)===kt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};Hu=new WeakMap,ri=new WeakMap,Xe=new WeakMap,cn=new WeakMap,Gu=new WeakMap,ua=new WeakMap,zu=new WeakMap,Li=new WeakMap,_o=new WeakMap,Mr=new WeakMap,qu=new WeakMap,Rr=new WeakMap,Ts=new WeakMap,Qi=new WeakMap,Dr=new WeakMap,Uf=new WeakMap,Of=new WeakMap,$u=new WeakMap,Vf=new WeakMap,Ss=new WeakMap,Ao=new WeakMap,Yu=new WeakMap,To=new WeakMap,Cs=new WeakMap,wg=new WeakMap,So=new WeakMap,Bf=new WeakMap,Co=new WeakMap,Nr=new WeakMap,Hf=new WeakMap,Gf=new WeakMap,tn=new WeakMap,oe=new WeakMap,ca=new WeakMap,Ir=new WeakMap,zf=new WeakMap,qf=new WeakMap,Eo=new WeakMap,Es=new WeakMap,da=new WeakMap,$f=new WeakMap,ki=new WeakMap,ot=new WeakSet,km=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},i_=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of g(this,cn).values())if(n.hasTextLayer(t))return n;return null},xw=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=M(this,ot,km).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(g(this,Cs)||E(this,Cs,new pB(this)),g(this,Cs).show(n,a,this.direction==="ltr"))},ww=function(){var r,l,c;const t=document.getSelection();if(!t||t.isCollapsed){g(this,ca)&&((r=g(this,Cs))==null||r.hide(),E(this,ca,null),M(this,ot,Nn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===g(this,ca))return;const a=M(this,ot,km).call(this,t).closest(".textLayer");if(!a){g(this,ca)&&((l=g(this,Cs))==null||l.hide(),E(this,ca,null),M(this,ot,Nn).call(this,{hasSelectedText:!1}));return}if((c=g(this,Cs))==null||c.hide(),E(this,ca,e),M(this,ot,Nn).call(this,{hasSelectedText:!0}),!(g(this,tn)!==kt.HIGHLIGHT&&g(this,tn)!==kt.NONE)&&(g(this,tn)===kt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,To,this.isShiftKeyDown),!this.isShiftKeyDown)){const p=g(this,tn)===kt.HIGHLIGHT?M(this,ot,i_).call(this,a):null;p==null||p.toggleDrawing();const m=new AbortController,y=this.combinedSignal(m),_=T=>{T.type==="pointerup"&&T.button!==0||(m.abort(),p==null||p.toggleDrawing(!0),T.type==="pointerup"&&M(this,ot,Pm).call(this,"main_toolbar"))};window.addEventListener("pointerup",_,{signal:y}),window.addEventListener("blur",_,{signal:y})}},Pm=function(t=""){g(this,tn)===kt.HIGHLIGHT?this.highlightSelection(t):g(this,Uf)&&M(this,ot,xw).call(this)},Mw=function(){document.addEventListener("selectionchange",M(this,ot,ww).bind(this),{signal:this._signal})},Rw=function(){if(g(this,Ao))return;E(this,Ao,new AbortController);const t=this.combinedSignal(g(this,Ao));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Dw=function(){var t;(t=g(this,Ao))==null||t.abort(),E(this,Ao,null)},s_=function(){if(g(this,Co))return;E(this,Co,new AbortController);const t=this.combinedSignal(g(this,Co));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},Nw=function(){var t;(t=g(this,Co))==null||t.abort(),E(this,Co,null)},a_=function(){if(g(this,_o))return;E(this,_o,new AbortController);const t=this.combinedSignal(g(this,_o));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},o_=function(){var t;(t=g(this,_o))==null||t.abort(),E(this,_o,null)},Iw=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Nn=function(t){Object.entries(t).some(([n,a])=>g(this,qf)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(g(this,qf),t)}),g(this,tn)===kt.HIGHLIGHT&&t.hasSelectedEditor===!1&&M(this,ot,aa).call(this,[[Xt.HIGHLIGHT_FREE,!0]]))},aa=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Lw=async function(){if(!g(this,So)){E(this,So,!0);const t=[];for(const e of g(this,cn).values())t.push(e.enable());await Promise.all(t);for(const e of g(this,Xe).values())e.enable()}},kw=function(){if(this.unselectAll(),g(this,So)){E(this,So,!1);for(const t of g(this,cn).values())t.disable();for(const t of g(this,Xe).values())t.disable()}},r_=function(t){const e=g(this,cn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Pw=function(){let t=null;for(t of g(this,oe));return t},lf=function(){if(g(this,Xe).size===0)return!0;if(g(this,Xe).size===1)for(const t of g(this,Xe).values())return t.isEmpty();return!1},l_=function(t){for(const e of g(this,oe))e.unselect();g(this,oe).clear();for(const e of t)e.isEmpty()||(g(this,oe).add(e),e.select());M(this,ot,Nn).call(this,{hasSelectedEditor:this.hasSelection})},Ct(Lu,"TRANSLATE_SMALL",1),Ct(Lu,"TRANSLATE_BIG",10);let Ll=Lu;var en,bs,ji,Xu,xs,li,Ku,ws,Kn,fa,Lr,Ms,bo,us,uf,Fm;const In=class In{constructor(t){w(this,us);w(this,en,null);w(this,bs,!1);w(this,ji,null);w(this,Xu,null);w(this,xs,null);w(this,li,null);w(this,Ku,!1);w(this,ws,null);w(this,Kn,null);w(this,fa,null);w(this,Lr,null);w(this,Ms,!1);E(this,Kn,t),E(this,Ms,t._uiManager.useNewAltTextFlow),g(In,bo)||E(In,bo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){In._l10n??(In._l10n=t)}async render(){const t=E(this,ji,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=E(this,Xu,document.createElement("span"));t.append(e),g(this,Ms)?(t.classList.add("new"),t.setAttribute("data-l10n-id",g(In,bo).missing),e.setAttribute("data-l10n-id",g(In,bo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=g(this,Kn)._uiManager._signal;t.addEventListener("contextmenu",cs,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const a=r=>{r.preventDefault(),g(this,Kn)._uiManager.editAltText(g(this,Kn)),g(this,Ms)&&g(this,Kn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:g(this,us,uf)}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(E(this,Ku,!0),a(r))},{signal:n}),await M(this,us,Fm).call(this),t}finish(){g(this,ji)&&(g(this,ji).focus({focusVisible:g(this,Ku)}),E(this,Ku,!1))}isEmpty(){return g(this,Ms)?g(this,en)===null:!g(this,en)&&!g(this,bs)}hasData(){return g(this,Ms)?g(this,en)!==null||!!g(this,fa):this.isEmpty()}get guessedText(){return g(this,fa)}async setGuessedText(t){g(this,en)===null&&(E(this,fa,t),E(this,Lr,await In._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),M(this,us,Fm).call(this))}toggleAltTextBadge(t=!1){var e;if(!g(this,Ms)||g(this,en)){(e=g(this,ws))==null||e.remove(),E(this,ws,null);return}if(!g(this,ws)){const n=E(this,ws,document.createElement("div"));n.className="noAltTextBadge",g(this,Kn).div.append(n)}g(this,ws).classList.toggle("hidden",!t)}serialize(t){let e=g(this,en);return!t&&g(this,fa)===e&&(e=g(this,Lr)),{altText:e,decorative:g(this,bs),guessedText:g(this,fa),textWithDisclaimer:g(this,Lr)}}get data(){return{altText:g(this,en),decorative:g(this,bs)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:r=!1}){n&&(E(this,fa,n),E(this,Lr,a)),!(g(this,en)===t&&g(this,bs)===e)&&(r||(E(this,en,t),E(this,bs,e)),M(this,us,Fm).call(this))}toggle(t=!1){g(this,ji)&&(!t&&g(this,li)&&(clearTimeout(g(this,li)),E(this,li,null)),g(this,ji).disabled=!t)}shown(){g(this,Kn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:g(this,us,uf)}})}destroy(){var t,e;(t=g(this,ji))==null||t.remove(),E(this,ji,null),E(this,Xu,null),E(this,xs,null),(e=g(this,ws))==null||e.remove(),E(this,ws,null)}};en=new WeakMap,bs=new WeakMap,ji=new WeakMap,Xu=new WeakMap,xs=new WeakMap,li=new WeakMap,Ku=new WeakMap,ws=new WeakMap,Kn=new WeakMap,fa=new WeakMap,Lr=new WeakMap,Ms=new WeakMap,bo=new WeakMap,us=new WeakSet,uf=function(){return g(this,en)&&"added"||g(this,en)===null&&this.guessedText&&"review"||"missing"},Fm=async function(){var a,r,l;const t=g(this,ji);if(!t)return;if(g(this,Ms)){if(t.classList.toggle("done",!!g(this,en)),t.setAttribute("data-l10n-id",g(In,bo)[g(this,us,uf)]),(a=g(this,Xu))==null||a.setAttribute("data-l10n-id",g(In,bo)[`${g(this,us,uf)}-label`]),!g(this,en)){(r=g(this,xs))==null||r.remove();return}}else{if(!g(this,en)&&!g(this,bs)){t.classList.remove("done"),(l=g(this,xs))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=g(this,xs);if(!e){E(this,xs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${g(this,Kn).id}`;const c=100,p=g(this,Kn)._uiManager._signal;p.addEventListener("abort",()=>{clearTimeout(g(this,li)),E(this,li,null)},{once:!0}),t.addEventListener("mouseenter",()=>{E(this,li,setTimeout(()=>{E(this,li,null),g(this,xs).classList.add("show"),g(this,Kn)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:p}),t.addEventListener("mouseleave",()=>{var m;g(this,li)&&(clearTimeout(g(this,li)),E(this,li,null)),(m=g(this,xs))==null||m.classList.remove("show")},{signal:p})}g(this,bs)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=g(this,en)),e.parentNode||t.append(e);const n=g(this,Kn).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},w(In,bo,null),Ct(In,"_l10n",null);let yg=In;var Yf,kr,Xf,Kf,Jf,Wf,Zf,Ju,ha,Pr,xo,Oa,Fw,Uw,u_;const wA=class wA{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:r=null,onPinchEnd:l=null,signal:c}){w(this,Oa);w(this,Yf);w(this,kr,!1);w(this,Xf,null);w(this,Kf);w(this,Jf);w(this,Wf);w(this,Zf);w(this,Ju);w(this,ha,null);w(this,Pr);w(this,xo,null);E(this,Yf,t),E(this,Xf,n),E(this,Kf,e),E(this,Jf,a),E(this,Wf,r),E(this,Zf,l),E(this,Pr,new AbortController),E(this,Ju,AbortSignal.any([c,g(this,Pr).signal])),t.addEventListener("touchstart",M(this,Oa,Fw).bind(this),{passive:!1,signal:g(this,Ju)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return qt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=g(this,Pr))==null||t.abort(),E(this,Pr,null)}};Yf=new WeakMap,kr=new WeakMap,Xf=new WeakMap,Kf=new WeakMap,Jf=new WeakMap,Wf=new WeakMap,Zf=new WeakMap,Ju=new WeakMap,ha=new WeakMap,Pr=new WeakMap,xo=new WeakMap,Oa=new WeakSet,Fw=function(t){var a,r,l;if((a=g(this,Kf))!=null&&a.call(this)||t.touches.length<2)return;if(!g(this,xo)){E(this,xo,new AbortController);const c=AbortSignal.any([g(this,Ju),g(this,xo).signal]),p=g(this,Yf),m={signal:c,passive:!1};p.addEventListener("touchmove",M(this,Oa,Uw).bind(this),m),p.addEventListener("touchend",M(this,Oa,u_).bind(this),m),p.addEventListener("touchcancel",M(this,Oa,u_).bind(this),m),(r=g(this,Jf))==null||r.call(this)}if(Ti(t),t.touches.length!==2||(l=g(this,Xf))!=null&&l.call(this)){E(this,ha,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),E(this,ha,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},Uw=function(t){var P;if(!g(this,ha)||t.touches.length!==2)return;let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:r}=e,{screenX:l,screenY:c}=n,p=g(this,ha),{touch0X:m,touch0Y:y,touch1X:_,touch1Y:T}=p,S=_-m,C=T-y,x=l-a,D=c-r,N=Math.hypot(x,D)||1,L=Math.hypot(S,C)||1;if(!g(this,kr)&&Math.abs(L-N)<=wA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(p.touch0X=a,p.touch0Y=r,p.touch1X=l,p.touch1Y=c,t.preventDefault(),!g(this,kr)){E(this,kr,!0);return}const U=[(a+l)/2,(r+c)/2];(P=g(this,Wf))==null||P.call(this,U,L,N)},u_=function(t){var e;g(this,xo).abort(),E(this,xo,null),(e=g(this,Zf))==null||e.call(this),g(this,ha)&&(t.preventDefault(),E(this,ha,null),E(this,kr,!1))};let vg=wA;var Fr,ts,_e,Wu,wo,Qf,Ur,dn,Or,pa,Mo,jf,Vr,ui,th,Br,ma,Rs,Zu,Qu,Pi,Hr,eh,Mg,Et,c_,nh,d_,Um,Ow,Vw,f_,Om,h_,Bw,Hw,Gw,p_,zw,m_,qw,$w,Yw,g_,cf;const Ft=class Ft{constructor(t){w(this,Et);w(this,Fr,null);w(this,ts,null);w(this,_e,null);w(this,Wu,!1);w(this,wo,null);w(this,Qf,"");w(this,Ur,!1);w(this,dn,null);w(this,Or,null);w(this,pa,null);w(this,Mo,null);w(this,jf,"");w(this,Vr,!1);w(this,ui,null);w(this,th,!1);w(this,Br,!1);w(this,ma,!1);w(this,Rs,null);w(this,Zu,0);w(this,Qu,0);w(this,Pi,null);w(this,Hr,null);Ct(this,"_editToolbar",null);Ct(this,"_initialOptions",Object.create(null));Ct(this,"_initialData",null);Ct(this,"_isVisible",!0);Ct(this,"_uiManager",null);Ct(this,"_focusEventsAllowed",!0);w(this,eh,!1);w(this,Mg,Ft._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:r,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[r,l];const[c,p]=this.parentDimensions;this.x=t.x/c,this.y=t.y/p,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ft.prototype._resizeWithKeyboard,e=Ll.TRANSLATE_SMALL,n=Ll.TRANSLATE_BIG;return qt(this,"_resizerKeyboardManager",new sp([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Ft.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return qt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new yB({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Ft._l10n??(Ft._l10n=t),Ft._l10nResizer||(Ft._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ft._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ft._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return g(this,eh)}set _isDraggable(t){var e;E(this,eh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=g(this,Mg)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):M(this,Et,cf).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(g(this,Vr)?E(this,Vr,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[r,l]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/r,this.y=(e+a)/l,this.fixAndSetPosition()}translate(t,e){M(this,Et,c_).call(this,this.parentDimensions,t,e)}translateInPage(t,e){g(this,ui)||E(this,ui,[this.x,this.y,this.width,this.height]),M(this,Et,c_).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){g(this,ui)||E(this,ui,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[a,r]}=this;if(this.x+=t/a,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:_,y:T}=this.div.getBoundingClientRect();this.parent.findNewParent(this,_,T)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[p,m]=this.getBaseTranslation();l+=p,c+=m;const{style:y}=n;y.left=`${(100*l).toFixed(2)}%`,y.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!g(this,ui)&&(g(this,ui)[0]!==this.x||g(this,ui)[1]!==this.y)}get _hasBeenResized(){return!!g(this,ui)&&(g(this,ui)[2]!==this.width||g(this,ui)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Ft,a=n/t,r=n/e;switch(this.rotation){case 90:return[-a,r];case 180:return[a,r];case 270:return[a,-r];default:return[-a,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:r,y:l,width:c,height:p}=this;if(c*=n,p*=a,r*=n,l*=a,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(n-c,r)),l=Math.max(0,Math.min(a-p,l));break;case 90:r=Math.max(0,Math.min(n-p,r)),l=Math.min(a,Math.max(c,l));break;case 180:r=Math.min(n,Math.max(c,r)),l=Math.min(a,Math.max(p,l));break;case 270:r=Math.min(n,Math.max(p,r)),l=Math.max(0,Math.min(a-c,l));break}this.x=r/=n,this.y=l/=a;const[m,y]=this.getBaseTranslation();r+=m,l+=y,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return M(n=Ft,nh,d_).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return M(n=Ft,nh,d_).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,a]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/n).toFixed(2)}%`,g(this,Ur)||(r.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,a=n.endsWith("%"),r=!g(this,Ur)&&e.endsWith("%");if(a&&r)return;const[l,c]=this.parentDimensions;a||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!g(this,Ur)&&!r&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=g(this,_e))==null||t.finish()}async addEditToolbar(){return this._editToolbar||g(this,Br)?this._editToolbar:(this._editToolbar=new j0(this),this.div.append(this._editToolbar.render()),g(this,_e)&&await this._editToolbar.addAltText(g(this,_e)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=g(this,_e))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){g(this,_e)||(yg.initialize(Ft._l10n),E(this,_e,new yg(this)),g(this,Fr)&&(g(this,_e).data=g(this,Fr),E(this,Fr,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=g(this,_e))==null?void 0:t.data}set altTextData(t){g(this,_e)&&(g(this,_e).data=t)}get guessedAltText(){var t;return(t=g(this,_e))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=g(this,_e))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=g(this,_e))==null?void 0:e.serialize(t)}hasAltText(){return!!g(this,_e)&&!g(this,_e).isEmpty()}hasAltTextData(){var t;return((t=g(this,_e))==null?void 0:t.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=g(this,Wu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),M(this,Et,m_).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,a]=this.getInitialTranslation();return this.translate(n,a),gg(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(g(this,Hr)||E(this,Hr,new vg({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:M(this,Et,Bw).bind(this),onPinching:M(this,Et,Hw).bind(this),onPinchEnd:M(this,Et,Gw).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(t){const{isMac:e}=Fn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(E(this,Vr,!0),this._isDraggable){M(this,Et,zw).call(this,t);return}M(this,Et,p_).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){g(this,Rs)&&clearTimeout(g(this,Rs)),E(this,Rs,setTimeout(()=>{var t;E(this,Rs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[r,l]=this.pageDimensions,[c,p]=this.pageTranslation,m=t/a,y=e/a,_=this.x*r,T=this.y*l,S=this.width*r,C=this.height*l;switch(n){case 0:return[_+m+c,l-T-y-C+p,_+m+S+c,l-T-y+p];case 90:return[_+y+c,l-T+m+p,_+y+C+c,l-T+m+S+p];case 180:return[_-m-S+c,l-T+y+p,_-m+c,l-T+y+C+p];case 270:return[_-y-C+c,l-T-m-S+p,_-y+c,l-T-m+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,r,l]=t,c=r-n,p=l-a;switch(this.rotation){case 0:return[n,e-l,c,p];case 90:return[n,e-a,p,c];case 180:return[r,e-a,c,p];case 270:return[r,e-l,p,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){E(this,Br,!0)}disableEditMode(){E(this,Br,!1)}isInEditMode(){return g(this,Br)}shouldGetKeyboardEvents(){return g(this,ma)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:r,innerWidth:l}=window;return e<l&&a>0&&t<r&&n>0}rebuild(){M(this,Et,m_).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){ge("An editor must be serializable")}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});a.rotation=t.rotation,E(a,Fr,t.accessibilityData);const[r,l]=a.pageDimensions,[c,p,m,y]=a.getRectInCurrentCoords(t.rect,l);return a.x=c/r,a.y=p/l,a.width=m/r,a.height=y/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=g(this,Mo))==null||t.abort(),E(this,Mo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),g(this,Rs)&&(clearTimeout(g(this,Rs)),E(this,Rs,null)),M(this,Et,cf).call(this),this.removeEditToolbar(),g(this,Pi)){for(const n of g(this,Pi).values())clearTimeout(n);E(this,Pi,null)}this.parent=null,(e=g(this,Hr))==null||e.destroy(),E(this,Hr,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(M(this,Et,Ow).call(this),g(this,dn).classList.remove("hidden"),gg(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),E(this,pa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=g(this,dn).children;if(!g(this,ts)){E(this,ts,Array.from(e));const l=M(this,Et,qw).bind(this),c=M(this,Et,$w).bind(this),p=this._uiManager._signal;for(const m of g(this,ts)){const y=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",l,{signal:p}),m.addEventListener("blur",c,{signal:p}),m.addEventListener("focus",M(this,Et,Yw).bind(this,y),{signal:p}),m.setAttribute("data-l10n-id",Ft._l10nResizer[y])}}const n=g(this,ts)[0];let a=0;for(const l of e){if(l===n)break;a++}const r=(360-this.rotation+this.parentRotation)%360/90*(g(this,ts).length/4);if(r!==a){if(r<a)for(let c=0;c<a-r;c++)g(this,dn).append(g(this,dn).firstChild);else if(r>a)for(let c=0;c<r-a;c++)g(this,dn).firstChild.before(g(this,dn).lastChild);let l=0;for(const c of e){const m=g(this,ts)[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Ft._l10nResizer[m])}}M(this,Et,g_).call(this,0),E(this,ma,!0),g(this,dn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){g(this,ma)&&M(this,Et,h_).call(this,g(this,jf),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){M(this,Et,cf).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var a,r;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=g(this,_e))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,a,r;(t=g(this,dn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=this._editToolbar)==null||a.hide(),(r=g(this,_e))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return g(this,th)}set isEditing(t){E(this,th,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){E(this,Ur,!0);const n=t/e,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){g(this,Pi)||E(this,Pi,new Map);const{action:n}=t;let a=g(this,Pi).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),g(this,Pi).delete(n),g(this,Pi).size===0&&E(this,Pi,null)},Ft._telemetryTimeout),g(this,Pi).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),E(this,Wu,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,Wu,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Fr=new WeakMap,ts=new WeakMap,_e=new WeakMap,Wu=new WeakMap,wo=new WeakMap,Qf=new WeakMap,Ur=new WeakMap,dn=new WeakMap,Or=new WeakMap,pa=new WeakMap,Mo=new WeakMap,jf=new WeakMap,Vr=new WeakMap,ui=new WeakMap,th=new WeakMap,Br=new WeakMap,ma=new WeakMap,Rs=new WeakMap,Zu=new WeakMap,Qu=new WeakMap,Pi=new WeakMap,Hr=new WeakMap,eh=new WeakMap,Mg=new WeakMap,Et=new WeakSet,c_=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},nh=new WeakSet,d_=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Um=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},Ow=function(){if(g(this,dn))return;E(this,dn,document.createElement("div")),g(this,dn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");g(this,dn).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",M(this,Et,Vw).bind(this,n),{signal:e}),a.addEventListener("contextmenu",cs,{signal:e}),a.tabIndex=-1}this.div.prepend(g(this,dn))},Vw=function(t,e){var y;e.preventDefault();const{isMac:n}=Fn.platform;if(e.button!==0||e.ctrlKey&&n)return;(y=g(this,_e))==null||y.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,E(this,Or,[e.screenX,e.screenY]);const r=new AbortController,l=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",M(this,Et,h_).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Ti,{passive:!1,signal:l}),window.addEventListener("contextmenu",cs,{signal:l}),E(this,pa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const m=()=>{var _;r.abort(),this.parent.togglePointerEvents(!0),(_=g(this,_e))==null||_.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=c,this.div.style.cursor=p,M(this,Et,Om).call(this)};window.addEventListener("pointerup",m,{signal:l}),window.addEventListener("blur",m,{signal:l})},f_=function(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e;const[r,l]=this.parentDimensions;this.setDims(r*n,l*a),this.fixAndSetPosition(),this._onResized()},Om=function(){if(!g(this,pa))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=g(this,pa);E(this,pa,null);const r=this.x,l=this.y,c=this.width,p=this.height;r===t&&l===e&&c===n&&p===a||this.addCommands({cmd:M(this,Et,f_).bind(this,r,l,c,p),undo:M(this,Et,f_).bind(this,t,e,n,a),mustExec:!0})},h_=function(t,e){const[n,a]=this.parentDimensions,r=this.x,l=this.y,c=this.width,p=this.height,m=Ft.MIN_SIZE/n,y=Ft.MIN_SIZE/a,_=M(this,Et,Um).call(this,this.rotation),T=(V,K)=>[_[0]*V+_[2]*K,_[1]*V+_[3]*K],S=M(this,Et,Um).call(this,360-this.rotation),C=(V,K)=>[S[0]*V+S[2]*K,S[1]*V+S[3]*K];let x,D,N=!1,L=!1;switch(t){case"topLeft":N=!0,x=(V,K)=>[0,0],D=(V,K)=>[V,K];break;case"topMiddle":x=(V,K)=>[V/2,0],D=(V,K)=>[V/2,K];break;case"topRight":N=!0,x=(V,K)=>[V,0],D=(V,K)=>[0,K];break;case"middleRight":L=!0,x=(V,K)=>[V,K/2],D=(V,K)=>[0,K/2];break;case"bottomRight":N=!0,x=(V,K)=>[V,K],D=(V,K)=>[0,0];break;case"bottomMiddle":x=(V,K)=>[V/2,K],D=(V,K)=>[V/2,0];break;case"bottomLeft":N=!0,x=(V,K)=>[0,K],D=(V,K)=>[V,0];break;case"middleLeft":L=!0,x=(V,K)=>[0,K/2],D=(V,K)=>[V,K/2];break}const U=x(c,p),P=D(c,p);let I=T(...P);const q=Ft._round(r+I[0]),Y=Ft._round(l+I[1]);let tt=1,j=1,at,it;if(e.fromKeyboard)({deltaX:at,deltaY:it}=e);else{const{screenX:V,screenY:K}=e,[ht,Vt]=g(this,Or);[at,it]=this.screenToPageTranslation(V-ht,K-Vt),g(this,Or)[0]=V,g(this,Or)[1]=K}if([at,it]=C(at/n,it/a),N){const V=Math.hypot(c,p);tt=j=Math.max(Math.min(Math.hypot(P[0]-U[0]-at,P[1]-U[1]-it)/V,1/c,1/p),m/c,y/p)}else L?tt=Math.max(m,Math.min(1,Math.abs(P[0]-U[0]-at)))/c:j=Math.max(y,Math.min(1,Math.abs(P[1]-U[1]-it)))/p;const Tt=Ft._round(c*tt),Zt=Ft._round(p*j);I=T(...D(Tt,Zt));const It=q-I[0],Dt=Y-I[1];g(this,ui)||E(this,ui,[this.x,this.y,this.width,this.height]),this.width=Tt,this.height=Zt,this.x=It,this.y=Dt,this.setDims(n*Tt,a*Zt),this.fixAndSetPosition(),this._onResizing()},Bw=function(){var t;E(this,pa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=g(this,_e))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},Hw=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const l=M(this,Et,Um).call(this,this.rotation),c=(q,Y)=>[l[0]*q+l[2]*Y,l[1]*q+l[3]*Y],[p,m]=this.parentDimensions,y=this.x,_=this.y,T=this.width,S=this.height,C=Ft.MIN_SIZE/p,x=Ft.MIN_SIZE/m;r=Math.max(Math.min(r,1/T,1/S),C/T,x/S);const D=Ft._round(T*r),N=Ft._round(S*r);if(D===T&&N===S)return;g(this,ui)||E(this,ui,[y,_,T,S]);const L=c(T/2,S/2),U=Ft._round(y+L[0]),P=Ft._round(_+L[1]),I=c(D/2,N/2);this.x=U-I[0],this.y=P-I[1],this.width=D,this.height=N,this.setDims(p*D,m*N),this.fixAndSetPosition(),this._onResizing()},Gw=function(){var t;(t=g(this,_e))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),M(this,Et,Om).call(this)},p_=function(t){const{isMac:e}=Fn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},zw=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,r=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:r},c=m=>{a.abort(),E(this,wo,null),E(this,Vr,!1),this._uiManager.endDragSession()||M(this,Et,p_).call(this,m),n&&this._onStopDragging()};e&&(E(this,Zu,t.clientX),E(this,Qu,t.clientY),E(this,wo,t.pointerId),E(this,Qf,t.pointerType),window.addEventListener("pointermove",m=>{n||(n=!0,this._onStartDragging());const{clientX:y,clientY:_,pointerId:T}=m;if(T!==g(this,wo)){Ti(m);return}const[S,C]=this.screenToPageTranslation(y-g(this,Zu),_-g(this,Qu));E(this,Zu,y),E(this,Qu,_),this._uiManager.dragSelectedEditors(S,C)},l),window.addEventListener("touchmove",Ti,l),window.addEventListener("pointerdown",m=>{m.pointerType===g(this,Qf)&&(g(this,Hr)||m.isPrimary)&&c(m),Ti(m)},l));const p=m=>{if(!g(this,wo)||g(this,wo)===m.pointerId){c(m);return}Ti(m)};window.addEventListener("pointerup",p,{signal:r}),window.addEventListener("blur",p,{signal:r})},m_=function(){if(g(this,Mo)||!this.div)return;E(this,Mo,new AbortController);const t=this._uiManager.combinedSignal(g(this,Mo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},qw=function(t){Ft._resizerKeyboardManager.exec(this,t)},$w=function(t){var e;g(this,ma)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==g(this,dn)&&M(this,Et,cf).call(this)},Yw=function(t){E(this,jf,g(this,ma)?t:"")},g_=function(t){if(g(this,ts))for(const e of g(this,ts))e.tabIndex=t},cf=function(){E(this,ma,!1),M(this,Et,g_).call(this,-1),M(this,Et,Om).call(this)},w(Ft,nh),Ct(Ft,"_l10n",null),Ct(Ft,"_l10nResizer",null),Ct(Ft,"_borderLineWidth",-1),Ct(Ft,"_colorManager",new n_),Ct(Ft,"_zIndex",1),Ct(Ft,"_telemetryTimeout",1e3);let Me=Ft;class yB extends Me{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const gx=3285377520,Ii=4294901760,_s=65535;class Xw{constructor(t){this.h1=t?t&4294967295:gx,this.h2=t?t&4294967295:gx}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let x=0,D=t.length;x<D;x++){const N=t.charCodeAt(x);N<=255?e[n++]=N:(e[n++]=N>>>8,e[n++]=N&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,r=n-a*4,l=new Uint32Array(e.buffer,0,a);let c=0,p=0,m=this.h1,y=this.h2;const _=3432918353,T=461845907,S=_&_s,C=T&_s;for(let x=0;x<a;x++)x&1?(c=l[x],c=c*_&Ii|c*S&_s,c=c<<15|c>>>17,c=c*T&Ii|c*C&_s,m^=c,m=m<<13|m>>>19,m=m*5+3864292196):(p=l[x],p=p*_&Ii|p*S&_s,p=p<<15|p>>>17,p=p*T&Ii|p*C&_s,y^=p,y=y<<13|y>>>19,y=y*5+3864292196);switch(c=0,r){case 3:c^=e[a*4+2]<<16;case 2:c^=e[a*4+1]<<8;case 1:c^=e[a*4],c=c*_&Ii|c*S&_s,c=c<<15|c>>>17,c=c*T&Ii|c*C&_s,a&1?m^=c:y^=c}this.h1=m,this.h2=y}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ii|t*36045&_s,e=e*4283543511&Ii|((e<<16|t>>>16)*2950163797&Ii)>>>16,t^=e>>>1,t=t*444984403&Ii|t*60499&_s,e=e*3301882366&Ii|((e<<16|t>>>16)*3120437893&Ii)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const y_=Object.freeze({map:null,hash:"",transfer:void 0});var Gr,zr,nn,Rg,Kw;class SA{constructor(){w(this,Rg);w(this,Gr,!1);w(this,zr,null);w(this,nn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=g(this,nn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return g(this,nn).get(t)}remove(t){if(g(this,nn).delete(t),g(this,nn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of g(this,nn).values())if(e instanceof Me)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=g(this,nn).get(t);let a=!1;if(n!==void 0)for(const[r,l]of Object.entries(e))n[r]!==l&&(a=!0,n[r]=l);else a=!0,g(this,nn).set(t,e);a&&M(this,Rg,Kw).call(this),e instanceof Me&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return g(this,nn).has(t)}getAll(){return g(this,nn).size>0?gA(g(this,nn)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return g(this,nn).size}resetModified(){g(this,Gr)&&(E(this,Gr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Jw(this)}get serializable(){if(g(this,nn).size===0)return y_;const t=new Map,e=new Xw,n=[],a=Object.create(null);let r=!1;for(const[l,c]of g(this,nn)){const p=c instanceof Me?c.serialize(!1,a):c;p&&(t.set(l,p),e.update(`${l}:${JSON.stringify(p)}`),r||(r=!!p.bitmap))}if(r)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:y_}get editorStats(){let t=null;const e=new Map;for(const n of g(this,nn).values()){if(!(n instanceof Me))continue;const a=n.telemetryFinalData;if(!a)continue;const{type:r}=a;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const l=t[r]||(t[r]=new Map);for(const[c,p]of Object.entries(a)){if(c==="type")continue;let m=l.get(c);m||(m=new Map,l.set(c,m));const y=m.get(p)??0;m.set(p,y+1)}}for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){E(this,zr,null)}get modifiedIds(){if(g(this,zr))return g(this,zr);const t=[];for(const e of g(this,nn).values())!(e instanceof Me)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return E(this,zr,{ids:new Set(t),hash:t.join(",")})}}Gr=new WeakMap,zr=new WeakMap,nn=new WeakMap,Rg=new WeakSet,Kw=function(){g(this,Gr)||(E(this,Gr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ih;class Jw extends SA{constructor(e){super();w(this,ih);const{map:n,hash:a,transfer:r}=e.serializable,l=structuredClone(n,r?{transfer:r}:null);E(this,ih,{map:l,hash:a,transfer:r})}get print(){ge("Should not call PrintAnnotationStorage.print")}get serializable(){return g(this,ih)}get modifiedIds(){return qt(this,"modifiedIds",{ids:new Set,hash:""})}}ih=new WeakMap;var ju;class vB{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,ju,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),g(this,ju).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||g(this,ju).has(t.loadedName))){if(He(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:a,style:r}=t,l=new FontFace(n,a,r);this.addNativeFontFace(l);try{await l.load(),g(this,ju).add(n),e==null||e(t)}catch{Pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw Pt(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return qt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(wn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),qt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(He(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return qt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(P,I){return P.charCodeAt(I)<<24|P.charCodeAt(I+1)<<16|P.charCodeAt(I+2)<<8|P.charCodeAt(I+3)&255}function a(P,I,q,Y){const tt=P.substring(0,I),j=P.substring(I+q);return tt+Y+j}let r,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const p=c.getContext("2d");let m=0;function y(P,I){if(++m>30){Pt("Load test font never loaded."),I();return}if(p.font="30px "+P,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(y.bind(null,P,I))}const _=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=a(T,976,_.length,_);const C=16,x=1482184792;let D=n(T,C);for(r=0,l=_.length-3;r<l;r+=4)D=D-x+n(_,r)|0;r<_.length&&(D=D-x+n(_+"XXX",r)|0),T=a(T,C,4,iB(D));const N=`url(data:font/opentype;base64,${btoa(T)});`,L=`@font-face {font-family:"${_}";src:${N}}`;this.insertRule(L);const U=this._document.createElement("div");U.style.visibility="hidden",U.style.width=U.style.height="10px",U.style.position="absolute",U.style.top=U.style.left="0px";for(const P of[t.loadedName,_]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=P,U.append(I)}this._document.body.append(U),y(_,()=>{U.remove(),e.complete()})}}ju=new WeakMap;class _B{constructor(t,{disableFontFace:e=!1,fontExtraProperties:n=!1,inspectFont:a=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this.fontExtraProperties=n===!0,this._inspectFont=a}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${uB(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(l){Pt(`getPathGenerator - ignoring character: "${l}".`)}const r=new Path2D(a||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}const Cm={DATA:1,ERROR:2},Ve={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function yx(){}function Yn(i){if(i instanceof Wo||i instanceof W0||i instanceof Mf||i instanceof hx||i instanceof mg||i instanceof E0)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Wo(i.message);case"InvalidPDFException":return new W0(i.message);case"MissingPDFException":return new Mf(i.message);case"PasswordException":return new hx(i.message,i.code);case"UnexpectedResponseException":return new mg(i.message,i.status);case"UnknownErrorException":return new E0(i.message,i.details)}return new E0(i.message,i.toString())}var tc,zi,Ww,Zw,Qw,Vm;class df{constructor(t,e,n){w(this,zi);w(this,tc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",M(this,zi,Ww).bind(this),{signal:g(this,tc).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[a]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(l){r.reject(l)}return r.promise}sendWithStream(t,e,n,a){const r=this.streamId++,l=this.sourceName,c=this.targetName,p=this.comObj;return new ReadableStream({start:m=>{const y=Promise.withResolvers();return this.streamControllers[r]={controller:m,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:l,targetName:c,action:t,streamId:r,data:e,desiredSize:m.desiredSize},a),y.promise},pull:m=>{const y=Promise.withResolvers();return this.streamControllers[r].pullCall=y,p.postMessage({sourceName:l,targetName:c,stream:Ve.PULL,streamId:r,desiredSize:m.desiredSize}),y.promise},cancel:m=>{He(m instanceof Error,"cancel must have a valid reason");const y=Promise.withResolvers();return this.streamControllers[r].cancelCall=y,this.streamControllers[r].isClosed=!0,p.postMessage({sourceName:l,targetName:c,stream:Ve.CANCEL,streamId:r,reason:Yn(m)}),y.promise}},n)}destroy(){var t;(t=g(this,tc))==null||t.abort(),E(this,tc,null)}}tc=new WeakMap,zi=new WeakSet,Ww=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){M(this,zi,Qw).call(this,t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Cm.DATA)a.resolve(t.data);else if(t.callback===Cm.ERROR)a.reject(Yn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(l){r.postMessage({sourceName:n,targetName:a,callback:Cm.DATA,callbackId:t.callbackId,data:l})},function(l){r.postMessage({sourceName:n,targetName:a,callback:Cm.ERROR,callbackId:t.callbackId,reason:Yn(l)})});return}if(t.streamId){M(this,zi,Zw).call(this,t);return}e(t.data)},Zw=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,r=this.comObj,l=this,c=this.actionHandler[t.action],p={enqueue(m,y=1,_){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=y,T>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:a,stream:Ve.ENQUEUE,streamId:e,chunk:m},_)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:a,stream:Ve.CLOSE,streamId:e}),delete l.streamSinks[e])},error(m){He(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:a,stream:Ve.ERROR,streamId:e,reason:Yn(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[e]=p,Promise.try(c,t.data,p).then(function(){r.postMessage({sourceName:n,targetName:a,stream:Ve.START_COMPLETE,streamId:e,success:!0})},function(m){r.postMessage({sourceName:n,targetName:a,stream:Ve.START_COMPLETE,streamId:e,reason:Yn(m)})})},Qw=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,r=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Ve.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Yn(t.reason));break;case Ve.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Yn(t.reason));break;case Ve.PULL:if(!c){r.postMessage({sourceName:n,targetName:a,stream:Ve.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||yx).then(function(){r.postMessage({sourceName:n,targetName:a,stream:Ve.PULL_COMPLETE,streamId:e,success:!0})},function(m){r.postMessage({sourceName:n,targetName:a,stream:Ve.PULL_COMPLETE,streamId:e,reason:Yn(m)})});break;case Ve.ENQUEUE:if(He(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case Ve.CLOSE:if(He(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),M(this,zi,Vm).call(this,l,e);break;case Ve.ERROR:He(l,"error should have stream controller"),l.controller.error(Yn(t.reason)),M(this,zi,Vm).call(this,l,e);break;case Ve.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Yn(t.reason)),M(this,zi,Vm).call(this,l,e);break;case Ve.CANCEL:if(!c)break;const p=Yn(t.reason);Promise.try(c.onCancel||yx,p).then(function(){r.postMessage({sourceName:n,targetName:a,stream:Ve.CANCEL_COMPLETE,streamId:e,success:!0})},function(m){r.postMessage({sourceName:n,targetName:a,stream:Ve.CANCEL_COMPLETE,streamId:e,reason:Yn(m)})}),c.sinkCapability.reject(p),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Vm=async function(t,e){var n,a,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var sh;class jw{constructor({enableHWA:t=!1}){w(this,sh,!1);E(this,sh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!g(this,sh)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ge("Abstract method `_createCanvas` called.")}}sh=new WeakMap;class AB extends jw{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class tM{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class eM extends tM{async _fetch(t){const e=await Wg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Jg(e)}}class nM{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,r){return"none"}destroy(t=!1){}}var qr,ec,ga,ya,Cn,$r,Yr,lt,An,ff,bu,Bm,xu,iM,v_,wu,hf,pf,__,mf;class TB extends nM{constructor({docId:e,ownerDocument:n=globalThis.document}){super();w(this,lt);w(this,qr);w(this,ec);w(this,ga);w(this,ya);w(this,Cn);w(this,$r);w(this,Yr,0);E(this,ya,e),E(this,Cn,n)}addFilter(e){if(!e)return"none";let n=g(this,lt,An).get(e);if(n)return n;const[a,r,l]=M(this,lt,Bm).call(this,e),c=e.length===1?a:`${a}${r}${l}`;if(n=g(this,lt,An).get(c),n)return g(this,lt,An).set(e,n),n;const p=`g_${g(this,ya)}_transfer_map_${Dn(this,Yr)._++}`,m=M(this,lt,xu).call(this,p);g(this,lt,An).set(e,m),g(this,lt,An).set(c,m);const y=M(this,lt,wu).call(this,p);return M(this,lt,pf).call(this,a,r,l,y),m}addHCMFilter(e,n){var C;const a=`${e}-${n}`,r="base";let l=g(this,lt,ff).get(r);if((l==null?void 0:l.key)===a||(l?((C=l.filter)==null||C.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},g(this,lt,ff).set(r,l)),!e||!n))return l.url;const c=M(this,lt,mf).call(this,e);e=_t.makeHexColor(...c);const p=M(this,lt,mf).call(this,n);if(n=_t.makeHexColor(...p),g(this,lt,bu).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const m=new Array(256);for(let x=0;x<=255;x++){const D=x/255;m[x]=D<=.03928?D/12.92:((D+.055)/1.055)**2.4}const y=m.join(","),_=`g_${g(this,ya)}_hcm_filter`,T=l.filter=M(this,lt,wu).call(this,_);M(this,lt,pf).call(this,y,y,y,T),M(this,lt,v_).call(this,T);const S=(x,D)=>{const N=c[x]/255,L=p[x]/255,U=new Array(D+1);for(let P=0;P<=D;P++)U[P]=N+P/D*(L-N);return U.join(",")};return M(this,lt,pf).call(this,S(0,5),S(1,5),S(2,5),T),l.url=M(this,lt,xu).call(this,_),l.url}addAlphaFilter(e){let n=g(this,lt,An).get(e);if(n)return n;const[a]=M(this,lt,Bm).call(this,[e]),r=`alpha_${a}`;if(n=g(this,lt,An).get(r),n)return g(this,lt,An).set(e,n),n;const l=`g_${g(this,ya)}_alpha_map_${Dn(this,Yr)._++}`,c=M(this,lt,xu).call(this,l);g(this,lt,An).set(e,c),g(this,lt,An).set(r,c);const p=M(this,lt,wu).call(this,l);return M(this,lt,__).call(this,a,p),c}addLuminosityFilter(e){let n=g(this,lt,An).get(e||"luminosity");if(n)return n;let a,r;if(e?([a]=M(this,lt,Bm).call(this,[e]),r=`luminosity_${a}`):r="luminosity",n=g(this,lt,An).get(r),n)return g(this,lt,An).set(e,n),n;const l=`g_${g(this,ya)}_luminosity_map_${Dn(this,Yr)._++}`,c=M(this,lt,xu).call(this,l);g(this,lt,An).set(e,c),g(this,lt,An).set(r,c);const p=M(this,lt,wu).call(this,l);return M(this,lt,iM).call(this,p),e&&M(this,lt,__).call(this,a,p),c}addHighlightHCMFilter(e,n,a,r,l){var L;const c=`${n}-${a}-${r}-${l}`;let p=g(this,lt,ff).get(e);if((p==null?void 0:p.key)===c||(p?((L=p.filter)==null||L.remove(),p.key=c,p.url="none",p.filter=null):(p={key:c,url:"none",filter:null},g(this,lt,ff).set(e,p)),!n||!a))return p.url;const[m,y]=[n,a].map(M(this,lt,mf).bind(this));let _=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),T=Math.round(.2126*y[0]+.7152*y[1]+.0722*y[2]),[S,C]=[r,l].map(M(this,lt,mf).bind(this));T<_&&([_,T,S,C]=[T,_,C,S]),g(this,lt,bu).style.color="";const x=(U,P,I)=>{const q=new Array(256),Y=(T-_)/I,tt=U/255,j=(P-U)/(255*I);let at=0;for(let it=0;it<=I;it++){const Tt=Math.round(_+it*Y),Zt=tt+it*j;for(let It=at;It<=Tt;It++)q[It]=Zt;at=Tt+1}for(let it=at;it<256;it++)q[it]=q[at-1];return q.join(",")},D=`g_${g(this,ya)}_hcm_${e}_filter`,N=p.filter=M(this,lt,wu).call(this,D);return M(this,lt,v_).call(this,N),M(this,lt,pf).call(this,x(S[0],C[0],5),x(S[1],C[1],5),x(S[2],C[2],5),N),p.url=M(this,lt,xu).call(this,D),p.url}destroy(e=!1){var n,a,r,l;e&&((n=g(this,$r))!=null&&n.size)||((a=g(this,ga))==null||a.parentNode.parentNode.remove(),E(this,ga,null),(r=g(this,ec))==null||r.clear(),E(this,ec,null),(l=g(this,$r))==null||l.clear(),E(this,$r,null),E(this,Yr,0))}}qr=new WeakMap,ec=new WeakMap,ga=new WeakMap,ya=new WeakMap,Cn=new WeakMap,$r=new WeakMap,Yr=new WeakMap,lt=new WeakSet,An=function(){return g(this,ec)||E(this,ec,new Map)},ff=function(){return g(this,$r)||E(this,$r,new Map)},bu=function(){if(!g(this,ga)){const e=g(this,Cn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=g(this,Cn).createElementNS(sa,"svg");a.setAttribute("width",0),a.setAttribute("height",0),E(this,ga,g(this,Cn).createElementNS(sa,"defs")),e.append(a),a.append(g(this,ga)),g(this,Cn).body.append(e)}return g(this,ga)},Bm=function(e){if(e.length===1){const m=e[0],y=new Array(256);for(let T=0;T<256;T++)y[T]=m[T]/255;const _=y.join(",");return[_,_,_]}const[n,a,r]=e,l=new Array(256),c=new Array(256),p=new Array(256);for(let m=0;m<256;m++)l[m]=n[m]/255,c[m]=a[m]/255,p[m]=r[m]/255;return[l.join(","),c.join(","),p.join(",")]},xu=function(e){if(g(this,qr)===void 0){E(this,qr,"");const n=g(this,Cn).URL;n!==g(this,Cn).baseURI&&(Zg(n)?Pt('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,qr,n.split("#",1)[0]))}return`url(${g(this,qr)}#${e})`},iM=function(e){const n=g(this,Cn).createElementNS(sa,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},v_=function(e){const n=g(this,Cn).createElementNS(sa,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},wu=function(e){const n=g(this,Cn).createElementNS(sa,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),g(this,lt,bu).append(n),n},hf=function(e,n,a){const r=g(this,Cn).createElementNS(sa,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",a),e.append(r)},pf=function(e,n,a,r){const l=g(this,Cn).createElementNS(sa,"feComponentTransfer");r.append(l),M(this,lt,hf).call(this,l,"feFuncR",e),M(this,lt,hf).call(this,l,"feFuncG",n),M(this,lt,hf).call(this,l,"feFuncB",a)},__=function(e,n){const a=g(this,Cn).createElementNS(sa,"feComponentTransfer");n.append(a),M(this,lt,hf).call(this,a,"feFuncA",e)},mf=function(e){return g(this,lt,bu).style.color=e,TA(getComputedStyle(g(this,lt,bu)).getPropertyValue("color"))};class sM{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class aM extends sM{async _fetch(t){const e=await Wg(t,"arraybuffer");return new Uint8Array(e)}}wn&&Pt("Please use the `legacy` build in Node.js environments.");async function oM(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class SB extends nM{}class CB extends jw{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class EB extends tM{async _fetch(t){return oM(t)}}class bB extends sM{async _fetch(t){return oM(t)}}const xn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function A_(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),i.clip(a)}class CA{getPattern(){ge("Abstract method `getPattern` called.")}}class xB extends CA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let r;if(a===xn.STROKE||a===xn.FILL){const l=e.current.getClippedPathBoundingBox(a,Ce(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,p=Math.ceil(l[3]-l[1])||1,m=e.cachedCanvases.getCanvas("pattern",c,p),y=m.context;y.clearRect(0,0,y.canvas.width,y.canvas.height),y.beginPath(),y.rect(0,0,y.canvas.width,y.canvas.height),y.translate(-l[0],-l[1]),n=_t.transform(n,[1,0,0,1,l[0],l[1]]),y.transform(...e.baseTransform),this.matrix&&y.transform(...this.matrix),A_(y,this._bbox),y.fillStyle=this._createGradient(y),y.fill(),r=t.createPattern(m.canvas,"no-repeat");const _=new DOMMatrix(n);r.setTransform(_)}else A_(t,this._bbox),r=this._createGradient(t);return r}}function w0(i,t,e,n,a,r,l,c){const p=t.coords,m=t.colors,y=i.data,_=i.width*4;let T;p[e+1]>p[n+1]&&(T=e,e=n,n=T,T=r,r=l,l=T),p[n+1]>p[a+1]&&(T=n,n=a,a=T,T=l,l=c,c=T),p[e+1]>p[n+1]&&(T=e,e=n,n=T,T=r,r=l,l=T);const S=(p[e]+t.offsetX)*t.scaleX,C=(p[e+1]+t.offsetY)*t.scaleY,x=(p[n]+t.offsetX)*t.scaleX,D=(p[n+1]+t.offsetY)*t.scaleY,N=(p[a]+t.offsetX)*t.scaleX,L=(p[a+1]+t.offsetY)*t.scaleY;if(C>=L)return;const U=m[r],P=m[r+1],I=m[r+2],q=m[l],Y=m[l+1],tt=m[l+2],j=m[c],at=m[c+1],it=m[c+2],Tt=Math.round(C),Zt=Math.round(L);let It,Dt,V,K,ht,Vt,F,Z;for(let st=Tt;st<=Zt;st++){if(st<D){const Ht=st<C?0:(C-st)/(C-D);It=S-(S-x)*Ht,Dt=U-(U-q)*Ht,V=P-(P-Y)*Ht,K=I-(I-tt)*Ht}else{let Ht;st>L?Ht=1:D===L?Ht=0:Ht=(D-st)/(D-L),It=x-(x-N)*Ht,Dt=q-(q-j)*Ht,V=Y-(Y-at)*Ht,K=tt-(tt-it)*Ht}let et;st<C?et=0:st>L?et=1:et=(C-st)/(C-L),ht=S-(S-N)*et,Vt=U-(U-j)*et,F=P-(P-at)*et,Z=I-(I-it)*et;const yt=Math.round(Math.min(It,ht)),Bt=Math.round(Math.max(It,ht));let mt=_*st+yt*4;for(let Ht=yt;Ht<=Bt;Ht++)et=(It-Ht)/(It-ht),et<0?et=0:et>1&&(et=1),y[mt++]=Dt-(Dt-Vt)*et|0,y[mt++]=V-(V-F)*et|0,y[mt++]=K-(K-Z)*et|0,y[mt++]=255}}function wB(i,t,e){const n=t.coords,a=t.colors;let r,l;switch(t.type){case"lattice":const c=t.verticesPerRow,p=Math.floor(n.length/c)-1,m=c-1;for(r=0;r<p;r++){let y=r*c;for(let _=0;_<m;_++,y++)w0(i,e,n[y],n[y+1],n[y+c],a[y],a[y+1],a[y+c]),w0(i,e,n[y+c+1],n[y+1],n[y+c],a[y+c+1],a[y+1],a[y+c])}break;case"triangles":for(r=0,l=n.length;r<l;r+=3)w0(i,e,n[r],n[r+1],n[r+2],a[r],a[r+1],a[r+2]);break;default:throw new Error("illegal figure")}}class MB extends CA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-c,y=Math.ceil(this._bounds[3])-p,_=Math.min(Math.ceil(Math.abs(m*t[0]*1.1)),3e3),T=Math.min(Math.ceil(Math.abs(y*t[1]*1.1)),3e3),S=m/_,C=y/T,x={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-p,scaleX:1/S,scaleY:1/C},D=_+2*2,N=T+2*2,L=n.getCanvas("mesh",D,N),U=L.context,P=U.createImageData(_,T);if(e){const q=P.data;for(let Y=0,tt=q.length;Y<tt;Y+=4)q[Y]=e[0],q[Y+1]=e[1],q[Y+2]=e[2],q[Y+3]=255}for(const q of this._figures)wB(P,q,x);return U.putImageData(P,2,2),{canvas:L.canvas,offsetX:c-2*S,offsetY:p-2*C,scaleX:S,scaleY:C}}getPattern(t,e,n,a){A_(t,this._bbox);let r;if(a===xn.SHADING)r=_t.singularValueDecompose2dScale(Ce(t));else if(r=_t.singularValueDecompose2dScale(e.baseTransform),this.matrix){const c=_t.singularValueDecompose2dScale(this.matrix);r=[r[0]*c[0],r[1]*c[1]]}const l=this._createMeshCanvas(r,a===xn.SHADING?null:this._background,e.cachedCanvases);return a!==xn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class RB extends CA{getPattern(){return"hotpink"}}function DB(i){switch(i[0]){case"RadialAxial":return new xB(i);case"Mesh":return new MB(i);case"Dummy":return new RB}throw new Error(`Unknown IR type: ${i[0]}`)}const vx={COLORED:1,UNCOLORED:2},Dg=class Dg{constructor(t,e,n,a,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=a,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:a,tilingType:r,color:l,canvasGraphicsFactory:c}=this;let{xstep:p,ystep:m}=this;p=Math.abs(p),m=Math.abs(m),Kg("TilingType: "+r);const y=e[0],_=e[1],T=e[2],S=e[3],C=T-y,x=S-_,D=_t.singularValueDecompose2dScale(this.matrix),N=_t.singularValueDecompose2dScale(this.baseTransform),L=D[0]*N[0],U=D[1]*N[1];let P=C,I=x,q=!1,Y=!1;const tt=Math.ceil(p*L),j=Math.ceil(m*U),at=Math.ceil(C*L),it=Math.ceil(x*U);tt>=at?P=p:q=!0,j>=it?I=m:Y=!0;const Tt=this.getSizeAndScale(P,this.ctx.canvas.width,L),Zt=this.getSizeAndScale(I,this.ctx.canvas.height,U),It=t.cachedCanvases.getCanvas("pattern",Tt.size,Zt.size),Dt=It.context,V=c.createCanvasGraphics(Dt);if(V.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(V,a,l),Dt.translate(-Tt.scale*y,-Zt.scale*_),V.transform(Tt.scale,0,0,Zt.scale,0,0),Dt.save(),this.clipBbox(V,y,_,T,S),V.baseTransform=Ce(V.ctx),V.executeOperatorList(n),V.endDrawing(),Dt.restore(),q||Y){const K=It.canvas;q&&(P=p),Y&&(I=m);const ht=this.getSizeAndScale(P,this.ctx.canvas.width,L),Vt=this.getSizeAndScale(I,this.ctx.canvas.height,U),F=ht.size,Z=Vt.size,st=t.cachedCanvases.getCanvas("pattern-workaround",F,Z),et=st.context,yt=q?Math.floor(C/p):0,Bt=Y?Math.floor(x/m):0;for(let mt=0;mt<=yt;mt++)for(let Ht=0;Ht<=Bt;Ht++)et.drawImage(K,F*mt,Z*Ht,F,Z,0,0,F,Z);return{canvas:st.canvas,scaleX:ht.scale,scaleY:Vt.scale,offsetX:y,offsetY:_}}return{canvas:It.canvas,scaleX:Tt.scale,scaleY:Zt.scale,offsetX:y,offsetY:_}}getSizeAndScale(t,e,n){const a=Math.max(Dg.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=a?r=a:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,a,r){const l=a-e,c=r-n;t.ctx.rect(e,n,l,c),t.current.updateRectMinMax(Ce(t.ctx),[e,n,a,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,r=t.current;switch(e){case vx.COLORED:const l=this.ctx;a.fillStyle=l.fillStyle,a.strokeStyle=l.strokeStyle,r.fillColor=l.fillStyle,r.strokeColor=l.strokeStyle;break;case vx.UNCOLORED:const c=_t.makeHexColor(n[0],n[1],n[2]);a.fillStyle=c,a.strokeStyle=c,r.fillColor=c,r.strokeColor=c;break;default:throw new nB(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,a){let r=n;a!==xn.SHADING&&(r=_t.transform(r,e.baseTransform),this.matrix&&(r=_t.transform(r,this.matrix)));const l=this.createPatternCanvas(e);let c=new DOMMatrix(r);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const p=t.createPattern(l.canvas,"repeat");return p.setTransform(c),p}};Ct(Dg,"MAX_PATTERN_SIZE",3e3);let T_=Dg;function NB({src:i,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:r=4294967295,inverseDecode:l=!1}){const c=Fn.isLittleEndian?4278190080:255,[p,m]=l?[r,c]:[c,r],y=n>>3,_=n&7,T=i.length;e=new Uint32Array(e.buffer);let S=0;for(let C=0;C<a;C++){for(const D=t+y;t<D;t++){const N=t<T?i[t]:255;e[S++]=N&128?m:p,e[S++]=N&64?m:p,e[S++]=N&32?m:p,e[S++]=N&16?m:p,e[S++]=N&8?m:p,e[S++]=N&4?m:p,e[S++]=N&2?m:p,e[S++]=N&1?m:p}if(_===0)continue;const x=t<T?i[t++]:255;for(let D=0;D<_;D++)e[S++]=x&1<<7-D?m:p}return{srcPos:t,destPos:S}}const _x=16,Ax=100,IB=15,Tx=10,Sx=1e3,Zn=16;function LB(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,a){t.translate(n,a),this.__originalTranslate(n,a)},i.scale=function(n,a){t.scale(n,a),this.__originalScale(n,a)},i.transform=function(n,a,r,l,c,p){t.transform(n,a,r,l,c,p),this.__originalTransform(n,a,r,l,c,p)},i.setTransform=function(n,a,r,l,c,p){t.setTransform(n,a,r,l,c,p),this.__originalSetTransform(n,a,r,l,c,p)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,a,r,l,c){t.bezierCurveTo(e,n,a,r,l,c),this.__originalBezierCurveTo(e,n,a,r,l,c)},i.rect=function(e,n,a,r){t.rect(e,n,a,r),this.__originalRect(e,n,a,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class kB{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Em(i,t,e,n,a,r,l,c,p,m){const[y,_,T,S,C,x]=Ce(i);if(_===0&&T===0){const L=l*y+C,U=Math.round(L),P=c*S+x,I=Math.round(P),q=(l+p)*y+C,Y=Math.abs(Math.round(q)-U)||1,tt=(c+m)*S+x,j=Math.abs(Math.round(tt)-I)||1;return i.setTransform(Math.sign(y),0,0,Math.sign(S),U,I),i.drawImage(t,e,n,a,r,0,0,Y,j),i.setTransform(y,_,T,S,C,x),[Y,j]}if(y===0&&S===0){const L=c*T+C,U=Math.round(L),P=l*_+x,I=Math.round(P),q=(c+m)*T+C,Y=Math.abs(Math.round(q)-U)||1,tt=(l+p)*_+x,j=Math.abs(Math.round(tt)-I)||1;return i.setTransform(0,Math.sign(_),Math.sign(T),0,U,I),i.drawImage(t,e,n,a,r,0,0,j,Y),i.setTransform(y,_,T,S,C,x),[j,Y]}i.drawImage(t,e,n,a,r,l,c,p,m);const D=Math.hypot(y,_),N=Math.hypot(T,S);return[D*p,N*m]}function PB(i){const{width:t,height:e}=i;if(t>Sx||e>Sx)return null;const n=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let l=new Uint8Array(r*(e+1)),c,p,m;const y=t+7&-8;let _=new Uint8Array(y*e),T=0;for(const N of i.data){let L=128;for(;L>0;)_[T++]=N&L?0:255,L>>=1}let S=0;for(T=0,_[T]!==0&&(l[0]=1,++S),p=1;p<t;p++)_[T]!==_[T+1]&&(l[p]=_[T]?2:1,++S),T++;for(_[T]!==0&&(l[p]=2,++S),c=1;c<e;c++){T=c*y,m=c*r,_[T-y]!==_[T]&&(l[m]=_[T]?1:8,++S);let N=(_[T]?4:0)+(_[T-y]?8:0);for(p=1;p<t;p++)N=(N>>2)+(_[T+1]?4:0)+(_[T-y+1]?8:0),a[N]&&(l[m+p]=a[N],++S),T++;if(_[T-y]!==_[T]&&(l[m+p]=_[T]?2:4,++S),S>n)return null}for(T=y*(e-1),m=c*r,_[T]!==0&&(l[m]=8,++S),p=1;p<t;p++)_[T]!==_[T+1]&&(l[m+p]=_[T]?4:8,++S),T++;if(_[T]!==0&&(l[m+p]=4,++S),S>n)return null;const C=new Int32Array([0,r,-1,0,-r,0,0,0,1]),x=new Path2D;for(c=0;S&&c<=e;c++){let N=c*r;const L=N+t;for(;N<L&&!l[N];)N++;if(N===L)continue;x.moveTo(N%r,c);const U=N;let P=l[N];do{const I=C[P];do N+=I;while(!l[N]);const q=l[N];q!==5&&q!==10?(P=q,l[N]=0):(P=q&51*P>>4,l[N]&=P>>2|P<<2),x.lineTo(N%r,N/r|0),l[N]||--S}while(U!==N);--c}return _=null,l=null,function(N){N.save(),N.scale(1/t,-1/e),N.translate(0,-e),N.fill(x),N.beginPath(),N.restore()}}class Cx{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=gw,this.textMatrixScale=1,this.fontMatrix=J0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_n.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=_t.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=_t.applyTransform(e,t),a=_t.applyTransform(e.slice(2),t),r=_t.applyTransform([e[0],e[3]],t),l=_t.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],a[0],r[0],l[0]),this.minY=Math.min(this.minY,n[1],a[1],r[1],l[1]),this.maxX=Math.max(this.maxX,n[0],a[0],r[0],l[0]),this.maxY=Math.max(this.maxY,n[1],a[1],r[1],l[1])}updateScalingPathMinMax(t,e){_t.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,a,r,l,c,p,m,y){const _=_t.bezierBoundingBox(e,n,a,r,l,c,p,m,y);y||this.updateRectMinMax(t,_)}getPathBoundingBox(t=xn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===xn.STROKE){e||ge("Stroke bounding box must include transform.");const a=_t.singularValueDecompose2dScale(e),r=a[0]*this.lineWidth/2,l=a[1]*this.lineWidth/2;n[0]-=r,n[1]-=l,n[2]+=r,n[3]+=l}return n}updateClipFromPath(){const t=_t.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=xn.FILL,e=null){return _t.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Ex(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%Zn,r=(e-a)/Zn,l=a===0?r:r+1,c=i.createImageData(n,Zn);let p=0,m;const y=t.data,_=c.data;let T,S,C,x;if(t.kind===Dm.GRAYSCALE_1BPP){const D=y.byteLength,N=new Uint32Array(_.buffer,0,_.byteLength>>2),L=N.length,U=n+7>>3,P=4294967295,I=Fn.isLittleEndian?4278190080:255;for(T=0;T<l;T++){for(C=T<r?Zn:a,m=0,S=0;S<C;S++){const q=D-p;let Y=0;const tt=q>U?n:q*8-7,j=tt&-8;let at=0,it=0;for(;Y<j;Y+=8)it=y[p++],N[m++]=it&128?P:I,N[m++]=it&64?P:I,N[m++]=it&32?P:I,N[m++]=it&16?P:I,N[m++]=it&8?P:I,N[m++]=it&4?P:I,N[m++]=it&2?P:I,N[m++]=it&1?P:I;for(;Y<tt;Y++)at===0&&(it=y[p++],at=128),N[m++]=it&at?P:I,at>>=1}for(;m<L;)N[m++]=0;i.putImageData(c,0,T*Zn)}}else if(t.kind===Dm.RGBA_32BPP){for(S=0,x=n*Zn*4,T=0;T<r;T++)_.set(y.subarray(p,p+x)),p+=x,i.putImageData(c,0,S),S+=Zn;T<l&&(x=n*a*4,_.set(y.subarray(p,p+x)),i.putImageData(c,0,S))}else if(t.kind===Dm.RGB_24BPP)for(C=Zn,x=n*C,T=0;T<l;T++){for(T>=r&&(C=a,x=n*C),m=0,S=x;S--;)_[m++]=y[p++],_[m++]=y[p++],_[m++]=y[p++],_[m++]=255;i.putImageData(c,0,T*Zn)}else throw new Error(`bad image kind: ${t.kind}`)}function bx(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%Zn,r=(e-a)/Zn,l=a===0?r:r+1,c=i.createImageData(n,Zn);let p=0;const m=t.data,y=c.data;for(let _=0;_<l;_++){const T=_<r?Zn:a;({srcPos:p}=NB({src:m,srcPos:p,dest:y,width:n,height:T,nonBlackColor:0})),i.putImageData(c,0,_*Zn)}}function ef(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function bm(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!wn){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function xx(i,t){if(t)return!0;const e=_t.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Zo.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const FB=["butt","round","square"],UB=["miter","round","bevel"],OB={},wx={};var ds,S_,C_,E_;const MA=class MA{constructor(t,e,n,a,r,{optionalContentConfig:l,markedContentStack:c=null},p,m){w(this,ds);this.ctx=t,this.current=new Cx(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new kB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=p,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const r=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,r,l),this.ctx.fillStyle=c,n){const p=this.cachedCanvases.getCanvas("transparent",r,l);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform(...Ce(this.compositeCtx))}this.ctx.save(),bm(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ce(this.ctx)}executeOperatorList(t,e,n,a){const r=t.argsArray,l=t.fnArray;let c=e||0;const p=r.length;if(p===c)return c;const m=p-c>Tx&&typeof n=="function",y=m?Date.now()+IB:0;let _=0;const T=this.commonObjs,S=this.objs;let C;for(;;){if(a!==void 0&&c===a.nextBreakPoint)return a.breakIt(c,n),c;if(C=l[c],C!==Wi.dependency)this[C].apply(this,r[c]);else for(const x of r[c]){const D=x.startsWith("g_")?T:S;if(!D.has(x))return D.get(x,n),c}if(c++,c===p)return c;if(m&&++_>Tx){if(Date.now()>y)return n(),c;_=0}}}endDrawing(){M(this,ds,S_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),M(this,ds,C_).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,p=a,m="prescale1",y,_;for(;r>2&&c>1||l>2&&p>1;){let T=c,S=p;r>2&&c>1&&(T=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),r/=c/T),l>2&&p>1&&(S=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p)/2,l/=p/S),y=this.cachedCanvases.getCanvas(m,T,S),_=y.context,_.clearRect(0,0,T,S),_.drawImage(t,0,0,c,p,0,0,T,S),t=y.canvas,c=T,p=S,m=m==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:p}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,r=this.current.fillColor,l=this.current.patternFill,c=Ce(e);let p,m,y,_;if((t.bitmap||t.data)&&t.count>1){const tt=t.bitmap||t.data.buffer;m=JSON.stringify(l?c:[c.slice(0,4),r]),p=this._cachedBitmapsMap.get(tt),p||(p=new Map,this._cachedBitmapsMap.set(tt,p));const j=p.get(m);if(j&&!l){const at=Math.round(Math.min(c[0],c[2])+c[4]),it=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:j,offsetX:at,offsetY:it}}y=j}y||(_=this.cachedCanvases.getCanvas("maskCanvas",n,a),bx(_.context,t));let T=_t.transform(c,[1/n,0,0,-1/a,0,0]);T=_t.transform(T,[1,0,0,1,0,-a]);const[S,C,x,D]=_t.getAxialAlignedBoundingBox([0,0,n,a],T),N=Math.round(x-S)||1,L=Math.round(D-C)||1,U=this.cachedCanvases.getCanvas("fillCanvas",N,L),P=U.context,I=S,q=C;P.translate(-I,-q),P.transform(...T),y||(y=this._scaleImage(_.canvas,vs(P)),y=y.img,p&&l&&p.set(m,y)),P.imageSmoothingEnabled=xx(Ce(P),t.interpolate),Em(P,y,0,0,y.width,y.height,0,0,n,a),P.globalCompositeOperation="source-in";const Y=_t.transform(vs(P),[1,0,0,1,-I,-q]);return P.fillStyle=l?r.getPattern(e,this,Y,xn.FILL):r,P.fillRect(0,0,n,a),p&&!l&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,U.canvas)),{canvas:U.canvas,offsetX:Math.round(I),offsetY:Math.round(q)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=FB[t]}setLineJoin(t){this.ctx.lineJoin=UB[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=a.context;const r=this.ctx;r.setTransform(...Ce(this.suspendedCtx)),ef(this.suspendedCtx,r),LB(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ef(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const r=a[0],l=a[1],c=a[2]-r,p=a[3]-l;c===0||p===0||(this.genericComposeSMask(e.context,n,c,p,e.subtype,e.backdrop,e.transferMap,r,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,r,l,c,p,m,y,_){let T=t.canvas,S=p-y,C=m-_;if(l){const D=_t.makeHexColor(...l);if(S<0||C<0||S+n>T.width||C+a>T.height){const N=this.cachedCanvases.getCanvas("maskExtension",n,a),L=N.context;L.drawImage(T,-S,-C),L.globalCompositeOperation="destination-atop",L.fillStyle=D,L.fillRect(0,0,n,a),L.globalCompositeOperation="source-over",T=N.canvas,S=C=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const N=new Path2D;N.rect(S,C,n,a),t.clip(N),t.globalCompositeOperation="destination-atop",t.fillStyle=D,t.fillRect(S,C,n,a),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const x=new Path2D;x.rect(p,m,n,a),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(T,S,C,n,a,p,m,n,a),e.restore()}save(){this.inSMaskMode?(ef(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ef(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,a,r,l){this.ctx.transform(t,e,n,a,r,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const a=this.ctx,r=this.current;let l=r.x,c=r.y,p,m;const y=Ce(a),_=y[0]===0&&y[3]===0||y[1]===0&&y[2]===0,T=_?n.slice(0):null;for(let S=0,C=0,x=t.length;S<x;S++)switch(t[S]|0){case Wi.rectangle:l=e[C++],c=e[C++];const D=e[C++],N=e[C++],L=l+D,U=c+N;a.moveTo(l,c),D===0||N===0?a.lineTo(L,U):(a.lineTo(L,c),a.lineTo(L,U),a.lineTo(l,U)),_||r.updateRectMinMax(y,[l,c,L,U]),a.closePath();break;case Wi.moveTo:l=e[C++],c=e[C++],a.moveTo(l,c),_||r.updatePathMinMax(y,l,c);break;case Wi.lineTo:l=e[C++],c=e[C++],a.lineTo(l,c),_||r.updatePathMinMax(y,l,c);break;case Wi.curveTo:p=l,m=c,l=e[C+4],c=e[C+5],a.bezierCurveTo(e[C],e[C+1],e[C+2],e[C+3],l,c),r.updateCurvePathMinMax(y,p,m,e[C],e[C+1],e[C+2],e[C+3],l,c,T),C+=6;break;case Wi.curveTo2:p=l,m=c,a.bezierCurveTo(l,c,e[C],e[C+1],e[C+2],e[C+3]),r.updateCurvePathMinMax(y,p,m,l,c,e[C],e[C+1],e[C+2],e[C+3],T),l=e[C+2],c=e[C+3],C+=4;break;case Wi.curveTo3:p=l,m=c,l=e[C+2],c=e[C+3],a.bezierCurveTo(e[C],e[C+1],l,c,l,c),r.updateCurvePathMinMax(y,p,m,e[C],e[C+1],l,c,l,c,T),C+=4;break;case Wi.closePath:a.closePath();break}_&&r.updateScalingPathMinMax(y,T),r.setCurrentPoint(l,c)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,vs(e),xn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;let r=!1;a&&(e.save(),e.fillStyle=n.getPattern(e,this,vs(e),xn.FILL),r=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=OB}eoClip(){this.pendingClip=wx}beginText(){this.current.textMatrix=gw,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const n=new Path2D,a=e.getTransform().invertSelf();for(const{transform:r,x:l,y:c,fontSize:p,path:m}of t)n.addPath(m,new DOMMatrix(r).preMultiplySelf(a).translate(l,c).scale(p,-p));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var y;const n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=n.fontMatrix||J0,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Pt("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",l=((y=n.systemFontInfo)==null?void 0:y.css)||`"${r}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const p=n.italic?"italic":"normal";let m=e;e<_x?m=_x:e>Ax&&(m=Ax),this.current.fontSizeScale=e/m,this.ctx.font=`${p} ${c} ${m}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,a,r,l){this.current.textMatrix=[t,e,n,a,r,l],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,a,r){const l=this.ctx,c=this.current,p=c.font,m=c.textRenderingMode,y=c.fontSize/c.fontSizeScale,_=m&_n.FILL_STROKE_MASK,T=!!(m&_n.ADD_TO_PATH_FLAG),S=c.patternFill&&!p.missingFile,C=c.patternStroke&&!p.missingFile;let x;if((p.disableFontFace||T||S||C)&&(x=p.getPathGenerator(this.commonObjs,t)),p.disableFontFace||S||C){if(l.save(),l.translate(e,n),l.scale(y,-y),_===_n.FILL||_===_n.FILL_STROKE)if(a){const D=l.getTransform();l.setTransform(...a),l.fill(M(this,ds,E_).call(this,x,D,a))}else l.fill(x);if(_===_n.STROKE||_===_n.FILL_STROKE)if(r){const D=l.getTransform();l.setTransform(...r),l.stroke(M(this,ds,E_).call(this,x,D,r))}else l.lineWidth/=y,l.stroke(x);l.restore()}else(_===_n.FILL||_===_n.FILL_STROKE)&&l.fillText(t,e,n),(_===_n.STROKE||_===_n.FILL_STROKE)&&l.strokeText(t,e,n);T&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ce(l),x:e,y:n,fontSize:y,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return qt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const r=this.ctx,l=e.fontSizeScale,c=e.charSpacing,p=e.wordSpacing,m=e.fontDirection,y=e.textHScale*m,_=t.length,T=n.vertical,S=T?1:-1,C=n.defaultVMetrics,x=a*e.fontMatrix[0],D=e.textRenderingMode===_n.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),m>0?r.scale(y,-1):r.scale(y,1);let N,L;if(e.patternFill){r.save();const Y=e.fillColor.getPattern(r,this,vs(r),xn.FILL);N=Ce(r),r.restore(),r.fillStyle=Y}if(e.patternStroke){r.save();const Y=e.strokeColor.getPattern(r,this,vs(r),xn.STROKE);L=Ce(r),r.restore(),r.strokeStyle=Y}let U=e.lineWidth;const P=e.textMatrixScale;if(P===0||U===0){const Y=e.textRenderingMode&_n.FILL_STROKE_MASK;(Y===_n.STROKE||Y===_n.FILL_STROKE)&&(U=this.getSinglePixelWidth())}else U/=P;if(l!==1&&(r.scale(l,l),U/=l),r.lineWidth=U,n.isInvalidPDFjsFont){const Y=[];let tt=0;for(const j of t)Y.push(j.unicode),tt+=j.width;r.fillText(Y.join(""),0,0),e.x+=tt*x*y,r.restore(),this.compose();return}let I=0,q;for(q=0;q<_;++q){const Y=t[q];if(typeof Y=="number"){I+=S*Y*a/1e3;continue}let tt=!1;const j=(Y.isSpace?p:0)+c,at=Y.fontChar,it=Y.accent;let Tt,Zt,It=Y.width;if(T){const V=Y.vmetric||C,K=-(Y.vmetric?V[1]:It*.5)*x,ht=V[2]*x;It=V?-V[0]:It,Tt=K/l,Zt=(I+ht)/l}else Tt=I/l,Zt=0;if(n.remeasure&&It>0){const V=r.measureText(at).width*1e3/a*l;if(It<V&&this.isFontSubpixelAAEnabled){const K=It/V;tt=!0,r.save(),r.scale(K,1),Tt/=K}else It!==V&&(Tt+=(It-V)/2e3*a/l)}if(this.contentVisible&&(Y.isInFont||n.missingFile)){if(D&&!it)r.fillText(at,Tt,Zt);else if(this.paintChar(at,Tt,Zt,N,L),it){const V=Tt+a*it.offset.x/l,K=Zt-a*it.offset.y/l;this.paintChar(it.fontChar,V,K,N,L)}}const Dt=T?It*x-j*m:It*x+j*m;I+=Dt,tt&&r.restore()}T?e.y-=I:e.x+=I*y,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,a=n.font,r=n.fontSize,l=n.fontDirection,c=a.vertical?1:-1,p=n.charSpacing,m=n.wordSpacing,y=n.textHScale*l,_=n.fontMatrix||J0,T=t.length,S=n.textRenderingMode===_n.INVISIBLE;let C,x,D,N;if(!(S||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(y,l),C=0;C<T;++C){if(x=t[C],typeof x=="number"){N=c*x*r/1e3,this.ctx.translate(N,0),n.x+=N*y;continue}const L=(x.isSpace?m:0)+p,U=a.charProcOperatorList[x.operatorListId];if(!U){Pt(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),e.scale(r,r),e.transform(..._),this.executeOperatorList(U),this.restore()),D=_t.applyTransform([x.width,0],_)[0]*r+L,e.translate(D,0),n.x+=D*y}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,a,r,l){this.ctx.rect(n,a,r-n,l-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],a=this.baseTransform||Ce(this.ctx),r={createCanvasGraphics:l=>new MA(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new T_(t,n,this.ctx,r,a)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=_t.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=_t.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=DB(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,vs(e),xn.SHADING);const a=vs(e);if(a){const{width:r,height:l}=e.canvas,[c,p,m,y]=_t.getAxialAlignedBoundingBox([0,0,r,l],a);this.ctx.fillRect(c,p,m-c,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ge("Should not call beginInlineImage")}beginImageData(){ge("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ce(this.ctx),e)){const n=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],n,a),this.current.updateRectMinMax(Ce(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Kg("TODO: Support non-isolated groups."),t.knockout&&Pt("Knockout groups not supported.");const n=Ce(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=_t.getAxialAlignedBoundingBox(t.bbox,Ce(e));const r=[0,0,e.canvas.width,e.canvas.height];a=_t.intersect(a,r)||[0,0,0,0];const l=Math.floor(a[0]),c=Math.floor(a[1]),p=Math.max(Math.ceil(a[2])-l,1),m=Math.max(Math.ceil(a[3])-c,1);this.current.startNewPathAndClipBox([0,0,p,m]);let y="groupAt"+this.groupLevel;t.smask&&(y+="_smask_"+this.smaskCounter++%2);const _=this.cachedCanvases.getCanvas(y,p,m),T=_.context;T.translate(-l,-c),T.transform(...n),t.smask?this.smaskStack.push({canvas:_.canvas,context:T,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,c),e.save()),ef(e,T),this.ctx=T,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=Ce(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const r=_t.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,a,r){if(M(this,ds,S_).call(this),bm(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],c=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=c;const[p,m]=_t.singularValueDecompose2dScale(Ce(this.ctx)),{viewportScale:y}=this,_=Math.ceil(l*this.outputScaleX*y),T=Math.ceil(c*this.outputScaleY*y);this.annotationCanvas=this.canvasFactory.create(_,T);const{canvas:S,context:C}=this.annotationCanvas;this.annotationCanvasMap.set(t,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=C,this.ctx.save(),this.ctx.setTransform(p,0,0,-m,0,c*m),bm(this.ctx)}else bm(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],l,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new Cx(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),M(this,ds,C_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=PB(t)),a.compiled)){a.compiled(n);return}const r=this._createMaskCanvas(t),l=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,a=0,r,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const p=Ce(c);c.transform(e,n,a,r,0,0);const m=this._createMaskCanvas(t);c.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]);for(let y=0,_=l.length;y<_;y+=2){const T=_t.transform(p,[e,n,a,r,l[y],l[y+1]]),[S,C]=_t.applyTransform([0,0],T);c.drawImage(m.canvas,S,C)}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const r of t){const{data:l,width:c,height:p,transform:m}=r,y=this.cachedCanvases.getCanvas("maskCanvas",c,p),_=y.context;_.save();const T=this.getObject(l,r);bx(_,T),_.globalCompositeOperation="source-in",_.fillStyle=a?n.getPattern(_,this,vs(e),xn.FILL):n,_.fillRect(0,0,c,p),_.restore(),e.save(),e.transform(...m),e.scale(1,-1),Em(e,y.canvas,0,0,c,p,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,a){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){Pt("Dependent image isn't ready yet");return}const l=r.width,c=r.height,p=[];for(let m=0,y=a.length;m<y;m+=2)p.push({transform:[e,0,0,n,a[m],a[m+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(r,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,a),l=r.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,a=this.ctx;if(this.save(),!wn){const{filter:c}=a;c!=="none"&&c!==""&&(a.filter="none")}a.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Ex(p,t),r=this.applyTransferMapsToCanvas(p)}const l=this._scaleImage(r,vs(a));a.imageSmoothingEnabled=xx(Ce(a),t.interpolate),Em(a,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const r=t.width,l=t.height,p=this.cachedCanvases.getCanvas("inlineImage",r,l).context;Ex(p,t),a=this.applyTransferMapsToCanvas(p)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),Em(n,a,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===wx?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ce(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:r}=this.ctx.getTransform();let l,c;if(n===0&&a===0){const p=Math.abs(e),m=Math.abs(r);if(p===m)if(t===0)l=c=1/p;else{const y=p*t;l=c=y<1?1/y:1}else if(t===0)l=1/p,c=1/m;else{const y=p*t,_=m*t;l=y<1?1/y:1,c=_<1?1/_:1}}else{const p=Math.abs(e*r-n*a),m=Math.hypot(e,n),y=Math.hypot(a,r);if(t===0)l=y/p,c=m/p;else{const _=t*p;l=y>_?y/_:1,c=m>_?m/_:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[a,r]=this.getScaleForStroking();if(e.lineWidth=n||1,a===1&&r===1){e.stroke();return}const l=e.getLineDash();if(t&&e.save(),e.scale(a,r),l.length>0){const c=Math.max(a,r);e.setLineDash(l.map(p=>p/c)),e.lineDashOffset/=c}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ds=new WeakSet,S_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},C_=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},E_=function(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a};let Uu=MA;for(const i in Wi)Uu.prototype[i]!==void 0&&(Uu.prototype[Wi[i]]=Uu.prototype[i]);var ah,oh;class ka{static get workerPort(){return g(this,ah)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");E(this,ah,t)}static get workerSrc(){return g(this,oh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");E(this,oh,t)}}ah=new WeakMap,oh=new WeakMap,w(ka,ah,null),w(ka,oh,"");var Xr,rh;class VB{constructor({parsedData:t,rawData:e}){w(this,Xr);w(this,rh);E(this,Xr,t),E(this,rh,e)}getRaw(){return g(this,rh)}get(t){return g(this,Xr).get(t)??null}getAll(){return gA(g(this,Xr))}has(t){return g(this,Xr).has(t)}}Xr=new WeakMap,rh=new WeakMap;const Mu=Symbol("INTERNAL");var lh,uh,ch,nc;class BB{constructor(t,{name:e,intent:n,usage:a,rbGroups:r}){w(this,lh,!1);w(this,uh,!1);w(this,ch,!1);w(this,nc,!0);E(this,lh,!!(t&_i.DISPLAY)),E(this,uh,!!(t&_i.PRINT)),this.name=e,this.intent=n,this.usage=a,this.rbGroups=r}get visible(){if(g(this,ch))return g(this,nc);if(!g(this,nc))return!1;const{print:t,view:e}=this.usage;return g(this,lh)?(e==null?void 0:e.viewState)!=="OFF":g(this,uh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Mu&&ge("Internal method `_setVisible` called."),E(this,ch,n),E(this,nc,e)}}lh=new WeakMap,uh=new WeakMap,ch=new WeakMap,nc=new WeakMap;var Ro,re,ic,sc,dh,b_;class HB{constructor(t,e=_i.DISPLAY){w(this,dh);w(this,Ro,null);w(this,re,new Map);w(this,ic,null);w(this,sc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,E(this,sc,t.order);for(const n of t.groups)g(this,re).set(n.id,new BB(e,n));if(t.baseState==="OFF")for(const n of g(this,re).values())n._setVisible(Mu,!1);for(const n of t.on)g(this,re).get(n)._setVisible(Mu,!0);for(const n of t.off)g(this,re).get(n)._setVisible(Mu,!1);E(this,ic,this.getHash())}}isVisible(t){if(g(this,re).size===0)return!0;if(!t)return Kg("Optional content group not defined."),!0;if(t.type==="OCG")return g(this,re).has(t.id)?g(this,re).get(t.id).visible:(Pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return M(this,dh,b_).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!g(this,re).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(g(this,re).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!g(this,re).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(!g(this,re).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!g(this,re).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(!g(this,re).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!g(this,re).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(g(this,re).get(e).visible)return!1}return!0}return Pt(`Unknown optional content policy ${t.policy}.`),!0}return Pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const a=g(this,re).get(t);if(!a){Pt(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const l of a.rbGroups)for(const c of l)c!==t&&((r=g(this,re).get(c))==null||r._setVisible(Mu,!1,!0));a._setVisible(Mu,!!e,!0),E(this,Ro,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const r=g(this,re).get(a);if(r)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!r.visible,e);break}}E(this,Ro,null)}get hasInitialVisibility(){return g(this,ic)===null||this.getHash()===g(this,ic)}getOrder(){return g(this,re).size?g(this,sc)?g(this,sc).slice():[...g(this,re).keys()]:null}getGroups(){return g(this,re).size>0?gA(g(this,re)):null}getGroup(t){return g(this,re).get(t)||null}getHash(){if(g(this,Ro)!==null)return g(this,Ro);const t=new Xw;for(const[e,n]of g(this,re))t.update(`${e}:${n.visible}`);return E(this,Ro,t.hexdigest())}}Ro=new WeakMap,re=new WeakMap,ic=new WeakMap,sc=new WeakMap,dh=new WeakSet,b_=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const r=t[a];let l;if(Array.isArray(r))l=M(this,dh,b_).call(this,r);else if(g(this,re).has(r))l=g(this,re).get(r).visible;else return Pt(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class GB{constructor(t,{disableRange:e=!1,disableStream:n=!1}){He(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:r,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,(r==null?void 0:r.length)>0){const p=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((p,m)=>{this._onReceiveData({begin:p,chunk:m})}),t.addProgressListener((p,m)=>{this._onProgress({loaded:p,total:m})}),t.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});He(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||r.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){He(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new zB(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new qB(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class zB{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=_A(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class qB{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function $B(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let y=c(e);return y=unescape(y),y=p(y),y=m(y),r(y)}if(e=l(i),e){const y=m(e);return r(y)}if(e=n("filename","i").exec(i),e){e=e[1];let y=c(e);return y=m(y),r(y)}function n(y,_){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function a(y,_){if(y){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const T=new TextDecoder(y,{fatal:!0}),S=Jg(_);_=T.decode(S),t=!1}catch{}}return _}function r(y){return t&&/[\x80-\xff]/.test(y)&&(y=a("utf-8",y),t&&(y=a("iso-8859-1",y))),y}function l(y){const _=[];let T;const S=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=S.exec(y))!==null;){let[,x,D,N]=T;if(x=parseInt(x,10),x in _){if(x===0)break;continue}_[x]=[D,N]}const C=[];for(let x=0;x<_.length&&x in _;++x){let[D,N]=_[x];N=c(N),D&&(N=unescape(N),x===0&&(N=p(N))),C.push(N)}return C.join("")}function c(y){if(y.startsWith('"')){const _=y.slice(1).split('\\"');for(let T=0;T<_.length;++T){const S=_[T].indexOf('"');S!==-1&&(_[T]=_[T].slice(0,S),_.length=T+1),_[T]=_[T].replaceAll(/\\(.)/g,"$1")}y=_.join('"')}return y}function p(y){const _=y.indexOf("'");if(_===-1)return y;const T=y.slice(0,_),C=y.slice(_+1).replace(/^[^']*'/,"");return a(T,C)}function m(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,T,S,C){if(S==="q"||S==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,D){return String.fromCharCode(parseInt(D,16))}),a(T,C);try{C=atob(C)}catch{}return a(T,C)})}return""}function rM(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function Qg(i){try{return new URL(i).origin}catch{}return null}function lM({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(a.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function uM(i){const t=i.get("Content-Disposition");if(t){let e=$B(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(_A(e))return e}return null}function jg(i,t){return i===404||i===0&&t.startsWith("file:")?new Mf('Missing PDF "'+t+'".'):new mg(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function cM(i){return i===200||i===206}function dM(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function fM(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Pt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Mx{constructor(t){Ct(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=rM(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return He(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new YB(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new XB(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class YB{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,dM(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Qg(r.url),!cM(r.status))throw jg(r.status,a);this._reader=r.body.getReader(),this._headersCapability.resolve();const l=r.headers,{allowRangeRequests:c,suggestedLength:p}=lM({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=p||this._contentLength,this._filename=uM(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Wo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fM(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class XB{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const l=a.url;fetch(l,dM(r,this._withCredentials,this._abortController)).then(c=>{const p=Qg(c.url);if(p!==t._responseOrigin)throw new Error(`Expected range response-origin "${p}" to match "${t._responseOrigin}".`);if(!cM(c.status))throw jg(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:fM(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const M0=200,R0=206;function KB(i){const t=i.response;return typeof t!="string"?t:Jg(t).buffer}class JB{constructor({url:t,httpHeaders:e,withCredentials:n}){Ct(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=rM(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,l]of this.headers)e.setRequestHeader(r,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=R0):a.expectedStatus=M0,e.responseType="arraybuffer",He(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const r=a.status||M0;if(!(r===M0&&n.expectedStatus===R0)&&r!==n.expectedStatus){n.onError(a.status);return}const c=KB(a);if(r===R0){const p=a.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);m?n.onDone({begin:parseInt(m[1],10),chunk:c}):(Pt('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class WB{constructor(t){this._source=t,this._manager=new JB(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return He(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ZB(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new QB(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class ZB{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Qg(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[p,...m]=c.split(": ");return[p,m.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:l}=lM({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=uM(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=jg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class QB{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Qg((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=jg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const jB=/^[a-z][a-z0-9\-+.]+:/i;function t3(i){if(jB.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class e3{constructor(t){this.source=t,this.url=t3(t.url),He(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return He(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new n3(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new i3(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class n3{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=new Mf(`Missing PDF "${this._url}".`)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Wo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class i3{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const s3=1e5,$n=30,a3=.8;var Px,Do,Jn,fh,hh,Kr,va,ph,mh,Jr,ac,oc,No,rc,gh,lc,Wr,yh,vh,Zr,Qr,_h,Io,uc,Va,hM,pM,x_,Si,Hm,w_,mM,gM;const Ye=class Ye{constructor({textContentSource:t,container:e,viewport:n}){w(this,Va);w(this,Do,Promise.withResolvers());w(this,Jn,null);w(this,fh,!1);w(this,hh,!!((Px=globalThis.FontInspector)!=null&&Px.enabled));w(this,Kr,null);w(this,va,null);w(this,ph,0);w(this,mh,0);w(this,Jr,null);w(this,ac,null);w(this,oc,0);w(this,No,0);w(this,rc,Object.create(null));w(this,gh,[]);w(this,lc,null);w(this,Wr,[]);w(this,yh,new WeakMap);w(this,vh,null);var p;if(t instanceof ReadableStream)E(this,lc,t);else if(typeof t=="object")E(this,lc,new ReadableStream({start(m){m.enqueue(t),m.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,Jn,E(this,ac,e)),E(this,No,n.scale*(globalThis.devicePixelRatio||1)),E(this,oc,n.rotation),E(this,va,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:r,pageX:l,pageY:c}=n.rawDims;E(this,vh,[1,0,0,-1,-l,c+r]),E(this,mh,a),E(this,ph,r),M(p=Ye,Si,mM).call(p),Il(e,n),g(this,Do).promise.finally(()=>{g(Ye,uc).delete(this),E(this,va,null),E(this,rc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Fn.platform;return qt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{g(this,Jr).read().then(({value:e,done:n})=>{if(n){g(this,Do).resolve();return}g(this,Kr)??E(this,Kr,e.lang),Object.assign(g(this,rc),e.styles),M(this,Va,hM).call(this,e.items),t()},g(this,Do).reject)};return E(this,Jr,g(this,lc).getReader()),g(Ye,uc).add(this),t(),g(this,Do).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),a=t.rotation;if(a!==g(this,oc)&&(e==null||e(),E(this,oc,a),Il(g(this,ac),{rotation:a})),n!==g(this,No)){e==null||e(),E(this,No,n);const l={div:null,properties:null,ctx:M(r=Ye,Si,Hm).call(r,g(this,Kr))};for(const c of g(this,Wr))l.properties=g(this,yh).get(c),l.div=c,M(this,Va,x_).call(this,l)}}cancel(){var e;const t=new Wo("TextLayer task cancelled.");(e=g(this,Jr))==null||e.cancel(t).catch(()=>{}),E(this,Jr,null),g(this,Do).reject(t)}get textDivs(){return g(this,Wr)}get textContentItemsStr(){return g(this,gh)}static cleanup(){if(!(g(this,uc).size>0)){g(this,Zr).clear();for(const{canvas:t}of g(this,Qr).values())t.remove();g(this,Qr).clear()}}};Do=new WeakMap,Jn=new WeakMap,fh=new WeakMap,hh=new WeakMap,Kr=new WeakMap,va=new WeakMap,ph=new WeakMap,mh=new WeakMap,Jr=new WeakMap,ac=new WeakMap,oc=new WeakMap,No=new WeakMap,rc=new WeakMap,gh=new WeakMap,lc=new WeakMap,Wr=new WeakMap,yh=new WeakMap,vh=new WeakMap,Zr=new WeakMap,Qr=new WeakMap,_h=new WeakMap,Io=new WeakMap,uc=new WeakMap,Va=new WeakSet,hM=function(t){var a,r;if(g(this,fh))return;(r=g(this,va)).ctx??(r.ctx=M(a=Ye,Si,Hm).call(a,g(this,Kr)));const e=g(this,Wr),n=g(this,gh);for(const l of t){if(e.length>s3){Pt("Ignoring additional textDivs for performance reasons."),E(this,fh,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const c=g(this,Jn);E(this,Jn,document.createElement("span")),g(this,Jn).classList.add("markedContent"),l.id!==null&&g(this,Jn).setAttribute("id",`${l.id}`),c.append(g(this,Jn))}else l.type==="endMarkedContent"&&E(this,Jn,g(this,Jn).parentNode);continue}n.push(l.str),M(this,Va,pM).call(this,l)}},pM=function(t){var x;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};g(this,Wr).push(e);const a=_t.transform(g(this,vh),t.transform);let r=Math.atan2(a[1],a[0]);const l=g(this,rc)[t.fontName];l.vertical&&(r+=Math.PI/2);let c=g(this,hh)&&l.fontSubstitution||l.fontFamily;c=Ye.fontFamilyMap.get(c)||c;const p=Math.hypot(a[2],a[3]),m=p*M(x=Ye,Si,gM).call(x,c,g(this,Kr));let y,_;r===0?(y=a[4],_=a[5]-m):(y=a[4]+m*Math.sin(r),_=a[5]-m*Math.cos(r));const T="calc(var(--scale-factor)*",S=e.style;g(this,Jn)===g(this,ac)?(S.left=`${(100*y/g(this,mh)).toFixed(2)}%`,S.top=`${(100*_/g(this,ph)).toFixed(2)}%`):(S.left=`${T}${y.toFixed(2)}px)`,S.top=`${T}${_.toFixed(2)}px)`),S.fontSize=`${T}${(g(Ye,Io)*p).toFixed(2)}px)`,S.fontFamily=c,n.fontSize=p,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,g(this,hh)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let C=!1;if(t.str.length>1)C=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const D=Math.abs(t.transform[0]),N=Math.abs(t.transform[3]);D!==N&&Math.max(D,N)/Math.min(D,N)>1.5&&(C=!0)}if(C&&(n.canvasWidth=l.vertical?t.height:t.width),g(this,yh).set(e,n),g(this,va).div=e,g(this,va).properties=n,M(this,Va,x_).call(this,g(this,va)),n.hasText&&g(this,Jn).append(e),n.hasEOL){const D=document.createElement("br");D.setAttribute("role","presentation"),g(this,Jn).append(D)}},x_=function(t){var c;const{div:e,properties:n,ctx:a}=t,{style:r}=e;let l="";if(g(Ye,Io)>1&&(l=`scale(${1/g(Ye,Io)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:p}=r,{canvasWidth:m,fontSize:y}=n;M(c=Ye,Si,w_).call(c,a,y*g(this,No),p);const{width:_}=a.measureText(e.textContent);_>0&&(l=`scaleX(${m*g(this,No)/_}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(r.transform=l)},Si=new WeakSet,Hm=function(t=null){let e=g(this,Qr).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),g(this,Qr).set(t,e),g(this,_h).set(e,{size:0,family:""})}return e},w_=function(t,e,n){const a=g(this,_h).get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)},mM=function(){if(g(this,Io)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),E(this,Io,t.getBoundingClientRect().height),t.remove()},gM=function(t,e){const n=g(this,Zr).get(t);if(n)return n;const a=M(this,Si,Hm).call(this,e);a.canvas.width=a.canvas.height=$n,M(this,Si,w_).call(this,a,$n,t);const r=a.measureText("");let l=r.fontBoundingBoxAscent,c=Math.abs(r.fontBoundingBoxDescent);if(l){const y=l/(l+c);return g(this,Zr).set(t,y),a.canvas.width=a.canvas.height=0,y}a.strokeStyle="red",a.clearRect(0,0,$n,$n),a.strokeText("g",0,0);let p=a.getImageData(0,0,$n,$n).data;c=0;for(let y=p.length-1-3;y>=0;y-=4)if(p[y]>0){c=Math.ceil(y/4/$n);break}a.clearRect(0,0,$n,$n),a.strokeText("A",0,$n),p=a.getImageData(0,0,$n,$n).data,l=0;for(let y=0,_=p.length;y<_;y+=4)if(p[y]>0){l=$n-Math.floor(y/4/$n);break}a.canvas.width=a.canvas.height=0;const m=l?l/(l+c):a3;return g(this,Zr).set(t,m),m},w(Ye,Si),w(Ye,Zr,new Map),w(Ye,Qr,new Map),w(Ye,_h,new WeakMap),w(Ye,Io,null),w(Ye,uc,new Set);let Rf=Ye;class Df{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(r){var p;if(!r)return;let l=null;const c=r.name;if(c==="#text")l=r.value;else if(Df.shouldBuildText(c))(p=r==null?void 0:r.attributes)!=null&&p.textContent?l=r.attributes.textContent:r.value&&(l=r.value);else return;if(l!==null&&e.push({str:l}),!!r.children)for(const m of r.children)a(m)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const o3=65536,r3=100,l3=5e3,u3=wn?CB:AB,c3=wn?EB:eM,d3=wn?SB:TB,f3=wn?bB:aM;function h3(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new M_,{docId:e}=t,n=i.url?p3(i.url):null,a=i.data?m3(i.data):null,r=i.httpHeaders||null,l=i.withCredentials===!0,c=i.password??null,p=i.range instanceof yM?i.range:null,m=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:o3;let y=i.worker instanceof Ou?i.worker:null;const _=i.verbosity,T=typeof i.docBaseUrl=="string"&&!Zg(i.docBaseUrl)?i.docBaseUrl:null,S=typeof i.cMapUrl=="string"?i.cMapUrl:null,C=i.cMapPacked!==!1,x=i.CMapReaderFactory||c3,D=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,N=i.StandardFontDataFactory||f3,L=i.stopAtErrors!==!0,U=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,P=i.isEvalSupported!==!1,I=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!wn,q=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!wn&&(Fn.platform.isFirefox||!globalThis.chrome),Y=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,tt=typeof i.disableFontFace=="boolean"?i.disableFontFace:wn,j=i.fontExtraProperties===!0,at=i.enableXfa===!0,it=i.ownerDocument||globalThis.document,Tt=i.disableRange===!0,Zt=i.disableStream===!0,It=i.disableAutoFetch===!0,Dt=i.pdfBug===!0,V=i.CanvasFactory||u3,K=i.FilterFactory||d3,ht=i.enableHWA===!0,Vt=p?p.length:i.length??NaN,F=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!wn&&!tt,Z=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:x===eM&&N===aM&&S&&D&&rf(S,document.baseURI)&&rf(D,document.baseURI),st=null;QV(_);const et={canvasFactory:new V({ownerDocument:it,enableHWA:ht}),filterFactory:new K({docId:e,ownerDocument:it}),cMapReaderFactory:Z?null:new x({baseUrl:S,isCompressed:C}),standardFontDataFactory:Z?null:new N({baseUrl:D})};if(!y){const mt={verbosity:_,port:ka.workerPort};y=mt.port?Ou.fromPort(mt):new Ou(mt),t._worker=y}const yt={docId:e,apiVersion:"4.10.38",data:a,password:c,disableAutoFetch:It,rangeChunkSize:m,length:Vt,docBaseUrl:T,enableXfa:at,evaluatorOptions:{maxImageSize:U,disableFontFace:tt,ignoreErrors:L,isEvalSupported:P,isOffscreenCanvasSupported:I,isImageDecoderSupported:q,canvasMaxAreaInBytes:Y,fontExtraProperties:j,useSystemFonts:F,cMapUrl:Z?S:null,standardFontDataUrl:Z?D:null}},Bt={disableFontFace:tt,fontExtraProperties:j,ownerDocument:it,pdfBug:Dt,styleElement:st,loadingParams:{disableAutoFetch:It,enableXfa:at}};return y.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const mt=y.messageHandler.sendWithPromise("GetDocRequest",yt,a?[a.buffer]:null);let Ht;if(p)Ht=new GB(p,{disableRange:Tt,disableStream:Zt});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");let ee;if(wn)if(rf(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");ee=Mx}else ee=e3;else ee=rf(n)?Mx:WB;Ht=new ee({url:n,length:Vt,httpHeaders:r,withCredentials:l,rangeChunkSize:m,disableRange:Tt,disableStream:Zt})}return mt.then(ee=>{if(t.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const $i=new df(e,ee,y.port),jc=new _3($i,t,Ht,Bt,et);t._transport=jc,$i.send("Ready",null)})}).catch(t._capability.reject),t}function p3(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(wn&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function m3(i){if(wn&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Jg(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Rx(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Ng;const Ig=class Ig{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Dn(Ig,Ng)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n,a;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(a=this._worker)==null||a.destroy(),this._worker=null}};Ng=new WeakMap,w(Ig,Ng,0);let M_=Ig;class yM{constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class g3{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return qt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Lo,_a,Bi,Ru,Gm;class y3{constructor(t,e,n,a=!1){w(this,Bi);w(this,Lo,null);w(this,_a,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new mx:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new vM,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:r=!1}={}){return new ip({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return qt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:a=go.ENABLE,transform:r=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:y=null,isEditing:_=!1}){var P,I;(P=this._stats)==null||P.time("Overall");const T=this._transport.getRenderingIntent(n,a,y,_),{renderingIntent:S,cacheKey:C}=T;E(this,_a,!1),M(this,Bi,Gm).call(this),c||(c=this._transport.getOptionalContentConfig(S));let x=this._intentStates.get(C);x||(x=Object.create(null),this._intentStates.set(C,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const D=!!(S&_i.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(T));const N=q=>{var Y;x.renderTasks.delete(L),(this._maybeCleanupAfterRender||D)&&E(this,_a,!0),M(this,Bi,Ru).call(this,!D),q?(L.capability.reject(q),this._abortOperatorList({intentState:x,reason:q instanceof Error?q:new Error(q)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Y=globalThis.Stats)!=null&&Y.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new D_({callback:N,params:{canvasContext:t,viewport:e,transform:r,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!D,pdfBug:this._pdfBug,pageColors:m});(x.renderTasks||(x.renderTasks=new Set)).add(L);const U=L.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([q,Y])=>{var tt;if(this.destroyed){N();return}if((tt=this._stats)==null||tt.time("Rendering"),!(Y.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:q,optionalContentConfig:Y}),L.operatorListChanged()}).catch(N),U}getOperatorList({intent:t="display",annotationMode:e=go.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){var m;function r(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(p))}const l=this._transport.getRenderingIntent(t,e,n,a,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let p;return c.opListReadCapability||(p=Object.create(null),p.operatorListChanged=r,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(p),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(m=this._stats)==null||m.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Df.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function r(){l.read().then(function({value:p,done:m}){if(m){n(c);return}c.lang??(c.lang=p.lang),Object.assign(c.styles,p.styles),c.items.push(...p.items),r()},a)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),E(this,_a,!1),M(this,Bi,Gm).call(this),Promise.all(t)}cleanup(t=!1){E(this,_a,!0);const e=M(this,Bi,Ru).call(this,!1);return t&&e&&this._stats&&(this._stats=new mx),e}_startRenderPage(t,e){var a,r;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&M(this,Bi,Ru).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:r,transfer:l}=n,p=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:a},l).getReader(),m=this._intentStates.get(e);m.streamReader=p;const y=()=>{p.read().then(({value:_,done:T})=>{if(T){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(_,m),y())},_=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const T of m.renderTasks)T.operatorListChanged();M(this,Bi,Ru).call(this,!0)}if(m.displayReadyCapability)m.displayReadyCapability.reject(_);else if(m.opListReadCapability)m.opListReadCapability.reject(_);else throw _}})};y()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof vA){let a=r3;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Wo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,r]of this._intentStates)if(r===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}Lo=new WeakMap,_a=new WeakMap,Bi=new WeakSet,Ru=function(t=!1){if(M(this,Bi,Gm).call(this),!g(this,_a)||this.destroyed)return!1;if(t)return E(this,Lo,setTimeout(()=>{E(this,Lo,null),M(this,Bi,Ru).call(this,!1)},l3)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,_a,!1),!0},Gm=function(){g(this,Lo)&&(clearTimeout(g(this,Lo)),E(this,Lo,null))};var Aa,Lg;class v3{constructor(){w(this,Aa,new Map);w(this,Lg,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};g(this,Lg).then(()=>{for(const[a]of g(this,Aa))a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){Pt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>r.removeEventListener("abort",l),r.addEventListener("abort",l)}g(this,Aa).set(e,a)}removeEventListener(t,e){const n=g(this,Aa).get(e);n==null||n(),g(this,Aa).delete(e)}terminate(){for(const[,t]of g(this,Aa))t==null||t();g(this,Aa).clear()}}Aa=new WeakMap,Lg=new WeakMap;var kg,jr,tl,cc,zm,dc,qm;const Se=class Se{constructor({name:t=null,port:e=null,verbosity:n=jV()}={}){w(this,cc);var a;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((a=g(Se,tl))!=null&&a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(g(Se,tl)||E(Se,tl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new df("main","worker",t),this._messageHandler.on("ready",function(){}),M(this,cc,zm).call(this)}_initialize(){if(g(Se,jr)||g(Se,dc,qm)){this._setupFakeWorker();return}let{workerSrc:t}=Se;try{Se._isSameOrigin(window.location.href,t)||(t=Se._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new df("main","worker",e),a=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:r.signal}),n.on("test",c=>{if(r.abort(),this.destroyed||!c){a();return}this._messageHandler=n,this._port=e,this._webWorker=e,M(this,cc,zm).call(this)}),n.on("ready",c=>{if(r.abort(),this.destroyed){a();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{Kg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){g(Se,jr)||(Pt("Setting up fake worker."),E(Se,jr,!0)),Se._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new v3;this._port=e;const n=`fake${Dn(Se,kg)._++}`,a=new df(n+"_worker",n,e);t.setup(a,e),this._messageHandler=new df(n,n+"_worker",e),M(this,cc,zm).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=g(Se,tl))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=g(this,tl))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Se(t)}static get workerSrc(){if(ka.workerSrc)return ka.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return qt(this,"_setupFakeWorkerGlobal",(async()=>g(this,dc,qm)?g(this,dc,qm):(await import(this.workerSrc)).WorkerMessageHandler)())}};kg=new WeakMap,jr=new WeakMap,tl=new WeakMap,cc=new WeakSet,zm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},dc=new WeakSet,qm=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Se,dc),w(Se,kg,0),w(Se,jr,!1),w(Se,tl),wn&&(E(Se,jr,!0),ka.workerSrc||(ka.workerSrc="./pdf.worker.mjs")),Se._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const a=new URL(e,n);return n.origin===a.origin},Se._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Ou=Se;var Ta,Ds,fc,hc,Sa,el,gf;class _3{constructor(t,e,n,a,r){w(this,el);w(this,Ta,new Map);w(this,Ds,new Map);w(this,fc,new Map);w(this,hc,new Map);w(this,Sa,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new vM,this.fontLoader=new vB({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return qt(this,"annotationStorage",new SA)}getRenderingIntent(t,e=go.ENABLE,n=null,a=!1,r=!1){let l=_i.DISPLAY,c=y_;switch(t){case"any":l=_i.ANY;break;case"display":break;case"print":l=_i.PRINT;break;default:Pt(`getRenderingIntent - invalid intent: ${t}`)}const p=l&_i.PRINT&&n instanceof Jw?n:this.annotationStorage;switch(e){case go.DISABLE:l+=_i.ANNOTATIONS_DISABLE;break;case go.ENABLE:break;case go.ENABLE_FORMS:l+=_i.ANNOTATIONS_FORMS;break;case go.ENABLE_STORAGE:l+=_i.ANNOTATIONS_STORAGE,c=p.serializable;break;default:Pt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=_i.IS_EDITING),r&&(l+=_i.OPLIST);const{ids:m,hash:y}=p.modifiedIds,_=[l,c.hash,y];return{renderingIntent:l,cacheKey:_.join("_"),annotationStorageSerializable:c,modifiedIds:m}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=g(this,Sa))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of g(this,Ds).values())t.push(a._destroy());g(this,Ds).clear(),g(this,fc).clear(),g(this,hc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a,r;this.commonObjs.clear(),this.fontLoader.clear(),g(this,Ta).clear(),this.filterFactory.destroy(),Rf.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new Wo("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{He(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},a.onPull=()=>{this._fullReader.read().then(function({value:r,done:l}){if(l){a.close();return}He(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{a.error(r)})},a.onCancel=r=>{this._fullReader.cancel(r),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:r,contentLength:l}=this._fullReader;return(!a||!r)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),this._fullReader.onProgress=p=>{var m;(m=e.onProgress)==null||m.call(e,{loaded:p.loaded,total:p.total})}),{isStreamingSupported:a,isRangeSupported:r,contentLength:l}}),t.on("GetRangeReader",(n,a)=>{He(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){a.close();return}a.onPull=()=>{r.read().then(function({value:l,done:c}){if(c){a.close();return}He(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{r.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new g3(n,this))}),t.on("DocException",n=>{e._capability.reject(Yn(n))}),t.on("PasswordRequest",n=>{E(this,Sa,Promise.withResolvers());try{if(!e.onPassword)throw Yn(n);const a=r=>{r instanceof Error?g(this,Sa).reject(r):g(this,Sa).resolve({password:r})};e.onPassword(a,n.code)}catch(a){g(this,Sa).reject(a)}return g(this,Sa).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;g(this,Ds).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,r])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":const{disableFontFace:c,fontExtraProperties:p,pdfBug:m}=this._params;if("error"in r){const S=r.error;Pt(`Error during font loading: ${S}`),this.commonObjs.resolve(n,S);break}const y=m&&((l=globalThis.FontInspector)!=null&&l.enabled)?(S,C)=>globalThis.FontInspector.fontAdded(S,C):null,_=new _B(r,{disableFontFace:c,fontExtraProperties:p,inspectFont:y});this.fontLoader.bind(_).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!p&&_.data&&(_.data=null),this.commonObjs.resolve(n,_)});break;case"CopyLocalImage":const{imageRef:T}=r;He(T,"The imageRef must be defined.");for(const S of g(this,Ds).values())for(const[,C]of S.objs)if((C==null?void 0:C.ref)===T)return C.dataLen?(this.commonObjs.resolve(n,structuredClone(C)),C.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,r,l])=>{var p;if(this.destroyed)return;const c=g(this,Ds).get(a);if(!c.objs.has(n)){if(c._intentStates.size===0){(p=l==null?void 0:l.bitmap)==null||p.close();return}switch(r){case"Image":c.objs.resolve(n,l),(l==null?void 0:l.dataLen)>KV&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=g(this,fc).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&g(this,hc).set(r.refStr,t);const l=new y3(e,r,this,this._params.pdfBug);return g(this,Ds).set(e,l),l});return g(this,fc).set(e,a),a}getPageIndex(t){return Rx(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return M(this,el,gf).call(this,"GetFieldObjects")}hasJSActions(){return M(this,el,gf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return M(this,el,gf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return M(this,el,gf).call(this,"GetOptionalContentConfig").then(e=>new HB(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=g(this,Ta).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var r,l;return{info:a[0],metadata:a[1]?new VB(a[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return g(this,Ta).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of g(this,Ds).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),g(this,Ta).clear(),this.filterFactory.destroy(!0),Rf.cleanup()}}cachedPageNumber(t){if(!Rx(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return g(this,hc).get(e)??null}}Ta=new WeakMap,Ds=new WeakMap,fc=new WeakMap,hc=new WeakMap,Sa=new WeakMap,el=new WeakSet,gf=function(t,e=null){const n=g(this,Ta).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return g(this,Ta).set(t,a),a};const nf=Symbol("INITIAL_DATA");var ci,Ah,R_;class vM{constructor(){w(this,Ah);w(this,ci,Object.create(null))}get(t,e=null){if(e){const a=M(this,Ah,R_).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=g(this,ci)[t];if(!n||n.data===nf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=g(this,ci)[t];return!!e&&e.data!==nf}delete(t){const e=g(this,ci)[t];return!e||e.data===nf?!1:(delete g(this,ci)[t],!0)}resolve(t,e=null){const n=M(this,Ah,R_).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in g(this,ci)){const{data:n}=g(this,ci)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}E(this,ci,Object.create(null))}*[Symbol.iterator](){for(const t in g(this,ci)){const{data:e}=g(this,ci)[t];e!==nf&&(yield[t,e])}}}ci=new WeakMap,Ah=new WeakSet,R_=function(t){var e;return(e=g(this,ci))[t]||(e[t]={...Promise.withResolvers(),data:nf})};var ko;class A3{constructor(t){w(this,ko,null);E(this,ko,t),this.onContinue=null}get promise(){return g(this,ko).capability.promise}cancel(t=0){g(this,ko).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=g(this,ko).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=g(this,ko);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}ko=new WeakMap;var Po,nl;const Cr=class Cr{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:r,operatorList:l,pageIndex:c,canvasFactory:p,filterFactory:m,useRequestAnimationFrame:y=!1,pdfBug:_=!1,pageColors:T=null}){w(this,Po,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=p,this.filterFactory=m,this._pdfBug=_,this.pageColors=T,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=y===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new A3(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,p;if(this.cancelled)return;if(this._canvas){if(g(Cr,nl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");g(Cr,nl).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:r,background:l}=this.params;this.gfx=new Uu(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:a,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),g(this,Po)&&(window.cancelAnimationFrame(g(this,Po)),E(this,Po,null)),g(Cr,nl).delete(this._canvas),this.callback(t||new vA(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,Po,window.requestAnimationFrame(()=>{E(this,Po,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),g(Cr,nl).delete(this._canvas),this.callback())))}};Po=new WeakMap,nl=new WeakMap,w(Cr,nl,new WeakSet);let D_=Cr;const T3="4.10.38",S3="f9bea397f";function Dx(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function sf(i){return Math.max(0,Math.min(255,255*i))}class Nx{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=sf(t),[t,t,t]}static G_HTML([t]){const e=Dx(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(sf)}static RGB_HTML(t){return`#${t.map(Dx).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[sf(1-Math.min(1,t+a)),sf(1-Math.min(1,n+a)),sf(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,r=1-e,l=1-n,c=Math.min(a,r,l);return["CMYK",a,r,l,c]}}class C3{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ge("Abstract method `_createSVG` called.")}}class EA extends C3{_createSVG(t){return document.createElementNS(sa,t)}}class _M{static setupStorage(t,e,n,a,r){const l=a.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),r==="print")break;t.addEventListener("input",c=>{a.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",c=>{a.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),r==="print")break;t.addEventListener("input",c=>{a.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const p=c.target.options,m=p.selectedIndex===-1?"":p[p.selectedIndex].value;a.setValue(e,{value:m})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:r}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[p,m]of Object.entries(l))if(m!=null)switch(p){case"class":m.length&&t.setAttribute(p,m.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",m);break;case"style":Object.assign(t.style,m);break;case"textContent":t.textContent=m;break;default:(!c||p!=="href"&&p!=="newWindow")&&t.setAttribute(p,m)}c&&r.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var _,T;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,r=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:r,linkService:n});const c=r!=="richText",p=t.div;if(p.append(l),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;p.style.transform=S}c&&p.setAttribute("class","xfaLayer xfaFont");const m=[];if(a.children.length===0){if(a.value){const S=document.createTextNode(a.value);l.append(S),c&&Df.shouldBuildText(a.name)&&m.push(S)}return{textDivs:m}}const y=[[a,-1,l]];for(;y.length>0;){const[S,C,x]=y.at(-1);if(C+1===S.children.length){y.pop();continue}const D=S.children[++y.at(-1)[1]];if(D===null)continue;const{name:N}=D;if(N==="#text"){const U=document.createTextNode(D.value);m.push(U),x.append(U);continue}const L=(_=D==null?void 0:D.attributes)!=null&&_.xmlns?document.createElementNS(D.attributes.xmlns,N):document.createElement(N);if(x.append(L),D.attributes&&this.setAttributes({html:L,element:D,storage:e,intent:r,linkService:n}),((T=D.children)==null?void 0:T.length)>0)y.push([D,-1,L]);else if(D.value){const U=document.createTextNode(D.value);c&&Df.shouldBuildText(N)&&m.push(U),L.append(U)}}for(const S of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:m}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ap=1e3,E3=9,kl=new WeakSet;function Ko(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class b3{static create(t){switch(t.data.annotationType){case $e.LINK:return new AM(t);case $e.TEXT:return new x3(t);case $e.WIDGET:switch(t.data.fieldType){case"Tx":return new w3(t);case"Btn":return t.data.radioButton?new CM(t):t.data.checkBox?new R3(t):new D3(t);case"Ch":return new N3(t);case"Sig":return new M3(t)}return new Ul(t);case $e.POPUP:return new I_(t);case $e.FREETEXT:return new MM(t);case $e.LINE:return new L3(t);case $e.SQUARE:return new k3(t);case $e.CIRCLE:return new P3(t);case $e.POLYLINE:return new RM(t);case $e.CARET:return new U3(t);case $e.INK:return new bA(t);case $e.POLYGON:return new F3(t);case $e.HIGHLIGHT:return new DM(t);case $e.UNDERLINE:return new O3(t);case $e.SQUIGGLY:return new V3(t);case $e.STRIKEOUT:return new B3(t);case $e.STAMP:return new NM(t);case $e.FILEATTACHMENT:return new H3(t);default:return new Fe(t)}}}var il,pc,mc,Th,N_;const RA=class RA{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){w(this,Th);w(this,il,null);w(this,pc,!1);w(this,mc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return RA._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;g(this,il)||E(this,il,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&M(this,Th,N_).call(this,e),(n=g(this,mc))==null||n.popup.updateEdited(t)}resetEdited(){var t;g(this,il)&&(M(this,Th,N_).call(this,g(this,il).rect),(t=g(this,mc))==null||t.popup.resetEdited(),E(this,il,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Ul||(r.tabIndex=ap);const{style:l}=r;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof I_){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,r),r}const{width:c,height:p}=Ko(e.rect);if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,D=e.borderStyle.verticalCornerRadius;if(x>0||D>0){const L=`calc(${x}px * var(--scale-factor)) / calc(${D}px * var(--scale-factor))`;l.borderRadius=L}else if(this instanceof CM){const L=`calc(${c}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`;l.borderRadius=L}switch(e.borderStyle.style){case tf.SOLID:l.borderStyle="solid";break;case tf.DASHED:l.borderStyle="dashed";break;case tf.BEVELED:Pt("Unimplemented border style: beveled");break;case tf.INSET:Pt("Unimplemented border style: inset");break;case tf.UNDERLINE:l.borderBottomStyle="solid";break}const N=e.borderColor||null;N?(E(this,pc,!0),l.borderColor=_t.makeHexColor(N[0]|0,N[1]|0,N[2]|0)):l.borderWidth=0}const m=_t.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:y,pageHeight:_,pageX:T,pageY:S}=a.rawDims;l.left=`${100*(m[0]-T)/y}%`,l.top=`${100*(m[1]-S)/_}%`;const{rotation:C}=e;return e.hasOwnCanvas||C===0?(l.width=`${100*c/y}%`,l.height=`${100*p/_}%`):this.setRotation(C,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims,{width:r,height:l}=Ko(this.data.rect);let c,p;t%180===0?(c=100*r/n,p=100*l/a):(c=100*l/n,p=100*r/a),e.style.width=`${c}%`,e.style.height=`${p}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const r=a.detail[e],l=r[0],c=r.slice(1);a.target.style[n]=Nx[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:Nx[`${l}_rgb`](c)})};return qt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const r=t[a]||n[a];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,r]of Object.entries(e)){const l=n[a];if(l){const c={detail:{[a]:r},target:t};l(c),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,r]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,D,N,L]=t.subarray(2,6);if(a===x&&r===D&&e===N&&n===L)return}const{style:l}=this.container;let c;if(g(this,pc)){const{borderColor:x,borderWidth:D}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${D}">`],this.container.classList.add("hasBorder")}const p=a-e,m=r-n,{svgFactory:y}=this,_=y.createElement("svg");_.classList.add("quadrilateralsContainer"),_.setAttribute("width",0),_.setAttribute("height",0);const T=y.createElement("defs");_.append(T);const S=y.createElement("clipPath"),C=`clippath_${this.data.id}`;S.setAttribute("id",C),S.setAttribute("clipPathUnits","objectBoundingBox"),T.append(S);for(let x=2,D=t.length;x<D;x+=8){const N=t[x],L=t[x+1],U=t[x+2],P=t[x+3],I=y.createElement("rect"),q=(U-e)/p,Y=(r-L)/m,tt=(N-U)/p,j=(L-P)/m;I.setAttribute("x",q),I.setAttribute("y",Y),I.setAttribute("width",tt),I.setAttribute("height",j),S.append(I),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${q}" y="${Y}" width="${tt}" height="${j}"/>`)}g(this,pc)&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(_),this.container.style.clipPath=`url(#${C})`}_createPopup(){const{data:t}=this,e=E(this,mc,new I_({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:r,id:l,exportValues:c}of a){if(r===-1||l===e)continue;const p=typeof c=="string"?c:null,m=document.querySelector(`[data-element-id="${l}"]`);if(m&&!kl.has(m)){Pt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:p,domElement:m})}return n}for(const a of document.getElementsByName(t)){const{exportValue:r}=a,l=a.getAttribute("data-element-id");l!==e&&kl.has(a)&&n.push({id:l,exportValue:r,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};il=new WeakMap,pc=new WeakMap,mc=new WeakMap,Th=new WeakSet,N_=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:l,pageX:c,pageY:p}}}}=this;n==null||n.splice(0,4,...t);const{width:m,height:y}=Ko(t);e.left=`${100*(t[0]-c)/r}%`,e.top=`${100*(l-t[3]+p)/l}%`,a===0?(e.width=`${100*m/r}%`,e.height=`${100*y/l}%`):this.setRotation(a)};let Fe=RA;var Ai,_r,TM,SM;class AM extends Fe{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});w(this,Ai);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(a,e.action),r=!0):e.attachment?(M(this,Ai,TM).call(this,a,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(M(this,Ai,SM).call(this,a,e.setOCGState),r=!0):e.dest?(this._bindLink(a,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),r=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(a,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(a),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&M(this,Ai,_r).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),M(this,Ai,_r).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const l=a.get(r);l&&(e[l]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),M(this,Ai,_r).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),M(this,Ai,_r).call(this),!this._fieldObjects){Pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var _;a==null||a();const{fields:r,refs:l,include:c}=n,p=[];if(r.length!==0||l.length!==0){const T=new Set(l);for(const S of r){const C=this._fieldObjects[S]||[];for(const{id:x}of C)T.add(x)}for(const S of Object.values(this._fieldObjects))for(const C of S)T.has(C.id)===c&&p.push(C)}else for(const T of Object.values(this._fieldObjects))p.push(...T);const m=this.annotationStorage,y=[];for(const T of p){const{id:S}=T;switch(y.push(S),T.type){case"text":{const x=T.defaultValue||"";m.setValue(S,{value:x});break}case"checkbox":case"radiobutton":{const x=T.defaultValue===T.exportValues;m.setValue(S,{value:x});break}case"combobox":case"listbox":{const x=T.defaultValue||"";m.setValue(S,{value:x});break}default:continue}const C=document.querySelector(`[data-element-id="${S}"]`);if(C){if(!kl.has(C)){Pt(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;C.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:y,name:"ResetForm"}})),!1}}}Ai=new WeakSet,_r=function(){this.container.setAttribute("data-internal-link","")},TM=function(e,n,a=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,a),!1},M(this,Ai,_r).call(this)},SM=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),M(this,Ai,_r).call(this)};class x3 extends Fe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ul extends Fe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Fn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,r){n.includes("mouse")?t.addEventListener(n,l=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:r(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var c;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:r(l)}}))})}_setEventListeners(t,e,n,a){var r,l,c;for(const[p,m]of n)(m==="Action"||(r=this.data.actions)!=null&&r[m])&&((m==="Focus"||m==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,p,m,a),m==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):m==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":_t.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||E3,r=t.style;let l;const c=2,p=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-c),y=Math.round(m/(C0*a))||1,_=m/y;l=Math.min(a,p(_/C0))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(a,p(m/C0))}r.fontSize=`calc(${l}px * var(--scale-factor))`,r.color=_t.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class w3 extends Ul{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const r=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),r.setValue(l.id,{[a]:n})}render(){var a,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let c=l.value||"";const p=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;p&&c.length>p&&(c=c.slice(0,p));let m=l.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;m&&this.data.comb&&(m=m.replaceAll(/\s+/g,""));const y={userValue:c,formattedValue:m,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=m??c,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",m??c),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),kl.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=ap,this._setRequired(n,this.data.required),p&&(n.maxLength=p),n.addEventListener("input",T=>{t.setValue(e,{value:T.target.value}),this.setPropertyOnSiblings(n,"value",T.target.value,"value"),y.formattedValue=null}),n.addEventListener("resetform",T=>{const S=this.data.defaultFieldValue??"";n.value=y.userValue=S,y.formattedValue=null});let _=T=>{const{formattedValue:S}=y;S!=null&&(T.target.value=S),T.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",S=>{var x;if(y.focused)return;const{target:C}=S;y.userValue&&(C.value=y.userValue),y.lastCommittedValue=C.value,y.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(y.focused=!0)}),n.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const C={value(x){y.userValue=x.detail.value??"",t.setValue(e,{value:y.userValue.toString()}),x.target.value=y.userValue},formattedValue(x){const{formattedValue:D}=x.detail;y.formattedValue=D,D!=null&&x.target!==document.activeElement&&(x.target.value=D),t.setValue(e,{formattedValue:D})},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var U;const{charLimit:D}=x.detail,{target:N}=x;if(D===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",D);let L=y.userValue;!L||L.length<=D||(L=L.slice(0,D),N.value=y.userValue=L,t.setValue(e,{value:L}),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(C,S)}),n.addEventListener("keydown",S=>{var D;y.commitKey=1;let C=-1;if(S.key==="Escape"?C=0:S.key==="Enter"&&!this.data.multiLine?C=2:S.key==="Tab"&&(y.commitKey=3),C===-1)return;const{value:x}=S.target;y.lastCommittedValue!==x&&(y.lastCommittedValue=x,y.userValue=x,(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:C,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const T=_;_=null,n.addEventListener("blur",S=>{var x,D;if(!y.focused||!S.relatedTarget)return;(x=this.data.actions)!=null&&x.Blur||(y.focused=!1);const{value:C}=S.target;y.userValue=C,y.lastCommittedValue!==C&&((D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:y.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}})),T(S)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",S=>{var I;y.lastCommittedValue=null;const{data:C,target:x}=S,{value:D,selectionStart:N,selectionEnd:L}=x;let U=N,P=L;switch(S.inputType){case"deleteWordBackward":{const q=D.substring(0,N).match(/\w*[^\w]*$/);q&&(U-=q[0].length);break}case"deleteWordForward":{const q=D.substring(N).match(/^[^\w]*\w*/);q&&(P+=q[0].length);break}case"deleteContentBackward":N===L&&(U-=1);break;case"deleteContentForward":N===L&&(P+=1);break}S.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,change:C||"",willCommit:!1,selStart:U,selEnd:P}})}),this._setEventListeners(n,y,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(_&&n.addEventListener("blur",_),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/p;n.classList.add("comb"),n.style.letterSpacing=`calc(${S}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class M3 extends Ul{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class R3 extends Ul{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return kl.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,a&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=ap,r.addEventListener("change",l=>{const{name:c,checked:p}=l.target;for(const m of this._getElementsByName(c,n)){const y=p&&m.exportValue===e.exportValue;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}t.setValue(n,{value:p})}),r.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",l=>{const c={value(p){p.target.checked=p.detail.value!=="Off",t.setValue(n,{value:p.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class CM extends Ul{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const r=document.createElement("input");if(kl.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,a&&r.setAttribute("checked",!0),r.tabIndex=ap,r.addEventListener("change",l=>{const{name:c,checked:p}=l.target;for(const m of this._getElementsByName(c,n))t.setValue(m.id,{value:!1});t.setValue(n,{value:p})}),r.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;r.addEventListener("updatefromsandbox",c=>{const p={value:m=>{const y=l===m.detail.value;for(const _ of this._getElementsByName(m.target.name)){const T=y&&_.id===n;_.domElement&&(_.domElement.checked=T),t.setValue(_.id,{value:T})}}};this._dispatchEventFromSandbox(p,c)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class D3 extends AM{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class N3 extends Ul{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");kl.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=ap;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",y=>{const _=this.data.defaultFieldValue;for(const T of a.options)T.selected=T.value===_});for(const y of this.data.options){const _=document.createElement("option");_.textContent=y.displayValue,_.value=y.exportValue,n.value.includes(y.exportValue)&&(_.setAttribute("selected",!0),r=!1),a.append(_)}let l=null;if(r){const y=document.createElement("option");y.value=" ",y.setAttribute("hidden",!0),y.setAttribute("selected",!0),a.prepend(y),l=()=>{y.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const c=y=>{const _=y?"value":"textContent",{options:T,multiple:S}=a;return S?Array.prototype.filter.call(T,C=>C.selected).map(C=>C[_]):T.selectedIndex===-1?null:T[T.selectedIndex][_]};let p=c(!1);const m=y=>{const _=y.target.options;return Array.prototype.map.call(_,T=>({displayValue:T.textContent,exportValue:T.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",y=>{const _={value(T){l==null||l();const S=T.detail.value,C=new Set(Array.isArray(S)?S:[S]);for(const x of a.options)x.selected=C.has(x.value);t.setValue(e,{value:c(!0)}),p=c(!1)},multipleSelection(T){a.multiple=!0},remove(T){const S=a.options,C=T.detail.remove;S[C].selected=!1,a.remove(C),S.length>0&&Array.prototype.findIndex.call(S,D=>D.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:c(!0),items:m(T)}),p=c(!1)},clear(T){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),p=c(!1)},insert(T){const{index:S,displayValue:C,exportValue:x}=T.detail.insert,D=a.children[S],N=document.createElement("option");N.textContent=C,N.value=x,D?D.before(N):a.append(N),t.setValue(e,{value:c(!0),items:m(T)}),p=c(!1)},items(T){const{items:S}=T.detail;for(;a.length!==0;)a.remove(0);for(const C of S){const{displayValue:x,exportValue:D}=C,N=document.createElement("option");N.textContent=x,N.value=D,a.append(N)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:c(!0),items:m(T)}),p=c(!1)},indices(T){const S=new Set(T.detail.indices);for(const C of T.target.options)C.selected=S.has(C.index);t.setValue(e,{value:c(!0)}),p=c(!1)},editable(T){T.target.disabled=!T.detail.editable}};this._dispatchEventFromSandbox(_,y)}),a.addEventListener("input",y=>{var S;const _=c(!0),T=c(!1);t.setValue(e,{value:_}),y.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,change:T,changeEx:_,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],y=>y.target.value)):a.addEventListener("input",function(y){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class I_ extends Fe{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Fe._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new I3({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${yA}${n}`).join(",")),this.container}}var gc,Pg,Fg,yc,sl,Ne,Ca,vc,Sh,Ch,_c,Ea,es,ba,Eh,xa,bh,al,ol,pe,$m,L_,EM,bM,xM,wM,Ym,Xm,k_;class I3{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:r,contentsObj:l,richText:c,parent:p,rect:m,parentRect:y,open:_}){w(this,pe);w(this,gc,M(this,pe,xM).bind(this));w(this,Pg,M(this,pe,k_).bind(this));w(this,Fg,M(this,pe,Xm).bind(this));w(this,yc,M(this,pe,Ym).bind(this));w(this,sl,null);w(this,Ne,null);w(this,Ca,null);w(this,vc,null);w(this,Sh,null);w(this,Ch,null);w(this,_c,null);w(this,Ea,!1);w(this,es,null);w(this,ba,null);w(this,Eh,null);w(this,xa,null);w(this,bh,null);w(this,al,null);w(this,ol,!1);var T;E(this,Ne,t),E(this,bh,a),E(this,Ca,l),E(this,xa,c),E(this,Ch,p),E(this,sl,e),E(this,Eh,m),E(this,_c,y),E(this,Sh,n),E(this,vc,AA.toDateObject(r)),this.trigger=n.flatMap(S=>S.getElementsToTriggerPopup());for(const S of this.trigger)S.addEventListener("click",g(this,yc)),S.addEventListener("mouseenter",g(this,Fg)),S.addEventListener("mouseleave",g(this,Pg)),S.classList.add("popupTriggerArea");for(const S of n)(T=S.container)==null||T.addEventListener("keydown",g(this,gc));g(this,Ne).hidden=!0,_&&M(this,pe,Ym).call(this)}render(){if(g(this,es))return;const t=E(this,es,document.createElement("div"));if(t.className="popup",g(this,sl)){const r=t.style.outlineColor=_t.makeHexColor(...g(this,sl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=_t.makeHexColor(...g(this,sl).map(c=>Math.floor(.7*(255-c)+c)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=g(this,bh),t.append(e),g(this,vc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:g(this,vc).valueOf()})),e.append(r)}const a=g(this,pe,$m);if(a)_M.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(g(this,Ca));t.append(r)}g(this,Ne).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let r=0,l=a.length;r<l;++r){const c=a[r];n.append(document.createTextNode(c)),r<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;g(this,al)||E(this,al,{contentsObj:g(this,Ca),richText:g(this,xa)}),t&&E(this,ba,null),e&&(E(this,xa,M(this,pe,bM).call(this,e)),E(this,Ca,null)),(n=g(this,es))==null||n.remove(),E(this,es,null)}resetEdited(){var t;g(this,al)&&({contentsObj:Dn(this,Ca)._,richText:Dn(this,xa)._}=g(this,al),E(this,al,null),(t=g(this,es))==null||t.remove(),E(this,es,null),E(this,ba,null))}forceHide(){E(this,ol,this.isVisible),g(this,ol)&&(g(this,Ne).hidden=!0)}maybeShow(){g(this,ol)&&(g(this,es)||M(this,pe,Xm).call(this),E(this,ol,!1),g(this,Ne).hidden=!1)}get isVisible(){return g(this,Ne).hidden===!1}}gc=new WeakMap,Pg=new WeakMap,Fg=new WeakMap,yc=new WeakMap,sl=new WeakMap,Ne=new WeakMap,Ca=new WeakMap,vc=new WeakMap,Sh=new WeakMap,Ch=new WeakMap,_c=new WeakMap,Ea=new WeakMap,es=new WeakMap,ba=new WeakMap,Eh=new WeakMap,xa=new WeakMap,bh=new WeakMap,al=new WeakMap,ol=new WeakMap,pe=new WeakSet,$m=function(){const t=g(this,xa),e=g(this,Ca);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&g(this,xa).html||null},L_=function(){var t,e,n;return((n=(e=(t=g(this,pe,$m))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},EM=function(){var t,e,n;return((n=(e=(t=g(this,pe,$m))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},bM=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:g(this,pe,EM),fontSize:g(this,pe,L_)?`calc(${g(this,pe,L_)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:a});return n},xM=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&g(this,Ea))&&M(this,pe,Ym).call(this)},wM=function(){if(g(this,ba)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:r}}}=g(this,Ch);let l=!!g(this,_c),c=l?g(this,_c):g(this,Eh);for(const C of g(this,Sh))if(!c||_t.intersect(C.data.rect,c)!==null){c=C.data.rect,l=!0;break}const p=_t.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),y=l?c[2]-c[0]+5:0,_=p[0]+y,T=p[1];E(this,ba,[100*(_-a)/e,100*(T-r)/n]);const{style:S}=g(this,Ne);S.left=`${g(this,ba)[0]}%`,S.top=`${g(this,ba)[1]}%`},Ym=function(){E(this,Ea,!g(this,Ea)),g(this,Ea)?(M(this,pe,Xm).call(this),g(this,Ne).addEventListener("click",g(this,yc)),g(this,Ne).addEventListener("keydown",g(this,gc))):(M(this,pe,k_).call(this),g(this,Ne).removeEventListener("click",g(this,yc)),g(this,Ne).removeEventListener("keydown",g(this,gc)))},Xm=function(){g(this,es)||this.render(),this.isVisible?g(this,Ea)&&g(this,Ne).classList.add("focused"):(M(this,pe,wM).call(this),g(this,Ne).hidden=!1,g(this,Ne).style.zIndex=parseInt(g(this,Ne).style.zIndex)+1e3)},k_=function(){g(this,Ne).classList.remove("focused"),!(g(this,Ea)||!this.isVisible)&&(g(this,Ne).hidden=!0,g(this,Ne).style.zIndex=parseInt(g(this,Ne).style.zIndex)-1e3)};class MM extends Fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=kt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var xh;class L3 extends Fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,xh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:a}=Ko(e.rect),r=this.svgFactory.create(n,a,!0),l=E(this,xh,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,xh)}addHighlightArea(){this.container.classList.add("highlightArea")}}xh=new WeakMap;var wh;class k3 extends Fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,wh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:a}=Ko(e.rect),r=this.svgFactory.create(n,a,!0),l=e.borderStyle.width,c=E(this,wh,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",n-l),c.setAttribute("height",a-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,wh)}addHighlightArea(){this.container.classList.add("highlightArea")}}wh=new WeakMap;var Mh;class P3 extends Fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Mh,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:a}=Ko(e.rect),r=this.svgFactory.create(n,a,!0),l=e.borderStyle.width,c=E(this,Mh,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",n/2),c.setAttribute("cy",a/2),c.setAttribute("rx",n/2-l/2),c.setAttribute("ry",a/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Mh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mh=new WeakMap;var Rh;class RM extends Fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Rh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:r}}=this;if(!n)return this.container;const{width:l,height:c}=Ko(e),p=this.svgFactory.create(l,c,!0);let m=[];for(let _=0,T=n.length;_<T;_+=2){const S=n[_]-e[0],C=e[3]-n[_+1];m.push(`${S},${C}`)}m=m.join(" ");const y=E(this,Rh,this.svgFactory.createElement(this.svgElementName));return y.setAttribute("points",m),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),p.append(y),this.container.append(p),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rh=new WeakMap;class F3 extends RM{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class U3 extends Fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Dh,rl,Nh,P_;class bA extends Fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Nh);w(this,Dh,null);w(this,rl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?kt.HIGHLIGHT:kt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:a,borderStyle:r,popupRef:l}}=this,{transform:c,width:p,height:m}=M(this,Nh,P_).call(this,n,e),y=this.svgFactory.create(p,m,!0),_=E(this,Dh,this.svgFactory.createElement("svg:g"));y.append(_),_.setAttribute("stroke-width",r.width||1),_.setAttribute("stroke-linecap","round"),_.setAttribute("stroke-linejoin","round"),_.setAttribute("stroke-miterlimit",10),_.setAttribute("stroke","transparent"),_.setAttribute("fill","transparent"),_.setAttribute("transform",c);for(let T=0,S=a.length;T<S;T++){const C=this.svgFactory.createElement(this.svgElementName);g(this,rl).push(C),C.setAttribute("points",a[T].join(",")),_.append(C)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(y),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:a,rect:r}=e,l=g(this,Dh);if(n>=0&&l.setAttribute("stroke-width",n||1),a)for(let c=0,p=g(this,rl).length;c<p;c++)g(this,rl)[c].setAttribute("points",a[c].join(","));if(r){const{transform:c,width:p,height:m}=M(this,Nh,P_).call(this,this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${p} ${m}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return g(this,rl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dh=new WeakMap,rl=new WeakMap,Nh=new WeakSet,P_=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class DM extends Fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=kt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class O3 extends Fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class V3 extends Fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class B3 extends Fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class NM extends Fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=kt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ih,Lh,F_;class H3 extends Fe{constructor(e){var a;super(e,{isRenderable:!0});w(this,Lh);w(this,Ih,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",M(this,Lh,F_).bind(this)),E(this,Ih,a);const{isMac:r}=Fn.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&M(this,Lh,F_).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return g(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap,Lh=new WeakSet,F_=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var kh,ll,ul,Ph,Pl,IM,U_;class G3{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:r,viewport:l,structTreeLayer:c}){w(this,Pl);w(this,kh,null);w(this,ll,null);w(this,ul,new Map);w(this,Ph,null);this.div=t,E(this,kh,e),E(this,ll,n),E(this,Ph,c||null),this.page=r,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return g(this,ul).size>0}async render(t){var l;const{annotations:e}=t,n=this.div;Il(n,this.viewport);const a=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new EA,annotationStorage:t.annotationStorage||new SA,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const p=c.annotationType===$e.POPUP;if(p){const _=a.get(c.id);if(!_)continue;r.elements=_}else{const{width:_,height:T}=Ko(c.rect);if(_<=0||T<=0)continue}r.data=c;const m=b3.create(r);if(!m.isRenderable)continue;if(!p&&c.popupRef){const _=a.get(c.popupRef);_?_.push(m):a.set(c.popupRef,[m])}const y=m.render();c.hidden&&(y.style.visibility="hidden"),await M(this,Pl,IM).call(this,y,c.id),m._isEditable&&(g(this,ul).set(m.data.id,m),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(m))}M(this,Pl,U_).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Il(e,{rotation:t.rotation}),M(this,Pl,U_).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(g(this,ul).values())}getEditableAnnotation(t){return g(this,ul).get(t)}}kh=new WeakMap,ll=new WeakMap,ul=new WeakMap,Ph=new WeakMap,Pl=new WeakSet,IM=async function(t,e){var l,c;const n=t.firstChild||t,a=n.id=`${yA}${e}`,r=await((l=g(this,Ph))==null?void 0:l.getAriaAttributes(a));if(r)for(const[p,m]of r)n.setAttribute(p,m);this.div.append(t),(c=g(this,kh))==null||c.moveElementInDOM(this.div,t,n,!1)},U_=function(){if(!g(this,ll))return;const t=this.div;for(const[e,n]of g(this,ll)){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;n.className="annotationContent";const{firstChild:r}=a;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):a.append(n)}g(this,ll).clear()};const xm=/\r\n?|\n/g;var ns,di,Fh,cl,fi,Ge,LM,kM,PM,Km,Fa,Jm,Wm,FM,V_,UM;const ve=class ve extends Me{constructor(e){super({...e,name:"freeTextEditor"});w(this,Ge);w(this,ns);w(this,di,"");w(this,Fh,`${this.id}-editor`);w(this,cl,null);w(this,fi);E(this,ns,e.color||ve._defaultColor||Me._defaultLineColor),E(this,fi,e.fontSize||ve._defaultFontSize)}static get _keyboardManager(){const e=ve.prototype,n=l=>l.isEmpty(),a=Ll.TRANSLATE_SMALL,r=Ll.TRANSLATE_BIG;return qt(this,"_keyboardManager",new sp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){Me.initialize(e,n);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Xt.FREETEXT_SIZE:ve._defaultFontSize=n;break;case Xt.FREETEXT_COLOR:ve._defaultColor=n;break}}updateParams(e,n){switch(e){case Xt.FREETEXT_SIZE:M(this,Ge,LM).call(this,n);break;case Xt.FREETEXT_COLOR:M(this,Ge,kM).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Xt.FREETEXT_SIZE,ve._defaultFontSize],[Xt.FREETEXT_COLOR,ve._defaultColor||Me._defaultLineColor]]}get propertiesToUpdate(){return[[Xt.FREETEXT_SIZE,g(this,fi)],[Xt.FREETEXT_COLOR,g(this,ns)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-ve._internalPadding*e,-(ve._internalPadding+g(this,fi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(kt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,cl,new AbortController);const e=this._uiManager.combinedSignal(g(this,cl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",g(this,Fh)),this._isDraggable=!0,(e=g(this,cl))==null||e.abort(),E(this,cl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=g(this,di),n=E(this,di,M(this,Ge,PM).call(this).trimEnd());if(e===n)return;const a=r=>{if(E(this,di,r),!r){this.remove();return}M(this,Ge,Wm).call(this),this._uiManager.rebuild(this),M(this,Ge,Km).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),M(this,Ge,Km).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ve._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",g(this,Fh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${g(this,fi)}px * var(--scale-factor))`,a.color=g(this,ns),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),gg(this,this.div,["dblclick","keydown"]),this.width){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[p,m]=this.getInitialTranslation();[p,m]=this.pageTranslationToScreen(p,m);const[y,_]=this.pageDimensions,[T,S]=this.pageTranslation;let C,x;switch(this.rotation){case 0:C=e+(c[0]-T)/y,x=n+this.height-(c[1]-S)/_;break;case 90:C=e+(c[0]-T)/y,x=n-(c[1]-S)/_,[p,m]=[m,-p];break;case 180:C=e-this.width+(c[0]-T)/y,x=n-(c[1]-S)/_,[p,m]=[-p,-m];break;case 270:C=e+(c[0]-T-this.height*_)/y,x=n+(c[1]-S-this.width*y)/_,[p,m]=[-m,p];break}this.setAt(C*r,x*l,p,m)}else this.setAt(e*r,n*l,this.width*r,this.height*l);M(this,Ge,Wm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var C,x,D;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const r=M(C=ve,Fa,V_).call(C,n.getData("text")||"").replaceAll(xm,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:p,startOffset:m}=c,y=[],_=[];if(p.nodeType===Node.TEXT_NODE){const N=p.parentElement;if(_.push(p.nodeValue.slice(m).replaceAll(xm,"")),N!==this.editorDiv){let L=y;for(const U of this.editorDiv.childNodes){if(U===N){L=_;continue}L.push(M(x=ve,Fa,Jm).call(x,U))}}y.push(p.nodeValue.slice(0,m).replaceAll(xm,""))}else if(p===this.editorDiv){let N=y,L=0;for(const U of this.editorDiv.childNodes)L++===m&&(N=_),N.push(M(D=ve,Fa,Jm).call(D,U))}E(this,di,`${y.join(`
`)}${r}${_.join(`
`)}`),M(this,Ge,Wm).call(this);const T=new Range;let S=y.reduce((N,L)=>N+L.length,0);for(const{firstChild:N}of this.editorDiv.childNodes)if(N.nodeType===Node.TEXT_NODE){const L=N.nodeValue.length;if(S<=L){T.setStart(N,S),T.setEnd(N,S);break}S-=L}l.removeAllRanges(),l.addRange(T)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,a){var c;let r=null;if(e instanceof MM){const{data:{defaultAppearanceData:{fontSize:p,fontColor:m},rect:y,rotation:_,id:T,popupRef:S},textContent:C,textPosition:x,parent:{page:{pageNumber:D}}}=e;if(!C||C.length===0)return null;r=e={annotationType:kt.FREETEXT,color:Array.from(m),fontSize:p,value:C.join(`
`),position:x,pageIndex:D-1,rect:y.slice(0),rotation:_,id:T,deleted:!1,popupRef:S}}const l=await super.deserialize(e,n,a);return E(l,fi,e.fontSize),E(l,ns,_t.makeHexColor(...e.color)),E(l,di,M(c=ve,Fa,V_).call(c,e.value)),l.annotationElementId=e.id||null,l._initialData=r,l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ve._internalPadding*this.parentScale,a=this.getRect(n,n),r=Me._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:g(this,ns)),l={annotationType:kt.FREETEXT,color:r,fontSize:g(this,fi),value:M(this,Ge,FM).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!M(this,Ge,UM).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:a}=n;a.fontSize=`calc(${g(this,fi)}px * var(--scale-factor))`,a.color=g(this,ns),n.replaceChildren();for(const l of g(this,di).split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),n.append(c)}const r=ve._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:g(this,di)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ns=new WeakMap,di=new WeakMap,Fh=new WeakMap,cl=new WeakMap,fi=new WeakMap,Ge=new WeakSet,LM=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-g(this,fi))*this.parentScale),E(this,fi,r),M(this,Ge,Km).call(this)},a=g(this,fi);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kM=function(e){const n=r=>{E(this,ns,this.editorDiv.style.color=r)},a=g(this,ns);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},PM=function(){var a;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(M(a=ve,Fa,Jm).call(a,r)),n=r);return e.join(`
`)},Km=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,c=l.style.display,p=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),a=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",p)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},Fa=new WeakSet,Jm=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(xm,"")},Wm=function(){if(this.editorDiv.replaceChildren(),!!g(this,di))for(const e of g(this,di).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},FM=function(){return g(this,di).replaceAll(""," ")},V_=function(e){return e.replaceAll(" ","")},UM=function(e){const{value:n,fontSize:a,color:r,pageIndex:l}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((c,p)=>c!==r[p])||e.pageIndex!==l},w(ve,Fa),Ct(ve,"_freeTextDefaultContent",""),Ct(ve,"_internalPadding",0),Ct(ve,"_defaultColor",null),Ct(ve,"_defaultFontSize",10),Ct(ve,"_type","freetext"),Ct(ve,"_editorType",kt.FREETEXT);let O_=ve;class ut{toSVGPath(){ge("Abstract method `toSVGPath` must be implemented.")}get box(){ge("Abstract getter `box` must be implemented.")}serialize(t,e){ge("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,r,l){l||(l=new Float32Array(t.length));for(let c=0,p=t.length;c<p;c+=2)l[c]=e+t[c]*a,l[c+1]=n+t[c+1]*r;return l}static _rescaleAndSwap(t,e,n,a,r,l){l||(l=new Float32Array(t.length));for(let c=0,p=t.length;c<p;c+=2)l[c]=e+t[c+1]*a,l[c+1]=n+t[c]*r;return l}static _translate(t,e,n,a){a||(a=new Float32Array(t.length));for(let r=0,l=t.length;r<l;r+=2)a[r]=e+t[r],a[r+1]=n+t[r+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,r){switch(r){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,r,l){return[(t+5*n)/6,(e+5*a)/6,(5*n+r)/6,(5*a+l)/6,(n+r)/2,(a+l)/2]}}Ct(ut,"PRECISION",1e-4);var hi,is,Ac,Tc,Ns,zt,dl,fl,Uh,Oh,Sc,Cc,Fo,Vh,Ug,Og,Je,yf,OM,VM,BM,HM,GM,zM;const la=class la{constructor({x:t,y:e},n,a,r,l,c=0){w(this,Je);w(this,hi);w(this,is,[]);w(this,Ac);w(this,Tc);w(this,Ns,[]);w(this,zt,new Float32Array(18));w(this,dl);w(this,fl);w(this,Uh);w(this,Oh);w(this,Sc);w(this,Cc);w(this,Fo,[]);E(this,hi,n),E(this,Cc,r*a),E(this,Tc,l),g(this,zt).set([NaN,NaN,NaN,NaN,t,e],6),E(this,Ac,c),E(this,Oh,g(la,Vh)*a),E(this,Uh,g(la,Og)*a),E(this,Sc,a),g(this,Fo).push(t,e)}isEmpty(){return isNaN(g(this,zt)[8])}add({x:t,y:e}){var j;E(this,dl,t),E(this,fl,e);const[n,a,r,l]=g(this,hi);let[c,p,m,y]=g(this,zt).subarray(8,12);const _=t-m,T=e-y,S=Math.hypot(_,T);if(S<g(this,Uh))return!1;const C=S-g(this,Oh),x=C/S,D=x*_,N=x*T;let L=c,U=p;c=m,p=y,m+=D,y+=N,(j=g(this,Fo))==null||j.push(t,e);const P=-N/C,I=D/C,q=P*g(this,Cc),Y=I*g(this,Cc);return g(this,zt).set(g(this,zt).subarray(2,8),0),g(this,zt).set([m+q,y+Y],4),g(this,zt).set(g(this,zt).subarray(14,18),12),g(this,zt).set([m-q,y-Y],16),isNaN(g(this,zt)[6])?(g(this,Ns).length===0&&(g(this,zt).set([c+q,p+Y],2),g(this,Ns).push(NaN,NaN,NaN,NaN,(c+q-n)/r,(p+Y-a)/l),g(this,zt).set([c-q,p-Y],14),g(this,is).push(NaN,NaN,NaN,NaN,(c-q-n)/r,(p-Y-a)/l)),g(this,zt).set([L,U,c,p,m,y],6),!this.isEmpty()):(g(this,zt).set([L,U,c,p,m,y],6),Math.abs(Math.atan2(U-p,L-c)-Math.atan2(N,D))<Math.PI/2?([c,p,m,y]=g(this,zt).subarray(2,6),g(this,Ns).push(NaN,NaN,NaN,NaN,((c+m)/2-n)/r,((p+y)/2-a)/l),[c,p,L,U]=g(this,zt).subarray(14,18),g(this,is).push(NaN,NaN,NaN,NaN,((L+c)/2-n)/r,((U+p)/2-a)/l),!0):([L,U,c,p,m,y]=g(this,zt).subarray(0,6),g(this,Ns).push(((L+5*c)/6-n)/r,((U+5*p)/6-a)/l,((5*c+m)/6-n)/r,((5*p+y)/6-a)/l,((c+m)/2-n)/r,((p+y)/2-a)/l),[m,y,c,p,L,U]=g(this,zt).subarray(12,18),g(this,is).push(((L+5*c)/6-n)/r,((U+5*p)/6-a)/l,((5*c+m)/6-n)/r,((5*p+y)/6-a)/l,((c+m)/2-n)/r,((p+y)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=g(this,Ns),e=g(this,is);if(isNaN(g(this,zt)[6])&&!this.isEmpty())return M(this,Je,OM).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);M(this,Je,BM).call(this,n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return M(this,Je,VM).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,a,r,l){return new qM(t,e,n,a,r,l)}getOutlines(){var _;const t=g(this,Ns),e=g(this,is),n=g(this,zt),[a,r,l,c]=g(this,hi),p=new Float32Array((((_=g(this,Fo))==null?void 0:_.length)??0)+2);for(let T=0,S=p.length-2;T<S;T+=2)p[T]=(g(this,Fo)[T]-a)/l,p[T+1]=(g(this,Fo)[T+1]-r)/c;if(p[p.length-2]=(g(this,dl)-a)/l,p[p.length-1]=(g(this,fl)-r)/c,isNaN(n[6])&&!this.isEmpty())return M(this,Je,HM).call(this,p);const m=new Float32Array(g(this,Ns).length+24+g(this,is).length);let y=t.length;for(let T=0;T<y;T+=2){if(isNaN(t[T])){m[T]=m[T+1]=NaN;continue}m[T]=t[T],m[T+1]=t[T+1]}y=M(this,Je,zM).call(this,m,y);for(let T=e.length-6;T>=6;T-=6)for(let S=0;S<6;S+=2){if(isNaN(e[T+S])){m[y]=m[y+1]=NaN,y+=2;continue}m[y]=e[T+S],m[y+1]=e[T+S+1],y+=2}return M(this,Je,GM).call(this,m,y),this.newFreeDrawOutline(m,p,g(this,hi),g(this,Sc),g(this,Ac),g(this,Tc))}};hi=new WeakMap,is=new WeakMap,Ac=new WeakMap,Tc=new WeakMap,Ns=new WeakMap,zt=new WeakMap,dl=new WeakMap,fl=new WeakMap,Uh=new WeakMap,Oh=new WeakMap,Sc=new WeakMap,Cc=new WeakMap,Fo=new WeakMap,Vh=new WeakMap,Ug=new WeakMap,Og=new WeakMap,Je=new WeakSet,yf=function(){const t=g(this,zt).subarray(4,6),e=g(this,zt).subarray(16,18),[n,a,r,l]=g(this,hi);return[(g(this,dl)+(t[0]-e[0])/2-n)/r,(g(this,fl)+(t[1]-e[1])/2-a)/l,(g(this,dl)+(e[0]-t[0])/2-n)/r,(g(this,fl)+(e[1]-t[1])/2-a)/l]},OM=function(){const[t,e,n,a]=g(this,hi),[r,l,c,p]=M(this,Je,yf).call(this);return`M${(g(this,zt)[2]-t)/n} ${(g(this,zt)[3]-e)/a} L${(g(this,zt)[4]-t)/n} ${(g(this,zt)[5]-e)/a} L${r} ${l} L${c} ${p} L${(g(this,zt)[16]-t)/n} ${(g(this,zt)[17]-e)/a} L${(g(this,zt)[14]-t)/n} ${(g(this,zt)[15]-e)/a} Z`},VM=function(t){const e=g(this,is);t.push(`L${e[4]} ${e[5]} Z`)},BM=function(t){const[e,n,a,r]=g(this,hi),l=g(this,zt).subarray(4,6),c=g(this,zt).subarray(16,18),[p,m,y,_]=M(this,Je,yf).call(this);t.push(`L${(l[0]-e)/a} ${(l[1]-n)/r} L${p} ${m} L${y} ${_} L${(c[0]-e)/a} ${(c[1]-n)/r}`)},HM=function(t){const e=g(this,zt),[n,a,r,l]=g(this,hi),[c,p,m,y]=M(this,Je,yf).call(this),_=new Float32Array(36);return _.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-a)/l,NaN,NaN,NaN,NaN,c,p,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-a)/l],0),this.newFreeDrawOutline(_,t,g(this,hi),g(this,Sc),g(this,Ac),g(this,Tc))},GM=function(t,e){const n=g(this,is);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},zM=function(t,e){const n=g(this,zt).subarray(4,6),a=g(this,zt).subarray(16,18),[r,l,c,p]=g(this,hi),[m,y,_,T]=M(this,Je,yf).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/c,(n[1]-l)/p,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,_,T,NaN,NaN,NaN,NaN,(a[0]-r)/c,(a[1]-l)/p],e),e+=24},w(la,Vh,8),w(la,Ug,2),w(la,Og,g(la,Vh)+g(la,Ug));let _g=la;var Ec,hl,wa,Bh,pi,Hh,Pe,Vg,$M;class qM extends ut{constructor(e,n,a,r,l,c){super();w(this,Vg);w(this,Ec);w(this,hl,new Float32Array(4));w(this,wa);w(this,Bh);w(this,pi);w(this,Hh);w(this,Pe);E(this,Pe,e),E(this,pi,n),E(this,Ec,a),E(this,Hh,r),E(this,wa,l),E(this,Bh,c),this.lastPoint=[NaN,NaN],M(this,Vg,$M).call(this,c);const[p,m,y,_]=g(this,hl);for(let T=0,S=e.length;T<S;T+=2)e[T]=(e[T]-p)/y,e[T+1]=(e[T+1]-m)/_;for(let T=0,S=n.length;T<S;T+=2)n[T]=(n[T]-p)/y,n[T+1]=(n[T+1]-m)/_}toSVGPath(){const e=[`M${g(this,Pe)[4]} ${g(this,Pe)[5]}`];for(let n=6,a=g(this,Pe).length;n<a;n+=6){if(isNaN(g(this,Pe)[n])){e.push(`L${g(this,Pe)[n+4]} ${g(this,Pe)[n+5]}`);continue}e.push(`C${g(this,Pe)[n]} ${g(this,Pe)[n+1]} ${g(this,Pe)[n+2]} ${g(this,Pe)[n+3]} ${g(this,Pe)[n+4]} ${g(this,Pe)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,r],l){const c=a-e,p=r-n;let m,y;switch(l){case 0:m=ut._rescale(g(this,Pe),e,r,c,-p),y=ut._rescale(g(this,pi),e,r,c,-p);break;case 90:m=ut._rescaleAndSwap(g(this,Pe),e,n,c,p),y=ut._rescaleAndSwap(g(this,pi),e,n,c,p);break;case 180:m=ut._rescale(g(this,Pe),a,n,-c,p),y=ut._rescale(g(this,pi),a,n,-c,p);break;case 270:m=ut._rescaleAndSwap(g(this,Pe),a,r,-c,-p),y=ut._rescaleAndSwap(g(this,pi),a,r,-c,-p);break}return{outline:Array.from(m),points:[Array.from(y)]}}get box(){return g(this,hl)}newOutliner(e,n,a,r,l,c=0){return new _g(e,n,a,r,l,c)}getNewOutline(e,n){const[a,r,l,c]=g(this,hl),[p,m,y,_]=g(this,Ec),T=l*y,S=c*_,C=a*y+p,x=r*_+m,D=this.newOutliner({x:g(this,pi)[0]*T+C,y:g(this,pi)[1]*S+x},g(this,Ec),g(this,Hh),e,g(this,Bh),n??g(this,wa));for(let N=2;N<g(this,pi).length;N+=2)D.add({x:g(this,pi)[N]*T+C,y:g(this,pi)[N+1]*S+x});return D.getOutlines()}}Ec=new WeakMap,hl=new WeakMap,wa=new WeakMap,Bh=new WeakMap,pi=new WeakMap,Hh=new WeakMap,Pe=new WeakMap,Vg=new WeakSet,$M=function(e){const n=g(this,Pe);let a=n[4],r=n[5],l=a,c=r,p=a,m=r,y=a,_=r;const T=e?Math.max:Math.min;for(let C=6,x=n.length;C<x;C+=6){if(isNaN(n[C]))l=Math.min(l,n[C+4]),c=Math.min(c,n[C+5]),p=Math.max(p,n[C+4]),m=Math.max(m,n[C+5]),_<n[C+5]?(y=n[C+4],_=n[C+5]):_===n[C+5]&&(y=T(y,n[C+4]));else{const D=_t.bezierBoundingBox(a,r,...n.slice(C,C+6));l=Math.min(l,D[0]),c=Math.min(c,D[1]),p=Math.max(p,D[2]),m=Math.max(m,D[3]),_<D[3]?(y=D[2],_=D[3]):_===D[3]&&(y=T(y,D[2]))}a=n[C+4],r=n[C+5]}const S=g(this,hl);S[0]=l-g(this,wa),S[1]=c-g(this,wa),S[2]=p-l+2*g(this,wa),S[3]=m-c+2*g(this,wa),this.lastPoint=[y,_]};var Gh,zh,Uo,ss,On,YM,Zm,XM,KM,H_;class B_{constructor(t,e=0,n=0,a=!0){w(this,On);w(this,Gh);w(this,zh);w(this,Uo,[]);w(this,ss,[]);let r=1/0,l=-1/0,c=1/0,p=-1/0;const m=10**-4;for(const{x:D,y:N,width:L,height:U}of t){const P=Math.floor((D-e)/m)*m,I=Math.ceil((D+L+e)/m)*m,q=Math.floor((N-e)/m)*m,Y=Math.ceil((N+U+e)/m)*m,tt=[P,q,Y,!0],j=[I,q,Y,!1];g(this,Uo).push(tt,j),r=Math.min(r,P),l=Math.max(l,I),c=Math.min(c,q),p=Math.max(p,Y)}const y=l-r+2*n,_=p-c+2*n,T=r-n,S=c-n,C=g(this,Uo).at(a?-1:-2),x=[C[0],C[2]];for(const D of g(this,Uo)){const[N,L,U]=D;D[0]=(N-T)/y,D[1]=(L-S)/_,D[2]=(U-S)/_}E(this,Gh,new Float32Array([T,S,y,_])),E(this,zh,x)}getOutlines(){g(this,Uo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of g(this,Uo))e[3]?(t.push(...M(this,On,H_).call(this,e)),M(this,On,XM).call(this,e)):(M(this,On,KM).call(this,e),t.push(...M(this,On,H_).call(this,e)));return M(this,On,YM).call(this,t)}}Gh=new WeakMap,zh=new WeakMap,Uo=new WeakMap,ss=new WeakMap,On=new WeakSet,YM=function(t){const e=[],n=new Set;for(const l of t){const[c,p,m]=l;e.push([c,p,l],[c,m,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const p=e[l][2],m=e[l+1][2];p.push(m),m.push(p),n.add(p),n.add(m)}const a=[];let r;for(;n.size>0;){const l=n.values().next().value;let[c,p,m,y,_]=l;n.delete(l);let T=c,S=p;for(r=[c,m],a.push(r);;){let C;if(n.has(y))C=y;else if(n.has(_))C=_;else break;n.delete(C),[c,p,m,y,_]=C,T!==c&&(r.push(T,S,c,S===p?p:m),T=c),S=S===p?m:p}r.push(T,S)}return new z3(a,g(this,Gh),g(this,zh))},Zm=function(t){const e=g(this,ss);let n=0,a=e.length-1;for(;n<=a;){const r=n+a>>1,l=e[r][0];if(l===t)return r;l<t?n=r+1:a=r-1}return a+1},XM=function([,t,e]){const n=M(this,On,Zm).call(this,t);g(this,ss).splice(n,0,[t,e])},KM=function([,t,e]){const n=M(this,On,Zm).call(this,t);for(let a=n;a<g(this,ss).length;a++){const[r,l]=g(this,ss)[a];if(r!==t)break;if(r===t&&l===e){g(this,ss).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[r,l]=g(this,ss)[a];if(r!==t)break;if(r===t&&l===e){g(this,ss).splice(a,1);return}}},H_=function(t){const[e,n,a]=t,r=[[e,n,a]],l=M(this,On,Zm).call(this,a);for(let c=0;c<l;c++){const[p,m]=g(this,ss)[c];for(let y=0,_=r.length;y<_;y++){const[,T,S]=r[y];if(!(m<=T||S<=p)){if(T>=p){if(S>m)r[y][1]=m;else{if(_===1)return[];r.splice(y,1),y--,_--}continue}r[y][2]=p,S>m&&r.push([e,m,S])}}}return r};var qh,bc;class z3 extends ut{constructor(e,n,a){super();w(this,qh);w(this,bc);E(this,bc,e),E(this,qh,n),this.lastPoint=a}toSVGPath(){const e=[];for(const n of g(this,bc)){let[a,r]=n;e.push(`M${a} ${r}`);for(let l=2;l<n.length;l+=2){const c=n[l],p=n[l+1];c===a?(e.push(`V${p}`),r=p):p===r&&(e.push(`H${c}`),a=c)}e.push("Z")}return e.join(" ")}serialize([e,n,a,r],l){const c=[],p=a-e,m=r-n;for(const y of g(this,bc)){const _=new Array(y.length);for(let T=0;T<y.length;T+=2)_[T]=e+y[T]*p,_[T+1]=r-y[T+1]*m;c.push(_)}return c}get box(){return g(this,qh)}get classNamesForOutlining(){return["highlightOutline"]}}qh=new WeakMap,bc=new WeakMap;class G_ extends _g{newFreeDrawOutline(t,e,n,a,r,l){return new q3(t,e,n,a,r,l)}}class q3 extends qM{newOutliner(t,e,n,a,r,l=0){return new G_(t,e,n,a,r,l)}}var as,pl,xc,Ke,$h,wc,Yh,Xh,Oo,os,Mc,Kh,he,z_,q_,$_,Ar,JM,po;const Xn=class Xn{constructor({editor:t=null,uiManager:e=null}){w(this,he);w(this,as,null);w(this,pl,null);w(this,xc);w(this,Ke,null);w(this,$h,!1);w(this,wc,!1);w(this,Yh,null);w(this,Xh);w(this,Oo,null);w(this,os,null);w(this,Mc);var n;t?(E(this,wc,!1),E(this,Mc,Xt.HIGHLIGHT_COLOR),E(this,Yh,t)):(E(this,wc,!0),E(this,Mc,Xt.HIGHLIGHT_DEFAULT_COLOR)),E(this,os,(t==null?void 0:t._uiManager)||e),E(this,Xh,g(this,os)._eventBus),E(this,xc,(t==null?void 0:t.color)||((n=g(this,os))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),g(Xn,Kh)||E(Xn,Kh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return qt(this,"_keyboardManager",new sp([[["Escape","mac+Escape"],Xn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Xn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Xn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Xn.prototype._moveToPrevious],[["Home","mac+Home"],Xn.prototype._moveToBeginning],[["End","mac+End"],Xn.prototype._moveToEnd]]))}renderButton(){const t=E(this,as,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=g(this,os)._signal;t.addEventListener("click",M(this,he,Ar).bind(this),{signal:e}),t.addEventListener("keydown",M(this,he,$_).bind(this),{signal:e});const n=E(this,pl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=g(this,xc),t.append(n),t}renderMainDropdown(){const t=E(this,Ke,M(this,he,z_).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===g(this,as)){M(this,he,Ar).call(this,t);return}const e=t.target.getAttribute("data-color");e&&M(this,he,q_).call(this,e,t)}_moveToNext(t){var e,n;if(!g(this,he,po)){M(this,he,Ar).call(this,t);return}if(t.target===g(this,as)){(e=g(this,Ke).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=g(this,Ke))==null?void 0:e.firstChild)||t.target===g(this,as)){g(this,he,po)&&this._hideDropdownFromKeyboard();return}g(this,he,po)||M(this,he,Ar).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!g(this,he,po)){M(this,he,Ar).call(this,t);return}(e=g(this,Ke).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!g(this,he,po)){M(this,he,Ar).call(this,t);return}(e=g(this,Ke).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=g(this,Ke))==null||t.classList.add("hidden"),(e=g(this,Oo))==null||e.abort(),E(this,Oo,null)}_hideDropdownFromKeyboard(){var t;if(!g(this,wc)){if(!g(this,he,po)){(t=g(this,Yh))==null||t.unselect();return}this.hideDropdown(),g(this,as).focus({preventScroll:!0,focusVisible:g(this,$h)})}}updateColor(t){if(g(this,pl)&&(g(this,pl).style.backgroundColor=t),!g(this,Ke))return;const e=g(this,os).highlightColors.values();for(const n of g(this,Ke).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=g(this,as))==null||t.remove(),E(this,as,null),E(this,pl,null),(e=g(this,Ke))==null||e.remove(),E(this,Ke,null)}};as=new WeakMap,pl=new WeakMap,xc=new WeakMap,Ke=new WeakMap,$h=new WeakMap,wc=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,Oo=new WeakMap,os=new WeakMap,Mc=new WeakMap,Kh=new WeakMap,he=new WeakSet,z_=function(){const t=document.createElement("div"),e=g(this,os)._signal;t.addEventListener("contextmenu",cs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,a]of g(this,os).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",a),r.title=n,r.setAttribute("data-l10n-id",g(Xn,Kh)[n]);const l=document.createElement("span");r.append(l),l.className="swatch",l.style.backgroundColor=a,r.setAttribute("aria-selected",a===g(this,xc)),r.addEventListener("click",M(this,he,q_).bind(this,a),{signal:e}),t.append(r)}return t.addEventListener("keydown",M(this,he,$_).bind(this),{signal:e}),t},q_=function(t,e){e.stopPropagation(),g(this,Xh).dispatch("switchannotationeditorparams",{source:this,type:g(this,Mc),value:t})},$_=function(t){Xn._keyboardManager.exec(this,t)},Ar=function(t){if(g(this,he,po)){this.hideDropdown();return}if(E(this,$h,t.detail===0),g(this,Oo)||(E(this,Oo,new AbortController),window.addEventListener("pointerdown",M(this,he,JM).bind(this),{signal:g(this,os).combinedSignal(g(this,Oo))})),g(this,Ke)){g(this,Ke).classList.remove("hidden");return}const e=E(this,Ke,M(this,he,z_).call(this));g(this,as).append(e)},JM=function(t){var e;(e=g(this,Ke))!=null&&e.contains(t.target)||this.hideDropdown()},po=function(){return g(this,Ke)&&!g(this,Ke).classList.contains("hidden")},w(Xn,Kh,null);let Ag=Xn;var Rc,Jh,Ma,ml,Dc,Wn,Wh,Zh,gl,Fi,mi,fn,Nc,Ra,En,Ic,Ui,Qh,Nt,Y_,Qm,WM,ZM,QM,X_,Tr,Hi,Du,jM,jm,vf,t1,e1,n1,i1,s1;const ie=class ie extends Me{constructor(e){super({...e,name:"highlightEditor"});w(this,Nt);w(this,Rc,null);w(this,Jh,0);w(this,Ma);w(this,ml,null);w(this,Dc,null);w(this,Wn,null);w(this,Wh,null);w(this,Zh,0);w(this,gl,null);w(this,Fi,null);w(this,mi,null);w(this,fn,!1);w(this,Nc,null);w(this,Ra);w(this,En,null);w(this,Ic,"");w(this,Ui);w(this,Qh,"");this.color=e.color||ie._defaultColor,E(this,Ui,e.thickness||ie._defaultThickness),E(this,Ra,e.opacity||ie._defaultOpacity),E(this,Ma,e.boxes||null),E(this,Qh,e.methodOfCreation||""),E(this,Ic,e.text||""),this._isDraggable=!1,e.highlightId>-1?(E(this,fn,!0),M(this,Nt,Qm).call(this,e),M(this,Nt,Tr).call(this)):g(this,Ma)&&(E(this,Rc,e.anchorNode),E(this,Jh,e.anchorOffset),E(this,Wh,e.focusNode),E(this,Zh,e.focusOffset),M(this,Nt,Y_).call(this),M(this,Nt,Tr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=ie.prototype;return qt(this,"_keyboardManager",new sp([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:g(this,fn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:g(this,Ui),methodOfCreation:g(this,Qh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;Me.initialize(e,n),ie._defaultColor||(ie._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Xt.HIGHLIGHT_DEFAULT_COLOR:ie._defaultColor=n;break;case Xt.HIGHLIGHT_THICKNESS:ie._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return g(this,Nc)}updateParams(e,n){switch(e){case Xt.HIGHLIGHT_COLOR:M(this,Nt,WM).call(this,n);break;case Xt.HIGHLIGHT_THICKNESS:M(this,Nt,ZM).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Xt.HIGHLIGHT_DEFAULT_COLOR,ie._defaultColor],[Xt.HIGHLIGHT_THICKNESS,ie._defaultThickness]]}get propertiesToUpdate(){return[[Xt.HIGHLIGHT_COLOR,this.color||ie._defaultColor],[Xt.HIGHLIGHT_THICKNESS,g(this,Ui)||ie._defaultThickness],[Xt.HIGHLIGHT_FREE,g(this,fn)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(E(this,Dc,new Ag({editor:this})),e.addColorPicker(g(this,Dc))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(M(this,Nt,vf).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,M(this,Nt,vf).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){M(this,Nt,X_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(M(this,Nt,Tr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?M(this,Nt,X_).call(this):e&&(M(this,Nt,Tr).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,l,c;const{drawLayer:n}=this.parent;let a;g(this,fn)?(e=(e-this.rotation+360)%360,a=M(r=ie,Hi,Du).call(r,g(this,Fi).box,e)):a=M(l=ie,Hi,Du).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(g(this,mi),{bbox:a,root:{"data-main-rotation":e}}),n.updateProperties(g(this,En),{bbox:M(c=ie,Hi,Du).call(c,g(this,Wn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();g(this,Ic)&&(e.setAttribute("aria-label",g(this,Ic)),e.setAttribute("role","mark")),g(this,fn)?e.classList.add("free"):this.div.addEventListener("keydown",M(this,Nt,jM).bind(this),{signal:this._uiManager._signal});const n=E(this,gl,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=g(this,ml);const[a,r]=this.parentDimensions;return this.setDims(this.width*a,this.height*r),gg(this,g(this,gl),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(g(this,En),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(g(this,En),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:M(this,Nt,jm).call(this,!0);break;case 1:case 3:M(this,Nt,jm).call(this,!1);break}}select(){var e;super.select(),g(this,En)&&((e=this.parent)==null||e.drawLayer.updateProperties(g(this,En),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),g(this,En)&&((e=this.parent)==null||e.drawLayer.updateProperties(g(this,En),{rootClass:{selected:!1}}),g(this,fn)||M(this,Nt,jm).call(this,!1))}get _mustFixPosition(){return!g(this,fn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(g(this,mi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(g(this,En),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:a,x:r,y:l}){const{x:c,y:p,width:m,height:y}=a.getBoundingClientRect(),_=new AbortController,T=e.combinedSignal(_),S=C=>{_.abort(),M(this,Hi,i1).call(this,e,C)};window.addEventListener("blur",S,{signal:T}),window.addEventListener("pointerup",S,{signal:T}),window.addEventListener("pointerdown",Ti,{capture:!0,passive:!1,signal:T}),window.addEventListener("contextmenu",cs,{signal:T}),a.addEventListener("pointermove",M(this,Hi,n1).bind(this,e),{signal:T}),this._freeHighlight=new G_({x:r,y:l},[c,p,m,y],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,a){var x,D,N,L;let r=null;if(e instanceof DM){const{data:{quadPoints:U,rect:P,rotation:I,id:q,color:Y,opacity:tt,popupRef:j},parent:{page:{pageNumber:at}}}=e;r=e={annotationType:kt.HIGHLIGHT,color:Array.from(Y),opacity:tt,quadPoints:U,boxes:null,pageIndex:at-1,rect:P.slice(0),rotation:I,id:q,deleted:!1,popupRef:j}}else if(e instanceof bA){const{data:{inkLists:U,rect:P,rotation:I,id:q,color:Y,borderStyle:{rawWidth:tt},popupRef:j},parent:{page:{pageNumber:at}}}=e;r=e={annotationType:kt.HIGHLIGHT,color:Array.from(Y),thickness:tt,inkLists:U,boxes:null,pageIndex:at-1,rect:P.slice(0),rotation:I,id:q,deleted:!1,popupRef:j}}const{color:l,quadPoints:c,inkLists:p,opacity:m}=e,y=await super.deserialize(e,n,a);y.color=_t.makeHexColor(...l),E(y,Ra,m||1),p&&E(y,Ui,e.thickness),y.annotationElementId=e.id||null,y._initialData=r;const[_,T]=y.pageDimensions,[S,C]=y.pageTranslation;if(c){const U=E(y,Ma,[]);for(let P=0;P<c.length;P+=8)U.push({x:(c[P]-S)/_,y:1-(c[P+1]-C)/T,width:(c[P+2]-c[P])/_,height:(c[P+1]-c[P+5])/T});M(x=y,Nt,Y_).call(x),M(D=y,Nt,Tr).call(D),y.rotate(y.rotation)}else if(p){E(y,fn,!0);const U=p[0],P={x:U[0]-S,y:T-(U[1]-C)},I=new G_(P,[0,0,_,T],1,g(y,Ui)/2,!0,.001);for(let tt=0,j=U.length;tt<j;tt+=2)P.x=U[tt]-S,P.y=T-(U[tt+1]-C),I.add(P);const{id:q,clipPathId:Y}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:y.color,"fill-opacity":y._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);M(N=y,Nt,Qm).call(N,{highlightOutlines:I.getOutlines(),highlightId:q,clipPathId:Y}),M(L=y,Nt,Tr).call(L)}return y}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),a=Me._colorManager.convert(this.color),r={annotationType:kt.HIGHLIGHT,color:a,opacity:g(this,Ra),thickness:g(this,Ui),quadPoints:M(this,Nt,t1).call(this),outlines:M(this,Nt,e1).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:M(this,Nt,vf).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!M(this,Nt,s1).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Rc=new WeakMap,Jh=new WeakMap,Ma=new WeakMap,ml=new WeakMap,Dc=new WeakMap,Wn=new WeakMap,Wh=new WeakMap,Zh=new WeakMap,gl=new WeakMap,Fi=new WeakMap,mi=new WeakMap,fn=new WeakMap,Nc=new WeakMap,Ra=new WeakMap,En=new WeakMap,Ic=new WeakMap,Ui=new WeakMap,Qh=new WeakMap,Nt=new WeakSet,Y_=function(){const e=new B_(g(this,Ma),.001);E(this,Fi,e.getOutlines()),[this.x,this.y,this.width,this.height]=g(this,Fi).box;const n=new B_(g(this,Ma),.0025,.001,this._uiManager.direction==="ltr");E(this,Wn,n.getOutlines());const{lastPoint:a}=g(this,Wn);E(this,Nc,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},Qm=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var _,T;if(E(this,Fi,e),E(this,Wn,e.getNewOutline(g(this,Ui)/2+1.5,.0025)),n>=0)E(this,mi,n),E(this,ml,a),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),E(this,En,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:g(this,Wn).box,path:{d:g(this,Wn).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(g(this,mi),{bbox:M(_=ie,Hi,Du).call(_,g(this,Fi).box,(S-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(g(this,En),{bbox:M(T=ie,Hi,Du).call(T,g(this,Wn).box,S),path:{d:g(this,Wn).toSVGPath()}})}const[l,c,p,m]=e.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=p,this.height=m;break;case 90:{const[S,C]=this.parentDimensions;this.x=c,this.y=1-l,this.width=p*C/S,this.height=m*S/C;break}case 180:this.x=1-l,this.y=1-c,this.width=p,this.height=m;break;case 270:{const[S,C]=this.parentDimensions;this.x=1-c,this.y=l,this.width=p*C/S,this.height=m*S/C;break}}const{lastPoint:y}=g(this,Wn);E(this,Nc,[(y[0]-l)/p,(y[1]-c)/m])},WM=function(e){const n=(l,c)=>{var p,m;this.color=l,E(this,Ra,c),(p=this.parent)==null||p.drawLayer.updateProperties(g(this,mi),{root:{fill:l,"fill-opacity":c}}),(m=g(this,Dc))==null||m.updateColor(l)},a=this.color,r=g(this,Ra);this.addCommands({cmd:n.bind(this,e,ie._defaultOpacity),undo:n.bind(this,a,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},ZM=function(e){const n=g(this,Ui),a=r=>{E(this,Ui,r),M(this,Nt,QM).call(this,r)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},QM=function(e){if(!g(this,fn))return;M(this,Nt,Qm).call(this,{highlightOutlines:g(this,Fi).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)},X_=function(){g(this,mi)===null||!this.parent||(this.parent.drawLayer.remove(g(this,mi)),E(this,mi,null),this.parent.drawLayer.remove(g(this,En)),E(this,En,null))},Tr=function(e=this.parent){g(this,mi)===null&&({id:Dn(this,mi)._,clipPathId:Dn(this,ml)._}=e.drawLayer.draw({bbox:g(this,Fi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":g(this,Ra)},rootClass:{highlight:!0,free:g(this,fn)},path:{d:g(this,Fi).toSVGPath()}},!1,!0),E(this,En,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:g(this,fn)},bbox:g(this,Wn).box,path:{d:g(this,Wn).toSVGPath()}},g(this,fn))),g(this,gl)&&(g(this,gl).style.clipPath=g(this,ml)))},Hi=new WeakSet,Du=function([e,n,a,r],l){switch(l){case 90:return[1-n-r,e,r,a];case 180:return[1-e-a,1-n-r,a,r];case 270:return[n,1-e-a,r,a]}return[e,n,a,r]},jM=function(e){ie._keyboardManager.exec(this,e)},jm=function(e){if(!g(this,Rc))return;const n=window.getSelection();e?n.setPosition(g(this,Rc),g(this,Jh)):n.setPosition(g(this,Wh),g(this,Zh))},vf=function(){return g(this,fn)?this.rotation:0},t1=function(){if(g(this,fn))return null;const[e,n]=this.pageDimensions,[a,r]=this.pageTranslation,l=g(this,Ma),c=new Float32Array(l.length*8);let p=0;for(const{x:m,y,width:_,height:T}of l){const S=m*e+a,C=(1-y)*n+r;c[p]=c[p+4]=S,c[p+1]=c[p+3]=C,c[p+2]=c[p+6]=S+_*e,c[p+5]=c[p+7]=C-T*n,p+=8}return c},e1=function(e){return g(this,Fi).serialize(e,M(this,Nt,vf).call(this))},n1=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},i1=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},s1=function(e){const{color:n}=this._initialData;return e.color.some((a,r)=>a!==n[r])},w(ie,Hi),Ct(ie,"_defaultColor",null),Ct(ie,"_defaultOpacity",1),Ct(ie,"_defaultThickness",12),Ct(ie,"_type","highlight"),Ct(ie,"_editorType",kt.HIGHLIGHT),Ct(ie,"_freeHighlightId",-1),Ct(ie,"_freeHighlight",null),Ct(ie,"_freeHighlightClipId","");let Tg=ie;var yl;class $3{constructor(){w(this,yl,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){g(this,yl)[t]=e}toSVGProperties(){const t=g(this,yl);return E(this,yl,Object.create(null)),{root:t}}reset(){E(this,yl,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ge("Not implemented")}}yl=new WeakMap;var gi,Lc,sn,vl,_l,Vo,Bo,Ho,Al,Wt,J_,W_,Z_,_f,a1,tg,Af,Nu;const ct=class ct extends Me{constructor(e){super(e);w(this,Wt);w(this,gi,null);w(this,Lc);Ct(this,"_drawId",null);E(this,Lc,e.mustBeCommitted||!1),e.drawOutlines&&(M(this,Wt,J_).call(this,e),M(this,Wt,_f).call(this))}static _mergeSVGProperties(e,n){const a=new Set(Object.keys(e));for(const[r,l]of Object.entries(n))a.has(r)?Object.assign(e[r],l):e[r]=l;return e}static getDefaultDrawingOptions(e){ge("Not implemented")}static get typesMap(){ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const a=this.typesMap.get(e);a&&this._defaultDrawingOptions.updateProperty(a,n),this._currentParent&&(g(ct,sn).updateProperty(a,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const a=this.constructor.typesMap.get(e);a&&this._updateProperty(e,a,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[a,r]of this.typesMap)e.push([a,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[a,r]of this.constructor.typesMap)e.push([a,n[r]]);return e}_updateProperty(e,n,a){const r=this._drawingOptions,l=r[n],c=p=>{var y;r.updateProperty(n,p);const m=g(this,gi).updateProperty(n,p);m&&M(this,Wt,Af).call(this,m),(y=this.parent)==null||y.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:c.bind(this,a),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(g(this,gi).getPathResizingSVGProperties(M(this,Wt,tg).call(this)),{bbox:M(this,Wt,Nu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(g(this,gi).getPathResizedSVGProperties(M(this,Wt,tg).call(this)),{bbox:M(this,Wt,Nu).call(this)}))}_onTranslating(e,n){var a;(a=this.parent)==null||a.drawLayer.updateProperties(this._drawId,{bbox:M(this,Wt,Nu).call(this,e,n)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(g(this,gi).getPathTranslatedSVGProperties(M(this,Wt,tg).call(this),this.parentDimensions),{bbox:M(this,Wt,Nu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,g(this,Lc)&&(E(this,Lc,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){M(this,Wt,Z_).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(M(this,Wt,_f).call(this),M(this,Wt,Af).call(this,g(this,gi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),M(this,Wt,Z_).call(this)):e&&(this._uiManager.addShouldRescale(this),M(this,Wt,_f).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties({bbox:M(this,Wt,Nu).call(this)},g(this,gi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&M(this,Wt,Af).call(this,g(this,gi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const n=document.createElement("div");e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[a,r]=this.parentDimensions;return this.setDims(this.width*a,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,n,a,r,l){ge("Not implemented")}static startDrawing(e,n,a,r){var D;const{target:l,offsetX:c,offsetY:p,pointerId:m,pointerType:y}=r;if(g(ct,Bo)&&g(ct,Bo)!==y)return;const{viewport:{rotation:_}}=e,{width:T,height:S}=l.getBoundingClientRect(),C=E(ct,vl,new AbortController),x=e.combinedSignal(C);if(g(ct,Vo)||E(ct,Vo,m),g(ct,Bo)??E(ct,Bo,y),window.addEventListener("pointerup",N=>{var L;g(ct,Vo)===N.pointerId?this._endDraw(N):(L=g(ct,Ho))==null||L.delete(N.pointerId)},{signal:x}),window.addEventListener("pointercancel",N=>{var L;g(ct,Vo)===N.pointerId?this._currentParent.endDrawingSession():(L=g(ct,Ho))==null||L.delete(N.pointerId)},{signal:x}),window.addEventListener("pointerdown",N=>{g(ct,Bo)===N.pointerType&&((g(ct,Ho)||E(ct,Ho,new Set)).add(N.pointerId),g(ct,sn).isCancellable()&&(g(ct,sn).removeLastElement(),g(ct,sn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",cs,{signal:x}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),l.addEventListener("touchmove",N=>{N.timeStamp===g(ct,Al)&&Ti(N)},{signal:x}),e.toggleDrawing(),(D=n._editorUndoBar)==null||D.hide(),g(ct,sn)){e.drawLayer.updateProperties(this._currentDrawId,g(ct,sn).startNew(c,p,T,S,_));return}n.updateUIForDefaultProperties(this),E(ct,sn,this.createDrawerInstance(c,p,T,S,_)),E(ct,_l,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(g(ct,_l).toSVGProperties(),g(ct,sn).defaultSVGProperties),!0,!1)}static _drawMove(e){var l;if(E(ct,Al,-1),!g(ct,sn))return;const{offsetX:n,offsetY:a,pointerId:r}=e;if(g(ct,Vo)===r){if(((l=g(ct,Ho))==null?void 0:l.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,g(ct,sn).add(n,a)),E(ct,Al,e.timeStamp),Ti(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,E(ct,sn,null),E(ct,_l,null),E(ct,Bo,null),E(ct,Al,NaN)),g(ct,vl)&&(g(ct,vl).abort(),E(ct,vl,null),E(ct,Vo,NaN),E(ct,Ho,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e&&n.drawLayer.updateProperties(this._currentDrawId,g(ct,sn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const a=g(ct,sn),r=this._currentDrawId,l=a.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,a.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(r,a.removeLastElement())},mustExec:!1,type:Xt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Xt.DRAW_STEP),!g(ct,sn).isEmpty()){const{pageDimensions:[a,r],scale:l}=n,c=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:g(ct,sn).getOutlines(a*l,r*l,l,this._INNER_MARGIN),drawingOptions:g(ct,_l),mustBeCommitted:!e});return this._cleanup(!0),c}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,a,r,l,c){ge("Not implemented")}static async deserialize(e,n,a){var _,T;const{rawDims:{pageWidth:r,pageHeight:l,pageX:c,pageY:p}}=n.viewport,m=this.deserializeDraw(c,p,r,l,this._INNER_MARGIN,e),y=await super.deserialize(e,n,a);return y.createDrawingOptions(e),M(_=y,Wt,J_).call(_,{drawOutlines:m}),M(T=y,Wt,_f).call(T),y.onScaleChanging(),y.rotate(),y}serializeDraw(e){const[n,a]=this.pageTranslation,[r,l]=this.pageDimensions;return g(this,gi).serialize([n,a,r,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};gi=new WeakMap,Lc=new WeakMap,sn=new WeakMap,vl=new WeakMap,_l=new WeakMap,Vo=new WeakMap,Bo=new WeakMap,Ho=new WeakMap,Al=new WeakMap,Wt=new WeakSet,J_=function({drawOutlines:e,drawId:n,drawingOptions:a}){E(this,gi,e),this._drawingOptions||(this._drawingOptions=a),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=M(this,Wt,W_).call(this,e,this.parent),M(this,Wt,Af).call(this,e.box)},W_=function(e,n){const{id:a}=n.drawLayer.draw(ct._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return a},Z_=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},_f=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=M(this,Wt,W_).call(this,g(this,gi),e)}},a1=function([e,n,a,r]){const{parentDimensions:[l,c],rotation:p}=this;switch(p){case 90:return[n,1-e,a*(c/l),r*(l/c)];case 180:return[1-e,1-n,a,r];case 270:return[1-n,e,a*(c/l),r*(l/c)];default:return[e,n,a,r]}},tg=function(){const{x:e,y:n,width:a,height:r,parentDimensions:[l,c],rotation:p}=this;switch(p){case 90:return[1-n,e,a*(l/c),r*(c/l)];case 180:return[1-e,1-n,a,r];case 270:return[n,1-e,a*(l/c),r*(c/l)];default:return[e,n,a,r]}},Af=function(e){if([this.x,this.y,this.width,this.height]=M(this,Wt,a1).call(this,e),this.div){this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)}this._onResized()},Nu=function(){const{x:e,y:n,width:a,height:r,rotation:l,parentRotation:c,parentDimensions:[p,m]}=this;switch((l*4+c)/90){case 1:return[1-n-r,e,r,a];case 2:return[1-e-a,1-n-r,a,r];case 3:return[n,1-e-a,r,a];case 4:return[e,n-a*(p/m),r*(m/p),a*(p/m)];case 5:return[1-n,e,a*(p/m),r*(m/p)];case 6:return[1-e-r*(m/p),1-n,r*(m/p),a*(p/m)];case 7:return[n-a*(p/m),1-e-r*(m/p),a*(p/m),r*(m/p)];case 8:return[e-a,n-r,a,r];case 9:return[1-n,e-a,r,a];case 10:return[1-e,1-n,a,r];case 11:return[n-r,1-e,r,a];case 12:return[e-r*(m/p),n,r*(m/p),a*(p/m)];case 13:return[1-n-a*(p/m),e-r*(m/p),a*(p/m),r*(m/p)];case 14:return[1-e,1-n-a*(p/m),r*(m/p),a*(p/m)];case 15:return[n,1-e,a*(p/m),r*(m/p)];default:return[e,n,a,r]}},Ct(ct,"_currentDrawId",-1),Ct(ct,"_currentParent",null),w(ct,sn,null),w(ct,vl,null),w(ct,_l,null),w(ct,Vo,NaN),w(ct,Bo,null),w(ct,Ho,null),w(ct,Al,NaN),Ct(ct,"_INNER_MARGIN",3);let K_=ct;var Is,an,on,Tl,kc,Ln,hn,Oi,Sl,Cl,El,Pc,eg;class Y3{constructor(t,e,n,a,r,l){w(this,Pc);w(this,Is,new Float64Array(6));w(this,an);w(this,on);w(this,Tl);w(this,kc);w(this,Ln);w(this,hn,"");w(this,Oi,0);w(this,Sl,new Sg);w(this,Cl);w(this,El);E(this,Cl,n),E(this,El,a),E(this,Tl,r),E(this,kc,l),[t,e]=M(this,Pc,eg).call(this,t,e);const c=E(this,an,[NaN,NaN,NaN,NaN,t,e]);E(this,Ln,[t,e]),E(this,on,[{line:c,points:g(this,Ln)}]),g(this,Is).set(c,0)}updateProperty(t,e){t==="stroke-width"&&E(this,kc,e)}isEmpty(){return!g(this,on)||g(this,on).length===0}isCancellable(){return g(this,Ln).length<=10}add(t,e){[t,e]=M(this,Pc,eg).call(this,t,e);const[n,a,r,l]=g(this,Is).subarray(2,6),c=t-r,p=e-l;return Math.hypot(g(this,Cl)*c,g(this,El)*p)<=2?null:(g(this,Ln).push(t,e),isNaN(n)?(g(this,Is).set([r,l,t,e],2),g(this,an).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(g(this,Is)[0])&&g(this,an).splice(6,6),g(this,Is).set([n,a,r,l,t,e],0),g(this,an).push(...ut.createBezierPoints(n,a,r,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(g(this,Ln).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,r){E(this,Cl,n),E(this,El,a),E(this,Tl,r),[t,e]=M(this,Pc,eg).call(this,t,e);const l=E(this,an,[NaN,NaN,NaN,NaN,t,e]);E(this,Ln,[t,e]);const c=g(this,on).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),g(this,on).push({line:l,points:g(this,Ln)}),g(this,Is).set(l,0),E(this,Oi,0),this.toSVGPath(),null}getLastElement(){return g(this,on).at(-1)}setLastElement(t){return g(this,on)?(g(this,on).push(t),E(this,an,t.line),E(this,Ln,t.points),E(this,Oi,0),{path:{d:this.toSVGPath()}}):g(this,Sl).setLastElement(t)}removeLastElement(){if(!g(this,on))return g(this,Sl).removeLastElement();g(this,on).pop(),E(this,hn,"");for(let t=0,e=g(this,on).length;t<e;t++){const{line:n,points:a}=g(this,on)[t];E(this,an,n),E(this,Ln,a),E(this,Oi,0),this.toSVGPath()}return{path:{d:g(this,hn)}}}toSVGPath(){const t=ut.svgRound(g(this,an)[4]),e=ut.svgRound(g(this,an)[5]);if(g(this,Ln).length===2)return E(this,hn,`${g(this,hn)} M ${t} ${e} Z`),g(this,hn);if(g(this,Ln).length<=6){const a=g(this,hn).lastIndexOf("M");E(this,hn,`${g(this,hn).slice(0,a)} M ${t} ${e}`),E(this,Oi,6)}if(g(this,Ln).length===4){const a=ut.svgRound(g(this,an)[10]),r=ut.svgRound(g(this,an)[11]);return E(this,hn,`${g(this,hn)} L ${a} ${r}`),E(this,Oi,12),g(this,hn)}const n=[];g(this,Oi)===0&&(n.push(`M ${t} ${e}`),E(this,Oi,6));for(let a=g(this,Oi),r=g(this,an).length;a<r;a+=6){const[l,c,p,m,y,_]=g(this,an).slice(a,a+6).map(ut.svgRound);n.push(`C${l} ${c} ${p} ${m} ${y} ${_}`)}return E(this,hn,g(this,hn)+n.join(" ")),E(this,Oi,g(this,an).length),g(this,hn)}getOutlines(t,e,n,a){const r=g(this,on).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),g(this,Sl).build(g(this,on),t,e,n,g(this,Tl),g(this,kc),a),E(this,Is,null),E(this,an,null),E(this,on,null),E(this,hn,null),g(this,Sl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Is=new WeakMap,an=new WeakMap,on=new WeakMap,Tl=new WeakMap,kc=new WeakMap,Ln=new WeakMap,hn=new WeakMap,Oi=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,El=new WeakMap,Pc=new WeakSet,eg=function(t,e){return ut._normalizePoint(t,e,g(this,Cl),g(this,El),g(this,Tl))};var kn,jh,tp,yi,Ls,ks,Fc,Uc,Oc,mn,oa,o1,r1,l1;const DA=class DA extends ut{constructor(){super(...arguments);w(this,mn);w(this,kn);w(this,jh,0);w(this,tp);w(this,yi);w(this,Ls);w(this,ks);w(this,Fc);w(this,Uc);w(this,Oc)}build(e,n,a,r,l,c,p){E(this,Ls,n),E(this,ks,a),E(this,Fc,r),E(this,Uc,l),E(this,Oc,c),E(this,tp,p??0),E(this,yi,e),M(this,mn,r1).call(this)}setLastElement(e){return g(this,yi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return g(this,yi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of g(this,yi)){if(e.push(`M${ut.svgRound(n[4])} ${ut.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12){e.push(`L${ut.svgRound(n[10])} ${ut.svgRound(n[11])}`);continue}for(let a=6,r=n.length;a<r;a+=6){const[l,c,p,m,y,_]=n.subarray(a,a+6).map(ut.svgRound);e.push(`C${l} ${c} ${p} ${m} ${y} ${_}`)}}return e.join("")}serialize([e,n,a,r],l){const c=[],p=[],[m,y,_,T]=M(this,mn,o1).call(this);let S,C,x,D,N,L,U,P,I;switch(g(this,Uc)){case 0:I=ut._rescale,S=e,C=n+r,x=a,D=-r,N=e+m*a,L=n+(1-y-T)*r,U=e+(m+_)*a,P=n+(1-y)*r;break;case 90:I=ut._rescaleAndSwap,S=e,C=n,x=a,D=r,N=e+y*a,L=n+m*r,U=e+(y+T)*a,P=n+(m+_)*r;break;case 180:I=ut._rescale,S=e+a,C=n,x=-a,D=r,N=e+(1-m-_)*a,L=n+y*r,U=e+(1-m)*a,P=n+(y+T)*r;break;case 270:I=ut._rescaleAndSwap,S=e+a,C=n+r,x=-a,D=-r,N=e+(1-y-T)*a,L=n+(1-m-_)*r,U=e+(1-y)*a,P=n+(1-m)*r;break}for(const{line:q,points:Y}of g(this,yi))c.push(I(q,S,C,x,D,l?new Array(q.length):null)),p.push(I(Y,S,C,x,D,l?new Array(Y.length):null));return{lines:c,points:p,rect:[N,L,U,P]}}static deserialize(e,n,a,r,l,{paths:{lines:c,points:p},rotation:m,thickness:y}){const _=[];let T,S,C,x,D;switch(m){case 0:D=ut._rescale,T=-e/a,S=n/r+1,C=1/a,x=-1/r;break;case 90:D=ut._rescaleAndSwap,T=-n/r,S=-e/a,C=1/r,x=1/a;break;case 180:D=ut._rescale,T=e/a+1,S=-n/r,C=-1/a,x=1/r;break;case 270:D=ut._rescaleAndSwap,T=n/r+1,S=e/a+1,C=-1/r,x=-1/a;break}if(!c){c=[];for(const L of p){const U=L.length;if(U===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1]]));continue}if(U===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1],NaN,NaN,NaN,NaN,L[2],L[3]]));continue}const P=new Float32Array(3*(U-2));c.push(P);let[I,q,Y,tt]=L.subarray(0,4);P.set([NaN,NaN,NaN,NaN,I,q],0);for(let j=4;j<U;j+=2){const at=L[j],it=L[j+1];P.set(ut.createBezierPoints(I,q,Y,tt,at,it),(j-2)*3),[I,q,Y,tt]=[Y,tt,at,it]}}}for(let L=0,U=c.length;L<U;L++)_.push({line:D(c[L].map(P=>P??NaN),T,S,C,x),points:D(p[L].map(P=>P??NaN),T,S,C,x)});const N=new DA;return N.build(_,a,r,1,m,y,l),N}get box(){return g(this,kn)}updateProperty(e,n){return e==="stroke-width"?M(this,mn,l1).call(this,n):null}updateParentDimensions([e,n],a){const[r,l]=M(this,mn,oa).call(this);E(this,Ls,e),E(this,ks,n),E(this,Fc,a);const[c,p]=M(this,mn,oa).call(this),m=c-r,y=p-l,_=g(this,kn);return _[0]-=m,_[1]-=y,_[2]+=2*m,_[3]+=2*y,_}updateRotation(e){return E(this,jh,e),{path:{transform:this.rotationTransform}}}get viewBox(){return g(this,kn).map(ut.svgRound).join(" ")}get defaultProperties(){const[e,n]=g(this,kn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=g(this,kn);let a=0,r=0,l=0,c=0,p=0,m=0;switch(g(this,jh)){case 90:r=n/e,l=-e/n,p=e;break;case 180:a=-1,c=-1,p=e,m=n;break;case 270:r=-n/e,l=e/n,m=n;break;default:return""}return`matrix(${a} ${r} ${l} ${c} ${ut.svgRound(p)} ${ut.svgRound(m)})`}getPathResizingSVGProperties([e,n,a,r]){const[l,c]=M(this,mn,oa).call(this),[p,m,y,_]=g(this,kn);if(Math.abs(y-l)<=ut.PRECISION||Math.abs(_-c)<=ut.PRECISION){const D=e+a/2-(p+y/2),N=n+r/2-(m+_/2);return{path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`,transform:`${this.rotationTransform} translate(${D} ${N})`}}}const T=(a-2*l)/(y-2*l),S=(r-2*c)/(_-2*c),C=y/a,x=_/r;return{path:{"transform-origin":`${ut.svgRound(p)} ${ut.svgRound(m)}`,transform:`${this.rotationTransform} scale(${C} ${x}) translate(${ut.svgRound(l)} ${ut.svgRound(c)}) scale(${T} ${S}) translate(${ut.svgRound(-l)} ${ut.svgRound(-c)})`}}}getPathResizedSVGProperties([e,n,a,r]){const[l,c]=M(this,mn,oa).call(this),p=g(this,kn),[m,y,_,T]=p;if(p[0]=e,p[1]=n,p[2]=a,p[3]=r,Math.abs(_-l)<=ut.PRECISION||Math.abs(T-c)<=ut.PRECISION){const N=e+a/2-(m+_/2),L=n+r/2-(y+T/2);for(const{line:U,points:P}of g(this,yi))ut._translate(U,N,L,U),ut._translate(P,N,L,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(a-2*l)/(_-2*l),C=(r-2*c)/(T-2*c),x=-S*(m+l)+e+l,D=-C*(y+c)+n+c;if(S!==1||C!==1||x!==0||D!==0)for(const{line:N,points:L}of g(this,yi))ut._rescale(N,x,D,S,C,N),ut._rescale(L,x,D,S,C,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],a){const[r,l]=a,c=g(this,kn),p=e-c[0],m=n-c[1];if(g(this,Ls)===r&&g(this,ks)===l)for(const{line:y,points:_}of g(this,yi))ut._translate(y,p,m,y),ut._translate(_,p,m,_);else{const y=g(this,Ls)/r,_=g(this,ks)/l;E(this,Ls,r),E(this,ks,l);for(const{line:T,points:S}of g(this,yi))ut._rescale(T,p,m,y,_,T),ut._rescale(S,p,m,y,_,S);c[2]*=y,c[3]*=_}return c[0]=e,c[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(n)}`}}}get defaultSVGProperties(){const e=g(this,kn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e[0])} ${ut.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};kn=new WeakMap,jh=new WeakMap,tp=new WeakMap,yi=new WeakMap,Ls=new WeakMap,ks=new WeakMap,Fc=new WeakMap,Uc=new WeakMap,Oc=new WeakMap,mn=new WeakSet,oa=function(e=g(this,Oc)){const n=g(this,tp)+e/2*g(this,Fc);return g(this,Uc)%180===0?[n/g(this,Ls),n/g(this,ks)]:[n/g(this,ks),n/g(this,Ls)]},o1=function(){const[e,n,a,r]=g(this,kn),[l,c]=M(this,mn,oa).call(this,0);return[e+l,n+c,a-2*l,r-2*c]},r1=function(){const e=E(this,kn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of g(this,yi)){if(r.length<=12){for(let p=4,m=r.length;p<m;p+=6){const[y,_]=r.subarray(p,p+2);e[0]=Math.min(e[0],y),e[1]=Math.min(e[1],_),e[2]=Math.max(e[2],y),e[3]=Math.max(e[3],_)}continue}let l=r[4],c=r[5];for(let p=6,m=r.length;p<m;p+=6){const[y,_,T,S,C,x]=r.subarray(p,p+6);_t.bezierBoundingBox(l,c,y,_,T,S,C,x,e),l=C,c=x}}const[n,a]=M(this,mn,oa).call(this);e[0]=Math.min(1,Math.max(0,e[0]-n)),e[1]=Math.min(1,Math.max(0,e[1]-a)),e[2]=Math.min(1,Math.max(0,e[2]+n)),e[3]=Math.min(1,Math.max(0,e[3]+a)),e[2]-=e[0],e[3]-=e[1]},l1=function(e){const[n,a]=M(this,mn,oa).call(this);E(this,Oc,e);const[r,l]=M(this,mn,oa).call(this),[c,p]=[r-n,l-a],m=g(this,kn);return m[0]-=c,m[1]-=p,m[2]+=2*c,m[3]+=2*p,m};let Sg=DA;var Vc;const NA=class NA extends $3{constructor(e){super();w(this,Vc);E(this,Vc,e),super.updateProperties({fill:"none",stroke:Me._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=g(this,Vc).realScale),super.updateSVGProperty(e,n)}clone(){const e=new NA(g(this,Vc));return e.updateAll(this),e}};Vc=new WeakMap;let Q_=NA;var Bg,u1;const ku=class ku extends K_{constructor(e){super({...e,name:"inkEditor"});w(this,Bg);this._willKeepAspectRatio=!0}static initialize(e,n){Me.initialize(e,n),this._defaultDrawingOptions=new Q_(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return qt(this,"typesMap",new Map([[Xt.INK_THICKNESS,"stroke-width"],[Xt.INK_COLOR,"stroke"],[Xt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,a,r,l){return new Y3(e,n,a,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,a,r,l,c){return Sg.deserialize(e,n,a,r,l,c)}static async deserialize(e,n,a){let r=null;if(e instanceof bA){const{data:{inkLists:c,rect:p,rotation:m,id:y,color:_,opacity:T,borderStyle:{rawWidth:S},popupRef:C},parent:{page:{pageNumber:x}}}=e;r=e={annotationType:kt.INK,color:Array.from(_),thickness:S,opacity:T,paths:{points:c},boxes:null,pageIndex:x-1,rect:p.slice(0),rotation:m,id:y,deleted:!1,popupRef:C}}const l=await super.deserialize(e,n,a);return l.annotationElementId=e.id||null,l._initialData=r,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:a}=this;n.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:a}){this._drawingOptions=ku.getDefaultDrawingOptions({stroke:_t.makeHexColor(...e),"stroke-width":n,"stroke-opacity":a})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:a,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":c,"stroke-width":p}}=this,m={annotationType:kt.INK,color:Me._colorManager.convert(l),opacity:c,thickness:p,paths:{lines:n,points:a},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?m:this.annotationElementId&&!M(this,Bg,u1).call(this,m)?null:(m.id=this.annotationElementId,m)}renderAnnotationElement(e){const{points:n,rect:a}=this.serializeDraw(!1);return e.updateEdited({rect:a,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Bg=new WeakSet,u1=function(e){const{color:n,thickness:a,opacity:r,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,p)=>c!==n[p])||e.thickness!==a||e.opacity!==r||e.pageIndex!==l},Ct(ku,"_type","ink"),Ct(ku,"_editorType",kt.INK),Ct(ku,"_defaultDrawingOptions",null);let j_=ku;var we,pn,Go,Da,zo,Bc,Ps,Fs,vi,Hc,te,Tf,Sf,ng,eA,ig,nA,sg,c1;const bf=class bf extends Me{constructor(e){super({...e,name:"stampEditor"});w(this,te);w(this,we,null);w(this,pn,null);w(this,Go,null);w(this,Da,null);w(this,zo,null);w(this,Bc,"");w(this,Ps,null);w(this,Fs,null);w(this,vi,!1);w(this,Hc,!1);E(this,Da,e.bitmapUrl),E(this,zo,e.bitmapFile)}static initialize(e,n){Me.initialize(e,n)}static get supportedTypes(){return qt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return qt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(kt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:c}=e||this.copyCanvas(null,null,!0).imageData,p=await a.guess({name:"altText",request:{data:r,width:l,height:c,channels:r.length/(l*c)}});if(!p)throw new Error("No response from the AI service.");if(p.error)throw new Error("Error from the AI service.");if(p.cancel)return null;if(!p.output)throw new Error("No valid response from the AI service.");const m=p.output;return await this.setGuessedAltText(m),n&&!this.hasAltTextData()&&(this.altTextData={alt:m,decorative:!1}),m}remove(){var e;g(this,pn)&&(E(this,we,null),this._uiManager.imageManager.deleteId(g(this,pn)),(e=g(this,Ps))==null||e.remove(),E(this,Ps,null),g(this,Fs)&&(clearTimeout(g(this,Fs)),E(this,Fs,null))),super.remove()}rebuild(){if(!this.parent){g(this,pn)&&M(this,te,ng).call(this);return}super.rebuild(),this.div!==null&&(g(this,pn)&&g(this,Ps)===null&&M(this,te,ng).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(g(this,Go)||g(this,we)||g(this,Da)||g(this,zo)||g(this,pn))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),g(this,we)?M(this,te,eA).call(this):M(this,te,ng).call(this),this.width&&!this.annotationElementId){const[a,r]=this.parentDimensions;this.setAt(e*a,n*r,this.width*a,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;g(this,Fs)!==null&&clearTimeout(g(this,Fs)),E(this,Fs,setTimeout(()=>{E(this,Fs,null),M(this,te,nA).call(this)},200))}copyCanvas(e,n,a=!1){var S;e||(e=224);const{width:r,height:l}=g(this,we),c=new Q0;let p=g(this,we),m=r,y=l,_=null;if(n){if(r>n||l>n){const tt=Math.min(n/r,n/l);m=Math.floor(r*tt),y=Math.floor(l*tt)}_=document.createElement("canvas");const C=_.width=Math.ceil(m*c.sx),x=_.height=Math.ceil(y*c.sy);g(this,vi)||(p=M(this,te,ig).call(this,C,x));const D=_.getContext("2d");D.filter=this._uiManager.hcmFilter;let N="white",L="#cfcfd8";this._uiManager.hcmFilter!=="none"?L="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(N="#8f8f9d",L="#42414d");const U=15,P=U*c.sx,I=U*c.sy,q=new OffscreenCanvas(P*2,I*2),Y=q.getContext("2d");Y.fillStyle=N,Y.fillRect(0,0,P*2,I*2),Y.fillStyle=L,Y.fillRect(0,0,P,I),Y.fillRect(P,I,P,I),D.fillStyle=D.createPattern(q,"repeat"),D.fillRect(0,0,C,x),D.drawImage(p,0,0,p.width,p.height,0,0,C,x)}let T=null;if(a){let C,x;if(c.symmetric&&p.width<e&&p.height<e)C=p.width,x=p.height;else if(p=g(this,we),r>e||l>e){const L=Math.min(e/r,e/l);C=Math.floor(r*L),x=Math.floor(l*L),g(this,vi)||(p=M(this,te,ig).call(this,C,x))}const N=new OffscreenCanvas(C,x).getContext("2d",{willReadFrequently:!0});N.drawImage(p,0,0,p.width,p.height,0,0,C,x),T={width:C,height:x,data:N.getImageData(0,0,C,x).data}}return{canvas:_,width:m,height:y,imageData:T}}getImageForAltText(){return g(this,Ps)}static async deserialize(e,n,a){var x;let r=null;if(e instanceof NM){const{data:{rect:D,rotation:N,id:L,structParent:U,popupRef:P},container:I,parent:{page:{pageNumber:q}}}=e,Y=I.querySelector("canvas"),tt=a.imageManager.getFromCanvas(I.id,Y);Y.remove();const j=((x=await n._structTree.getAriaAttributes(`${yA}${L}`))==null?void 0:x.get("aria-label"))||"";r=e={annotationType:kt.STAMP,bitmapId:tt.id,bitmap:tt.bitmap,pageIndex:q-1,rect:D.slice(0),rotation:N,id:L,deleted:!1,accessibilityData:{decorative:!1,altText:j},isSvg:!1,structParent:U,popupRef:P}}const l=await super.deserialize(e,n,a),{rect:c,bitmap:p,bitmapUrl:m,bitmapId:y,isSvg:_,accessibilityData:T}=e;y&&a.imageManager.isValidId(y)?(E(l,pn,y),p&&E(l,we,p)):E(l,Da,m),E(l,vi,_);const[S,C]=l.pageDimensions;return l.width=(c[2]-c[0])/S,l.height=(c[3]-c[1])/C,l.annotationElementId=e.id||null,T&&(l.altTextData=T),l._initialData=r,E(l,Hc,!!r),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a={annotationType:kt.STAMP,bitmapId:g(this,pn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:g(this,vi),structTreeParentId:this._structTreeParentId};if(e)return a.bitmapUrl=M(this,te,sg).call(this,!0),a.accessibilityData=this.serializeAltText(!0),a;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(a.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const p=M(this,te,c1).call(this,a);if(p.isSame)return null;p.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1}if(a.id=this.annotationElementId,n===null)return a;n.stamps||(n.stamps=new Map);const c=g(this,vi)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(g(this,pn)))n.stamps.set(g(this,pn),{area:c,serialized:a}),a.bitmap=M(this,te,sg).call(this,!1);else if(g(this,vi)){const p=n.stamps.get(g(this,pn));c>p.area&&(p.area=c,p.serialized.bitmap.close(),p.serialized.bitmap=M(this,te,sg).call(this,!1))}return a}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};we=new WeakMap,pn=new WeakMap,Go=new WeakMap,Da=new WeakMap,zo=new WeakMap,Bc=new WeakMap,Ps=new WeakMap,Fs=new WeakMap,vi=new WeakMap,Hc=new WeakMap,te=new WeakSet,Tf=function(e,n=!1){if(!e){this.remove();return}E(this,we,e.bitmap),n||(E(this,pn,e.id),E(this,vi,e.isSvg)),e.file&&E(this,Bc,e.file.name),M(this,te,eA).call(this)},Sf=function(){if(E(this,Go,null),this._uiManager.enableWaiting(!1),!!g(this,Ps)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,we)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,we)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},ng=function(){if(g(this,pn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(g(this,pn)).then(a=>M(this,te,Tf).call(this,a,!0)).finally(()=>M(this,te,Sf).call(this));return}if(g(this,Da)){const a=g(this,Da);E(this,Da,null),this._uiManager.enableWaiting(!0),E(this,Go,this._uiManager.imageManager.getFromUrl(a).then(r=>M(this,te,Tf).call(this,r)).finally(()=>M(this,te,Sf).call(this)));return}if(g(this,zo)){const a=g(this,zo);E(this,zo,null),this._uiManager.enableWaiting(!0),E(this,Go,this._uiManager.imageManager.getFromFile(a).then(r=>M(this,te,Tf).call(this,r)).finally(()=>M(this,te,Sf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=bf.supportedTypesStr;const n=this._uiManager._signal;E(this,Go,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),M(this,te,Tf).call(this,r)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>M(this,te,Sf).call(this))),e.click()},eA=function(){var _;const{div:e}=this;let{width:n,height:a}=g(this,we);const[r,l]=this.pageDimensions,c=.75;if(this.width)n=this.width*r,a=this.height*l;else if(n>c*r||a>c*l){const T=Math.min(c*r/n,c*l/a);n*=T,a*=T}const[p,m]=this.parentDimensions;this.setDims(n*p/r,a*m/l),this._uiManager.enableWaiting(!1);const y=E(this,Ps,document.createElement("canvas"));y.setAttribute("role","img"),this.addContainer(y),this.width=n/r,this.height=a/l,(_=this._initialOptions)!=null&&_.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),M(this,te,nA).call(this),g(this,Hc)||(this.parent.addUndoableEditor(this),E(this,Hc,!0)),this._reportTelemetry({action:"inserted_image"}),g(this,Bc)&&y.setAttribute("aria-label",g(this,Bc))},ig=function(e,n){const{width:a,height:r}=g(this,we);let l=a,c=r,p=g(this,we);for(;l>2*e||c>2*n;){const m=l,y=c;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const _=new OffscreenCanvas(l,c);_.getContext("2d").drawImage(p,0,0,m,y,0,0,l,c),p=_.transferToImageBitmap()}return p},nA=function(){const[e,n]=this.parentDimensions,{width:a,height:r}=this,l=new Q0,c=Math.ceil(a*e*l.sx),p=Math.ceil(r*n*l.sy),m=g(this,Ps);if(!m||m.width===c&&m.height===p)return;m.width=c,m.height=p;const y=g(this,vi)?g(this,we):M(this,te,ig).call(this,c,p),_=m.getContext("2d");_.filter=this._uiManager.hcmFilter,_.drawImage(y,0,0,y.width,y.height,0,0,c,p)},sg=function(e){if(e){if(g(this,vi)){const r=this._uiManager.imageManager.getSvgUrl(g(this,pn));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=g(this,we),n.getContext("2d").drawImage(g(this,we),0,0),n.toDataURL()}if(g(this,vi)){const[n,a]=this.pageDimensions,r=Math.round(this.width*n*Zo.PDF_TO_CSS_UNITS),l=Math.round(this.height*a*Zo.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,l);return c.getContext("2d").drawImage(g(this,we),0,0,g(this,we).width,g(this,we).height,0,0,r,l),c.transferToImageBitmap()}return structuredClone(g(this,we))},c1=function(e){var c;const{pageIndex:n,accessibilityData:{altText:a}}=this._initialData,r=e.pageIndex===n,l=(((c=e.accessibilityData)==null?void 0:c.alt)||"")===a;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}},Ct(bf,"_type","stamp"),Ct(bf,"_editorType",kt.STAMP);let tA=bf;var bl,Gc,Us,qo,Na,Vi,$o,zc,xl,rs,Ia,bn,La,gt,Yo,Ee,d1,As,sA,aA,ag;const Ji=class Ji{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:r,annotationLayer:l,drawLayer:c,textLayer:p,viewport:m,l10n:y}){w(this,Ee);w(this,bl);w(this,Gc,!1);w(this,Us,null);w(this,qo,null);w(this,Na,null);w(this,Vi,new Map);w(this,$o,!1);w(this,zc,!1);w(this,xl,!1);w(this,rs,null);w(this,Ia,null);w(this,bn,null);w(this,La,null);w(this,gt);const _=[...g(Ji,Yo).values()];if(!Ji._initialized){Ji._initialized=!0;for(const T of _)T.initialize(y,t)}t.registerEditorTypes(_),E(this,gt,t),this.pageIndex=e,this.div=n,E(this,bl,r),E(this,Us,l),this.viewport=m,E(this,bn,p),this.drawLayer=c,this._structTree=a,g(this,gt).addLayer(this)}get isEmpty(){return g(this,Vi).size===0}get isInvisible(){return this.isEmpty&&g(this,gt).getMode()===kt.NONE}updateToolbar(t){g(this,gt).updateToolbar(t)}updateMode(t=g(this,gt).getMode()){switch(M(this,Ee,ag).call(this),t){case kt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case kt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case kt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of g(Ji,Yo).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=g(this,bn))==null?void 0:e.div)}setEditingState(t){g(this,gt).setEditingState(t)}addCommands(t){g(this,gt).addCommands(t)}cleanUndoStack(t){g(this,gt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=g(this,Us))==null||e.div.classList.toggle("disabled",!t)}async enable(){E(this,xl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of g(this,Vi).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(g(this,gt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!g(this,Us)){E(this,xl,!1);return}const e=g(this,Us).getEditableAnnotations();for(const n of e){if(n.hide(),g(this,gt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=await this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}E(this,xl,!1)}disable(){var a;E(this,zc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of g(this,Vi).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(a=this.getEditableAnnotation(r.annotationElementId))==null||a.show(),r.remove()}if(g(this,Us)){const r=g(this,Us).getEditableAnnotations();for(const l of r){const{id:c}=l.data;if(g(this,gt).isDeletedAnnotationElement(c))continue;let p=e.get(c);if(p){p.resetAnnotationElement(l),p.show(!1),l.show();continue}p=t.get(c),p&&(g(this,gt).addChangedExistingAnnotation(p),p.renderAnnotationElement(l)&&p.show(!1)),l.show()}}M(this,Ee,ag).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of g(Ji,Yo).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,zc,!1)}getEditableAnnotation(t){var e;return((e=g(this,Us))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){g(this,gt).getActive()!==t&&g(this,gt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=g(this,bn))!=null&&t.div&&!g(this,La)){E(this,La,new AbortController);const e=g(this,gt).combinedSignal(g(this,La));g(this,bn).div.addEventListener("pointerdown",M(this,Ee,d1).bind(this),{signal:e}),g(this,bn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=g(this,bn))!=null&&t.div&&g(this,La)&&(g(this,La).abort(),E(this,La,null),g(this,bn).div.classList.remove("highlighting"))}enableClick(){if(g(this,qo))return;E(this,qo,new AbortController);const t=g(this,gt).combinedSignal(g(this,qo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=g(this,qo))==null||t.abort(),E(this,qo,null)}attach(t){g(this,Vi).set(t.id,t);const{annotationElementId:e}=t;e&&g(this,gt).isDeletedAnnotationElement(e)&&g(this,gt).removeDeletedAnnotationElement(t)}detach(t){var e;g(this,Vi).delete(t.id),(e=g(this,bl))==null||e.removePointerInTextLayer(t.contentDiv),!g(this,zc)&&t.annotationElementId&&g(this,gt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),g(this,gt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(g(this,gt).addDeletedAnnotationElement(t.annotationElementId),Me.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),g(this,gt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!g(this,xl)),g(this,gt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!g(this,Na)&&(t._focusEventsAllowed=!1,E(this,Na,setTimeout(()=>{E(this,Na,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:g(this,gt)._signal}),e.focus())},0))),t._structTreeParentId=(n=g(this,bl))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return g(this,gt).getId()}combinedSignal(t){return g(this,gt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=g(this,Ee,As))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){g(this,gt).updateToolbar(t),g(this,gt).updateMode(t);const{offsetX:n,offsetY:a}=M(this,Ee,aA).call(this),r=this.getNextId(),l=M(this,Ee,sA).call(this,{parent:this,id:r,x:n,y:a,uiManager:g(this,gt),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=g(Ji,Yo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,g(this,gt)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),r=M(this,Ee,sA).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:g(this,gt),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(M(this,Ee,aA).call(this),!0)}setSelected(t){g(this,gt).setSelected(t)}toggleSelected(t){g(this,gt).toggleSelected(t)}unselect(t){g(this,gt).unselect(t)}pointerup(t){var n;const{isMac:e}=Fn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&g(this,$o)&&(E(this,$o,!1),!((n=g(this,Ee,As))!=null&&n.isDrawer&&g(this,Ee,As).supportMultipleDrawings))){if(!g(this,Gc)){E(this,Gc,!0);return}if(g(this,gt).getMode()===kt.STAMP){g(this,gt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var a;if(g(this,gt).getMode()===kt.HIGHLIGHT&&this.enableTextSelection(),g(this,$o)){E(this,$o,!1);return}const{isMac:e}=Fn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(E(this,$o,!0),(a=g(this,Ee,As))!=null&&a.isDrawer){this.startDrawingSession(t);return}const n=g(this,gt).getActive();E(this,Gc,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus(),g(this,rs)){g(this,Ee,As).startDrawing(this,g(this,gt),!1,t);return}g(this,gt).setCurrentDrawingSession(this),E(this,rs,new AbortController);const e=g(this,gt).combinedSignal(g(this,rs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(E(this,Ia,null),this.commitOrRemove())},{signal:e}),g(this,Ee,As).startDrawing(this,g(this,gt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&E(this,Ia,e);return}g(this,Ia)&&setTimeout(()=>{var e;(e=g(this,Ia))==null||e.focus(),E(this,Ia,null)},0)}endDrawingSession(t=!1){return g(this,rs)?(g(this,gt).setCurrentDrawingSession(null),g(this,rs).abort(),E(this,rs,null),E(this,Ia,null),g(this,Ee,As).endDrawing(t)):null}findNewParent(t,e,n){const a=g(this,gt).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return g(this,rs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){g(this,rs)&&g(this,Ee,As).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=g(this,gt).getActive())==null?void 0:t.parent)===this&&(g(this,gt).commitOrRemove(),g(this,gt).setActiveEditor(null)),g(this,Na)&&(clearTimeout(g(this,Na)),E(this,Na,null));for(const n of g(this,Vi).values())(e=g(this,bl))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,g(this,Vi).clear(),g(this,gt).removeLayer(this)}render({viewport:t}){this.viewport=t,Il(this.div,t);for(const e of g(this,gt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){g(this,gt).commitOrRemove(),M(this,Ee,ag).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Il(this.div,{rotation:n}),e!==n)for(const a of g(this,Vi).values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return g(this,gt).viewParameters.realScale}};bl=new WeakMap,Gc=new WeakMap,Us=new WeakMap,qo=new WeakMap,Na=new WeakMap,Vi=new WeakMap,$o=new WeakMap,zc=new WeakMap,xl=new WeakMap,rs=new WeakMap,Ia=new WeakMap,bn=new WeakMap,La=new WeakMap,gt=new WeakMap,Yo=new WeakMap,Ee=new WeakSet,d1=function(t){g(this,gt).unselectAll();const{target:e}=t;if(e===g(this,bn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&g(this,bn).div.contains(e)){const{isMac:n}=Fn.platform;if(t.button!==0||t.ctrlKey&&n)return;g(this,gt).showAllEditors("highlight",!0,!0),g(this,bn).div.classList.add("free"),this.toggleDrawing(),Tg.startHighlighting(this,g(this,gt).direction==="ltr",{target:g(this,bn).div,x:t.x,y:t.y}),g(this,bn).div.addEventListener("pointerup",()=>{g(this,bn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:g(this,gt)._signal}),t.preventDefault()}},As=function(){return g(Ji,Yo).get(g(this,gt).getMode())},sA=function(t){const e=g(this,Ee,As);return e?new e.prototype.constructor(t):null},aA=function(){const{x:t,y:e,width:n,height:a}=this.div.getBoundingClientRect(),r=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),p=Math.min(window.innerHeight,e+a),m=(r+c)/2-t,y=(l+p)/2-e,[_,T]=this.viewport.rotation%180===0?[m,y]:[y,m];return{offsetX:_,offsetY:T}},ag=function(){for(const t of g(this,Vi).values())t.isEmpty()&&t.remove()},Ct(Ji,"_initialized",!1),w(Ji,Yo,new Map([O_,j_,tA,Tg].map(t=>[t._editorType,t])));let iA=Ji;var ls,ep,Pn,wl,Hg,f1,Gs,rA,h1,lA;const Tn=class Tn{constructor({pageIndex:t}){w(this,Gs);w(this,ls,null);w(this,ep,0);w(this,Pn,new Map);w(this,wl,new Map);this.pageIndex=t}setParent(t){if(!g(this,ls)){E(this,ls,t);return}if(g(this,ls)!==t){if(g(this,Pn).size>0)for(const e of g(this,Pn).values())e.remove(),t.append(e);E(this,ls,t)}}static get _svgFactory(){return qt(this,"_svgFactory",new EA)}draw(t,e=!1,n=!1){const a=Dn(this,ep)._++,r=M(this,Gs,rA).call(this),l=Tn._svgFactory.createElement("defs");r.append(l);const c=Tn._svgFactory.createElement("path");l.append(c);const p=`path_p${this.pageIndex}_${a}`;c.setAttribute("id",p),c.setAttribute("vector-effect","non-scaling-stroke"),e&&g(this,wl).set(a,c);const m=n?M(this,Gs,h1).call(this,l,p):null,y=Tn._svgFactory.createElement("use");return r.append(y),y.setAttribute("href",`#${p}`),this.updateProperties(r,t),g(this,Pn).set(a,r),{id:a,clipPathId:`url(#${m})`}}drawOutline(t,e){const n=Dn(this,ep)._++,a=M(this,Gs,rA).call(this),r=Tn._svgFactory.createElement("defs");a.append(r);const l=Tn._svgFactory.createElement("path");r.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let p;if(e){const _=Tn._svgFactory.createElement("mask");r.append(_),p=`mask_p${this.pageIndex}_${n}`,_.setAttribute("id",p),_.setAttribute("maskUnits","objectBoundingBox");const T=Tn._svgFactory.createElement("rect");_.append(T),T.setAttribute("width","1"),T.setAttribute("height","1"),T.setAttribute("fill","white");const S=Tn._svgFactory.createElement("use");_.append(S),S.setAttribute("href",`#${c}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const m=Tn._svgFactory.createElement("use");a.append(m),m.setAttribute("href",`#${c}`),p&&m.setAttribute("mask",`url(#${p})`);const y=m.cloneNode();return a.append(y),m.classList.add("mainOutline"),y.classList.add("secondaryOutline"),this.updateProperties(a,t),g(this,Pn).set(n,a),n}finalizeDraw(t,e){g(this,wl).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var p;if(!e)return;const{root:n,bbox:a,rootClass:r,path:l}=e,c=typeof t=="number"?g(this,Pn).get(t):t;if(c){if(n&&M(this,Gs,lA).call(this,c,n),a&&M(p=Tn,Hg,f1).call(p,c,a),r){const{classList:m}=c;for(const[y,_]of Object.entries(r))m.toggle(y,_)}if(l){const y=c.firstChild.firstChild;M(this,Gs,lA).call(this,y,l)}}}updateParent(t,e){if(e===this)return;const n=g(this,Pn).get(t);n&&(g(e,ls).append(n),g(this,Pn).delete(t),g(e,Pn).set(t,n))}remove(t){g(this,wl).delete(t),g(this,ls)!==null&&(g(this,Pn).get(t).remove(),g(this,Pn).delete(t))}destroy(){E(this,ls,null);for(const t of g(this,Pn).values())t.remove();g(this,Pn).clear(),g(this,wl).clear()}};ls=new WeakMap,ep=new WeakMap,Pn=new WeakMap,wl=new WeakMap,Hg=new WeakSet,f1=function(t,[e,n,a,r]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*r}%`},Gs=new WeakSet,rA=function(){const t=Tn._svgFactory.create(1,1,!0);return g(this,ls).append(t),t.setAttribute("aria-hidden",!0),t},h1=function(t,e){const n=Tn._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Tn._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),a},lA=function(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)},w(Tn,Hg);let oA=Tn;globalThis.pdfjsTestingUtils={HighlightOutliner:B_};Mt.AbortException;Mt.AnnotationEditorLayer;Mt.AnnotationEditorParamsType;Mt.AnnotationEditorType;Mt.AnnotationEditorUIManager;Mt.AnnotationLayer;Mt.AnnotationMode;Mt.ColorPicker;Mt.DOMSVGFactory;Mt.DrawLayer;Mt.FeatureTest;var X3=Mt.GlobalWorkerOptions;Mt.ImageKind;Mt.InvalidPDFException;Mt.MissingPDFException;Mt.OPS;Mt.OutputScale;Mt.PDFDataRangeTransport;Mt.PDFDateString;Mt.PDFWorker;Mt.PasswordResponses;Mt.PermissionFlag;Mt.PixelsPerInch;Mt.RenderingCancelledException;Mt.TextLayer;Mt.TouchManager;Mt.UnexpectedResponseException;Mt.Util;Mt.VerbosityLevel;Mt.XfaLayer;Mt.build;Mt.createValidAbsoluteUrl;Mt.fetchData;var K3=Mt.getDocument;Mt.getFilenameFromUrl;Mt.getPdfFilenameFromUrl;Mt.getXfaPageViewport;Mt.isDataScheme;Mt.isPdfFile;Mt.noContextMenu;Mt.normalizeUnicode;Mt.setLayerDimensions;Mt.shadow;Mt.stopEvent;Mt.version;X3.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.171/pdf.worker.min.js";const p1=i=>new Promise((t,e)=>{const n=new FileReader;n.onload=a=>{var r;t((r=a.target)==null?void 0:r.result)},n.onerror=a=>{var r;e(new Error("Failed to read file: "+((r=a.target)==null?void 0:r.error)))},n.readAsDataURL(i)}),J3=async i=>{const t=await i.arrayBuffer(),e=await K3(t).promise;let n="";for(let a=1;a<=e.numPages;a++){const l=await(await e.getPage(a)).getTextContent();n+=l.items.map(c=>c.str).join(" ")+`

`}return{text:n}},W3="PLACEHOLDER_API_KEY",m1=new XV({apiKey:W3}),g1="gemini-2.5-flash";function Z3(i){return i.map(t=>({role:t.role,parts:[{text:t.text}]}))}const Q3=async i=>{try{const t=`Based on the following conversation, create a short, descriptive title (4 words max). Conversation:

${i.map(n=>`${n.role}: ${n.text}`).join(`
`)}`;return(await m1.models.generateContent({model:g1,contents:[{role:"user",parts:[{text:t}]}]})).text.trim().replace(/"/g,"")}catch(t){return console.error("Error generating title:",t),"New Chat"}},j3=async(i,t,e,n,a)=>{const r=t.length>0?`Remember the following user context:
- ${t.join(`
- `)}

`:"",l=`${sN}

${r}`;try{const c=m1.chats.create({model:g1,history:Z3(i.slice(0,-1)),config:{systemInstruction:l}});let m=i[i.length-1].text;const y=[];if(e){if(e.type.startsWith("image/")){const S=(await p1(e)).split(",")[1];y.push({inlineData:{mimeType:e.type,data:S}})}else if(e.type==="application/pdf"){const{text:T}=await J3(e);m=`Based on the following content from the PDF "${e.name}", answer my question.

PDF CONTENT:
---
${T}
---

MY QUESTION: ${m}`}}y.push({text:m});const _=await c.sendMessageStream({message:y});for await(const T of _)n(T.text)}catch(c){console.error("Error streaming chat response:",c);const p=c instanceof Error?c:new Error(String(c));n(`

**Error:** ${p.message}`),a(p)}},y1=fe.createContext(void 0),tH=(i,t)=>{switch(t.type){case"INITIALIZE_STATE":return{...i,...t.payload};case"SET_THEME":return{...i,themeName:t.payload};case"TOGGLE_SIDEBAR":return{...i,sidebarOpen:!i.sidebarOpen};case"CREATE_FOLDER":{const e={id:og(),name:t.payload.name,chatIds:[]};return{...i,folders:[...i.folders,e]}}case"RENAME_FOLDER":return{...i,folders:i.folders.map(e=>e.id===t.payload.folderId?{...e,name:t.payload.newName}:e)};case"DELETE_FOLDER":{const e=i.folders.find(l=>l.id===t.payload.folderId);if(!e)return i;const n=e.chatIds,a={...i.chats};n.forEach(l=>delete a[l]);const r=n.includes(i.activeChatId||"")?null:i.activeChatId;return{...i,folders:i.folders.filter(l=>l.id!==t.payload.folderId),chats:a,activeChatId:r}}case"CREATE_CHAT":{const e={id:og(),title:"New Chat",messages:[],createdAt:Date.now()};let n=[...i.folders];return t.payload.folderId&&(n=i.folders.map(a=>a.id===t.payload.folderId?{...a,chatIds:[e.id,...a.chatIds]}:a)),{...i,chats:{...i.chats,[e.id]:e},folders:n,activeChatId:e.id}}case"SET_ACTIVE_CHAT":return{...i,activeChatId:t.payload};case"RENAME_CHAT":{const{chatId:e,newTitle:n}=t.payload,a=i.chats[e];return!a||!n?i:{...i,chats:{...i.chats,[e]:{...a,title:n}}}}case"DELETE_CHAT":{const{chatId:e}=t.payload,n={...i.chats};delete n[e];const a=i.folders.map(r=>({...r,chatIds:r.chatIds.filter(l=>l!==e)}));return{...i,chats:n,folders:a,activeChatId:i.activeChatId===e?null:i.activeChatId}}case"MOVE_CHAT_TO_FOLDER":{const{chatId:e,newFolderId:n}=t.payload;let a=i.folders.map(r=>({...r,chatIds:r.chatIds.filter(l=>l!==e)}));return n&&(a=a.map(r=>r.id===n?{...r,chatIds:[e,...r.chatIds]}:r)),{...i,folders:a}}case"ADD_MESSAGE":{const{chatId:e,message:n}=t.payload,a=i.chats[e];if(!a)return i;const r=[...a.messages,n];return{...i,chats:{...i.chats,[e]:{...a,messages:r}}}}case"UPDATE_LAST_MESSAGE":{const{chatId:e,text:n}=t.payload,a=i.chats[e];if(!a||a.messages.length===0)return i;const r=a.messages[a.messages.length-1];if(r.role!=="model")return i;const l={...r,text:r.text+n},c=[...a.messages.slice(0,-1),l];return{...i,chats:{...i.chats,[e]:{...a,messages:c}}}}case"SET_CHAT_TITLE":{const{chatId:e,title:n}=t.payload,a=i.chats[e];return a?{...i,chats:{...i.chats,[e]:{...a,title:n}}}:i}case"UPDATE_KNOWLEDGE_BASE":return{...i,knowledgeBase:t.payload};default:return i}},Ix={themeName:"Hacker Mode",folders:[],chats:{},knowledgeBase:[],activeChatId:null,sidebarOpen:!0},eH=({children:i})=>{const[t,e]=fe.useReducer(tH,Ix),n=fe.useRef(!1);fe.useEffect(()=>{try{const r=localStorage.getItem("devtalk-state");if(r){const l=JSON.parse(r);e({type:"INITIALIZE_STATE",payload:l})}}catch(r){console.error("Failed to parse state from localStorage",r)}},[]),fe.useEffect(()=>{if(!n.current)if(t!==Ix)n.current=!0;else return;const{sidebarOpen:r,...l}=t;try{localStorage.setItem("devtalk-state",JSON.stringify(l))}catch(c){console.error("Failed to save state to localStorage",c)}},[t]),fe.useEffect(()=>{if(t.activeChatId&&t.chats[t.activeChatId]){const r=t.chats[t.activeChatId];r.messages.length===2&&r.title==="New Chat"&&Q3(r.messages).then(l=>{e({type:"SET_CHAT_TITLE",payload:{chatId:r.id,title:l}})})}},[t.activeChatId,t.chats]);const a=()=>D0.find(r=>r.name===t.themeName)||D0[0];return z.jsx(y1.Provider,{value:{state:t,dispatch:e,getTheme:a},children:i})},Ga=()=>{const i=fe.useContext(y1);if(i===void 0)throw new Error("useAppContext must be used within an AppProvider");return i},v1=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),Lx=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),nH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})}),iH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),_1=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})}),sH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 8h6M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),aH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),oH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,viewBox:"0 0 24 24",fill:"currentColor",children:z.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),rH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),lH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,viewBox:"0 0 24 24",fill:"currentColor",children:z.jsx("path",{fillRule:"evenodd",d:"M12 2a5 5 0 00-5 5v1.586l-2.707 2.707A1 1 0 005 13h14a1 1 0 00.707-1.707L17 8.586V7a5 5 0 00-5-5zm-3 7a3 3 0 006 0H9z",clipRule:"evenodd"})}),uH=({className:i})=>z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,viewBox:"0 0 24 24",fill:"currentColor",children:[z.jsx("path",{d:"M12 2a.5.5 0 01.5.5v1a.5.5 0 01-1 0v-1A.5.5 0 0112 2zM5.22 5.22a.5.5 0 01.707 0l.707.707a.5.5 0 01-.707.707l-.707-.707a.5.5 0 010-.707zM2 12a.5.5 0 01.5-.5h1a.5.5 0 010 1h-1A.5.5 0 012 12zm14.78 6.78a.5.5 0 010 .707l-.707.707a.5.5 0 01-.707-.707l.707-.707a.5.5 0 01.707 0zM12 18a.5.5 0 01.5.5v1a.5.5 0 01-1 0v-1a.5.5 0 01.5-.5zM8.5 10.5a1 1 0 11-2 0 1 1 0 012 0zm5 0a1 1 0 11-2 0 1 1 0 012 0z"}),z.jsx("path",{fillRule:"evenodd",d:"M12 4a8 8 0 100 16 8 8 0 000-16zM6 12a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm8.5-1.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",clipRule:"evenodd"})]}),cH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),dH=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"currentColor",viewBox:"0 0 20 20",children:z.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),A1=({className:i})=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),fH=({isOpen:i,onClose:t})=>{const{state:e,dispatch:n,getTheme:a}=Ga(),r=a(),[l,c]=fe.useState(e.knowledgeBase.join(`
`)),p=()=>{const m=l.split(`
`).map(y=>y.trim()).filter(Boolean);n({type:"UPDATE_KNOWLEDGE_BASE",payload:m}),t()};return i?z.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:z.jsxs("div",{className:`${r.classes.secondaryBg} ${r.classes.font} w-full max-w-2xl rounded-lg shadow-2xl p-6 border ${r.classes.border}`,children:[z.jsx("h2",{className:`text-2xl font-bold ${r.classes.accentText} mb-4`,children:"Knowledge Base"}),z.jsx("p",{className:`${r.classes.secondaryText} mb-4`,children:"Add facts for DevTalk to remember across all conversations (one per line). The AI will use this context to personalize its responses."}),z.jsx("textarea",{value:l,onChange:m=>c(m.target.value),rows:10,className:`${r.classes.bg} ${r.classes.text} w-full p-3 rounded-md border ${r.classes.border} focus:outline-none focus:ring-2 ${r.classes.primary.replace("bg-","ring-")}`,placeholder:"e.g., I prefer using TypeScript for my projects."}),z.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[z.jsx("button",{onClick:t,className:`px-4 py-2 rounded-md ${r.classes.secondaryText} ${r.classes.accent} transition-colors`,children:"Cancel"}),z.jsx("button",{onClick:p,className:`px-4 py-2 rounded-md ${r.classes.primary} ${r.classes.primaryText} font-bold transition-colors`,children:"Save Knowledge"})]})]})}):null},hH=()=>{const{state:i,dispatch:t,getTheme:e}=Ga(),n=e(),[a,r]=fe.useState(!1),l=c=>{t({type:"SET_THEME",payload:c}),r(!1)};return z.jsxs("div",{className:"relative",children:[z.jsxs("button",{onClick:()=>r(!a),className:`w-full flex items-center gap-3 p-2 rounded-md ${n.classes.accent} ${n.classes.secondaryText} transition-colors`,children:[z.jsx(aH,{className:"w-5 h-5"}),"Themes"]}),a&&z.jsx("div",{className:`absolute bottom-full mb-2 w-48 ${n.classes.secondaryBg} border ${n.classes.border} rounded-md shadow-lg z-20`,children:D0.map(c=>z.jsx("button",{onClick:()=>l(c.name),className:`w-full text-left px-4 py-2 text-sm ${c.classes.secondaryText} ${c.classes.accent} ${i.themeName===c.name?c.classes.primary.replace("bg-","bg-opacity-50 ")+c.classes.accentText:""}`,children:c.name},c.name))})]})},kx=({chat:i,isActive:t,onSelect:e})=>{const{state:n,dispatch:a,getTheme:r}=Ga(),l=r(),[c,p]=fe.useState(!1),[m,y]=fe.useState(!1),_=fe.useRef(null),T=()=>{const x=prompt("Enter new chat title:",i.title);x&&x!==i.title&&a({type:"RENAME_CHAT",payload:{chatId:i.id,newTitle:x}}),p(!1)},S=()=>{window.confirm(`Are you sure you want to delete "${i.title}"?`)&&a({type:"DELETE_CHAT",payload:{chatId:i.id}}),p(!1)},C=x=>{a({type:"MOVE_CHAT_TO_FOLDER",payload:{chatId:i.id,newFolderId:x}}),y(!1),p(!1)};return fe.useEffect(()=>{const x=D=>{_.current&&!_.current.contains(D.target)&&(p(!1),y(!1))};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),z.jsxs("div",{onClick:()=>e(i.id),className:`group flex items-center justify-between text-sm py-1.5 px-2 rounded-md cursor-pointer relative ${t?`${l.classes.primary.replace("bg-","bg-opacity-30 ")} ${l.classes.accentText}`:`${l.classes.secondaryText} ${l.classes.accent}`}`,children:[z.jsx("span",{className:"truncate flex-1 pr-2",children:i.title}),z.jsx("button",{onClick:x=>{x.stopPropagation(),p(!c)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-1",children:z.jsx(_1,{className:"w-4 h-4"})}),c&&z.jsxs("div",{ref:_,className:`absolute right-0 top-6 w-40 ${l.classes.bg} border ${l.classes.border} rounded-md shadow-lg z-30`,children:[z.jsxs("button",{onClick:T,className:`w-full text-left px-3 py-2 text-sm ${l.classes.accent} ${l.classes.secondaryText} flex items-center gap-2`,children:[z.jsx(nH,{className:"w-4 h-4"})," Rename"]}),z.jsxs("div",{className:"relative",children:[z.jsxs("button",{onMouseEnter:()=>y(!0),className:`w-full text-left px-3 py-2 text-sm ${l.classes.accent} ${l.classes.secondaryText} flex items-center gap-2`,children:[z.jsx(v1,{className:"w-4 h-4"})," Move to"]}),m&&z.jsxs("div",{onMouseLeave:()=>y(!1),className:`absolute -left-full top-0 w-40 ${l.classes.bg} border ${l.classes.border} rounded-md shadow-lg`,children:[z.jsx("button",{onClick:()=>C(null),className:`w-full text-left px-3 py-2 text-sm ${l.classes.accent} ${l.classes.secondaryText}`,children:"Unfiled"}),n.folders.map(x=>z.jsx("button",{onClick:()=>C(x.id),className:`w-full text-left px-3 py-2 text-sm ${l.classes.accent} ${l.classes.secondaryText}`,children:x.name},x.id))]})]}),z.jsxs("button",{onClick:S,className:`w-full text-left px-3 py-2 text-sm ${l.classes.accent} text-red-400 flex items-center gap-2`,children:[z.jsx(iH,{className:"w-4 h-4"})," Delete"]})]})]})},pH=()=>{const{state:i,dispatch:t,getTheme:e}=Ga(),n=e(),[a,r]=fe.useState(null),[l,c]=fe.useState(""),[p,m]=fe.useState(!1),[y,_]=fe.useState(null),T=()=>{const P=prompt("Enter new folder name:");P&&t({type:"CREATE_FOLDER",payload:{name:P}})},S=P=>{r(P.id),c(P.name),_(null)},C=(P,I)=>{P.preventDefault(),l.trim()&&t({type:"RENAME_FOLDER",payload:{folderId:I,newName:l.trim()}}),r(null),c("")},x=P=>{window.confirm("Are you sure you want to delete this folder and all its chats?")&&t({type:"DELETE_FOLDER",payload:{folderId:P}}),_(null)},D=()=>{t({type:"CREATE_CHAT",payload:{folderId:null}}),window.innerWidth<768&&t({type:"TOGGLE_SIDEBAR"})},N=P=>{t({type:"SET_ACTIVE_CHAT",payload:P}),window.innerWidth<768&&t({type:"TOGGLE_SIDEBAR"})},L=new Set(i.folders.flatMap(P=>P.chatIds)),U=Object.values(i.chats).filter(P=>P&&!L.has(P.id)).sort((P,I)=>I.createdAt-P.createdAt);return z.jsxs(z.Fragment,{children:[z.jsxs("aside",{className:`absolute md:relative transform ${i.sidebarOpen?"translate-x-0":"-translate-x-full"} md:translate-x-0 transition-transform duration-300 w-64 ${n.classes.secondaryBg} h-full flex flex-col p-3 border-r ${n.classes.border} z-20`,children:[z.jsx("div",{className:"flex-shrink-0",children:z.jsxs("button",{onClick:D,className:`w-full flex items-center justify-center gap-2 px-4 py-2 mb-4 rounded-md ${n.classes.primary} ${n.classes.primaryText} font-bold transition-colors`,children:[z.jsx(Lx,{className:"w-5 h-5"}),"New Chat"]})}),z.jsxs("div",{className:"flex-grow overflow-y-auto -mr-2 pr-2",children:[z.jsxs("div",{className:"flex justify-between items-center mb-2",children:[z.jsx("h3",{className:`text-xs font-bold uppercase ${n.classes.secondaryText}`,children:"Folders"}),z.jsx("button",{onClick:T,className:`${n.classes.accentText} ${n.classes.accent} rounded p-1`,children:z.jsx(Lx,{className:"w-4 h-4"})})]}),i.folders.map(P=>z.jsxs("div",{className:"mb-2",children:[z.jsxs("div",{className:`group flex items-center justify-between p-2 rounded-md hover:${n.classes.secondaryBg.replace("bg-","bg-opacity-50")}`,children:[z.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[z.jsx(v1,{className:`w-5 h-5 ${n.classes.accentText}`}),a===P.id?z.jsx("form",{onSubmit:I=>C(I,P.id),className:"flex-grow",children:z.jsx("input",{type:"text",value:l,onChange:I=>c(I.target.value),onBlur:I=>C(I,P.id),autoFocus:!0,className:`w-full bg-transparent text-sm ${n.classes.text} outline-none`})}):z.jsx("span",{className:`text-sm ${n.classes.secondaryText} truncate`,children:P.name})]}),z.jsxs("div",{className:"relative",children:[z.jsx("button",{onClick:()=>_(y===P.id?null:P.id),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:z.jsx(_1,{className:`w-5 h-5 ${n.classes.secondaryText}`})}),y===P.id&&z.jsxs("div",{className:`absolute right-0 mt-2 w-36 ${n.classes.bg} border ${n.classes.border} rounded-md shadow-lg z-30`,children:[z.jsx("button",{onClick:()=>S(P),className:`w-full text-left px-3 py-2 text-sm ${n.classes.accent} ${n.classes.secondaryText}`,children:"Rename"}),z.jsx("button",{onClick:()=>x(P.id),className:`w-full text-left px-3 py-2 text-sm ${n.classes.accent} text-red-400`,children:"Delete"})]})]})]}),z.jsx("div",{className:"pl-4 border-l ml-4 ${theme.classes.border}",children:P.chatIds.map(I=>i.chats[I]).filter(Boolean).sort((I,q)=>q.createdAt-I.createdAt).map(I=>z.jsx(kx,{chat:I,isActive:i.activeChatId===I.id,onSelect:N},I.id))})]},P.id)),U.length>0&&z.jsxs(z.Fragment,{children:[z.jsx("h3",{className:`text-xs font-bold uppercase ${n.classes.secondaryText} mt-4 mb-2`,children:"Chats"}),U.map(P=>z.jsx(kx,{chat:P,isActive:i.activeChatId===P.id,onSelect:N},P.id))]})]}),z.jsxs("div",{className:"flex-shrink-0 border-t pt-3 space-y-2 ${theme.classes.border}",children:[z.jsxs("button",{onClick:()=>m(!0),className:`w-full flex items-center gap-3 p-2 rounded-md ${n.classes.accent} ${n.classes.secondaryText} transition-colors`,children:[z.jsx(sH,{className:"w-5 h-5"}),"Knowledge Base"]}),z.jsx(hH,{})]})]}),z.jsx(fH,{isOpen:p,onClose:()=>m(!1)})]})},mH=({file:i})=>{const{getTheme:t}=Ga(),e=t();return z.jsxs("div",{className:`mt-2 p-2 rounded-lg border ${e.classes.border} ${e.classes.secondaryBg} flex items-center gap-3 max-w-xs`,children:[i.type.startsWith("image/")?z.jsx("img",{src:i.dataUrl,alt:i.name,className:"w-12 h-12 object-cover rounded-md"}):z.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:z.jsx(A1,{className:`w-8 h-8 ${e.classes.secondaryText}`})}),z.jsxs("div",{className:"truncate",children:[z.jsx("p",{className:`text-sm font-medium ${e.classes.text} truncate`,children:i.name}),z.jsx("p",{className:`text-xs ${e.classes.secondaryText}`,children:i.type})]})]})},gH=({text:i})=>{const{getTheme:t}=Ga(),e=t(),n=/```(\w+)?\n([\s\S]*?)```/g,a=i.split(n);return z.jsx("div",{className:`prose prose-sm max-w-none ${e.classes.text}`,children:a.map((r,l)=>{if(l%3===2){const c=a[l-1]||"code";return z.jsxs("div",{className:`my-4 rounded-md ${e.classes.bg}`,children:[z.jsxs("div",{className:`flex justify-between items-center px-4 py-1.5 rounded-t-md ${e.classes.secondaryBg} ${e.classes.secondaryText} text-xs`,children:[z.jsx("span",{children:c}),z.jsx("button",{onClick:()=>navigator.clipboard.writeText(r),className:"hover:text-white",children:"Copy"})]}),z.jsx("pre",{className:"p-4 overflow-x-auto",children:z.jsx("code",{className:e.classes.text,children:r})})]},l)}else if(l%3===0)return z.jsx("div",{className:"whitespace-pre-wrap",children:r.split("**").map((c,p)=>p%2===1?z.jsx("strong",{children:c},p):c)},l);return null})})},yH=({message:i})=>{const{getTheme:t}=Ga(),e=t(),n=i.role==="model";return z.jsxs("div",{className:`py-6 flex gap-4 ${n?e.classes.secondaryBg:""}`,children:[z.jsx("div",{className:"w-8 h-8 flex-shrink-0",children:n?z.jsx(uH,{className:`w-8 h-8 ${e.classes.accentText}`}):z.jsx(lH,{className:`w-8 h-8 ${e.classes.secondaryText}`})}),z.jsxs("div",{className:`w-full ${e.classes.text} min-w-0`,children:[i.filePreview&&z.jsx(mH,{file:i.filePreview}),i.text&&z.jsx(gH,{text:i.text}),n&&i.text.endsWith("...")&&z.jsx("span",{className:"animate-pulse",children:"|"})]})]})},vH=({file:i,onRemove:t,theme:e})=>{const[n,a]=fe.useState(null);return fe.useEffect(()=>{if(i.type.startsWith("image/")){const r=new FileReader;r.onloadend=()=>a(r.result),r.readAsDataURL(i)}},[i]),z.jsxs("div",{className:`relative p-2 border ${e.classes.border} rounded-lg flex items-center gap-3`,children:[n?z.jsx("img",{src:n,alt:"Preview",className:"w-12 h-12 rounded-md object-cover"}):z.jsx(A1,{className:`w-12 h-12 ${e.classes.secondaryText}`}),z.jsxs("div",{className:"truncate",children:[z.jsx("p",{className:`${e.classes.text} text-sm font-medium truncate`,children:i.name}),z.jsxs("p",{className:`${e.classes.secondaryText} text-xs`,children:[(i.size/1024).toFixed(2)," KB"]})]}),z.jsx("button",{onClick:t,className:`absolute -top-2 -right-2 ${e.classes.secondaryText} hover:${e.classes.text}`,children:z.jsx(dH,{className:"w-6 h-6"})})]})},_H=()=>{const{state:i,dispatch:t,getTheme:e}=Ga(),n=e(),[a,r]=fe.useState(""),[l,c]=fe.useState(!1),[p,m]=fe.useState(null),[y,_]=fe.useState(!1),T=fe.useRef(null),S=fe.useRef(null),C=i.activeChatId?i.chats[i.activeChatId]:null;fe.useEffect(()=>{var I;(I=T.current)==null||I.scrollTo(0,T.current.scrollHeight)},[C==null?void 0:C.messages,l]);const x=fe.useCallback(async()=>{if(!a.trim()&&!p||l||!i.activeChatId)return;let I;if(p){const at=p.type.startsWith("image/")?await p1(p):"";I={name:p.name,type:p.type,dataUrl:at}}const q={id:og(),role:"user",text:a,timestamp:Date.now(),filePreview:I};t({type:"ADD_MESSAGE",payload:{chatId:i.activeChatId,message:q}});const Y=p;r(""),m(null),c(!0);const tt={id:og(),role:"model",text:"",timestamp:Date.now()};t({type:"ADD_MESSAGE",payload:{chatId:i.activeChatId,message:tt}});const j=[...(C==null?void 0:C.messages)||[],q];await j3(j,i.knowledgeBase,Y,at=>{t({type:"UPDATE_LAST_MESSAGE",payload:{chatId:i.activeChatId,text:at}})},at=>{console.error(at),c(!1)}),c(!1)},[a,p,l,i.activeChatId,i.knowledgeBase,t,C==null?void 0:C.messages]),D=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),x())},N=I=>{var q;(q=I.target.files)!=null&&q[0]&&m(I.target.files[0])},L=I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?_(!0):(I.type==="dragleave"||I.type==="drop")&&_(!1)},U=I=>{var q;L(I),(q=I.dataTransfer.files)!=null&&q[0]&&m(I.dataTransfer.files[0])},P=()=>z.jsxs("div",{className:`flex flex-col items-center justify-center h-full text-center ${n.classes.text}`,children:[z.jsx("h1",{className:`text-5xl font-bold ${n.classes.accentText}`,children:"DevTalk"}),z.jsx("p",{className:"mt-4 text-lg",children:"Your Developer-Focused AI Assistant"}),z.jsx("p",{className:"mt-2 text-sm max-w-md text-gray-400",children:"Powered by Gemini, crafted by Shivanshu. Use the sidebar to manage chats, themes, and your knowledge base."})]});return z.jsxs("div",{className:`flex-1 flex flex-col h-full ${n.classes.bg}`,onDragEnter:L,onDragLeave:L,onDragOver:L,onDrop:U,children:[z.jsxs("header",{className:`flex-shrink-0 flex items-center justify-between p-4 border-b ${n.classes.border} md:hidden`,children:[z.jsx("button",{onClick:()=>t({type:"TOGGLE_SIDEBAR"}),className:`${n.classes.accentText}`,children:z.jsx(rH,{className:"w-6 h-6"})}),z.jsx("h2",{className:`${n.classes.accentText} font-bold`,children:(C==null?void 0:C.title)||"DevTalk"}),z.jsx("div",{className:"w-6"})]}),z.jsx("div",{ref:T,className:"flex-1 overflow-y-auto",children:z.jsx("div",{className:"max-w-4xl mx-auto px-4 w-full",children:C?C.messages.map(I=>z.jsx(yH,{message:I},I.id)):z.jsx(P,{})})}),z.jsxs("div",{className:`flex-shrink-0 p-4 border-t ${n.classes.border}`,children:[z.jsxs("div",{className:"max-w-4xl mx-auto space-y-2",children:[p&&z.jsx(vH,{file:p,onRemove:()=>m(null),theme:n}),z.jsxs("div",{className:`flex items-end gap-2 p-1 rounded-xl ${n.classes.secondaryBg} border ${y?`ring-2 ${n.classes.primary.replace("bg-","ring-")}`:n.classes.border}`,children:[z.jsxs("button",{onClick:()=>{var I;return(I=S.current)==null?void 0:I.click()},className:`p-2 rounded-lg transition-colors ${n.classes.accentText} hover:${n.classes.text}`,children:[z.jsx(cH,{className:"w-6 h-6"}),z.jsx("input",{type:"file",ref:S,onChange:N,className:"hidden",accept:"image/png, image/jpeg, image/webp, application/pdf"})]}),z.jsx("textarea",{value:a,onChange:I=>r(I.target.value),onKeyDown:D,placeholder:C?"Message DevTalk...":"Create a new chat to start",rows:1,className:`w-full p-2 bg-transparent resize-none focus:outline-none ${n.classes.text} disabled:opacity-50`,style:{maxHeight:"200px"},disabled:!C||l}),z.jsx("button",{onClick:x,disabled:!a.trim()&&!p||l||!C,className:`p-2 rounded-lg transition-colors ${!a.trim()&&!p||l||!C?`${n.classes.secondaryText} opacity-50`:`${n.classes.primary} ${n.classes.primaryText}`}`,children:z.jsx(oH,{className:"w-6 h-6"})})]})]}),!1]})]})},AH=()=>{const{getTheme:i}=Ga(),t=i();return z.jsxs("div",{className:`w-screen h-screen flex overflow-hidden ${t.classes.bg} ${t.classes.font}`,children:[z.jsx(pH,{}),z.jsx(_H,{})]})},TH=()=>z.jsx(eH,{children:z.jsx(AH,{})}),T1=document.getElementById("root");if(!T1)throw new Error("Could not find root element to mount to");const SH=iN.createRoot(T1);SH.render(z.jsx(JD.StrictMode,{children:z.jsx(TH,{})}));
